"use strict";(self.webpackChunkcountryTrivia=self.webpackChunkcountryTrivia||[]).push([[179],{2011:(ht,Te,F)=>{F.d(Te,{Dh:()=>le,GT:()=>he,cc:()=>Ne,hO:()=>He,on:()=>U,pX:()=>se,xv:()=>ve});var g=F(4650),X=F(127),k=F(2680);ht=F.hmd(ht);const ue=["ngOnDestroy"],se=(de,Ye,Xe,be={})=>new Proxy(de,{get:(me,we)=>Xe.runOutsideAngular(()=>{var Be;if(de[we])return!(null===(Be=be?.spy)||void 0===Be)&&Be.get&&be.spy.get(we,de[we]),de[we];if(ue.indexOf(we)>-1)return()=>{};const Ue=Ye.toPromise().then(V=>{const pe=V&&V[we];return"function"==typeof pe?pe.bind(V):pe&&pe.then?pe.then(W=>Xe.run(()=>W)):Xe.run(()=>pe)});return new Proxy(()=>{},{get:(V,pe)=>Ue[pe],apply:(V,pe,W)=>Ue.then(Y=>{var re;const te=Y&&Y(...W);return!(null===(re=be?.spy)||void 0===re)&&re.apply&&be.spy.apply(we,W,te),te})})})}),he=(de,Ye)=>{Ye.forEach(Xe=>{Object.getOwnPropertyNames(Xe.prototype||Xe).forEach(be=>{Object.defineProperty(de.prototype,be,Object.getOwnPropertyDescriptor(Xe.prototype||Xe,be))})})};class ce{constructor(Ye){return Ye}}const le=new g.OlP("angularfire2.app.options"),ve=new g.OlP("angularfire2.app.name");function U(de,Ye,Xe){const me="object"==typeof Xe&&Xe||{};me.name=me.name||"string"==typeof Xe&&Xe||"[DEFAULT]";const Be=X.Z.apps.filter(Ue=>Ue&&Ue.name===me.name)[0]||Ye.runOutsideAngular(()=>X.Z.initializeApp(de,me));try{JSON.stringify(de)!==JSON.stringify(Be.options)&&j("error",`${Be.name} Firebase App already initialized with different options${ht.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ce(Be)}const j=(de,...Ye)=>{(0,g.X6Q)()&&typeof console<"u"&&console[de](...Ye)},J={provide:ce,useFactory:U,deps:[le,g.R0b,[new g.FiY,ve]]};let He=(()=>{class de{constructor(Xe){X.Z.registerVersion("angularfire",k.q4.full,"core"),X.Z.registerVersion("angularfire",k.q4.full,"app-compat"),X.Z.registerVersion("angular",g.q4F.full,Xe.toString())}static initializeApp(Xe,be){return{ngModule:de,providers:[{provide:le,useValue:Xe},{provide:ve,useValue:be}]}}}return de.\u0275fac=function(Xe){return new(Xe||de)(g.LFG(g.Lbi))},de.\u0275mod=g.oAB({type:de}),de.\u0275inj=g.cJS({providers:[J]}),de})();function Ne(de,Ye,Xe,be,me){const[,we,Be]=globalThis.\u0275AngularfireInstanceCache.find(Ue=>Ue[0]===de)||[];if(we)return function Se(de,Ye){try{return de.toString()===Ye.toString()}catch{return de===Ye}}(me,Be)||(fe("error",`${Ye} was already initialized on the ${Xe} Firebase App with different settings.${Ke?" You may need to reload as Firebase is not HMR aware.":""}`),fe("warn",{is:me,was:Be})),we;{const Ue=be();return globalThis.\u0275AngularfireInstanceCache.push([de,Ue,me]),Ue}}const Ke=!!ht.hot,fe=(de,...Ye)=>{(0,g.X6Q)()&&typeof console<"u"&&console[de](...Ye)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2680:(ht,Te,F)=>{F.d(Te,{q4:()=>Gc,iC:()=>Pn,HU:()=>Ao,vb:()=>Co,JM:()=>nt});var g=F(4650),X=F(5867),k=F(5861),ue=F(9681),se=F(2090),he=F(4859),ce=F(1877),le=F(8766);const ve="@firebase/installations",U="0.5.16",J=`w:${U}`,He="FIS_v2",Ye=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Xe(D){return D instanceof se.ZR&&D.code.includes("request-failed")}function be({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function me(D){return{token:D.token,requestStatus:2,expiresIn:Y(D.expiresIn),creationTime:Date.now()}}function we(D,b){return Be.apply(this,arguments)}function Be(){return(Be=(0,k.Z)(function*(D,b){const P=(yield b.json()).error;return Ye.create("request-failed",{requestName:D,serverCode:P.code,serverMessage:P.message,serverStatus:P.status})})).apply(this,arguments)}function Ue({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function V(D,{refreshToken:b}){const S=Ue(D);return S.append("Authorization",function re(D){return`${He} ${D}`}(b)),S}function pe(D){return W.apply(this,arguments)}function W(){return(W=(0,k.Z)(function*(D){const b=yield D();return b.status>=500&&b.status<600?D():b})).apply(this,arguments)}function Y(D){return Number(D.replace("s","000"))}function te(D,b){return Re.apply(this,arguments)}function Re(){return(Re=(0,k.Z)(function*({appConfig:D,heartbeatServiceProvider:b},{fid:S}){const P=be(D),G=Ue(D),ee=b.getImmediate({optional:!0});if(ee){const it=yield ee.getHeartbeatsHeader();it&&G.append("x-firebase-client",it)}const Ve={method:"POST",headers:G,body:JSON.stringify({fid:S,authVersion:He,appId:D.appId,sdkVersion:J})},We=yield pe(()=>fetch(P,Ve));if(We.ok){const it=yield We.json();return{fid:it.fid||S,registrationStatus:2,refreshToken:it.refreshToken,authToken:me(it.authToken)}}throw yield we("Create Installation",We)})).apply(this,arguments)}function Oe(D){return new Promise(b=>{setTimeout(b,D)})}const Wt=/^[cdef][\w-]{21}$/;function Ze(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const S=function Xt(D){return function at(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Wt.test(S)?S:""}catch{return""}}function ln(D){return`${D.appName}!${D.appId}`}const Gt=new Map;function qt(D,b){const S=ln(D);nn(S,b),function ts(D,b){const S=function br(){return!ri&&"BroadcastChannel"in self&&(ri=new BroadcastChannel("[Firebase] FID Change"),ri.onmessage=D=>{nn(D.data.key,D.data.fid)}),ri}();S&&S.postMessage({key:D,fid:b}),function kr(){0===Gt.size&&ri&&(ri.close(),ri=null)}()}(S,b)}function nn(D,b){const S=Gt.get(D);if(S)for(const P of S)P(b)}let ri=null;const Kr="firebase-installations-store";let Zr=null;function Ko(){return Zr||(Zr=(0,le.X3)("firebase-installations-database",1,{upgrade:(D,b)=>{0===b&&D.createObjectStore(Kr)}})),Zr}function Qe(D,b){return _r.apply(this,arguments)}function _r(){return(_r=(0,k.Z)(function*(D,b){const S=ln(D),G=(yield Ko()).transaction(Kr,"readwrite"),ee=G.objectStore(Kr),Ee=yield ee.get(S);return yield ee.put(b,S),yield G.done,(!Ee||Ee.fid!==b.fid)&&qt(D,b.fid),b})).apply(this,arguments)}function ns(D){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,k.Z)(function*(D){const b=ln(D),P=(yield Ko()).transaction(Kr,"readwrite");yield P.objectStore(Kr).delete(b),yield P.done})).apply(this,arguments)}function Yr(D,b){return gi.apply(this,arguments)}function gi(){return(gi=(0,k.Z)(function*(D,b){const S=ln(D),G=(yield Ko()).transaction(Kr,"readwrite"),ee=G.objectStore(Kr),Ee=yield ee.get(S),Ve=b(Ee);return void 0===Ve?yield ee.delete(S):yield ee.put(Ve,S),yield G.done,Ve&&(!Ee||Ee.fid!==Ve.fid)&&qt(D,Ve.fid),Ve})).apply(this,arguments)}function An(D){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,k.Z)(function*(D){let b;const S=yield Yr(D.appConfig,P=>{const G=on(P),ee=gt(D,G);return b=ee.registrationPromise,ee.installationEntry});return""===S.fid?{installationEntry:yield b}:{installationEntry:S,registrationPromise:b}})).apply(this,arguments)}function on(D){return Tt(D||{fid:Ze(),registrationStatus:0})}function gt(D,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(Ye.create("app-offline"))};const S={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},P=function ot(D,b){return Jt.apply(this,arguments)}(D,S);return{installationEntry:S,registrationPromise:P}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:sr(D)}:{installationEntry:b}}function Jt(){return(Jt=(0,k.Z)(function*(D,b){try{const S=yield te(D,b);return Qe(D.appConfig,S)}catch(S){throw Xe(S)&&409===S.customData.serverCode?yield ns(D.appConfig):yield Qe(D.appConfig,{fid:b.fid,registrationStatus:0}),S}})).apply(this,arguments)}function sr(D){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,k.Z)(function*(D){let b=yield Pr(D.appConfig);for(;1===b.registrationStatus;)yield Oe(100),b=yield Pr(D.appConfig);if(0===b.registrationStatus){const{installationEntry:S,registrationPromise:P}=yield An(D);return P||S}return b})).apply(this,arguments)}function Pr(D){return Yr(D,b=>{if(!b)throw Ye.create("installation-not-found");return Tt(b)})}function Tt(D){return function rs(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Zt(D,b){return mi.apply(this,arguments)}function mi(){return(mi=(0,k.Z)(function*({appConfig:D,heartbeatServiceProvider:b},S){const P=Yt(D,S),G=V(D,S),ee=b.getImmediate({optional:!0});if(ee){const it=yield ee.getHeartbeatsHeader();it&&G.append("x-firebase-client",it)}const Ve={method:"POST",headers:G,body:JSON.stringify({installation:{sdkVersion:J,appId:D.appId}})},We=yield pe(()=>fetch(P,Ve));if(We.ok)return me(yield We.json());throw yield we("Generate Auth Token",We)})).apply(this,arguments)}function Yt(D,{fid:b}){return`${be(D)}/${b}/authTokens:generate`}function Bn(D){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,k.Z)(function*(D,b=!1){let S;const P=yield Yr(D.appConfig,ee=>{if(!Nt(ee))throw Ye.create("not-registered");const Ee=ee.authToken;if(!b&&B(Ee))return ee;if(1===Ee.requestStatus)return S=tt(D,b),ee;{if(!navigator.onLine)throw Ye.create("app-offline");const Ve=q(ee);return S=Et(D,Ve),Ve}});return S?yield S:P.authToken})).apply(this,arguments)}function tt(D,b){return De.apply(this,arguments)}function De(){return(De=(0,k.Z)(function*(D,b){let S=yield et(D.appConfig);for(;1===S.authToken.requestStatus;)yield Oe(100),S=yield et(D.appConfig);const P=S.authToken;return 0===P.requestStatus?Bn(D,b):P})).apply(this,arguments)}function et(D){return Yr(D,b=>{if(!Nt(b))throw Ye.create("not-registered");return function _e(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function Et(D,b){return vt.apply(this,arguments)}function vt(){return(vt=(0,k.Z)(function*(D,b){try{const S=yield Zt(D,b),P=Object.assign(Object.assign({},b),{authToken:S});return yield Qe(D.appConfig,P),S}catch(S){if(!Xe(S)||401!==S.customData.serverCode&&404!==S.customData.serverCode){const P=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield Qe(D.appConfig,P)}else yield ns(D.appConfig);throw S}})).apply(this,arguments)}function Nt(D){return void 0!==D&&2===D.registrationStatus}function B(D){return 2===D.requestStatus&&!function L(D){const b=Date.now();return b<D.creationTime||D.creationTime+D.expiresIn<b+36e5}(D)}function q(D){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:b})}function Ge(){return(Ge=(0,k.Z)(function*(D){const b=D,{installationEntry:S,registrationPromise:P}=yield An(b);return P?P.catch(console.error):Bn(b).catch(console.error),S.fid})).apply(this,arguments)}function Kt(){return(Kt=(0,k.Z)(function*(D,b=!1){const S=D;return yield sn(S),(yield Bn(S,b)).token})).apply(this,arguments)}function sn(D){return jt.apply(this,arguments)}function jt(){return(jt=(0,k.Z)(function*(D){const{registrationPromise:b}=yield An(D);b&&(yield b)})).apply(this,arguments)}function is(D){return Ye.create("missing-app-config-values",{valueName:D})}const co="installations",hn=D=>{const b=D.getProvider("app").getImmediate(),S=function dn(D){if(!D||!D.options)throw is("App Configuration");if(!D.name)throw is("App Name");const b=["projectId","apiKey","appId"];for(const S of b)if(!D.options[S])throw is(S);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(b);return{app:b,appConfig:S,heartbeatServiceProvider:(0,ue._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},Ns=D=>{const b=D.getProvider("app").getImmediate(),S=(0,ue._getProvider)(b,co).getImmediate();return{getId:()=>function Z(D){return Ge.apply(this,arguments)}(S),getToken:G=>function ut(D){return Kt.apply(this,arguments)}(S,G)}};(function iu(){(0,ue._registerComponent)(new he.wA(co,hn,"PUBLIC")),(0,ue._registerComponent)(new he.wA("installations-internal",Ns,"PRIVATE"))})(),(0,ue.registerVersion)(ve,U),(0,ue.registerVersion)(ve,U,"esm2017");const yi="@firebase/remote-config",Rn=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class kh{constructor(b,S,P,G){this.client=b,this.storage=S,this.storageCache=P,this.logger=G}isCachedDataFresh(b,S){if(!S)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const P=Date.now()-S,G=P<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${P}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${G}.`),G}fetch(b){var S=this;return(0,k.Z)(function*(){const[P,G]=yield Promise.all([S.storage.getLastSuccessfulFetchTimestampMillis(),S.storage.getLastSuccessfulFetchResponse()]);if(G&&S.isCachedDataFresh(b.cacheMaxAgeMillis,P))return G;b.eTag=G&&G.eTag;const ee=yield S.client.fetch(b),Ee=[S.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ee.status&&Ee.push(S.storage.setLastSuccessfulFetchResponse(ee)),yield Promise.all(Ee),ee})()}}function vc(D=navigator){return D.languages&&D.languages[0]||D.language}class wc{constructor(b,S,P,G,ee,Ee){this.firebaseInstallations=b,this.sdkVersion=S,this.namespace=P,this.projectId=G,this.apiKey=ee,this.appId=Ee}fetch(b){var S=this;return(0,k.Z)(function*(){var P,G,ee;const[Ee,Ve]=yield Promise.all([S.firebaseInstallations.getId(),S.firebaseInstallations.getToken()]),it=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${S.projectId}/namespaces/${S.namespace}:fetch?key=${S.apiKey}`,yt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},ft={sdk_version:S.sdkVersion,app_instance_id:Ee,app_instance_id_token:Ve,app_id:S.appId,language_code:vc()},rr={method:"POST",headers:yt,body:JSON.stringify(ft)},Gn=fetch(it,rr),Sr=new Promise((Ei,Es)=>{b.signal.addEventListener(()=>{const Ia=new Error("The operation was aborted.");Ia.name="AbortError",Es(Ia)})});let ws;try{yield Promise.race([Gn,Sr]),ws=yield Gn}catch(Ei){let Es="fetch-client-network";throw"AbortError"===(null===(P=Ei)||void 0===P?void 0:P.name)&&(Es="fetch-timeout"),Rn.create(Es,{originalErrorMessage:null===(G=Ei)||void 0===G?void 0:G.message})}let Ys=ws.status;const zc=ws.headers.get("ETag")||void 0;let Wc,Qs;if(200===ws.status){let Ei;try{Ei=yield ws.json()}catch(Es){throw Rn.create("fetch-client-parse",{originalErrorMessage:null===(ee=Es)||void 0===ee?void 0:ee.message})}Wc=Ei.entries,Qs=Ei.state}if("INSTANCE_STATE_UNSPECIFIED"===Qs?Ys=500:"NO_CHANGE"===Qs?Ys=304:("NO_TEMPLATE"===Qs||"EMPTY_CONFIG"===Qs)&&(Wc={}),304!==Ys&&200!==Ys)throw Rn.create("fetch-status",{httpStatus:Ys});return{status:Ys,eTag:zc,config:Wc}})()}}class _p{constructor(b,S){this.client=b,this.storage=S}fetch(b){var S=this;return(0,k.Z)(function*(){const P=(yield S.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return S.attemptFetch(b,P)})()}attemptFetch(b,{throttleEndTimeMillis:S,backoffCount:P}){var G=this;return(0,k.Z)(function*(){yield function jn(D,b){return new Promise((S,P)=>{const G=Math.max(b-Date.now(),0),ee=setTimeout(S,G);D.addEventListener(()=>{clearTimeout(ee),P(Rn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,S);try{const ee=yield G.client.fetch(b);return yield G.storage.deleteThrottleMetadata(),ee}catch(ee){if(!function ql(D){if(!(D instanceof se.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}(ee))throw ee;const Ee={throttleEndTimeMillis:Date.now()+(0,se.$s)(P),backoffCount:P+1};return yield G.storage.setThrottleMetadata(Ee),G.attemptFetch(b,Ee)}})()}}class Kl{constructor(b,S,P,G,ee){this.app=b,this._client=S,this._storageCache=P,this._storage=G,this._logger=ee,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ec(D,b){var S;const P=D.target.error||void 0;return Rn.create(b,{originalErrorMessage:P&&(null===(S=P)||void 0===S?void 0:S.message)})}const us="app_namespace_store";class Ph{constructor(b,S,P,G=function Ep(){return new Promise((D,b)=>{var S;try{const P=indexedDB.open("firebase_remote_config",1);P.onerror=G=>{b(Ec(G,"storage-open"))},P.onsuccess=G=>{D(G.target.result)},P.onupgradeneeded=G=>{0===G.oldVersion&&G.target.result.createObjectStore(us,{keyPath:"compositeKey"})}}catch(P){b(Rn.create("storage-open",{originalErrorMessage:null===(S=P)||void 0===S?void 0:S.message}))}})}()){this.appId=b,this.appName=S,this.namespace=P,this.openDbPromise=G}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var S=this;return(0,k.Z)(function*(){const P=yield S.openDbPromise;return new Promise((G,ee)=>{var Ee;const We=P.transaction([us],"readonly").objectStore(us),it=S.createCompositeKey(b);try{const yt=We.get(it);yt.onerror=ft=>{ee(Ec(ft,"storage-get"))},yt.onsuccess=ft=>{const rr=ft.target.result;G(rr?rr.value:void 0)}}catch(yt){ee(Rn.create("storage-get",{originalErrorMessage:null===(Ee=yt)||void 0===Ee?void 0:Ee.message}))}})})()}set(b,S){var P=this;return(0,k.Z)(function*(){const G=yield P.openDbPromise;return new Promise((ee,Ee)=>{var Ve;const it=G.transaction([us],"readwrite").objectStore(us),yt=P.createCompositeKey(b);try{const ft=it.put({compositeKey:yt,value:S});ft.onerror=rr=>{Ee(Ec(rr,"storage-set"))},ft.onsuccess=()=>{ee()}}catch(ft){Ee(Rn.create("storage-set",{originalErrorMessage:null===(Ve=ft)||void 0===Ve?void 0:Ve.message}))}})})()}delete(b){var S=this;return(0,k.Z)(function*(){const P=yield S.openDbPromise;return new Promise((G,ee)=>{var Ee;const We=P.transaction([us],"readwrite").objectStore(us),it=S.createCompositeKey(b);try{const yt=We.delete(it);yt.onerror=ft=>{ee(Ec(ft,"storage-delete"))},yt.onsuccess=()=>{G()}}catch(yt){ee(Rn.create("storage-delete",{originalErrorMessage:null===(Ee=yt)||void 0===Ee?void 0:Ee.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class Yl{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,k.Z)(function*(){const S=b.storage.getLastFetchStatus(),P=b.storage.getLastSuccessfulFetchTimestampMillis(),G=b.storage.getActiveConfig(),ee=yield S;ee&&(b.lastFetchStatus=ee);const Ee=yield P;Ee&&(b.lastSuccessfulFetchTimestampMillis=Ee);const Ve=yield G;Ve&&(b.activeConfig=Ve)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function ou(){return Fh.apply(this,arguments)}function Fh(){return(Fh=(0,k.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function cs(){(0,ue._registerComponent)(new he.wA("remote-config",function D(b,{instanceIdentifier:S}){const P=b.getProvider("app").getImmediate(),G=b.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Rn.create("registration-window");if(!(0,se.hl)())throw Rn.create("indexed-db-unavailable");const{projectId:ee,apiKey:Ee,appId:Ve}=P.options;if(!ee)throw Rn.create("registration-project-id");if(!Ee)throw Rn.create("registration-api-key");if(!Ve)throw Rn.create("registration-app-id");const We=new Ph(Ve,P.name,S=S||"firebase"),it=new Yl(We),yt=new ce.Yd(yi);yt.logLevel=ce.in.ERROR;const ft=new wc(G,ue.SDK_VERSION,S,ee,Ee,Ve),rr=new _p(ft,We),Gn=new kh(rr,We,it,yt),Sr=new Kl(P,Gn,it,We,yt);return function ar(D){const b=(0,se.m9)(D);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(Sr),Sr},"PUBLIC").setMultipleInstances(!0)),(0,ue.registerVersion)(yi,"0.3.15"),(0,ue.registerVersion)(yi,"0.3.15","esm2017")}();const _i="/firebase-messaging-sw.js",ki="/firebase-cloud-messaging-push-scope",Pi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Jo="google.c.a.c_id",au="google.c.a.c_l",Ic="google.c.a.ts",Lh="google.c.a.e";var Fi=(()=>{return(D=Fi||(Fi={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Fi;var D})();function Qr(D){const b=new Uint8Array(D);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Lr(D){const S=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),P=atob(S),G=new Uint8Array(P.length);for(let ee=0;ee<P.length;++ee)G[ee]=P.charCodeAt(ee);return G}const lo="fcm_token_details_db",ur="fcm_token_object_Store";function Vh(D){return Bh.apply(this,arguments)}function Bh(){return Bh=(0,k.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ee=>ee.name).includes(lo))return null;let b=null;return(yield(0,le.X3)(lo,5,{upgrade:(P=(0,k.Z)(function*(G,ee,Ee,Ve){var We;if(ee<2||!G.objectStoreNames.contains(ur))return;const it=Ve.objectStore(ur),yt=yield it.index("fcmSenderId").get(D);if(yield it.clear(),yt)if(2===ee){const ft=yt;if(!ft.auth||!ft.p256dh||!ft.endpoint)return;b={token:ft.fcmToken,createTime:null!==(We=ft.createTime)&&void 0!==We?We:Date.now(),subscriptionOptions:{auth:ft.auth,p256dh:ft.p256dh,endpoint:ft.endpoint,swScope:ft.swScope,vapidKey:"string"==typeof ft.vapidKey?ft.vapidKey:Qr(ft.vapidKey)}}}else if(3===ee){const ft=yt;b={token:ft.fcmToken,createTime:ft.createTime,subscriptionOptions:{auth:Qr(ft.auth),p256dh:Qr(ft.p256dh),endpoint:ft.endpoint,swScope:ft.swScope,vapidKey:Qr(ft.vapidKey)}}}else if(4===ee){const ft=yt;b={token:ft.fcmToken,createTime:ft.createTime,subscriptionOptions:{auth:Qr(ft.auth),p256dh:Qr(ft.p256dh),endpoint:ft.endpoint,swScope:ft.swScope,vapidKey:Qr(ft.vapidKey)}}}}),function(ee,Ee,Ve,We){return P.apply(this,arguments)})})).close(),yield(0,le.Lj)(lo),yield(0,le.Lj)("fcm_vapid_details_db"),yield(0,le.Lj)("undefined"),yn(b)?b:null;var P}),Bh.apply(this,arguments)}function yn(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:b}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}const Jr="firebase-messaging-store";let wr=null;function uu(){return wr||(wr=(0,le.X3)("firebase-messaging-database",1,{upgrade:(D,b)=>{0===b&&D.createObjectStore(Jr)}})),wr}function Ps(D){return Li.apply(this,arguments)}function Li(){return(Li=(0,k.Z)(function*(D){const b=oi(D),P=yield(yield uu()).transaction(Jr).objectStore(Jr).get(b);if(P)return P;{const G=yield Vh(D.appConfig.senderId);if(G)return yield Ht(D,G),G}})).apply(this,arguments)}function Ht(D,b){return cu.apply(this,arguments)}function cu(){return(cu=(0,k.Z)(function*(D,b){const S=oi(D),G=(yield uu()).transaction(Jr,"readwrite");return yield G.objectStore(Jr).put(b,S),yield G.done,b})).apply(this,arguments)}function Fs(D){return lu.apply(this,arguments)}function lu(){return(lu=(0,k.Z)(function*(D){const b=oi(D),P=(yield uu()).transaction(Jr,"readwrite");yield P.objectStore(Jr).delete(b),yield P.done})).apply(this,arguments)}function oi({appConfig:D}){return D.appId}const fn=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function bt(D,b){return hu.apply(this,arguments)}function hu(){return(hu=(0,k.Z)(function*(D,b){var S;const P=yield Cc(D),G=Ie(b),ee={method:"POST",headers:P,body:JSON.stringify(G)};let Ee;try{Ee=yield(yield fetch(Vi(D.appConfig),ee)).json()}catch(Ve){throw fn.create("token-subscribe-failed",{errorInfo:null===(S=Ve)||void 0===S?void 0:S.toString()})}if(Ee.error)throw fn.create("token-subscribe-failed",{errorInfo:Ee.error.message});if(!Ee.token)throw fn.create("token-subscribe-no-token");return Ee.token})).apply(this,arguments)}function Uh(D,b){return fu.apply(this,arguments)}function fu(){return(fu=(0,k.Z)(function*(D,b){var S;const P=yield Cc(D),G=Ie(b.subscriptionOptions),ee={method:"PATCH",headers:P,body:JSON.stringify(G)};let Ee;try{Ee=yield(yield fetch(`${Vi(D.appConfig)}/${b.token}`,ee)).json()}catch(Ve){throw fn.create("token-update-failed",{errorInfo:null===(S=Ve)||void 0===S?void 0:S.toString()})}if(Ee.error)throw fn.create("token-update-failed",{errorInfo:Ee.error.message});if(!Ee.token)throw fn.create("token-update-no-token");return Ee.token})).apply(this,arguments)}function pu(D,b){return bc.apply(this,arguments)}function bc(){return(bc=(0,k.Z)(function*(D,b){var S;const G={method:"DELETE",headers:yield Cc(D)};try{const Ee=yield(yield fetch(`${Vi(D.appConfig)}/${b}`,G)).json();if(Ee.error)throw fn.create("token-unsubscribe-failed",{errorInfo:Ee.error.message})}catch(ee){throw fn.create("token-unsubscribe-failed",{errorInfo:null===(S=ee)||void 0===S?void 0:S.toString()})}})).apply(this,arguments)}function Vi({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Cc(D){return ea.apply(this,arguments)}function ea(){return(ea=(0,k.Z)(function*({appConfig:D,installations:b}){const S=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${S}`})})).apply(this,arguments)}function Ie({p256dh:D,auth:b,endpoint:S,vapidKey:P}){const G={web:{endpoint:S,auth:b,p256dh:D}};return P!==Pi&&(G.web.applicationPubKey=P),G}const Vt=6048e5;function Tc(D){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,k.Z)(function*(D){const b=yield Sc(D.swRegistration,D.vapidKey),S={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:b.endpoint,auth:Qr(b.getKey("auth")),p256dh:Qr(b.getKey("p256dh"))},P=yield Ps(D.firebaseDependencies);if(P){if(ed(P.subscriptionOptions,S))return Date.now()>=P.createTime+Vt?ho(D,{token:P.token,createTime:Date.now(),subscriptionOptions:S}):P.token;try{yield pu(D.firebaseDependencies,P.token)}catch(G){console.warn(G)}return ta(D.firebaseDependencies,S)}return ta(D.firebaseDependencies,S)})).apply(this,arguments)}function _n(D){return gu.apply(this,arguments)}function gu(){return(gu=(0,k.Z)(function*(D){const b=yield Ps(D.firebaseDependencies);b&&(yield pu(D.firebaseDependencies,b.token),yield Fs(D.firebaseDependencies));const S=yield D.swRegistration.pushManager.getSubscription();return!S||S.unsubscribe()})).apply(this,arguments)}function ho(D,b){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,k.Z)(function*(D,b){try{const S=yield Uh(D.firebaseDependencies,b),P=Object.assign(Object.assign({},b),{token:S,createTime:Date.now()});return yield Ht(D.firebaseDependencies,P),S}catch(S){throw yield _n(D),S}})).apply(this,arguments)}function ta(D,b){return na.apply(this,arguments)}function na(){return(na=(0,k.Z)(function*(D,b){const P={token:yield bt(D,b),createTime:Date.now(),subscriptionOptions:b};return yield Ht(D,P),P.token})).apply(this,arguments)}function Sc(D,b){return xc.apply(this,arguments)}function xc(){return(xc=(0,k.Z)(function*(D,b){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Lr(b)})})).apply(this,arguments)}function ed(D,b){return b.vapidKey===D.vapidKey&&b.endpoint===D.endpoint&&b.auth===D.auth&&b.p256dh===D.p256dh}function ra(D){const b={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function vn(D,b){if(!b.notification)return;D.notification={};const S=b.notification.title;S&&(D.notification.title=S);const P=b.notification.body;P&&(D.notification.body=P);const G=b.notification.image;G&&(D.notification.image=G);const ee=b.notification.icon;ee&&(D.notification.icon=ee)}(b,D),function vi(D,b){!b.data||(D.data=b.data)}(b,D),function Mc(D,b){var S,P,G,ee,Ee;if(!(b.fcmOptions||null!==(S=b.notification)&&void 0!==S&&S.click_action))return;D.fcmOptions={};const Ve=null!==(G=null===(P=b.fcmOptions)||void 0===P?void 0:P.link)&&void 0!==G?G:null===(ee=b.notification)||void 0===ee?void 0:ee.click_action;Ve&&(D.fcmOptions.link=Ve);const We=null===(Ee=b.fcmOptions)||void 0===Ee?void 0:Ee.analytics_label;We&&(D.fcmOptions.analyticsLabel=We)}(b,D),b}function Ls(D){return"object"==typeof D&&!!D&&Jo in D}function Bi(D,b){const S=[];for(let P=0;P<D.length;P++)S.push(D.charAt(P)),P<b.length&&S.push(b.charAt(P));return S.join("")}function ia(D){return fn.create("missing-app-config-values",{valueName:D})}Bi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Bi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class bp{constructor(b,S,P){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const G=function Dp(D){if(!D||!D.options)throw ia("App Configuration Object");if(!D.name)throw ia("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:S}=D;for(const P of b)if(!S[P])throw ia(P);return{appName:D.name,projectId:S.projectId,apiKey:S.apiKey,appId:S.appId,senderId:S.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:G,installations:S,analyticsProvider:P}}_delete(){return Promise.resolve()}}function Nc(D){return mu.apply(this,arguments)}function mu(){return(mu=(0,k.Z)(function*(D){var b;try{D.swRegistration=yield navigator.serviceWorker.register(_i,{scope:ki}),D.swRegistration.update().catch(()=>{})}catch(S){throw fn.create("failed-service-worker-registration",{browserErrorMessage:null===(b=S)||void 0===b?void 0:b.message})}})).apply(this,arguments)}function sa(D,b){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,k.Z)(function*(D,b){if(!b&&!D.swRegistration&&(yield Nc(D)),b||!D.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw fn.create("invalid-sw-registration");D.swRegistration=b}})).apply(this,arguments)}function oa(D,b){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,k.Z)(function*(D,b){b?D.vapidKey=b:D.vapidKey||(D.vapidKey=Pi)})).apply(this,arguments)}function _u(){return(_u=(0,k.Z)(function*(D,b){if(!navigator)throw fn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw fn.create("permission-blocked");return yield oa(D,b?.vapidKey),yield sa(D,b?.serviceWorkerRegistration),Tc(D)})).apply(this,arguments)}function kc(D,b,S){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,k.Z)(function*(D,b,S){const P=Fc(b);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(P,{message_id:S[Jo],message_name:S[au],message_time:S[Ic],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Fc(D){switch(D){case Fi.NOTIFICATION_CLICKED:return"notification_open";case Fi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Vs(){return(Vs=(0,k.Z)(function*(D,b){const S=b.data;if(!S.isFirebaseMessaging)return;D.onMessageHandler&&S.messageType===Fi.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(ra(S)):D.onMessageHandler.next(ra(S)));const P=S.data;Ls(P)&&"1"===P[Lh]&&(yield kc(D,S.messageType,P))})).apply(this,arguments)}const Bs="@firebase/messaging",Hn=D=>{const b=new bp(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",S=>function td(D,b){return Vs.apply(this,arguments)}(b,S)),b},Vr=D=>{const b=D.getProvider("messaging").getImmediate();return{getToken:P=>function yu(D,b){return _u.apply(this,arguments)}(b,P)}};function nd(){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,k.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function an(){(0,ue._registerComponent)(new he.wA("messaging",Hn,"PUBLIC")),(0,ue._registerComponent)(new he.wA("messaging-internal",Vr,"PRIVATE")),(0,ue.registerVersion)(Bs,"0.11.0"),(0,ue.registerVersion)(Bs,"0.11.0","esm2017")}();const po="analytics",sd="firebase_id",js="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Iu="https://www.googletagmanager.com/gtag/js",wn=new ce.Yd("@firebase/analytics");function Du(D){return Promise.all(D.map(b=>b.catch(S=>S)))}function bu(D,b){const S=document.createElement("script");S.src=`${Iu}?l=${D}&id=${b}`,S.async=!0,document.head.appendChild(S)}function Hh(D,b,S,P,G,ee){return go.apply(this,arguments)}function go(){return(go=(0,k.Z)(function*(D,b,S,P,G,ee){const Ee=P[G];try{if(Ee)yield b[Ee];else{const We=(yield Du(S)).find(it=>it.measurementId===G);We&&(yield b[We.appId])}}catch(Ve){wn.error(Ve)}D("config",G,ee)})).apply(this,arguments)}function mo(D,b,S,P,G){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,k.Z)(function*(D,b,S,P,G){try{let ee=[];if(G&&G.send_to){let Ee=G.send_to;Array.isArray(Ee)||(Ee=[Ee]);const Ve=yield Du(S);for(const We of Ee){const it=Ve.find(ft=>ft.measurementId===We),yt=it&&b[it.appId];if(!yt){ee=[];break}ee.push(yt)}}0===ee.length&&(ee=Object.values(b)),yield Promise.all(ee),D("event",P,G||{})}catch(ee){wn.error(ee)}})).apply(this,arguments)}function ad(D){const b=window.document.getElementsByTagName("script");for(const S of Object.values(b))if(S.src&&S.src.includes(Iu)&&S.src.includes(D))return S;return null}const er=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),la=new class wi{constructor(b={},S=1e3){this.throttleMetadata=b,this.intervalMillis=S}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,S){this.throttleMetadata[b]=S}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function cd(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function da(D){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,k.Z)(function*(D){var b;const{appId:S,apiKey:P}=D,G={method:"GET",headers:cd(P)},ee=js.replace("{app-id}",S),Ee=yield fetch(ee,G);if(200!==Ee.status&&304!==Ee.status){let Ve="";try{const We=yield Ee.json();null!==(b=We.error)&&void 0!==b&&b.message&&(Ve=We.error.message)}catch{}throw er.create("config-fetch-failed",{httpStatus:Ee.status,responseMessage:Ve})}return Ee.json()})).apply(this,arguments)}function Sn(D){return ai.apply(this,arguments)}function ai(){return(ai=(0,k.Z)(function*(D,b=la,S){const{appId:P,apiKey:G,measurementId:ee}=D.options;if(!P)throw er.create("no-app-id");if(!G){if(ee)return{measurementId:ee,appId:P};throw er.create("no-api-key")}const Ee=b.getThrottleMetadata(P)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ve=new Su;return setTimeout((0,k.Z)(function*(){Ve.abort()}),void 0!==S?S:6e4),Tu({appId:P,apiKey:G,measurementId:ee},Ee,Ve,b)})).apply(this,arguments)}function Tu(D,b,S){return $s.apply(this,arguments)}function $s(){return($s=(0,k.Z)(function*(D,{throttleEndTimeMillis:b,backoffCount:S},P,G=la){var ee,Ee;const{appId:Ve,measurementId:We}=D;try{yield ha(P,b)}catch(it){if(We)return wn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${We} provided in the "measurementId" field in the local Firebase config. [${null===(ee=it)||void 0===ee?void 0:ee.message}]`),{appId:Ve,measurementId:We};throw it}try{const it=yield da(D);return G.deleteThrottleMetadata(Ve),it}catch(it){const yt=it;if(!Au(yt)){if(G.deleteThrottleMetadata(Ve),We)return wn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${We} provided in the "measurementId" field in the local Firebase config. [${yt?.message}]`),{appId:Ve,measurementId:We};throw it}const ft=503===Number(null===(Ee=yt?.customData)||void 0===Ee?void 0:Ee.httpStatus)?(0,se.$s)(S,G.intervalMillis,30):(0,se.$s)(S,G.intervalMillis),rr={throttleEndTimeMillis:Date.now()+ft,backoffCount:S+1};return G.setThrottleMetadata(Ve,rr),wn.debug(`Calling attemptFetch again in ${ft} millis`),Tu(D,rr,P,G)}})).apply(this,arguments)}function ha(D,b){return new Promise((S,P)=>{const G=Math.max(b-Date.now(),0),ee=setTimeout(S,G);D.addEventListener(()=>{clearTimeout(ee),P(er.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function Au(D){if(!(D instanceof se.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}class Su{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}let hs,ga;function fs(){return(fs=(0,k.Z)(function*(D,b,S,P,G){if(G&&G.global)D("event",S,P);else{const ee=yield b;D("event",S,Object.assign(Object.assign({},P),{send_to:ee}))}})).apply(this,arguments)}function zs(D){ga=D}function Hc(D){hs=D}function Ui(){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,k.Z)(function*(){var D;if(!(0,se.hl)())return wn.warn(er.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(b){return wn.warn(er.create("indexeddb-unavailable",{errorInfo:null===(D=b)||void 0===D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function _o(){return(_o=(0,k.Z)(function*(D,b,S,P,G,ee,Ee){var Ve;const We=Sn(D);We.then(Gn=>{S[Gn.measurementId]=Gn.appId,D.options.measurementId&&Gn.measurementId!==D.options.measurementId&&wn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Gn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Gn=>wn.error(Gn)),b.push(We);const it=Ui().then(Gn=>{if(Gn)return P.getId()}),[yt,ft]=yield Promise.all([We,it]);ad(ee)||bu(ee,yt.measurementId),ga&&(G("consent","default",ga),zs(void 0)),G("js",new Date);const rr=null!==(Ve=Ee?.config)&&void 0!==Ve?Ve:{};return rr.origin="firebase",rr.update=!0,null!=ft&&(rr[sd]=ft),G("config",yt.measurementId,rr),hs&&(G("set",hs),Hc(void 0)),yt.measurementId})).apply(this,arguments)}class Nu{constructor(b){this.app=b}_delete(){return delete Br[this.app.options.appId],Promise.resolve()}}let Br={},gs=[];const vo={};let Eo,Ws,wo="dataLayer",ma=!1;function km(D,b,S){!function Cp(){const D=[];if((0,se.ru)()&&D.push("This is a browser extension environment."),(0,se.zI)()||D.push("Cookies are not available."),D.length>0){const b=D.map((P,G)=>`(${G+1}) ${P}`).join(" "),S=er.create("invalid-analytics-context",{errorInfo:b});wn.warn(S.message)}}();const P=D.options.appId;if(!P)throw er.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw er.create("no-api-key");wn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Br[P])throw er.create("already-exists",{id:P});if(!ma){!function od(D){let b=[];Array.isArray(window[D])?b=window[D]:window[D]=b}(wo);const{wrappedGtag:ee,gtagCore:Ee}=function aa(D,b,S,P,G){let ee=function(...Ee){window[P].push(arguments)};return window[G]&&"function"==typeof window[G]&&(ee=window[G]),window[G]=function Cu(D,b,S,P){function ee(){return(ee=(0,k.Z)(function*(Ee,Ve,We){try{"event"===Ee?yield mo(D,b,S,Ve,We):"config"===Ee?yield Hh(D,b,S,P,Ve,We):"consent"===Ee?D("consent","update",We):D("set",Ve)}catch(it){wn.error(it)}})).apply(this,arguments)}return function G(Ee,Ve,We){return ee.apply(this,arguments)}}(ee,D,b,S),{gtagCore:ee,wrappedGtag:window[G]}}(Br,gs,vo,wo,"gtag");Ws=ee,Eo=Ee,ma=!0}return Br[P]=function yo(D,b,S,P,G,ee,Ee){return _o.apply(this,arguments)}(D,gs,vo,b,Eo,wo,S),new Nu(D)}function Fm(){return $h.apply(this,arguments)}function $h(){return($h=(0,k.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const ya="@firebase/analytics";!function cr(){(0,ue._registerComponent)(new he.wA(po,(b,{options:S})=>km(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),S),"PUBLIC")),(0,ue._registerComponent)(new he.wA("analytics-internal",function D(b){try{const S=b.getProvider(po).getImmediate();return{logEvent:(P,G,ee)=>function Ur(D,b,S,P){D=(0,se.m9)(D),function ld(D,b,S,P,G){return fs.apply(this,arguments)}(Ws,Br[D.app.options.appId],b,S,P).catch(G=>wn.error(G))}(S,P,G,ee)}}catch(S){throw er.create("interop-component-reg-failed",{reason:S})}},"PRIVATE")),(0,ue.registerVersion)(ya,"0.8.4"),(0,ue.registerVersion)(ya,"0.8.4","esm2017")}();var nr=F(4408),Do=F(7565);const _a=new class ms extends Do.v{}(class $n extends nr.o{constructor(b,S){super(b,S),this.scheduler=b,this.work=S}schedule(b,S=0){return S>0?super.schedule(b,S):(this.delay=S,this.state=b,this.scheduler.flush(this),this)}execute(b,S){return S>0||this.closed?super.execute(b,S):this._execute(b,S)}requestAsyncId(b,S,P=0){return null!=P&&P>0||null==P&&this.delay>0?super.requestAsyncId(b,S,P):(b.flush(this),0)}});var va=F(4986),jr=F(576),_s=F(4482),pn=F(5403),Hr=F(4671),qs=F(9468),hd=F(5363);const Gc=new g.GfV("7.5.0"),Ks="__angularfire_symbol__analyticsIsSupportedValue",fd="__angularfire_symbol__analyticsIsSupported",Ea="__angularfire_symbol__remoteConfigIsSupportedValue",ge="__angularfire_symbol__remoteConfigIsSupported",ui="__angularfire_symbol__messagingIsSupportedValue",bo="__angularfire_symbol__messagingIsSupported";function nt(D,b,S){if(b){if(1===b.length)return b[0];const ee=b.filter(Ee=>Ee.app===S);if(1===ee.length)return ee[0]}return S.container.getProvider(D).getImmediate({optional:!0})}globalThis[fd]||(globalThis[fd]=Fm().then(D=>globalThis[Ks]=D).catch(()=>globalThis[Ks]=!1)),globalThis[bo]||(globalThis[bo]=nd().then(D=>globalThis[ui]=D).catch(()=>globalThis[ui]=!1)),globalThis[ge]||(globalThis[ge]=ou().then(D=>globalThis[Ea]=D).catch(()=>globalThis[Ea]=!1));const Co=(D,b)=>{const S=b?[b]:(0,X.C6)(),P=[];return S.forEach(G=>{G.container.getProvider(D).instances.forEach(Ee=>{P.includes(Ee)||P.push(Ee)})}),P};function mt(){}class Zs{constructor(b,S=_a){this.zone=b,this.delegate=S}now(){return this.delegate.now()}schedule(b,S,P){const G=this.zone;return this.delegate.schedule(function(Ee){G.runGuarded(()=>{b.apply(this,[Ee])})},S,P)}}class To{constructor(b){this.zone=b,this.task=null}call(b,S){const P=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",mt,{},mt,mt)),S.pipe(function wa(D,b,S){const P=(0,jr.m)(D)||b||S?{next:D,error:b,complete:S}:D;return P?(0,_s.e)((G,ee)=>{var Ee;null===(Ee=P.subscribe)||void 0===Ee||Ee.call(P);let Ve=!0;G.subscribe((0,pn.x)(ee,We=>{var it;null===(it=P.next)||void 0===it||it.call(P,We),ee.next(We)},()=>{var We;Ve=!1,null===(We=P.complete)||void 0===We||We.call(P),ee.complete()},We=>{var it;Ve=!1,null===(it=P.error)||void 0===it||it.call(P,We),ee.error(We)},()=>{var We,it;Ve&&(null===(We=P.unsubscribe)||void 0===We||We.call(P)),null===(it=P.finalize)||void 0===it||it.call(P)}))}):Hr.y}({next:P,complete:P,error:P})).subscribe(b).add(P)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ao=(()=>{class D{constructor(S){this.ngZone=S,this.outsideAngular=S.runOutsideAngular(()=>new Zs(Zone.current)),this.insideAngular=S.run(()=>new Zs(Zone.current,va.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(S){return new(S||D)(g.LFG(g.R0b))},D.\u0275prov=g.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function $r(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Pn(D){return $r(),function So(D){return function(S){return(S=S.lift(new To(D.ngZone))).pipe((0,qs.R)(D.outsideAngular),(0,hd.Q)(D.insideAngular))}}($r())(D)}},2090:(ht,Te,F)=>{F.d(Te,{$s:()=>et,BH:()=>Pt,G6:()=>we,L:()=>le,LL:()=>Gt,Pz:()=>Wt,Sg:()=>Ze,UG:()=>Se,US:()=>he,ZB:()=>j,ZR:()=>ln,aH:()=>at,b$:()=>de,eu:()=>Ue,hl:()=>Be,jU:()=>Ke,m9:()=>Nt,ne:()=>Mn,pd:()=>gi,r3:()=>ii,ru:()=>fe,tV:()=>ve,uI:()=>Ne,vZ:()=>Qe,w1:()=>Xe,xO:()=>Vn,xb:()=>Zr,z$:()=>He,zI:()=>V,zd:()=>Yr});const ue=function(B){const L=[];let q=0;for(let _e=0;_e<B.length;_e++){let Z=B.charCodeAt(_e);Z<128?L[q++]=Z:Z<2048?(L[q++]=Z>>6|192,L[q++]=63&Z|128):55296==(64512&Z)&&_e+1<B.length&&56320==(64512&B.charCodeAt(_e+1))?(Z=65536+((1023&Z)<<10)+(1023&B.charCodeAt(++_e)),L[q++]=Z>>18|240,L[q++]=Z>>12&63|128,L[q++]=Z>>6&63|128,L[q++]=63&Z|128):(L[q++]=Z>>12|224,L[q++]=Z>>6&63|128,L[q++]=63&Z|128)}return L},he={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,L){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,_e=[];for(let Z=0;Z<B.length;Z+=3){const Ge=B[Z],ut=Z+1<B.length,Kt=ut?B[Z+1]:0,sn=Z+2<B.length,jt=sn?B[Z+2]:0;let Rt=(15&Kt)<<2|jt>>6,Jn=63&jt;sn||(Jn=64,ut||(Rt=64)),_e.push(q[Ge>>2],q[(3&Ge)<<4|Kt>>4],q[Rt],q[Jn])}return _e.join("")},encodeString(B,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(B):this.encodeByteArray(ue(B),L)},decodeString(B,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(B):function(B){const L=[];let q=0,_e=0;for(;q<B.length;){const Z=B[q++];if(Z<128)L[_e++]=String.fromCharCode(Z);else if(Z>191&&Z<224){const Ge=B[q++];L[_e++]=String.fromCharCode((31&Z)<<6|63&Ge)}else if(Z>239&&Z<365){const sn=((7&Z)<<18|(63&B[q++])<<12|(63&B[q++])<<6|63&B[q++])-65536;L[_e++]=String.fromCharCode(55296+(sn>>10)),L[_e++]=String.fromCharCode(56320+(1023&sn))}else{const Ge=B[q++],ut=B[q++];L[_e++]=String.fromCharCode((15&Z)<<12|(63&Ge)<<6|63&ut)}}return L.join("")}(this.decodeStringToByteArray(B,L))},decodeStringToByteArray(B,L){this.init_();const q=L?this.charToByteMapWebSafe_:this.charToByteMap_,_e=[];for(let Z=0;Z<B.length;){const Ge=q[B.charAt(Z++)],Kt=Z<B.length?q[B.charAt(Z)]:0;++Z;const jt=Z<B.length?q[B.charAt(Z)]:64;++Z;const $e=Z<B.length?q[B.charAt(Z)]:64;if(++Z,null==Ge||null==Kt||null==jt||null==$e)throw Error();_e.push(Ge<<2|Kt>>4),64!==jt&&(_e.push(Kt<<4&240|jt>>2),64!==$e&&_e.push(jt<<6&192|$e))}return _e},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}},le=function(B){return function(B){const L=ue(B);return he.encodeByteArray(L,!0)}(B).replace(/\./g,"")},ve=function(B){try{return he.decodeString(B,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function j(B,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return L}for(const q in L)!L.hasOwnProperty(q)||!J(q)||(B[q]=j(B[q],L[q]));return B}function J(B){return"__proto__"!==B}function He(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ne(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(He())}function Se(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ke(){return"object"==typeof self&&self.self===self}function fe(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function de(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Xe(){const B=He();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function we(){return!Se()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Be(){return"object"==typeof indexedDB}function Ue(){return new Promise((B,L)=>{try{let q=!0;const _e="validate-browser-context-for-indexeddb-analytics-module",Z=self.indexedDB.open(_e);Z.onsuccess=()=>{Z.result.close(),q||self.indexedDB.deleteDatabase(_e),B(!0)},Z.onupgradeneeded=()=>{q=!1},Z.onerror=()=>{var Ge;L((null===(Ge=Z.error)||void 0===Ge?void 0:Ge.message)||"")}}catch(q){L(q)}})}function V(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const te=()=>{try{return function pe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const B=process.env.__FIREBASE_DEFAULTS__;return B?JSON.parse(B):void 0})()||(()=>{if(typeof document>"u")return;let B;try{B=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=B&&ve(B[1]);return L&&JSON.parse(L)})()}catch(B){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${B}`)}},at=()=>{var B;return null===(B=te())||void 0===B?void 0:B.config},Wt=B=>{var L;return null===(L=te())||void 0===L?void 0:L[`_${B}`]};class Pt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,q)=>{this.resolve=L,this.reject=q})}wrapCallback(L){return(q,_e)=>{q?this.reject(q):this.resolve(_e),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(q):L(q,_e))}}}function Ze(B,L){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const _e=L||"demo-project",Z=B.iat||0,Ge=B.sub||B.user_id;if(!Ge)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ut=Object.assign({iss:`https://securetoken.google.com/${_e}`,aud:_e,iat:Z,exp:Z+3600,auth_time:Z,sub:Ge,user_id:Ge,firebase:{sign_in_provider:"custom",identities:{}}},B);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(ut)),""].join(".")}class ln extends Error{constructor(L,q,_e){super(q),this.code=L,this.customData=_e,this.name="FirebaseError",Object.setPrototypeOf(this,ln.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gt.prototype.create)}}class Gt{constructor(L,q,_e){this.service=L,this.serviceName=q,this.errors=_e}create(L,...q){const _e=q[0]||{},Z=`${this.service}/${L}`,Ge=this.errors[L],ut=Ge?function qt(B,L){return B.replace(Dr,(q,_e)=>{const Z=L[_e];return null!=Z?String(Z):`<${_e}?>`})}(Ge,_e):"Error";return new ln(Z,`${this.serviceName}: ${ut} (${Z}).`,_e)}}const Dr=/\{\$([^}]+)}/g;function ii(B,L){return Object.prototype.hasOwnProperty.call(B,L)}function Zr(B){for(const L in B)if(Object.prototype.hasOwnProperty.call(B,L))return!1;return!0}function Qe(B,L){if(B===L)return!0;const q=Object.keys(B),_e=Object.keys(L);for(const Z of q){if(!_e.includes(Z))return!1;const Ge=B[Z],ut=L[Z];if(_r(Ge)&&_r(ut)){if(!Qe(Ge,ut))return!1}else if(Ge!==ut)return!1}for(const Z of _e)if(!q.includes(Z))return!1;return!0}function _r(B){return null!==B&&"object"==typeof B}function Vn(B){const L=[];for(const[q,_e]of Object.entries(B))Array.isArray(_e)?_e.forEach(Z=>{L.push(encodeURIComponent(q)+"="+encodeURIComponent(Z))}):L.push(encodeURIComponent(q)+"="+encodeURIComponent(_e));return L.length?"&"+L.join("&"):""}function Yr(B){const L={};return B.replace(/^\?/,"").split("&").forEach(_e=>{if(_e){const[Z,Ge]=_e.split("=");L[decodeURIComponent(Z)]=decodeURIComponent(Ge)}}),L}function gi(B){const L=B.indexOf("?");if(!L)return"";const q=B.indexOf("#",L);return B.substring(L,q>0?q:void 0)}function Mn(B,L){const q=new on(B,L);return q.subscribe.bind(q)}class on{constructor(L,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{L(this)}).catch(_e=>{this.error(_e)})}next(L){this.forEachObserver(q=>{q.next(L)})}error(L){this.forEachObserver(q=>{q.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,q,_e){let Z;if(void 0===L&&void 0===q&&void 0===_e)throw new Error("Missing Observer.");Z=function ot(B,L){if("object"!=typeof B||null===B)return!1;for(const q of L)if(q in B&&"function"==typeof B[q])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:q,complete:_e},void 0===Z.next&&(Z.next=Jt),void 0===Z.error&&(Z.error=Jt),void 0===Z.complete&&(Z.complete=Jt);const Ge=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Z.error(this.finalError):Z.complete()}catch{}}),this.observers.push(Z),Ge}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,L)}sendOne(L,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{q(this.observers[L])}catch(_e){typeof console<"u"&&console.error&&console.error(_e)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Jt(){}function et(B,L=1e3,q=2){const _e=L*Math.pow(q,B),Z=Math.round(.5*_e*(Math.random()-.5)*2);return Math.min(144e5,_e+Z)}function Nt(B){return B&&B._delegate?B._delegate:B}},5064:(ht,Te,F)=>{var g=F(4650);let X=null;function k(){return X}const ce=new g.OlP("DocumentToken");var W=(()=>((W=W||{})[W.Format=0]="Format",W[W.Standalone=1]="Standalone",W))(),Y=(()=>((Y=Y||{})[Y.Narrow=0]="Narrow",Y[Y.Abbreviated=1]="Abbreviated",Y[Y.Wide=2]="Wide",Y[Y.Short=3]="Short",Y))(),re=(()=>((re=re||{})[re.Short=0]="Short",re[re.Medium=1]="Medium",re[re.Long=2]="Long",re[re.Full=3]="Full",re))(),te=(()=>((te=te||{})[te.Decimal=0]="Decimal",te[te.Group=1]="Group",te[te.List=2]="List",te[te.PercentSign=3]="PercentSign",te[te.PlusSign=4]="PlusSign",te[te.MinusSign=5]="MinusSign",te[te.Exponential=6]="Exponential",te[te.SuperscriptingExponent=7]="SuperscriptingExponent",te[te.PerMille=8]="PerMille",te[te.Infinity=9]="Infinity",te[te.NaN=10]="NaN",te[te.TimeSeparator=11]="TimeSeparator",te[te.CurrencyDecimal=12]="CurrencyDecimal",te[te.CurrencyGroup=13]="CurrencyGroup",te))();function Gt(n,e){return Qe((0,g.cg1)(n)[g.wAp.DateFormat],e)}function qt(n,e){return Qe((0,g.cg1)(n)[g.wAp.TimeFormat],e)}function Dr(n,e){return Qe((0,g.cg1)(n)[g.wAp.DateTimeFormat],e)}function At(n,e){const t=(0,g.cg1)(n),r=t[g.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===te.CurrencyDecimal)return t[g.wAp.NumberSymbols][te.Decimal];if(e===te.CurrencyGroup)return t[g.wAp.NumberSymbols][te.Group]}return r}function ii(n){if(!n[g.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[g.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Qe(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function _r(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const gi=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,An={},Mn=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var on=(()=>((on=on||{})[on.Short=0]="Short",on[on.ShortGMT=1]="ShortGMT",on[on.Long=2]="Long",on[on.Extended=3]="Extended",on))(),gt=(()=>((gt=gt||{})[gt.FullYear=0]="FullYear",gt[gt.Month=1]="Month",gt[gt.Date=2]="Date",gt[gt.Hours=3]="Hours",gt[gt.Minutes=4]="Minutes",gt[gt.Seconds=5]="Seconds",gt[gt.FractionalSeconds=6]="FractionalSeconds",gt[gt.Day=7]="Day",gt))(),ot=(()=>((ot=ot||{})[ot.DayPeriods=0]="DayPeriods",ot[ot.Days=1]="Days",ot[ot.Months=2]="Months",ot[ot.Eras=3]="Eras",ot))();function Jt(n,e,t,r){let a=function Ge(n){if(Kt(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[a,c=1,h=1]=n.split("-").map(_=>+_);return sr(a,c-1,h)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(gi))return function ut(n){const e=new Date(0);let t=0,r=0;const a=n[8]?e.setUTCFullYear:e.setFullYear,c=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),a.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const h=Number(n[4]||0)-t,_=Number(n[5]||0)-r,E=Number(n[6]||0),C=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return c.call(e,h,_,E,C),e}(r)}const e=new Date(n);if(!Kt(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Nn(t,e)||e;let _,h=[];for(;e;){if(_=Mn.exec(e),!_){h.push(e);break}{h=h.concat(_.slice(1));const x=h.pop();if(!x)break;e=x}}let E=a.getTimezoneOffset();r&&(E=q(r,E),a=function Z(n,e,t){const r=t?-1:1,a=n.getTimezoneOffset();return function _e(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(q(e,a)-a))}(a,r,!0));let C="";return h.forEach(x=>{const R=function L(n){if(B[n])return B[n];let e;switch(n){case"G":case"GG":case"GGG":e=Yt(ot.Eras,Y.Abbreviated);break;case"GGGG":e=Yt(ot.Eras,Y.Wide);break;case"GGGGG":e=Yt(ot.Eras,Y.Narrow);break;case"y":e=Zt(gt.FullYear,1,0,!1,!0);break;case"yy":e=Zt(gt.FullYear,2,0,!0,!0);break;case"yyy":e=Zt(gt.FullYear,3,0,!1,!0);break;case"yyyy":e=Zt(gt.FullYear,4,0,!1,!0);break;case"Y":e=Nt(1);break;case"YY":e=Nt(2,!0);break;case"YYY":e=Nt(3);break;case"YYYY":e=Nt(4);break;case"M":case"L":e=Zt(gt.Month,1,1);break;case"MM":case"LL":e=Zt(gt.Month,2,1);break;case"MMM":e=Yt(ot.Months,Y.Abbreviated);break;case"MMMM":e=Yt(ot.Months,Y.Wide);break;case"MMMMM":e=Yt(ot.Months,Y.Narrow);break;case"LLL":e=Yt(ot.Months,Y.Abbreviated,W.Standalone);break;case"LLLL":e=Yt(ot.Months,Y.Wide,W.Standalone);break;case"LLLLL":e=Yt(ot.Months,Y.Narrow,W.Standalone);break;case"w":e=vt(1);break;case"ww":e=vt(2);break;case"W":e=vt(1,!0);break;case"d":e=Zt(gt.Date,1);break;case"dd":e=Zt(gt.Date,2);break;case"c":case"cc":e=Zt(gt.Day,1);break;case"ccc":e=Yt(ot.Days,Y.Abbreviated,W.Standalone);break;case"cccc":e=Yt(ot.Days,Y.Wide,W.Standalone);break;case"ccccc":e=Yt(ot.Days,Y.Narrow,W.Standalone);break;case"cccccc":e=Yt(ot.Days,Y.Short,W.Standalone);break;case"E":case"EE":case"EEE":e=Yt(ot.Days,Y.Abbreviated);break;case"EEEE":e=Yt(ot.Days,Y.Wide);break;case"EEEEE":e=Yt(ot.Days,Y.Narrow);break;case"EEEEEE":e=Yt(ot.Days,Y.Short);break;case"a":case"aa":case"aaa":e=Yt(ot.DayPeriods,Y.Abbreviated);break;case"aaaa":e=Yt(ot.DayPeriods,Y.Wide);break;case"aaaaa":e=Yt(ot.DayPeriods,Y.Narrow);break;case"b":case"bb":case"bbb":e=Yt(ot.DayPeriods,Y.Abbreviated,W.Standalone,!0);break;case"bbbb":e=Yt(ot.DayPeriods,Y.Wide,W.Standalone,!0);break;case"bbbbb":e=Yt(ot.DayPeriods,Y.Narrow,W.Standalone,!0);break;case"B":case"BB":case"BBB":e=Yt(ot.DayPeriods,Y.Abbreviated,W.Format,!0);break;case"BBBB":e=Yt(ot.DayPeriods,Y.Wide,W.Format,!0);break;case"BBBBB":e=Yt(ot.DayPeriods,Y.Narrow,W.Format,!0);break;case"h":e=Zt(gt.Hours,1,-12);break;case"hh":e=Zt(gt.Hours,2,-12);break;case"H":e=Zt(gt.Hours,1);break;case"HH":e=Zt(gt.Hours,2);break;case"m":e=Zt(gt.Minutes,1);break;case"mm":e=Zt(gt.Minutes,2);break;case"s":e=Zt(gt.Seconds,1);break;case"ss":e=Zt(gt.Seconds,2);break;case"S":e=Zt(gt.FractionalSeconds,1);break;case"SS":e=Zt(gt.FractionalSeconds,2);break;case"SSS":e=Zt(gt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Cr(on.Short);break;case"ZZZZZ":e=Cr(on.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Cr(on.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Cr(on.Long);break;default:return null}return B[n]=e,e}(x);C+=R?R(a,t,E):"''"===x?"'":x.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),C}function sr(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Nn(n,e){const t=function Oe(n){return(0,g.cg1)(n)[g.wAp.LocaleId]}(n);if(An[t]=An[t]||{},An[t][e])return An[t][e];let r="";switch(e){case"shortDate":r=Gt(n,re.Short);break;case"mediumDate":r=Gt(n,re.Medium);break;case"longDate":r=Gt(n,re.Long);break;case"fullDate":r=Gt(n,re.Full);break;case"shortTime":r=qt(n,re.Short);break;case"mediumTime":r=qt(n,re.Medium);break;case"longTime":r=qt(n,re.Long);break;case"fullTime":r=qt(n,re.Full);break;case"short":const a=Nn(n,"shortTime"),c=Nn(n,"shortDate");r=Pr(Dr(n,re.Short),[a,c]);break;case"medium":const h=Nn(n,"mediumTime"),_=Nn(n,"mediumDate");r=Pr(Dr(n,re.Medium),[h,_]);break;case"long":const E=Nn(n,"longTime"),C=Nn(n,"longDate");r=Pr(Dr(n,re.Long),[E,C]);break;case"full":const x=Nn(n,"fullTime"),R=Nn(n,"fullDate");r=Pr(Dr(n,re.Full),[x,R])}return r&&(An[t][e]=r),r}function Pr(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Tt(n,e,t="-",r,a){let c="";(n<0||a&&n<=0)&&(a?n=1-n:(n=-n,c=t));let h=String(n);for(;h.length<e;)h="0"+h;return r&&(h=h.slice(h.length-e)),c+h}function Zt(n,e,t=0,r=!1,a=!1){return function(c,h){let _=function mi(n,e){switch(n){case gt.FullYear:return e.getFullYear();case gt.Month:return e.getMonth();case gt.Date:return e.getDate();case gt.Hours:return e.getHours();case gt.Minutes:return e.getMinutes();case gt.Seconds:return e.getSeconds();case gt.FractionalSeconds:return e.getMilliseconds();case gt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,c);if((t>0||_>-t)&&(_+=t),n===gt.Hours)0===_&&-12===t&&(_=12);else if(n===gt.FractionalSeconds)return function rs(n,e){return Tt(n,3).substring(0,e)}(_,e);const E=At(h,te.MinusSign);return Tt(_,e,E,r,a)}}function Yt(n,e,t=W.Format,r=!1){return function(a,c){return function Bn(n,e,t,r,a,c){switch(t){case ot.Months:return function Pt(n,e,t){const r=(0,g.cg1)(n),c=Qe([r[g.wAp.MonthsFormat],r[g.wAp.MonthsStandalone]],e);return Qe(c,t)}(e,a,r)[n.getMonth()];case ot.Days:return function Wt(n,e,t){const r=(0,g.cg1)(n),c=Qe([r[g.wAp.DaysFormat],r[g.wAp.DaysStandalone]],e);return Qe(c,t)}(e,a,r)[n.getDay()];case ot.DayPeriods:const h=n.getHours(),_=n.getMinutes();if(c){const C=function Kr(n){const e=(0,g.cg1)(n);return ii(e),(e[g.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?_r(r):[_r(r[0]),_r(r[1])])}(e),x=function Zr(n,e,t){const r=(0,g.cg1)(n);ii(r);const c=Qe([r[g.wAp.ExtraData][0],r[g.wAp.ExtraData][1]],e)||[];return Qe(c,t)||[]}(e,a,r),R=C.findIndex(z=>{if(Array.isArray(z)){const[K,ne]=z,Me=h>=K.hours&&_>=K.minutes,Le=h<ne.hours||h===ne.hours&&_<ne.minutes;if(K.hours<ne.hours){if(Me&&Le)return!0}else if(Me||Le)return!0}else if(z.hours===h&&z.minutes===_)return!0;return!1});if(-1!==R)return x[R]}return function at(n,e,t){const r=(0,g.cg1)(n),c=Qe([r[g.wAp.DayPeriodsFormat],r[g.wAp.DayPeriodsStandalone]],e);return Qe(c,t)}(e,a,r)[h<12?0:1];case ot.Eras:return function Ze(n,e){return Qe((0,g.cg1)(n)[g.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(a,c,n,e,t,r)}}function Cr(n){return function(e,t,r){const a=-1*r,c=At(t,te.MinusSign),h=a>0?Math.floor(a/60):Math.ceil(a/60);switch(n){case on.Short:return(a>=0?"+":"")+Tt(h,2,c)+Tt(Math.abs(a%60),2,c);case on.ShortGMT:return"GMT"+(a>=0?"+":"")+Tt(h,1,c);case on.Long:return"GMT"+(a>=0?"+":"")+Tt(h,2,c)+":"+Tt(Math.abs(a%60),2,c);case on.Extended:return 0===r?"Z":(a>=0?"+":"")+Tt(h,2,c)+":"+Tt(Math.abs(a%60),2,c);default:throw new Error(`Unknown zone width "${n}"`)}}}function Et(n){return sr(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function vt(n,e=!1){return function(t,r){let a;if(e){const c=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,h=t.getDate();a=1+Math.floor((h+c)/7)}else{const c=Et(t),h=function et(n){const e=sr(n,0,1).getDay();return sr(n,0,1+(e<=4?4:11)-e)}(c.getFullYear()),_=c.getTime()-h.getTime();a=1+Math.round(_/6048e5)}return Tt(a,n,At(r,te.MinusSign))}}function Nt(n,e=!1){return function(t,r){return Tt(Et(t).getFullYear(),n,At(r,te.MinusSign),e)}}const B={};function q(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Kt(n){return n instanceof Date&&!isNaN(n.valueOf())}function Zo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[a,c]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(a.trim()===e)return decodeURIComponent(c)}return null}class Yo{constructor(e,t,r,a){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=a}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Rs=(()=>{class n{constructor(t,r,a){this._viewContainer=t,this._template=r,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((a,c,h)=>{if(null==a.previousIndex)r.createEmbeddedView(this._template,new Yo(a.item,this._ngForOf,-1,-1),null===h?void 0:h);else if(null==h)r.remove(null===c?void 0:c);else if(null!==c){const _=r.get(c);r.move(_,h),as(_,a)}});for(let a=0,c=r.length;a<c;a++){const _=r.get(a).context;_.index=a,_.count=c,_.ngForOf=this._ngForOf}t.forEachIdentityChange(a=>{as(r.get(a.currentIndex),a)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function as(n,e){n.context.$implicit=e.item}const Ep=new g.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let Ph=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",a,c){if(null==t||""===t||t!=t)return null;try{return Jt(t,r,c||this.locale,a??this.defaultTimezone??void 0)}catch(h){throw function jn(n,e){return new g.vHH(2100,!1)}()}}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.soG,16),g.Y36(Ep,24))},n.\u0275pipe=g.Yjl({name:"date",type:n,pure:!0,standalone:!0}),n})(),Xo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function ur(n){return"server"===n}class Ps{}class Vs extends class td extends class he{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function se(n){X||(X=n)}(new Vs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function vu(){return Bs=Bs||document.querySelector("base"),Bs?Bs.getAttribute("href"):null}();return null==t?null:function Vr(n){Hn=Hn||document.createElement("a"),Hn.setAttribute("href",n);const e=Hn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Bs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Zo(document.cookie,e)}}let Hn,Bs=null;const an=new g.OlP("TRANSITION_ID"),Lc=[{provide:g.ip1,useFactory:function nd(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=k(),a=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let c=0;c<a.length;c++)r.remove(a[c])})}},deps:[an,ce,g.zs3],multi:!0}];let Vc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const wu=new g.OlP("EventManagerPlugins");let rd=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(a=>a.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,a){return this._findPluginFor(r).addEventListener(t,r,a)}addGlobalEventListener(t,r,a){return this._findPluginFor(r).addGlobalEventListener(t,r,a)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const a=this._plugins;for(let c=0;c<a.length;c++){const h=a[c];if(h.supports(t))return this._eventNameToPlugin.set(t,h),h}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(wu),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Eu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const a=k().getGlobalEventTarget(this._doc,e);if(!a)throw new Error(`Unsupported event target ${a} for event ${t}`);return this.addEventListener(a,t,r)}}let Us=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),r.add(a))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),fo=(()=>{class n extends Us{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,a){t.forEach(c=>{const h=this._doc.createElement("style");h.textContent=c,a.push(r.appendChild(h))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(id),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,a)=>{this._addStylesToHost(t,a,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(id))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ce))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function id(n){k().remove(n)}const po={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},sd=/%COMP%/g;function bu(n,e,t){for(let r=0;r<e.length;r++){let a=e[r];Array.isArray(a)?bu(n,a,t):(a=a.replace(sd,n),t.push(a))}return t}function od(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let go=(()=>{class n{constructor(t,r,a){this.eventManager=t,this.sharedStylesHost=r,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new mo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let a=this.rendererByCompId.get(r.id);return a||(a=new ad(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,a)),a.applyToHost(t),a}case 1:case g.ifc.ShadowDom:return new ud(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const a=bu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(rd),g.LFG(fo),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class mo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(po[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(aa(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(aa(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,a){if(a){t=a+":"+t;const c=po[a];c?e.setAttributeNS(c,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const a=po[r];a?e.removeAttributeNS(a,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,a){a&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,a&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,od(r)):this.eventManager.addEventListener(e,t,od(r))}}function aa(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class ad extends mo{constructor(e,t,r,a){super(e),this.component=r;const c=bu(a+"-"+r.id,r.styles,[]);t.addStyles(c),this.contentAttr=function wn(n){return"_ngcontent-%COMP%".replace(sd,n)}(a+"-"+r.id),this.hostAttr=function Du(n){return"_nghost-%COMP%".replace(sd,n)}(a+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ud extends mo{constructor(e,t,r,a){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=bu(a.id,a.styles,[]);for(let h=0;h<c.length;h++){const _=document.createElement("style");_.textContent=c[h],this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let er=(()=>{class n extends Eu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,a){return t.addEventListener(r,a,!1),()=>this.removeEventListener(t,r,a)}removeEventListener(t,r,a){return t.removeEventListener(r,a)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ce))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const ua=["alt","control","meta","shift"],ca={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let la=(()=>{class n extends Eu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,a){const c=n.parseEventName(r),h=n.eventCallback(c.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,c.domEventName,h))}static parseEventName(t){const r=t.toLowerCase().split("."),a=r.shift();if(0===r.length||"keydown"!==a&&"keyup"!==a)return null;const c=n._normalizeKey(r.pop());let h="",_=r.indexOf("code");if(_>-1&&(r.splice(_,1),h="code."),ua.forEach(C=>{const x=r.indexOf(C);x>-1&&(r.splice(x,1),h+=C+".")}),h+=c,0!=r.length||0===c.length)return null;const E={};return E.domEventName=a,E.fullKey=h,E}static matchEventFullKeyCode(t,r){let a=ca[t.key]||t.key,c="";return r.indexOf("code.")>-1&&(a=t.code,c="code."),!(null==a||!a)&&(a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),ua.forEach(h=>{h!==a&&(0,wi[h])(t)&&(c+=h+".")}),c+=a,c===r)}static eventCallback(t,r,a){return c=>{n.matchEventFullKeyCode(c,t)&&a.runGuarded(()=>r(c))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ce))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Su=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function Tu(){Vs.makeCurrent()},multi:!0},{provide:ce,useFactory:function ha(){return(0,g.RDi)(document),document},deps:[]}]),hs=new g.OlP(""),ld=[{provide:g.rWj,useClass:class jh{addToWindow(e){g.dqk.getAngularTestability=(r,a=!0)=>{const c=e.findTestabilityInTree(r,a);if(null==c)throw new Error("Could not find testability for element.");return c},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const a=g.dqk.getAllAngularTestabilities();let c=a.length,h=!1;const _=function(E){h=h||E,c--,0==c&&r(h)};a.forEach(function(E){E.whenStable(_)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:g.lri,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]}],fs=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function $s(){return new g.qLn},deps:[]},{provide:wu,useClass:er,multi:!0,deps:[ce,g.R0b,g.Lbi]},{provide:wu,useClass:la,multi:!0,deps:[ce]},{provide:go,useClass:go,deps:[rd,fo,g.AFp]},{provide:g.FYo,useExisting:go},{provide:Us,useExisting:fo},{provide:fo,useClass:fo,deps:[ce]},{provide:rd,useClass:rd,deps:[wu,g.R0b]},{provide:Ps,useClass:Vc,deps:[]},[]];let Uc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:an,useExisting:g.AFp},Lc]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(hs,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[...fs,...ld],imports:[Xo,g.hGG]}),n})();typeof window<"u"&&window;var Ur=F(2011),Io=F(4986),ya=F(8306),ei=F(8996),cr=F(7669);function nr(...n){const e=(0,cr.yG)(n);return(0,ei.D)(n,e)}var $n=F(2680),Do=F(8189);function _a(...n){return function ms(){return(0,Do.J)(1)}()((0,ei.D)(n,(0,cr.yG)(n)))}var ys=F(4482);function va(...n){const e=(0,cr.yG)(n);return(0,ys.e)((t,r)=>{(e?_a(n,t,e):_a(n,t)).subscribe(r)})}var jr=F(5403);function _s(){return(0,ys.e)((n,e)=>{let t,r=!1;n.subscribe((0,jr.x)(e,a=>{const c=t;t=a,r&&e.next([c,a]),r=!0}))})}var pn=F(4004);function Hr(n,e,t,r,a){return(c,h)=>{let _=t,E=e,C=0;c.subscribe((0,jr.x)(h,x=>{const R=C++;E=_?n(E,x,R):(_=!0,x),r&&h.next(E)},a&&(()=>{_&&h.next(E),h.complete()})))}}function wa(n,e){return(0,ys.e)(Hr(n,e,arguments.length>=2,!0))}var qs=F(4671);function Gc(n,e){return n===e}function Ks(n,e){return(0,ys.e)((t,r)=>{let a=0;t.subscribe((0,jr.x)(r,c=>n.call(e,c,a++)&&r.next(c)))})}F(1277);var nt,Ea=F(3942),ge=F(5861),ui=F(9681),bo=F(4859),Ar=F(1877),Bt=F(2090),Bm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},lr={},Co=Co||{},mt=Bm||self;function Zs(){}function To(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ao(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var ji="closure_uid_"+(1e9*Math.random()>>>0),vs=0;function kn(n,e,t){return n.call.apply(n.bind,arguments)}function Gh(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,r),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function Pn(n,e,t){return(Pn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?kn:Gh).apply(null,arguments)}function So(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function En(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,a,c){for(var h=Array(arguments.length-2),_=2;_<arguments.length;_++)h[_-2]=arguments[_];return e.prototype[a].apply(r,h)}}function Hi(){this.s=this.s,this.o=this.o}Hi.prototype.s=!1,Hi.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function $r(n){Object.prototype.hasOwnProperty.call(n,ji)&&n[ji]||(n[ji]=++vs)}(this)},Hi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const b=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function S(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function P(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(To(r)){const a=n.length||0,c=r.length||0;n.length=a+c;for(let h=0;h<c;h++)n[a+h]=r[h]}else n.push(r)}}function G(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var ee=function(){if(!mt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{mt.addEventListener("test",Zs,e),mt.removeEventListener("test",Zs,e)}catch{}return n}();function Ee(n){return/^[\s\xa0]*$/.test(n)}var Ve=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function We(n,e){return n<e?-1:n>e?1:0}function it(){var n=mt.navigator;return n&&(n=n.userAgent)?n:""}function yt(n){return-1!=it().indexOf(n)}function ft(n){return ft[" "](n),n}ft[" "]=Zs;var Ei,n,Gn=yt("Opera"),Sr=yt("Trident")||yt("MSIE"),ws=yt("Edge"),Ys=ws||Sr,zc=yt("Gecko")&&!(-1!=it().toLowerCase().indexOf("webkit")&&!yt("Edge"))&&!(yt("Trident")||yt("MSIE"))&&!yt("Edge"),Wc=-1!=it().toLowerCase().indexOf("webkit")&&!yt("Edge");function Qs(){var n=mt.document;return n?n.documentMode:void 0}e:{var Es="",Ia=(n=it(),zc?/rv:([^\);]+)(\)|;)/.exec(n):ws?/Edge\/([\d\.]+)/.exec(n):Sr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Wc?/WebKit\/(\S+)/.exec(n):Gn?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Ia&&(Es=Ia?Ia[1]:""),Sr){var Ru=Qs();if(null!=Ru&&Ru>parseFloat(Es)){Ei=String(Ru);break e}}Ei=Es}var qc={};var Ap=mt.document&&Sr&&(Qs()||parseInt(Ei,10))||void 0;function gd(n,e){if(G.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(zc){e:{try{ft(e.nodeName);var a=!0;break e}catch{}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Hm[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&gd.X.h.call(this)}}En(gd,G);var Hm={2:"touch",3:"pen",4:"mouse"};gd.prototype.h=function(){gd.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Kc="closure_listenable_"+(1e6*Math.random()|0),zh=0;function Sp(n,e,t,r,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=a,this.key=++zh,this.ba=this.ea=!1}function Wh(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Zc(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function $m(n){const e={};for(const t in n)e[t]=n[t];return e}const Gm="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zm(n,e){let t,r;for(let a=1;a<arguments.length;a++){for(t in r=arguments[a],r)n[t]=r[t];for(let c=0;c<Gm.length;c++)t=Gm[c],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function md(n){this.src=n,this.g={},this.h=0}function xp(n,e){var t=e.type;if(t in n.g){var c,r=n.g[t],a=b(r,e);(c=0<=a)&&Array.prototype.splice.call(r,a,1),c&&(Wh(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function qh(n,e,t,r){for(var a=0;a<n.length;++a){var c=n[a];if(!c.ba&&c.listener==e&&c.capture==!!t&&c.ha==r)return a}return-1}md.prototype.add=function(n,e,t,r,a){var c=n.toString();(n=this.g[c])||(n=this.g[c]=[],this.h++);var h=qh(n,e,r,a);return-1<h?(e=n[h],t||(e.ea=!1)):((e=new Sp(e,this.src,c,!!r,a)).ea=t,n.push(e)),e};var yd="closure_lm_"+(1e6*Math.random()|0),Yc={};function Qc(n,e,t,r,a){if(r&&r.once)return $i(n,e,t,r,a);if(Array.isArray(e)){for(var c=0;c<e.length;c++)Qc(n,e[c],t,r,a);return null}return t=Qh(t),n&&n[Kc]?n.N(e,t,Ao(r)?!!r.capture:!!r,a):Kh(n,e,t,!1,r,a)}function Kh(n,e,t,r,a,c){if(!e)throw Error("Invalid event type");var h=Ao(a)?!!a.capture:!!a,_=ku(n);if(_||(n[yd]=_=new md(n)),(t=_.add(e,t,r,h,c)).proxy)return t;if(r=function _d(){const e=Mp;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)ee||(a=h),void 0===a&&(a=!1),n.addEventListener(e.toString(),r,a);else if(n.attachEvent)n.attachEvent(vd(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function $i(n,e,t,r,a){if(Array.isArray(e)){for(var c=0;c<e.length;c++)$i(n,e[c],t,r,a);return null}return t=Qh(t),n&&n[Kc]?n.O(e,t,Ao(r)?!!r.capture:!!r,a):Kh(n,e,t,!0,r,a)}function Zh(n,e,t,r,a){if(Array.isArray(e))for(var c=0;c<e.length;c++)Zh(n,e[c],t,r,a);else r=Ao(r)?!!r.capture:!!r,t=Qh(t),n&&n[Kc]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=qh(c=n.g[e],t,r,a))&&(Wh(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete n.g[e],n.h--))):n&&(n=ku(n))&&(e=n.g[e.toString()],n=-1,e&&(n=qh(e,t,r,a)),(t=-1<n?e[n]:null)&&Yh(t))}function Yh(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Kc])xp(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(vd(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=ku(e))?(xp(t,n),0==t.h&&(t.src=null,e[yd]=null)):Wh(n)}}}function vd(n){return n in Yc?Yc[n]:Yc[n]="on"+n}function Mp(n,e){if(n.ba)n=!0;else{e=new gd(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Yh(n),n=t.call(r,e)}return n}function ku(n){return(n=n[yd])instanceof md?n:null}var wd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qh(n){return"function"==typeof n?n:(n[wd]||(n[wd]=function(e){return n.handleEvent(e)}),n[wd])}function dr(){Hi.call(this),this.i=new md(this),this.P=this,this.I=null}function hr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new G(e,n);else if(e instanceof G)e.target=e.target||n;else{var a=e;zm(e=new G(r,n),a)}if(a=!0,t)for(var c=t.length-1;0<=c;c--){var h=e.g=t[c];a=Ed(h,r,!0,e)&&a}if(a=Ed(h=e.g=n,r,!0,e)&&a,a=Ed(h,r,!1,e)&&a,t)for(c=0;c<t.length;c++)a=Ed(h=e.g=t[c],r,!1,e)&&a}function Ed(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,c=0;c<e.length;++c){var h=e[c];if(h&&!h.ba&&h.capture==t){var _=h.listener,E=h.ha||h.src;h.ea&&xp(n.i,h),a=!1!==_.call(E,r)&&a}}return a&&!r.defaultPrevented}En(dr,Hi),dr.prototype[Kc]=!0,dr.prototype.removeEventListener=function(n,e,t,r){Zh(this,n,e,t,r)},dr.prototype.M=function(){if(dr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Wh(t[r]);delete n.g[e],n.h--}}this.I=null},dr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},dr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Jh=mt.JSON.stringify;function xr(){var n=ef;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Fu,Np=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Js,n=>n.reset());class Js{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Mr(n){mt.setTimeout(()=>{throw n},0)}function Pu(n,e){Fu||function Wm(){var n=mt.Promise.resolve(void 0);Fu=function(){n.then(qm)}}(),Jc||(Fu(),Jc=!0),ef.add(n,e)}var Jc=!1,ef=new class Xh{constructor(){this.h=this.g=null}add(e,t){const r=Np.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function qm(){for(var n;n=xr();){try{n.h.call(n.g)}catch(t){Mr(t)}var e=Np;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Jc=!1}function Da(n,e){dr.call(this),this.h=n||1,this.g=e||mt,this.j=Pn(this.lb,this),this.l=Date.now()}function tf(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Id(n,e,t){if("function"==typeof n)t&&(n=Pn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Pn(n.handleEvent,n)}return 2147483647<Number(e)?-1:mt.setTimeout(n,e||0)}function Dd(n){n.g=Id(()=>{n.g=null,n.i&&(n.i=!1,Dd(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}En(Da,dr),(nt=Da.prototype).ca=!1,nt.R=null,nt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),hr(this,"tick"),this.ca&&(tf(this),this.start()))}},nt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},nt.M=function(){Da.X.M.call(this),tf(this),delete this.g};class Km extends Hi{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Dd(this)}M(){super.M(),this.g&&(mt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ba(n){Hi.call(this),this.h=n,this.g={}}En(ba,Hi);var bd=[];function Op(n,e,t,r){Array.isArray(t)||(t&&(bd[0]=t.toString()),t=bd);for(var a=0;a<t.length;a++){var c=Qc(e,t[a],r||n.handleEvent,!1,n.h||n);if(!c)break;n.g[c.key]=c}}function nf(n){Zc(n.g,function(e,t){this.g.hasOwnProperty(t)&&Yh(e)},n),n.g={}}function Xc(){this.g=!0}function Lu(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function tl(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var a=r[1];if(Array.isArray(a)&&!(1>a.length)){var c=a[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var h=1;h<a.length;h++)a[h]=""}}}return Jh(t)}catch{return e}}(n,t)+(r?" "+r:"")})}ba.prototype.M=function(){ba.X.M.call(this),nf(this)},ba.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Xc.prototype.Aa=function(){this.g=!1},Xc.prototype.info=function(){};var xo={},Ym=null;function Ii(){return Ym=Ym||new dr}function Cd(n){G.call(this,xo.Pa,n)}function Vu(n){const e=Ii();hr(e,new Cd(e))}function Rp(n,e){G.call(this,xo.STAT_EVENT,n),this.stat=e}function fr(n){const e=Ii();hr(e,new Rp(e,n))}function kp(n,e){G.call(this,xo.Qa,n),this.size=e}function nl(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return mt.setTimeout(function(){n()},e)}xo.Pa="serverreachability",En(Cd,G),xo.STAT_EVENT="statevent",En(Rp,G),xo.Qa="timingevent",En(kp,G);var Td={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Pp={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Ta(){}function Ad(){}Ta.prototype.h=null;var rf,Aa={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Sd(){G.call(this,"d")}function rl(){G.call(this,"c")}function il(){}function Mo(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new ba(this),this.O=No,this.T=new Da(n=Ys?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new sl}function sl(){this.i=null,this.g="",this.h=!1}En(Sd,G),En(rl,G),En(il,Ta),il.prototype.g=function(){return new XMLHttpRequest},il.prototype.i=function(){return{}},rf=new il;var No=45e3,xd={},Sa={};function sf(n,e,t){n.K=1,n.v=Ro(Di(e)),n.s=t,n.P=!0,ci(n,null)}function ci(n,e){n.F=Date.now(),Oo(n),n.A=Di(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),N(t.i,"t",r),n.C=0,t=n.l.H,n.h=new sl,n.g=cy(n.l,t?e:null,!n.s),0<n.N&&(n.L=new Km(Pn(n.La,n,n.g),n.N)),Op(n.S,n.g,"readystatechange",n.ib),e=n.H?$m(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Vu(),function Ca(n,e,t,r,a,c){n.info(function(){if(n.g)if(c)for(var h="",_=c.split("&"),E=0;E<_.length;E++){var C=_[E].split("=");if(1<C.length){var x=C[0];C=C[1];var R=x.split("_");h=2<=R.length&&"type"==R[1]?h+(x+"=")+C+"&":h+(x+"=redacted&")}}else h=null;else h=c;return"XMLHTTP REQ ("+r+") [attempt "+a+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Xs(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function of(n,e,t){let a,r=!0;for(;!n.I&&n.C<t.length;){if(a=Lp(n,t),a==Sa){4==e&&(n.o=4,fr(14),r=!1),Lu(n.j,n.m,null,"[Incomplete Response]");break}if(a==xd){n.o=4,fr(15),Lu(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Lu(n.j,n.m,a,null),li(n,a)}Xs(n)&&a!=Sa&&a!=xd&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,fr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),ay(e),e.K=!0,fr(11))):(Lu(n.j,n.m,t,"[Invalid Chunked Response]"),Is(n),xa(n))}function Lp(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Sa:(t=Number(e.substring(t,r)),isNaN(t)?xd:(r+=1)+t>e.length?Sa:(e=e.substr(r,t),n.C=r+t,e))}function Oo(n){n.V=Date.now()+n.O,ol(n,n.O)}function ol(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=nl(Pn(n.gb,n),e)}function Bu(n){n.B&&(mt.clearTimeout(n.B),n.B=null)}function xa(n){0==n.l.G||n.I||uw(n.l,n)}function Is(n){Bu(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,tf(n.T),nf(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function li(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||qn(t.h,n)))if(!n.J&&qn(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var a=r;if(0==a[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;zp(t),Hp(t)}oy(t),fr(18)}}else t.Ba=a[1],0<t.Ba-t.T&&37500>a[2]&&t.L&&0==t.A&&!t.v&&(t.v=nl(Pn(t.cb,t),6e3));if(1>=Wn(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Pd(t,11)}else if((n.J||t.g==n)&&zp(t),!Ee(e))for(a=t.Fa.g.parse(e),e=0;e<a.length;e++){let C=a[e];if(t.T=C[0],C=C[1],2==t.G)if("c"==C[0]){t.I=C[1],t.ka=C[2];const x=C[3];null!=x&&(t.ma=x,t.j.info("VER="+t.ma));const R=C[4];null!=R&&(t.Ca=R,t.j.info("SVER="+t.Ca));const z=C[5];null!=z&&"number"==typeof z&&0<z&&(t.J=r=1.5*z,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const K=n.g;if(K){const ne=K.g?K.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ne){var c=r.h;c.g||-1==ne.indexOf("spdy")&&-1==ne.indexOf("quic")&&-1==ne.indexOf("h2")||(c.j=c.l,c.g=new Set,c.h&&(Ds(c,c.h),c.h=null))}if(r.D){const Me=K.g?K.g.getResponseHeader("X-HTTP-Session-Id"):null;Me&&(r.za=Me,en(r.F,r.D,Me))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var h=n;if((r=t).sa=uy(r,r.H?r.ka:null,r.V),h.J){df(r.h,h);var _=h,E=r.J;E&&_.setTimeout(E),_.B&&(Bu(_),Oo(_)),r.g=h}else sy(r);0<t.i.length&&Gp(t)}else"stop"!=C[0]&&"close"!=C[0]||Pd(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?Pd(t,7):kd(t):"noop"!=C[0]&&t.l&&t.l.wa(C),t.A=0)}Vu()}catch{}}function Md(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(To(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function uf(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(To(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function af(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(To(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),a=r.length,c=0;c<a;c++)e.call(void 0,r[c],t&&t[c],n)}(nt=Mo.prototype).setTimeout=function(n){this.O=n},nt.ib=function(n){n=n.target;const e=this.L;e&&3==Po(n)?e.l():this.La(n)},nt.La=function(n){try{if(n==this.g)e:{const x=Po(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>x)&&(3!=x||Ys||this.g&&(this.h.h||this.g.fa()||iw(this.g)))){this.I||4!=x||7==e||Vu(),Bu(this);var t=this.g.aa();this.Y=t;t:if(Xs(this)){var r=iw(this.g);n="";var a=r.length,c=4==Po(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Is(this),xa(this);var h="";break t}this.h.i=new mt.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:c&&e==a-1});r.splice(0,a),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.fa();if(this.i=200==t,function Zm(n,e,t,r,a,c,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+c+" "+h})}(this.j,this.u,this.A,this.m,this.U,x,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var _,E=this.g;if((_=E.g?E.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ee(_)){var C=_;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,fr(12),Is(this),xa(this);break e}Lu(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,li(this,t)}this.P?(of(this,x,h),Ys&&this.i&&3==x&&(Op(this.S,this.T,"tick",this.hb),this.T.start())):(Lu(this.j,this.m,h,null),li(this,h)),4==x&&Is(this),this.i&&!this.I&&(4==x?uw(this.l,this):(this.i=!1,Oo(this)))}else 400==t&&0<h.indexOf("Unknown SID")?(this.o=3,fr(12)):(this.o=0,fr(13)),Is(this),xa(this)}}}catch{}},nt.hb=function(){if(this.g){var n=Po(this.g),e=this.g.fa();this.C<e.length&&(Bu(this),of(this,n,e),this.i&&4!=n&&Oo(this))}},nt.cancel=function(){this.I=!0,Is(this)},nt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function el(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Vu(),fr(17)),Is(this),this.o=2,xa(this)):ol(this,this.V-n)};var Nd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zn(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof zn){this.h=void 0!==e?e:n.h,ju(this,n.j),this.s=n.s,this.g=n.g,Od(this,n.m),this.l=n.l,e=n.i;var t=new d;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Gi(this,t),this.o=n.o}else n&&(t=String(n).match(Nd))?(this.h=!!e,ju(this,t[1]||"",!0),this.s=ko(t[2]||""),this.g=ko(t[3]||"",!0),Od(this,t[4]),this.l=ko(t[5]||"",!0),Gi(this,t[6]||"",!0),this.o=ko(t[7]||"")):(this.h=!!e,this.i=new d(null,this.h))}function Di(n){return new zn(n)}function ju(n,e,t){n.j=t?ko(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Od(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Gi(n,e,t){e instanceof d?(n.i=e,function oe(n,e){e&&!n.j&&(p(n),n.i=null,n.g.forEach(function(t,r){var a=r.toLowerCase();r!=a&&(v(this,r),N(this,a,t))},n)),n.j=e}(n.i,n.h)):(t||(e=zi(e,lf)),n.i=new d(e,n.h))}function en(n,e,t){n.i.set(e,t)}function Ro(n){return en(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ko(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function zi(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,cf),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function cf(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}zn.prototype.toString=function(){var n=[],e=this.j;e&&n.push(zi(e,Vp,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(zi(e,Vp,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(zi(t,"/"==t.charAt(0)?Qm:nw,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",zi(t,m)),n.join("")};var Vp=/[#\/\?@]/g,nw=/[#\?:]/g,Qm=/[#\?]/g,lf=/[#\?@]/g,m=/#/g;function d(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function p(n){n.g||(n.g=new Map,n.h=0,n.i&&function Uu(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),a=null;if(0<=r){var c=n[t].substring(0,r);a=n[t].substring(r+1)}else c=n[t];e(c,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function v(n,e){p(n),e=$(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function A(n,e){return p(n),e=$(n,e),n.g.has(e)}function N(n,e,t){v(n,e),0<t.length&&(n.i=null,n.g.set($(n,e),S(t)),n.h+=t.length)}function $(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Je(n){this.l=n||wt,n=mt.PerformanceNavigationTiming?0<(n=mt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(mt.g&&mt.g.Ga&&mt.g.Ga()&&mt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(nt=d.prototype).add=function(n,e){p(this),this.i=null,n=$(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},nt.forEach=function(n,e){p(this),this.g.forEach(function(t,r){t.forEach(function(a){n.call(e,a,r,this)},this)},this)},nt.oa=function(){p(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const a=n[r];for(let c=0;c<a.length;c++)t.push(e[r])}return t},nt.W=function(n){p(this);let e=[];if("string"==typeof n)A(this,n)&&(e=e.concat(this.g.get($(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},nt.set=function(n,e){return p(this),this.i=null,A(this,n=$(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},nt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},nt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const c=encodeURIComponent(String(r)),h=this.W(r);for(r=0;r<h.length;r++){var a=c;""!==h[r]&&(a+="="+encodeURIComponent(String(h[r]))),n.push(a)}}return this.i=n.join("&")};var wt=10;function pt(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Wn(n){return n.h?1:n.g?n.g.size:0}function qn(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Ds(n,e){n.g?n.g.add(e):n.h=e}function df(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function hf(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return S(n.i)}function ff(){}function Jm(){this.g=new ff}function Bp(n,e,t){const r=t||"";try{Md(n,function(a,c){let h=a;Ao(a)&&(h=Jh(a)),e.push(r+c+"="+encodeURIComponent(h))})}catch(a){throw e.push(r+"type="+encodeURIComponent("_badmap")),a}}function Hu(n,e,t,r,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(r)}catch{}}function Ma(n){this.l=n.ac||null,this.j=n.jb||!1}function al(n,e){dr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=pf,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Je.prototype.cancel=function(){if(this.i=hf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},ff.prototype.stringify=function(n){return mt.JSON.stringify(n,void 0)},ff.prototype.parse=function(n){return mt.JSON.parse(n,void 0)},En(Ma,Ta),Ma.prototype.g=function(){return new al(this.l,this.j)},Ma.prototype.i=function(n){return function(){return n}}({}),En(al,dr);var pf=0;function Rd(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Na(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Wi(n)}function Wi(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(nt=al.prototype).open=function(n,e){if(this.readyState!=pf)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Wi(this)},nt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||mt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},nt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Na(this)),this.readyState=pf},nt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Wi(this)),this.g&&(this.readyState=3,Wi(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof mt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Rd(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},nt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Na(this):Wi(this),3==this.readyState&&Rd(this)}},nt.Va=function(n){this.g&&(this.response=this.responseText=n,Na(this))},nt.Ua=function(n){this.g&&(this.response=n,Na(this))},nt.ga=function(){this.g&&Na(this)},nt.setRequestHeader=function(n,e){this.v.append(n,e)},nt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},nt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(al.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var gf=mt.JSON.parse;function Fn(n){dr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ey,this.K=this.L=!1}En(Fn,dr);var ey="",rw=/^https?$/i,pC=["POST","PUT"];function sI(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Up(n),ty(n)}function Up(n){n.D||(n.D=!0,hr(n,"complete"),hr(n,"error"))}function jp(n){if(n.h&&typeof Co<"u"&&(!n.C[1]||4!=Po(n)||2!=n.aa()))if(n.v&&4==Po(n))Id(n.Ha,0,n);else if(hr(n,"readystatechange"),4==Po(n)){n.h=!1;try{const _=n.aa();e:switch(_){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===_){var a=String(n.H).match(Nd)[1]||null;if(!a&&mt.self&&mt.self.location){var c=mt.self.location.protocol;a=c.substr(0,c.length-1)}r=!rw.test(a?a.toLowerCase():"")}t=r}if(t)hr(n,"complete"),hr(n,"success");else{n.m=6;try{var h=2<Po(n)?n.g.statusText:""}catch{h=""}n.j=h+" ["+n.aa()+"]",Up(n)}}finally{ty(n)}}}function ty(n,e){if(n.g){oI(n);const t=n.g,r=n.C[0]?Zs:null;n.g=null,n.C=null,e||hr(n,"ready");try{t.onreadystatechange=r}catch{}}}function oI(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(mt.clearTimeout(n.A),n.A=null)}function Po(n){return n.g?n.g.readyState:0}function iw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case ey:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function sw(n){let e="";return Zc(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function ny(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=sw(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):en(n,e,t))}function mf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function ry(n){this.Ca=0,this.i=[],this.j=new Xc,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=mf("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=mf("baseRetryDelayMs",5e3,n),this.bb=mf("retryDelaySeedMs",1e4,n),this.$a=mf("forwardChannelMaxRetries",2,n),this.ta=mf("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Je(n&&n.concurrentRequestLimit),this.Fa=new Jm,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function kd(n){if($p(n),3==n.G){var e=n.U++,t=Di(n.F);en(t,"SID",n.I),en(t,"RID",e),en(t,"TYPE","terminate"),yf(n,t),(e=new Mo(n,n.j,e,void 0)).K=2,e.v=Ro(Di(t)),t=!1,mt.navigator&&mt.navigator.sendBeacon&&(t=mt.navigator.sendBeacon(e.v.toString(),"")),!t&&mt.Image&&((new Image).src=e.v,t=!0),t||(e.g=cy(e.l,null),e.g.da(e.v)),e.F=Date.now(),Oo(e)}Fd(n)}function Hp(n){n.g&&(ay(n),n.g.cancel(),n.g=null)}function $p(n){Hp(n),n.u&&(mt.clearTimeout(n.u),n.u=null),zp(n),n.h.cancel(),n.m&&("number"==typeof n.m&&mt.clearTimeout(n.m),n.m=null)}function Gp(n){pt(n.h)||n.m||(n.m=!0,Pu(n.Ja,n),n.C=0)}function ow(n,e){var t;t=e?e.m:n.U++;const r=Di(n.F);en(r,"SID",n.I),en(r,"RID",t),en(r,"AID",n.T),yf(n,r),n.o&&n.s&&ny(r,n.o,n.s),t=new Mo(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=iy(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Ds(n.h,t),sf(t,r,e)}function yf(n,e){n.ia&&Zc(n.ia,function(t,r){en(e,r,t)}),n.l&&Md({},function(t,r){en(e,r,t)})}function iy(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Pn(n.l.Ra,n.l,n):null;e:{var a=n.i;let c=-1;for(;;){const h=["count="+t];-1==c?0<t?(c=a[0].h,h.push("ofs="+c)):c=0:h.push("ofs="+c);let _=!0;for(let E=0;E<t;E++){let C=a[E].h;const x=a[E].g;if(C-=c,0>C)c=Math.max(0,a[E].h-100),_=!1;else try{Bp(x,h,"req"+C+"_")}catch{r&&r(x)}}if(_){r=h.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function sy(n){n.g||n.u||(n.Z=1,Pu(n.Ia,n),n.A=0)}function oy(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=nl(Pn(n.Ia,n),aI(n,n.A)),n.A++,0))}function ay(n){null!=n.B&&(mt.clearTimeout(n.B),n.B=null)}function aw(n){n.g=new Mo(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Di(n.sa);en(e,"RID","rpc"),en(e,"SID",n.I),en(e,"CI",n.L?"0":"1"),en(e,"AID",n.T),en(e,"TYPE","xmlhttp"),yf(n,e),n.o&&n.s&&ny(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Ro(Di(e)),t.s=null,t.P=!0,ci(t,n)}function zp(n){null!=n.v&&(mt.clearTimeout(n.v),n.v=null)}function uw(n,e){var t=null;if(n.g==e){zp(n),ay(n),n.g=null;var r=2}else{if(!qn(n.h,e))return;t=e.D,df(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var a=n.C;hr(r=Ii(),new kp(r,t)),Gp(n)}else sy(n);else if(3==(a=e.o)||0==a&&0<n.pa||!(1==r&&function pr(n,e){return!(Wn(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=nl(Pn(n.Ja,n,e),aI(n,n.C)),n.C++,0)))}(n,e)||2==r&&oy(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),a){case 1:Pd(n,5);break;case 4:Pd(n,10);break;case 3:Pd(n,6);break;default:Pd(n,2)}}function aI(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Pd(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Pn(n.kb,n);t||(t=new zn("//www.google.com/images/cleardot.gif"),mt.location&&"http"==mt.location.protocol||ju(t,"https"),Ro(t)),function Xm(n,e){const t=new Xc;if(mt.Image){const r=new Image;r.onload=So(Hu,t,r,"TestLoadImage: loaded",!0,e),r.onerror=So(Hu,t,r,"TestLoadImage: error",!1,e),r.onabort=So(Hu,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=So(Hu,t,r,"TestLoadImage: timeout",!1,e),mt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else fr(2);n.G=0,n.l&&n.l.va(e),Fd(n),$p(n)}function Fd(n){if(n.G=0,n.la=[],n.l){const e=hf(n.h);(0!=e.length||0!=n.i.length)&&(P(n.la,e),P(n.la,n.i),n.h.i.length=0,S(n.i),n.i.length=0),n.l.ua()}}function uy(n,e,t){var r=t instanceof zn?Di(t):new zn(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Od(r,r.m);else{var a=mt.location;r=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var c=new zn(null,void 0);r&&ju(c,r),e&&(c.g=e),a&&Od(c,a),t&&(c.l=t),r=c}return e=n.za,(t=n.D)&&e&&en(r,t,e),en(r,"VER",n.ma),yf(n,r),r}function cy(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Fn(t&&n.Da&&!n.ra?new Ma({jb:!0}):n.ra)).Ka(n.H),e}function ly(){}function _f(){if(Sr&&!(10<=Number(Ap)))throw Error("Environmental error: no available transport.")}function qi(n,e){dr.call(this),this.g=new ry(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Ee(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ee(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new $u(this)}function dy(n){Sd.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function hy(){rl.call(this),this.status=1}function $u(n){this.g=n}(nt=Fn.prototype).Ka=function(n){this.L=n},nt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():rf.g(),this.C=function Fp(n){return n.h||(n.h=n.i())}(this.u?this.u:rf),this.g.onreadystatechange=Pn(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(c){return void sI(this,c)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var a in r)t.set(a,r[a]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const c of r.keys())t.set(c,r.get(c))}r=Array.from(t.keys()).find(c=>"content-type"==c.toLowerCase()),a=mt.FormData&&n instanceof mt.FormData,!(0<=b(pC,e))||r||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[c,h]of t)this.g.setRequestHeader(c,h);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{oI(this),0<this.B&&((this.K=function gC(n){return Sr&&function Um(){return function rr(n){var e=qc;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Ve(String(Ei)).split("."),t=Ve("9").split("."),r=Math.max(e.length,t.length);for(let h=0;0==n&&h<r;h++){var a=e[h]||"",c=t[h]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==a[0].length&&0==c[0].length)break;n=We(0==a[1].length?0:parseInt(a[1],10),0==c[1].length?0:parseInt(c[1],10))||We(0==a[2].length,0==c[2].length)||We(a[2],c[2]),a=a[3],c=c[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Pn(this.qa,this)):this.A=Id(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(c){sI(this,c)}},nt.qa=function(){typeof Co<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,hr(this,"timeout"),this.abort(8))},nt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,hr(this,"complete"),hr(this,"abort"),ty(this))},nt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ty(this,!0)),Fn.X.M.call(this)},nt.Ha=function(){this.s||(this.F||this.v||this.l?jp(this):this.fb())},nt.fb=function(){jp(this)},nt.aa=function(){try{return 2<Po(this)?this.g.status:-1}catch{return-1}},nt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},nt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),gf(e)}},nt.Ea=function(){return this.m},nt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(nt=ry.prototype).ma=8,nt.G=1,nt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const a=new Mo(this,this.j,n,void 0);let c=this.s;if(this.S&&(c?(c=$m(c),zm(c,this.S)):c=this.S),null!==this.o||this.N||(a.H=c,c=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=iy(this,a,e),en(t=Di(this.F),"RID",n),en(t,"CVER",22),this.D&&en(t,"X-HTTP-Session-Id",this.D),yf(this,t),c&&(this.N?e="headers="+encodeURIComponent(String(sw(c)))+"&"+e:this.o&&ny(t,this.o,c)),Ds(this.h,a),this.Ya&&en(t,"TYPE","init"),this.O?(en(t,"$req",e),en(t,"SID","null"),a.Z=!0,sf(a,t,null)):sf(a,t,e),this.G=2}}else 3==this.G&&(n?ow(this,n):0==this.i.length||pt(this.h)||ow(this))},nt.Ia=function(){if(this.u=null,aw(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=nl(Pn(this.eb,this),n)}},nt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,fr(10),Hp(this),aw(this))},nt.cb=function(){null!=this.v&&(this.v=null,Hp(this),oy(this),fr(19))},nt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),fr(2)):(this.j.info("Failed to ping google.com"),fr(1))},(nt=ly.prototype).xa=function(){},nt.wa=function(){},nt.va=function(){},nt.ua=function(){},nt.Ra=function(){},_f.prototype.g=function(n,e){return new qi(n,e)},En(qi,dr),qi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;fr(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=uy(n,null,n.V),Gp(n)},qi.prototype.close=function(){kd(this.g)},qi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Jh(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Gp(e)},qi.prototype.M=function(){this.g.l=null,delete this.j,kd(this.g),delete this.g,qi.X.M.call(this)},En(dy,Sd),En(hy,rl),En($u,ly),$u.prototype.xa=function(){hr(this.g,"a")},$u.prototype.wa=function(n){hr(this.g,new dy(n))},$u.prototype.va=function(n){hr(this.g,new hy)},$u.prototype.ua=function(){hr(this.g,"b")},_f.prototype.createWebChannel=_f.prototype.g,qi.prototype.send=qi.prototype.u,qi.prototype.open=qi.prototype.m,qi.prototype.close=qi.prototype.close,Td.NO_ERROR=0,Td.TIMEOUT=8,Td.HTTP_ERROR=6,Pp.COMPLETE="complete",Ad.EventType=Aa,Aa.OPEN="a",Aa.CLOSE="b",Aa.ERROR="c",Aa.MESSAGE="d",dr.prototype.listen=dr.prototype.N,Fn.prototype.listenOnce=Fn.prototype.O,Fn.prototype.getLastError=Fn.prototype.Oa,Fn.prototype.getLastErrorCode=Fn.prototype.Ea,Fn.prototype.getStatus=Fn.prototype.aa,Fn.prototype.getResponseJson=Fn.prototype.Sa,Fn.prototype.getResponseText=Fn.prototype.fa,Fn.prototype.send=Fn.prototype.da,Fn.prototype.setWithCredentials=Fn.prototype.Ka;var mC=lr.createWebChannelTransport=function(){return new _f},uI=lr.getStatEventTarget=function(){return Ii()},vf=lr.ErrorCode=Td,cw=lr.EventType=Pp,lw=lr.Event=xo,Gu=lr.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},cI=lr.FetchXmlHttpFactory=Ma,Ld=lr.WebChannel=Ad,Wp=lr.XhrIo=Fn;const dw="@firebase/firestore";class gr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gr.UNAUTHENTICATED=new gr(null),gr.GOOGLE_CREDENTIALS=new gr("google-credentials-uid"),gr.FIRST_PARTY=new gr("first-party-uid"),gr.MOCK_USER=new gr("mock-user");let Oa="9.14.0";const Ki=new Ar.Yd("@firebase/firestore");function qp(){return Ki.logLevel}function xe(n,...e){if(Ki.logLevel<=Ar.in.DEBUG){const t=e.map(Wu);Ki.debug(`Firestore (${Oa}): ${n}`,...t)}}function ir(n,...e){if(Ki.logLevel<=Ar.in.ERROR){const t=e.map(Wu);Ki.error(`Firestore (${Oa}): ${n}`,...t)}}function zu(n,...e){if(Ki.logLevel<=Ar.in.WARN){const t=e.map(Wu);Ki.warn(`Firestore (${Oa}): ${n}`,...t)}}function Wu(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function rt(n="Unexpected state"){const e=`FIRESTORE (${Oa}) INTERNAL ASSERTION FAILED: `+n;throw ir(e),new Error(e)}function Ct(n,e){n||rt()}function qe(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends Bt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class mr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class hw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(gr.UNAUTHENTICATED))}shutdown(){}}class yC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class dI{constructor(e){this.t=e,this.currentUser=gr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let a=this.i;const c=C=>this.i!==a?(a=this.i,t(C)):Promise.resolve();let h=new mr;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new mr,e.enqueueRetryable(()=>c(this.currentUser))};const _=()=>{const C=h;e.enqueueRetryable((0,ge.Z)(function*(){yield C.promise,yield c(r.currentUser)}))},E=C=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),_()};this.t.onInit(C=>E(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?E(C):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new mr)}},0),_()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct("string"==typeof r.accessToken),new hw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ct(null===e||"string"==typeof e),new gr(e)}}class Kp{constructor(e,t,r,a){this.h=e,this.l=t,this.m=r,this.g=a,this.type="FirstParty",this.user=gr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Ct(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class hI{constructor(e,t,r,a){this.h=e,this.l=t,this.m=r,this.g=a}getToken(){return Promise.resolve(new Kp(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(gr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ul{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wf{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=c=>{null!=c.error&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.A;return this.A=c.token,xe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>r(c))};const a=c=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.T.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.T.getImmediate({optional:!0});c?a(c):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ct("string"==typeof t.token),this.A=t.token,new ul(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function vC(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class py{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const a=vC(40);for(let c=0;c<a.length;++c)r.length<20&&a[c]<t&&(r+=e.charAt(a[c]%e.length))}return r}}function xt(n,e){return n<e?-1:n>e?1:0}function Vd(n,e,t){return n.length===e.length&&n.every((r,a)=>t(r,e[a]))}function pw(n){return n+"\0"}class In{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return In.fromMillis(Date.now())}static fromDate(e){return In.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new In(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xt(this.nanoseconds,e.nanoseconds):xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class It{constructor(e){this.timestamp=e}static fromTimestamp(e){return new It(e)}static min(){return new It(new In(0,0))}static max(){return new It(new In(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class cl{constructor(e,t,r){void 0===t?t=0:t>e.length&&rt(),void 0===r?r=e.length-t:r>e.length-t&&rt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===cl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof cl?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const c=e.get(a),h=t.get(a);if(c<h)return-1;if(c>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class zt extends cl{construct(e,t,r){return new zt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ae(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(a=>a.length>0))}return new zt(t)}static emptyPath(){return new zt([])}}const fI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xn extends cl{construct(e,t,r){return new xn(e,t,r)}static isValidIdentifier(e){return fI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new xn(["__name__"])}static fromServerFormat(e){const t=[];let r="",a=0;const c=()=>{if(0===r.length)throw new Ae(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;a<e.length;){const _=e[a];if("\\"===_){if(a+1===e.length)throw new Ae(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[a+1];if("\\"!==E&&"."!==E&&"`"!==E)throw new Ae(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=E,a+=2}else"`"===_?(h=!h,a++):"."!==_||h?(r+=_,a++):(c(),a++)}if(c(),h)throw new Ae(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xn(t)}static emptyPath(){return new xn([])}}class je{constructor(e){this.path=e}static fromPath(e){return new je(zt.fromString(e))}static fromName(e){return new je(zt.fromString(e).popFirst(5))}static empty(){return new je(zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===zt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return zt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new zt(e.slice()))}}class Zp{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function gy(n){return n.fields.find(e=>2===e.kind)}function ll(n){return n.fields.filter(e=>2!==e.kind)}Zp.UNKNOWN_ID=-1;class Yp{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ef{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ef(0,Zi.min())}}function dl(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=It.fromTimestamp(1e9===r?new In(t+1,0):new In(t,r));return new Zi(a,je.empty(),e)}function Fo(n){return new Zi(n.readTime,n.key,-1)}class Zi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Zi(It.min(),je.empty(),-1)}static max(){return new Zi(It.max(),je.empty(),-1)}}function my(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=je.comparator(n.documentKey,e.documentKey),0!==t?t:xt(n.largestBatchId,e.largestBatchId))}const mI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ra(n){return gw.apply(this,arguments)}function gw(){return gw=(0,ge.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==mI)throw n;xe("LocalStore","Unexpectedly lost primary lease")}),gw.apply(this,arguments)}class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie((r,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.reject(t)}static resolve(e){return new ie((t,r)=>{t(e)})}static reject(e){return new ie((t,r)=>{r(e)})}static waitFor(e){return new ie((t,r)=>{let a=0,c=0,h=!1;e.forEach(_=>{++a,_.next(()=>{++c,h&&c===a&&t()},E=>r(E))}),h=!0,c===a&&t()})}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next(a=>a?ie.resolve(a):r());return t}static forEach(e,t){const r=[];return e.forEach((a,c)=>{r.push(t.call(this,a,c))}),this.waitFor(r)}static mapArray(e,t){return new ie((r,a)=>{const c=e.length,h=new Array(c);let _=0;for(let E=0;E<c;E++){const C=E;t(e[C]).next(x=>{h[C]=x,++_,_===c&&r(h)},x=>a(x))}})}static doWhile(e,t){return new ie((r,a)=>{const c=()=>{!0===e()?t().next(()=>{c()},a):r()};c()})}}class yy{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new mr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Bd(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const a=Qp(r.target.error);this.P.reject(new Bd(e,a))}}static open(e,t,r,a){try{return new yy(t,e.transaction(a,r))}catch(c){throw new Bd(t,c)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(xe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new vI(t)}}class bs{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===bs.D((0,Bt.z$)())&&ir("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return xe("SimpleDb","Removing database:",e),Gr(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Bt.hl)())return!1;if(bs.N())return!0;const e=(0,Bt.z$)(),t=bs.D(e),r=0<t&&t<10,a=bs.k(e),c=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||c)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,ge.Z)(function*(){return t.db||(xe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,a)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=h=>{r(h.target.result)},c.onblocked=()=>{a(new Bd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=h=>{const _=h.target.error;a("VersionError"===_.name?new Ae(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===_.name?new Ae(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+_):new Bd(e,_))},c.onupgradeneeded=h=>{xe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.S.$(h.target.result,c.transaction,h.oldVersion,t.version).next(()=>{xe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,a){var c=this;return(0,ge.Z)(function*(){const h="readonly"===t;let _=0;for(;;){++_;try{c.db=yield c.F(e);const E=yy.open(c.db,e,h?"readonly":"readwrite",r),C=a(E).next(x=>(E.V(),x)).catch(x=>(E.abort(x),ie.reject(x))).toPromise();return C.catch(()=>{}),yield E.v,C}catch(E){const C=E,x="FirebaseError"!==C.name&&_<3;if(xe("SimpleDb","Transaction failed with error:",C.message,"Retrying:",x),c.close(),!x)return Promise.reject(C)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class _I{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Gr(this.U.delete())}}class Bd extends Ae{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function qu(n){return"IndexedDbTransactionError"===n.name}class vI{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(xe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(xe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Gr(r)}add(e){return xe("SimpleDb","ADD",this.store.name,e,e),Gr(this.store.add(e))}get(e){return Gr(this.store.get(e)).next(t=>(void 0===t&&(t=null),xe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return xe("SimpleDb","DELETE",this.store.name,e),Gr(this.store.delete(e))}count(){return xe("SimpleDb","COUNT",this.store.name),Gr(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const a=this.cursor(r),c=[];return this.H(a,(h,_)=>{c.push(_)}).next(()=>c)}{const a=this.store.getAll(r.range);return new ie((c,h)=>{a.onerror=_=>{h(_.target.error)},a.onsuccess=_=>{c(_.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ie((a,c)=>{r.onerror=h=>{c(h.target.error)},r.onsuccess=h=>{a(h.target.result)}})}Y(e,t){xe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const a=this.cursor(r);return this.H(a,(c,h,_)=>_.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.H(a,t)}tt(e){const t=this.cursor({});return new ie((r,a)=>{t.onerror=c=>{const h=Qp(c.target.error);a(h)},t.onsuccess=c=>{const h=c.target.result;h?e(h.primaryKey,h.value).next(_=>{_?h.continue():r()}):r()}})}H(e,t){const r=[];return new ie((a,c)=>{e.onerror=h=>{c(h.target.error)},e.onsuccess=h=>{const _=h.target.result;if(!_)return void a();const E=new _I(_),C=t(_.primaryKey,_.value,E);if(C instanceof ie){const x=C.catch(R=>(E.done(),ie.reject(R)));r.push(x)}E.isDone?a():null===E.G?_.continue():_.continue(E.G)}}).next(()=>ie.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Gr(n){return new ie((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const a=Qp(r.target.error);t(a)}})}let mw=!1;function Qp(n){const e=bs.D((0,Bt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return mw||(mw=!0,setTimeout(()=>{throw r},0)),r}}return n}class wI{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;xe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ge.Z)(function*(){t.task=null;try{xe("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){qu(r)?xe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Ra(r)}yield t.nt(6e4)}))}}class EI{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ge.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let a=t,c=!0;return ie.doWhile(()=>!0===c&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(h=>{if(null!==h&&!r.has(h))return xe("IndexBackiller",`Processing collection: ${h}`),this.rt(e,h,a).next(_=>{a-=_,r.add(h)});c=!1})).next(()=>t-a)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next(c=>{const h=c.changes;return this.localStore.indexManager.updateIndexEntries(e,h).next(()=>this.ot(a,c)).next(_=>(xe("IndexBackiller",`Updating offset: ${_}`),this.localStore.indexManager.updateCollectionGroup(e,t,_))).next(()=>h.size)}))}ot(e,t){let r=e;return t.changes.forEach((a,c)=>{const h=Fo(c);my(h,r)>0&&(r=h)}),new Zi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class bi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function yw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ku(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function _w(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}bi.at=-1;class Kn{constructor(e,t){this.comparator=e,this.root=t||ct.EMPTY}insert(e,t){return new Kn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ct.BLACK,null,null))}remove(e){return new Kn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ct.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(0===a)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jp(this.root,e,this.comparator,!0)}}class Jp{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ct{constructor(e,t,r,a,c){this.key=e,this.value=t,this.color=r??ct.RED,this.left=a??ct.EMPTY,this.right=c??ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,c){return new ct(e??this.key,t??this.value,r??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const c=r(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,r),null):0===c?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return ct.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw rt();const e=this.left.check();if(e!==this.right.check())throw rt();return e+(this.isRed()?0:1)}}ct.EMPTY=null,ct.RED=!0,ct.BLACK=!1,ct.EMPTY=new class{constructor(){this.size=0}get key(){throw rt()}get value(){throw rt()}get color(){throw rt()}get left(){throw rt()}get right(){throw rt()}copy(n,e,t,r,a){return this}insert(n,e,t){return new ct(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class cn{constructor(e){this.comparator=e,this.data=new Kn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _y(this.data.getIterator())}getIteratorFrom(e){return new _y(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof cn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=r.getNext().key;if(0!==this.comparator(a,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new cn(this.comparator);return t.data=e,t}}class _y{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function hl(n){return n.hasNext()?n.getNext():void 0}class Yi{constructor(e){this.fields=e,e.sort(xn.comparator)}static empty(){return new Yi([])}unionWith(e){let t=new cn(xn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Yi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class yr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new yr(t)}static fromUint8Array(e){const t=function(r){let a="";for(let c=0;c<r.length;++c)a+=String.fromCharCode(r[c]);return a}(e);return new yr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yr.EMPTY_BYTE_STRING=new yr("");const DI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ka(n){if(Ct(!!n),"string"==typeof n){let e=0;const t=DI.exec(n);if(Ct(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Zn(n.seconds),nanos:Zn(n.nanos)}}function Zn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function fl(n){return"string"==typeof n?yr.fromBase64String(n):yr.fromUint8Array(n)}function vw(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function vy(n){const e=n.mapValue.fields.__previous_value__;return vw(e)?vy(e):e}function Ud(n){const e=ka(n.mapValue.fields.__local_write_time__.timestampValue);return new In(e.seconds,e.nanos)}class pl{constructor(e,t,r,a,c,h,_,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=_,this.useFetchStreams=E}}class Zu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Zu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Zu&&e.projectId===this.projectId&&e.database===this.database}}function gl(n){return null==n}function ml(n){return 0===n&&1/n==-1/0}function ww(n){return"number"==typeof n&&Number.isInteger(n)&&!ml(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const yl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},wy={nullValue:"NULL_VALUE"};function jd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?vw(n)?4:Dw(n)?9007199254740991:10:rt()}function Lo(n,e){if(n===e)return!0;const t=jd(n);if(t!==jd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ud(n).isEqual(Ud(e));case 3:return function(r,a){if("string"==typeof r.timestampValue&&"string"==typeof a.timestampValue&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const c=ka(r.timestampValue),h=ka(a.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,fl(n.bytesValue).isEqual(fl(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,a){return Zn(r.geoPointValue.latitude)===Zn(a.geoPointValue.latitude)&&Zn(r.geoPointValue.longitude)===Zn(a.geoPointValue.longitude)}(n,e);case 2:return function(r,a){if("integerValue"in r&&"integerValue"in a)return Zn(r.integerValue)===Zn(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const c=Zn(r.doubleValue),h=Zn(a.doubleValue);return c===h?ml(c)===ml(h):isNaN(c)&&isNaN(h)}return!1}(n,e);case 9:return Vd(n.arrayValue.values||[],e.arrayValue.values||[],Lo);case 10:return function(r,a){const c=r.mapValue.fields||{},h=a.mapValue.fields||{};if(yw(c)!==yw(h))return!1;for(const _ in c)if(c.hasOwnProperty(_)&&(void 0===h[_]||!Lo(c[_],h[_])))return!1;return!0}(n,e);default:return rt()}var a}function Hd(n,e){return void 0!==(n.values||[]).find(t=>Lo(t,e))}function _l(n,e){if(n===e)return 0;const t=jd(n),r=jd(e);if(t!==r)return xt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return xt(n.booleanValue,e.booleanValue);case 2:return function(a,c){const h=Zn(a.integerValue||a.doubleValue),_=Zn(c.integerValue||c.doubleValue);return h<_?-1:h>_?1:h===_?0:isNaN(h)?isNaN(_)?0:-1:1}(n,e);case 3:return Ew(n.timestampValue,e.timestampValue);case 4:return Ew(Ud(n),Ud(e));case 5:return xt(n.stringValue,e.stringValue);case 6:return function(a,c){const h=fl(a),_=fl(c);return h.compareTo(_)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const h=a.split("/"),_=c.split("/");for(let E=0;E<h.length&&E<_.length;E++){const C=xt(h[E],_[E]);if(0!==C)return C}return xt(h.length,_.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const h=xt(Zn(a.latitude),Zn(c.latitude));return 0!==h?h:xt(Zn(a.longitude),Zn(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,c){const h=a.values||[],_=c.values||[];for(let E=0;E<h.length&&E<_.length;++E){const C=_l(h[E],_[E]);if(C)return C}return xt(h.length,_.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,c){if(a===yl.mapValue&&c===yl.mapValue)return 0;if(a===yl.mapValue)return 1;if(c===yl.mapValue)return-1;const h=a.fields||{},_=Object.keys(h),E=c.fields||{},C=Object.keys(E);_.sort(),C.sort();for(let x=0;x<_.length&&x<C.length;++x){const R=xt(_[x],C[x]);if(0!==R)return R;const z=_l(h[_[x]],E[C[x]]);if(0!==z)return z}return xt(_.length,C.length)}(n.mapValue,e.mapValue);default:throw rt()}}function Ew(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return xt(n,e);const t=ka(n),r=ka(e),a=xt(t.seconds,r.seconds);return 0!==a?a:xt(t.nanos,r.nanos)}function eo(n){return Ey(n)}function Ey(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const a=ka(r);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?fl(n.bytesValue).toBase64():"referenceValue"in n?je.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let a="[",c=!0;for(const h of r.values||[])c?c=!1:a+=",",a+=Ey(h);return a+"]"}(n.arrayValue):"mapValue"in n?function(r){const a=Object.keys(r.fields||{}).sort();let c="{",h=!0;for(const _ of a)h?h=!1:c+=",",c+=`${_}:${Ey(r.fields[_])}`;return c+"}"}(n.mapValue):rt();var e}function Yu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function $d(n){return!!n&&"integerValue"in n}function If(n){return!!n&&"arrayValue"in n}function Iy(n){return!!n&&"nullValue"in n}function Iw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Xp(n){return!!n&&"mapValue"in n}function Df(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ku(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Df(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Df(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Dw(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function bI(n){return"nullValue"in n?wy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Yu(Zu.empty(),je.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:rt()}function bw(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Yu(Zu.empty(),je.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?yl:rt()}function Cw(n,e){const t=_l(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Dy(n,e){const t=_l(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Nr{constructor(e){this.value=e}static empty(){return new Nr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Xp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Df(t)}setAll(e){let t=xn.emptyPath(),r={},a=[];e.forEach((h,_)=>{if(!t.isImmediateParentOf(_)){const E=this.getFieldsMap(t);this.applyChanges(E,r,a),r={},a=[],t=_.popLast()}h?r[_.lastSegment()]=Df(h):a.push(_.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,r,a)}delete(e){const t=this.field(e.popLast());Xp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Lo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];Xp(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Ku(t,(a,c)=>e[a]=c);for(const a of r)delete e[a]}clone(){return new Nr(Df(this.value))}}function eg(n){const e=[];return Ku(n.fields,(t,r)=>{const a=new xn([t]);if(Xp(r)){const c=eg(r.mapValue).fields;if(0===c.length)e.push(a);else for(const h of c)e.push(a.child(h))}else e.push(a)}),new Yi(e)}class Dn{constructor(e,t,r,a,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.data=c,this.documentState=h}static newInvalidDocument(e){return new Dn(e,0,It.min(),It.min(),Nr.empty(),0)}static newFoundDocument(e,t,r){return new Dn(e,1,t,It.min(),r,0)}static newNoDocument(e,t){return new Dn(e,2,t,It.min(),Nr.empty(),0)}static newUnknownDocument(e,t){return new Dn(e,3,t,It.min(),Nr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=It.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class by{constructor(e,t=null,r=[],a=[],c=null,h=null,_=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=c,this.startAt=h,this.endAt=_,this.ht=null}}function Tw(n,e=null,t=[],r=[],a=null,c=null,h=null){return new by(n,e,t,r,a,c,h)}function Gd(n){const e=qe(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(a=r).field.canonicalString()+a.op.toString()+eo(a.value);var a}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(a=r).field.canonicalString()+a.dir;var a}).join(","),gl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>eo(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>eo(r)).join(",")),e.ht=t}return e.ht}function bf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let a=0;a<n.orderBy.length;a++)if(!My(n.orderBy[a],e.orderBy[a]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let a=0;a<n.filters.length;a++)if((t=n.filters[a]).op!==(r=e.filters[a]).op||!t.field.isEqual(r.field)||!Lo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ng(n.startAt,e.startAt)&&ng(n.endAt,e.endAt)}function Cf(n){return je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function vl(n,e){return n.filters.filter(t=>t instanceof zr&&t.field.isEqual(e))}function Cs(n,e,t){let r=wy,a=!0;for(const c of vl(n,e)){let h=wy,_=!0;switch(c.op){case"<":case"<=":h=bI(c.value);break;case"==":case"in":case">=":h=c.value;break;case">":h=c.value,_=!1;break;case"!=":case"not-in":h=wy}Cw({value:r,inclusive:a},{value:h,inclusive:_})<0&&(r=h,a=_)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const h=t.position[c];Cw({value:r,inclusive:a},{value:h,inclusive:t.inclusive})<0&&(r=h,a=t.inclusive);break}return{value:r,inclusive:a}}function Cy(n,e,t){let r=yl,a=!0;for(const c of vl(n,e)){let h=yl,_=!0;switch(c.op){case">=":case">":h=bw(c.value),_=!1;break;case"==":case"in":case"<=":h=c.value;break;case"<":h=c.value,_=!1;break;case"!=":case"not-in":h=yl}Dy({value:r,inclusive:a},{value:h,inclusive:_})>0&&(r=h,a=_)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const h=t.position[c];Dy({value:r,inclusive:a},{value:h,inclusive:t.inclusive})>0&&(r=h,a=t.inclusive);break}return{value:r,inclusive:a}}class zr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new Ty(e,t,r):"array-contains"===t?new xy(e,r):"in"===t?new wC(e,r):"not-in"===t?new Aw(e,r):"array-contains-any"===t?new EC(e,r):new zr(e,t,r)}static lt(e,t,r){return"in"===t?new Pa(e,r):new Ay(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(_l(t,this.value)):null!==t&&jd(this.value)===jd(t)&&this.ft(_l(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return rt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Ty extends zr{constructor(e,t,r){super(e,t,r),this.key=je.fromName(r.referenceValue)}matches(e){const t=je.comparator(e.key,this.key);return this.ft(t)}}class Pa extends zr{constructor(e,t){super(e,"in",t),this.keys=Sy(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ay extends zr{constructor(e,t){super(e,"not-in",t),this.keys=Sy(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Sy(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>je.fromName(r.referenceValue))}class xy extends zr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return If(t)&&Hd(t.arrayValue,this.value)}}class wC extends zr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Hd(this.value.arrayValue,t)}}class Aw extends zr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Hd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Hd(this.value.arrayValue,t)}}class EC extends zr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!If(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Hd(this.value.arrayValue,r))}}class to{constructor(e,t){this.position=e,this.inclusive=t}}class Fa{constructor(e,t="asc"){this.field=e,this.dir=t}}function My(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function tg(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const c=e[a],h=n.position[a];if(r=c.field.isKeyField()?je.comparator(je.fromName(h.referenceValue),t.key):_l(h,t.data.field(c.field)),"desc"===c.dir&&(r*=-1),0!==r)break}return r}function ng(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Lo(n.position[t],e.position[t]))return!1;return!0}class Qu{constructor(e,t=null,r=[],a=[],c=null,h="F",_=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=c,this.limitType=h,this.startAt=_,this.endAt=E,this._t=null,this.wt=null}}function Sw(n,e,t,r,a,c,h,_){return new Qu(n,e,t,r,a,c,h,_)}function Wd(n){return new Qu(n)}function xw(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Ny(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function rg(n){for(const e of n.filters)if(e.dt())return e.field;return null}function Mw(n){return null!==n.collectionGroup}function qd(n){const e=qe(n);if(null===e._t){e._t=[];const t=rg(e),r=Ny(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Fa(t)),e._t.push(new Fa(xn.keyField(),"asc"));else{let a=!1;for(const c of e.explicitOrderBy)e._t.push(c),c.field.isKeyField()&&(a=!0);if(!a){const c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Fa(xn.keyField(),c))}}}return e._t}function Ci(n){const e=qe(n);if(!e.wt)if("F"===e.limitType)e.wt=Tw(e.path,e.collectionGroup,qd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const c of qd(e))t.push(new Fa(c.field,"desc"===c.dir?"asc":"desc"));const r=e.endAt?new to(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new to(e.startAt.position,e.startAt.inclusive):null;e.wt=Tw(e.path,e.collectionGroup,t,e.filters,e.limit,r,a)}return e.wt}function Tf(n,e,t){return new Qu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Kd(n,e){return bf(Ci(n),Ci(e))&&n.limitType===e.limitType}function Nw(n){return`${Gd(Ci(n))}|lt:${n.limitType}`}function Af(n){return`Query(target=${function zd(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${eo(r.value)}`;var r}).join(", ")}]`),gl(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>eo(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>eo(t)).join(",")),`Target(${e})`}(Ci(n))}; limitType=${n.limitType})`}function Ow(n,e){return e.isFoundDocument()&&function(t,r){const a=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):je.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(n,e)&&function(t,r){for(const a of t.explicitOrderBy)if(!a.field.isKeyField()&&null===r.data.field(a.field))return!1;return!0}(n,e)&&function(t,r){for(const a of t.filters)if(!a.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(a,c,h){const _=tg(a,c,h);return a.inclusive?_<=0:_<0}(t.startAt,qd(t),r)||t.endAt&&!function(a,c,h){const _=tg(a,c,h);return a.inclusive?_>=0:_>0}(t.endAt,qd(t),r)));var t,r}function CI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function TI(n){return(e,t)=>{let r=!1;for(const a of qd(n)){const c=IC(a,e,t);if(0!==c)return c;r=r||a.field.isKeyField()}return 0}}function IC(n,e,t){const r=n.field.isKeyField()?je.comparator(e.key,t.key):function(a,c,h){const _=c.data.field(a),E=h.data.field(a);return null!==_&&null!==E?_l(_,E):rt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return rt()}}function AI(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ml(e)?"-0":e}}function SI(n){return{integerValue:""+n}}function xI(n,e){return ww(e)?SI(e):AI(n,e)}class Oy{constructor(){this._=void 0}}function DC(n,e,t){return n instanceof Ju?function(r,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&(c.fields.__previous_value__=a),{mapValue:c}}(t,e):n instanceof wl?Ry(n,e):n instanceof Va?ky(n,e):function(r,a){const c=La(r,a),h=Rw(c)+Rw(r.yt);return $d(c)&&$d(r.yt)?SI(h):AI(r.It,h)}(n,e)}function bC(n,e,t){return n instanceof wl?Ry(n,e):n instanceof Va?ky(n,e):t}function La(n,e){return n instanceof Xu?$d(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Ju extends Oy{}class wl extends Oy{constructor(e){super(),this.elements=e}}function Ry(n,e){const t=Ba(e);for(const r of n.elements)t.some(a=>Lo(a,r))||t.push(r);return{arrayValue:{values:t}}}class Va extends Oy{constructor(e){super(),this.elements=e}}function ky(n,e){let t=Ba(e);for(const r of n.elements)t=t.filter(a=>!Lo(a,r));return{arrayValue:{values:t}}}class Xu extends Oy{constructor(e,t){super(),this.It=e,this.yt=t}}function Rw(n){return Zn(n.integerValue||n.doubleValue)}function Ba(n){return If(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Zd{constructor(e,t){this.field=e,this.transform=t}}class NI{constructor(e,t){this.version=e,this.transformResults=t}}class bn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new bn}static exists(e){return new bn(void 0,e)}static updateTime(e){return new bn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ig(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class sg{}function Sf(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Il(n.key,bn.none()):new Ua(n.key,n.data,bn.none());{const t=n.data,r=Nr.empty();let a=new cn(xn.comparator);for(let c of e.fields)if(!a.has(c)){let h=t.field(c);null===h&&c.length>1&&(c=c.popLast(),h=t.field(c)),null===h?r.delete(c):r.set(c,h),a=a.add(c)}return new Vo(n.key,r,new Yi(a.toArray()),bn.none())}}function Yd(n,e,t){n instanceof Ua?function(r,a,c){const h=r.value.clone(),_=ag(r.fieldTransforms,a,c.transformResults);h.setAll(_),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):n instanceof Vo?function(r,a,c){if(!ig(r.precondition,a))return void a.convertToUnknownDocument(c.version);const h=ag(r.fieldTransforms,a,c.transformResults),_=a.data;_.setAll(Py(r)),_.setAll(h),a.convertToFoundDocument(c.version,_).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function El(n,e,t,r){return n instanceof Ua?function(a,c,h,_){if(!ig(a.precondition,c))return h;const E=a.value.clone(),C=ug(a.fieldTransforms,_,c);return E.setAll(C),c.convertToFoundDocument(c.version,E).setHasLocalMutations(),null}(n,e,t,r):n instanceof Vo?function(a,c,h,_){if(!ig(a.precondition,c))return h;const E=ug(a.fieldTransforms,_,c),C=c.data;return C.setAll(Py(a)),C.setAll(E),c.convertToFoundDocument(c.version,C).setHasLocalMutations(),null===h?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(x=>x.field))}(n,e,t,r):(h=t,ig(n.precondition,c=e)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h);var c,h}function Qd(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),c=La(r.transform,a||null);null!=c&&(null===t&&(t=Nr.empty()),t.set(r.field,c))}return t||null}function og(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Vd(t,r,(a,c)=>function MI(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof wl&&r instanceof wl||t instanceof Va&&r instanceof Va?Vd(t.elements,r.elements,Lo):t instanceof Xu&&r instanceof Xu?Lo(t.yt,r.yt):t instanceof Ju&&r instanceof Ju);var t,r}(a,c))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Ua extends sg{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Vo extends sg{constructor(e,t,r,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Py(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function ag(n,e,t){const r=new Map;Ct(n.length===t.length);for(let a=0;a<t.length;a++){const c=n[a],h=c.transform,_=e.data.field(c.field);r.set(c.field,bC(h,_,t[a]))}return r}function ug(n,e,t){const r=new Map;for(const a of n){const c=a.transform,h=t.data.field(a.field);r.set(a.field,DC(c,h,e))}return r}class Il extends sg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xf extends sg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class OI{constructor(e){this.count=e}}var Er,Qt;function Fy(n){switch(n){default:return rt();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function kw(n){if(void 0===n)return ir("GRPC error has no .code"),ae.UNKNOWN;switch(n){case Er.OK:return ae.OK;case Er.CANCELLED:return ae.CANCELLED;case Er.UNKNOWN:return ae.UNKNOWN;case Er.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Er.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Er.INTERNAL:return ae.INTERNAL;case Er.UNAVAILABLE:return ae.UNAVAILABLE;case Er.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Er.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Er.NOT_FOUND:return ae.NOT_FOUND;case Er.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Er.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Er.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Er.ABORTED:return ae.ABORTED;case Er.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Er.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Er.DATA_LOSS:return ae.DATA_LOSS;default:return rt()}}(Qt=Er||(Er={}))[Qt.OK=0]="OK",Qt[Qt.CANCELLED=1]="CANCELLED",Qt[Qt.UNKNOWN=2]="UNKNOWN",Qt[Qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qt[Qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qt[Qt.NOT_FOUND=5]="NOT_FOUND",Qt[Qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qt[Qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qt[Qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qt[Qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qt[Qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qt[Qt.ABORTED=10]="ABORTED",Qt[Qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qt[Qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qt[Qt.INTERNAL=13]="INTERNAL",Qt[Qt.UNAVAILABLE=14]="UNAVAILABLE",Qt[Qt.DATA_LOSS=15]="DATA_LOSS";class ja{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[a,c]of r)if(this.equalsFn(a,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(void 0===a)return this.inner[r]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return 1===r.length?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ku(this.inner,(t,r)=>{for(const[a,c]of r)e(a,c)})}isEmpty(){return _w(this.inner)}size(){return this.innerSize}}const Pw=new Kn(je.comparator);function Ti(){return Pw}const Ai=new Kn(je.comparator);function Jd(...n){let e=Ai;for(const t of n)e=e.insert(t.key,t);return e}function Fw(n){let e=Ai;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ha(){return Dl()}function Lw(){return Dl()}function Dl(){return new ja(n=>n.toString(),(n,e)=>n.isEqual(e))}const Vw=new Kn(je.comparator),RI=new cn(je.comparator);function Ft(...n){let e=RI;for(const t of n)e=e.add(t);return e}const kI=new cn(xt);function Mf(){return kI}class Nf{constructor(e,t,r,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,Xd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Nf(It.min(),a,Mf(),Ti(),Ft())}}class Xd{constructor(e,t,r,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Xd(r,t,Ft(),Ft(),Ft())}}class cg{constructor(e,t,r,a){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=a}}class Bw{constructor(e,t){this.targetId=e,this.At=t}}class Ly{constructor(e,t,r=yr.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class Vy{constructor(){this.Rt=0,this.bt=lg(),this.Pt=yr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Ft(),t=Ft(),r=Ft();return this.bt.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:rt()}}),new Xd(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=lg()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class PI{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Ti(),this.qt=no(),this.Kt=new cn(xt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:rt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,a)=>{this.Ht(a)&&t(a)})}Yt(e){const t=e.targetId,r=e.At.count,a=this.Xt(t);if(a){const c=a.target;if(Cf(c))if(0===r){const h=new je(c.path);this.jt(t,h,Dn.newNoDocument(h,It.min()))}else Ct(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((c,h)=>{const _=this.Xt(h);if(_){if(c.current&&Cf(_.target)){const E=new je(_.target.path);null!==this.Ut.get(E)||this.ee(h,E)||this.jt(h,E,Dn.newNoDocument(E,e))}c.Dt&&(t.set(h,c.xt()),c.Nt())}});let r=Ft();this.qt.forEach((c,h)=>{let _=!0;h.forEachWhile(E=>{const C=this.Xt(E);return!C||2===C.purpose||(_=!1,!1)}),_&&(r=r.add(c))}),this.Ut.forEach((c,h)=>h.setReadTime(e));const a=new Nf(e,t,this.Kt,this.Ut,r);return this.Ut=Ti(),this.qt=no(),this.Kt=new cn(xt),a}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const a=this.zt(e);this.ee(e,t)?a.kt(t,1):a.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new Vy,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new cn(xt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||xe("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new Vy),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function no(){return new Kn(je.comparator)}function lg(){return new Kn(je.comparator)}const FI={asc:"ASCENDING",desc:"DESCENDING"},LI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class CC{constructor(e,t){this.databaseId=e,this.gt=t}}function eh(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Uw(n,e){return n.gt?e.toBase64():e.toUint8Array()}function VI(n,e){return eh(n,e.toTimestamp())}function Or(n){return Ct(!!n),It.fromTimestamp(function(e){const t=ka(e);return new In(t.seconds,t.nanos)}(n))}function Of(n,e){return(t=n,new zt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function jw(n){const e=zt.fromString(n);return Ct(GI(e)),e}function Rf(n,e){return Of(n.databaseId,e.path)}function Qi(n,e){const t=jw(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new je(hg(t))}function kf(n,e){return Of(n.databaseId,e)}function Pf(n){const e=jw(n);return 4===e.length?zt.emptyPath():hg(e)}function dg(n){return new zt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function hg(n){return Ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function BI(n,e,t){return{name:Rf(n,e),fields:t.value.mapValue.fields}}function By(n,e,t){const r=Qi(n,e.name),a=Or(e.updateTime),c=new Nr({mapValue:{fields:e.fields}}),h=Dn.newFoundDocument(r,a,c);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function th(n,e){let t;if(e instanceof Ua)t={update:BI(n,e.key,e.value)};else if(e instanceof Il)t={delete:Rf(n,e.key)};else if(e instanceof Vo)t={update:BI(n,e.key,e.data),updateMask:$I(e.fieldMask)};else{if(!(e instanceof xf))return rt();t={verify:Rf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,c){const h=c.transform;if(h instanceof Ju)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof wl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Va)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Xu)return{fieldPath:c.field.canonicalString(),increment:h.yt};throw rt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:VI(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:rt()),t;var a}function Ff(n,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?bn.updateTime(Or(a.updateTime)):void 0!==a.exists?bn.exists(a.exists):bn.none():bn.none(),r=e.updateTransforms?e.updateTransforms.map(a=>function(c,h){let _=null;"setToServerValue"in h?(Ct("REQUEST_TIME"===h.setToServerValue),_=new Ju):"appendMissingElements"in h?_=new wl(h.appendMissingElements.values||[]):"removeAllFromArray"in h?_=new Va(h.removeAllFromArray.values||[]):"increment"in h?_=new Xu(c,h.increment):rt();const E=xn.fromServerFormat(h.fieldPath);return new Zd(E,_)}(n,a)):[];var a;if(e.update){const a=Qi(n,e.update.name),c=new Nr({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new Yi((e.updateMask.fieldPaths||[]).map(C=>xn.fromServerFormat(C)));return new Vo(a,c,h,t,r)}return new Ua(a,c,t,r)}if(e.delete){const a=Qi(n,e.delete);return new Il(a,t)}if(e.verify){const a=Qi(n,e.verify);return new xf(a,t)}return rt()}function Lf(n,e){return{documents:[kf(n,e.path)]}}function nh(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=kf(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=kf(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const a=function(E){if(0===E.length)return;const C=E.map(x=>function(R){if("=="===R.op){if(Iw(R.value))return{unaryFilter:{field:ih(R.field),op:"IS_NAN"}};if(Iy(R.value))return{unaryFilter:{field:ih(R.field),op:"IS_NULL"}}}else if("!="===R.op){if(Iw(R.value))return{unaryFilter:{field:ih(R.field),op:"IS_NOT_NAN"}};if(Iy(R.value))return{unaryFilter:{field:ih(R.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ih(R.field),op:jI(R.op),value:R.value}}}(x));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);a&&(t.structuredQuery.where=a);const c=function(E){if(0!==E.length)return E.map(C=>{return{field:ih((x=C).field),direction:Gw(x.dir)};var x})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=(C=e.limit,n.gt||gl(C)?C:{value:C});var C,_,E;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt={before:(_=e.startAt).inclusive,values:_.position}),e.endAt&&(t.structuredQuery.endAt={before:!(E=e.endAt).inclusive,values:E.position}),t}function rh(n){let e=Pf(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){Ct(1===r);const x=t.from[0];x.allDescendants?a=x.collectionId:e=e.child(x.collectionId)}let c=[];t.where&&(c=fg(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(x=>{return new Fa(Bo((R=x).field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction));var R}));let _=null;t.limit&&(_=function(x){let R;return R="object"==typeof x?x.value:x,gl(R)?null:R}(t.limit));let E=null;var x;t.startAt&&(E=new to((x=t.startAt).values||[],!!x.before));let C=null;return t.endAt&&(C=function(x){return new to(x.values||[],!x.before)}(t.endAt)),Sw(e,a,h,c,_,"F",E,C)}function fg(n){return n?void 0!==n.unaryFilter?[TC(n)]:void 0!==n.fieldFilter?[HI(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>fg(e)).reduce((e,t)=>e.concat(t)):rt():[]}function Gw(n){return FI[n]}function jI(n){return LI[n]}function ih(n){return{fieldPath:n.canonicalString()}}function Bo(n){return xn.fromServerFormat(n.fieldPath)}function HI(n){return zr.create(Bo(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rt()}}(n.fieldFilter.op),n.fieldFilter.value)}function TC(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Bo(n.unaryFilter.field);return zr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Bo(n.unaryFilter.field);return zr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Bo(n.unaryFilter.field);return zr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Bo(n.unaryFilter.field);return zr.create(a,"!=",{nullValue:"NULL_VALUE"});default:return rt()}}function $I(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function GI(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function di(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=zw(e)),e=zI(n.get(t),e);return zw(e)}function zI(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const c=n.charAt(a);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function zw(n){return n+"\x01\x01"}function ro(n){const e=n.length;if(Ct(e>=2),2===e)return Ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),zt.emptyPath();const t=e-2,r=[];let a="";for(let c=0;c<e;){const h=n.indexOf("\x01",c);switch((h<0||h>t)&&rt(),n.charAt(h+1)){case"\x01":const _=n.substring(c,h);let E;0===a.length?E=_:(a+=_,E=a,a=""),r.push(E);break;case"\x10":a+=n.substring(c,h),a+="\0";break;case"\x11":a+=n.substring(c,h+1);break;default:rt()}c=h+2}return new zt(r)}const pg=["userId","batchId"];function gg(n,e){return[n,di(e)]}function mg(n,e,t){return[n,di(e),t]}const WI={},qI=["prefixPath","collectionGroup","readTime","documentId"],KI=["prefixPath","collectionGroup","documentId"],ZI=["collectionGroup","readTime","prefixPath","documentId"],YI=["canonicalId","targetId"],QI=["targetId","path"],yg=["path","targetId"],bl=["collectionId","parent"],AC=["indexId","uid"],Vf=["uid","sequenceNumber"],JI=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],XI=["indexId","uid","orderedDocumentKey"],Uy=["userId","collectionPath","documentId"],eD=["userId","collectionPath","largestBatchId"],Uo=["userId","collectionGroup","largestBatchId"],sh=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ti=[...sh,"documentOverlays"],ec=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Bf=ec,Ts=[...Bf,"indexConfiguration","indexState","indexEntries"];class Uf extends yI{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Ln(n,e){const t=qe(n);return bs.M(t.ie,e)}class tc{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&Yd(c,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=El(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=El(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Lw();return this.mutations.forEach(a=>{const c=e.get(a.key),h=c.overlayedDocument;let _=this.applyToLocalView(h,c.mutatedFields);_=t.has(a.key)?null:_;const E=Sf(h,_);null!==E&&r.set(a.key,E),h.isValidDocument()||h.convertToNoDocument(It.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ft())}isEqual(e){return this.batchId===e.batchId&&Vd(this.mutations,e.mutations,(t,r)=>og(t,r))&&Vd(this.baseMutations,e.baseMutations,(t,r)=>og(t,r))}}class nc{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){Ct(e.mutations.length===r.length);let a=Vw;const c=e.mutations;for(let h=0;h<c.length;h++)a=a.insert(c[h].key,r[h].version);return new nc(e,t,r,a)}}class rc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ji{constructor(e,t,r,a,c=It.min(),h=It.min(),_=yr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=_}withSequenceNumber(e){return new Ji(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Cl{constructor(e){this.re=e}}function Tl(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ga(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Rf(a=n.re,(c=e).key),fields:c.data.value.mapValue.fields,updateTime:eh(a,c.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ic(e.version)};else{if(!e.isUnknownDocument())return rt();r.unknownDocument={path:t.path.toArray(),version:ic(e.version)}}var a,c;return r}function Ga(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ic(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function sc(n){const e=new In(n.seconds,n.nanoseconds);return It.fromTimestamp(e)}function oc(n,e){const t=(e.baseMutations||[]).map(c=>Ff(n.re,c));for(let c=0;c<e.mutations.length-1;++c){const h=e.mutations[c];c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(h.updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c)}const r=e.mutations.map(c=>Ff(n.re,c)),a=In.fromMillis(e.localWriteTimeMs);return new tc(e.batchId,a,t,r)}function ah(n){const e=sc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?sc(n.lastLimboFreeSnapshotVersion):It.min();let r;var a;return void 0!==n.query.documents?(Ct(1===(a=n.query).documents.length),r=Ci(Wd(Pf(a.documents[0])))):r=Ci(rh(n.query)),new Ji(r,n.targetId,0,n.lastListenSequenceNumber,e,t,yr.fromBase64String(n.resumeToken))}function jy(n,e){const t=ic(e.snapshotVersion),r=ic(e.lastLimboFreeSnapshotVersion);let a;a=Cf(e.target)?Lf(n.re,e.target):nh(n.re,e.target);const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Gd(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function _g(n){const e=rh({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Tf(e,e.limit,"L"):e}function vg(n,e){return new rc(e.largestBatchId,Ff(n.re,e.overlayMutation))}function Hy(n,e){const t=e.path.lastSegment();return[n,di(e.path.popLast()),t]}function $y(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:ic(r.readTime),documentKey:di(r.documentKey.path),largestBatchId:r.largestBatchId}}class tD{getBundleMetadata(e,t){return Ww(e).get(t).next(r=>{if(r)return{id:(a=r).bundleId,createTime:sc(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return Ww(e).put({bundleId:(r=t).id,createTime:ic(Or(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Gy(e).get(t).next(r=>{if(r)return{name:(a=r).name,query:_g(a.bundledQuery),readTime:sc(a.readTime)};var a})}saveNamedQuery(e,t){return Gy(e).put({name:(r=t).name,readTime:ic(Or(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Ww(n){return Ln(n,"bundles")}function Gy(n){return Ln(n,"namedQueries")}class wg{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new wg(e,t.uid||"")}getOverlay(e,t){return jf(e).get(Hy(this.userId,t)).next(r=>r?vg(this.It,r):null)}getOverlays(e,t){const r=Ha();return ie.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&r.set(a,c)})).next(()=>r)}saveOverlays(e,t,r){const a=[];return r.forEach((c,h)=>{const _=new rc(t,h);a.push(this.ue(e,_))}),ie.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach(h=>a.add(di(h.getCollectionPath())));const c=[];return a.forEach(h=>{const _=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);c.push(jf(e).Y("collectionPathOverlayIndex",_))}),ie.waitFor(c)}getOverlaysForCollection(e,t,r){const a=Ha(),c=di(t),h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,Number.POSITIVE_INFINITY],!0);return jf(e).W("collectionPathOverlayIndex",h).next(_=>{for(const E of _){const C=vg(this.It,E);a.set(C.getKey(),C)}return a})}getOverlaysForCollectionGroup(e,t,r,a){const c=Ha();let h;const _=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return jf(e).Z({index:"collectionGroupOverlayIndex",range:_},(E,C,x)=>{const R=vg(this.It,C);c.size()<a||R.largestBatchId===h?(c.set(R.getKey(),R),h=R.largestBatchId):x.done()}).next(()=>c)}ue(e,t){return jf(e).put(function(r,a,c){const[h,_,E]=Hy(a,c.mutation.key);return{userId:a,collectionPath:_,documentId:E,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:th(r.re,c.mutation)}}(this.It,this.userId,t))}}function jf(n){return Ln(n,"documentOverlays")}class za{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Zn(e.integerValue));else if("doubleValue"in e){const r=Zn(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),ml(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(fl(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?Dw(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):rt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const a of Object.keys(r))this._e(a,t),this.ae(r[a],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const a of r)this.ae(a,t)}ge(e,t){this.le(t,37),je.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function zy(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function qw(n){const e=64-function(t){let r=0;for(let a=0;a<8;++a){const c=zy(255&t[a]);if(r+=c,8!==c)break}return r}(n);return Math.ceil(e/8)}za.Te=new za;class Eg{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const a=t.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const a=t.codePointAt(0);this.Pe(240|a>>>18),this.Pe(128|63&a>>>12),this.Pe(128|63&a>>>6),this.Pe(128|63&a)}}this.ve()}De(e){const t=this.Ce(e),r=qw(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Ne(e){const t=this.Ce(e),r=qw(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(a){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,a,!1),new Uint8Array(c.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class Ig{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class Wy{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class Hf{constructor(){this.Be=new Eg,this.Le=new Ig(this.Be),this.Ue=new Wy(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Wa{constructor(e,t,r,a){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=a}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Wa(this.indexId,this.documentKey,this.arrayValue,r)}}function qa(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=qy(n.arrayValue,e.arrayValue),0!==t?t:(t=qy(n.directionalValue,e.directionalValue),0!==t?t:je.comparator(n.documentKey,e.documentKey)))}function qy(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class nD{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=gy(e);if(void 0!==t&&!this.ze(t))return!1;const r=ll(e);let a=0,c=0;for(;a<r.length&&this.ze(r[a]);++a);if(a===r.length)return!0;if(void 0!==this.je){const h=r[a];if(!this.He(this.je,h)||!this.Je(this.Ge[c++],h))return!1;++a}for(;a<r.length;++a){const h=r[a];if(c>=this.Ge.length||!this.Je(this.Ge[c++],h))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Ky{constructor(){this.Ye=new Dg}addToCollectionParentIndex(e,t){return this.Ye.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(Zi.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(Zi.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class Dg{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new cn(zt.comparator),c=!a.has(r);return this.index[t]=a.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new cn(zt.comparator)).toArray()}}const $f=new Uint8Array(0);class Zy{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new Dg,this.Ze=new ja(r=>Gd(r),(r,a)=>bf(r,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const c={collectionId:r,parent:di(a)};return Yy(e).put(c)}return ie.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[pw(t),""],!1,!0);return Yy(e).W(a).next(c=>{for(const h of c){if(h.collectionId!==t)break;r.push(ro(h.parent))}return r})}addFieldIndex(e,t){const r=zf(e),a={indexId:(h=t).indexId,collectionGroup:h.collectionGroup,fields:h.fields.map(_=>[_.fieldPath.canonicalString(),_.kind])};var h;delete a.indexId;const c=r.add(a);if(t.indexState){const h=uh(e);return c.next(_=>{h.put($y(_,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return c.next()}deleteFieldIndex(e,t){const r=zf(e),a=uh(e),c=Gf(e);return r.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Gf(e);let a=!0;const c=new Map;return ie.forEach(this.tn(t),h=>this.en(e,h).next(_=>{a&&(a=!!_),c.set(h,_)})).next(()=>{if(a){let h=Ft();const _=[];return ie.forEach(c,(E,C)=>{var x;xe("IndexedDbIndexManager",`Using index ${x=E,`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(kt=>`${kt.fieldPath}:${kt.kind}`).join(",")}`} to execute ${Gd(t)}`);const R=function(kt,Mt){const Ot=gy(Mt);if(void 0===Ot)return null;for(const Ut of vl(kt,Ot.fieldPath))switch(Ut.op){case"array-contains-any":return Ut.value.arrayValue.values||[];case"array-contains":return[Ut.value]}return null}(C,E),z=function(kt,Mt){const Ot=new Map;for(const Ut of ll(Mt))for(const qr of vl(kt,Ut.fieldPath))switch(qr.op){case"==":case"in":Ot.set(Ut.fieldPath.canonicalString(),qr.value);break;case"not-in":case"!=":return Ot.set(Ut.fieldPath.canonicalString(),qr.value),Array.from(Ot.values())}return null}(C,E),K=function(kt,Mt){const Ot=[];let Ut=!0;for(const qr of ll(Mt)){const ew=0===qr.kind?Cs(kt,qr.fieldPath,kt.startAt):Cy(kt,qr.fieldPath,kt.startAt);Ot.push(ew.value),Ut&&(Ut=ew.inclusive)}return new to(Ot,Ut)}(C,E),ne=function(kt,Mt){const Ot=[];let Ut=!0;for(const qr of ll(Mt)){const ew=0===qr.kind?Cy(kt,qr.fieldPath,kt.endAt):Cs(kt,qr.fieldPath,kt.endAt);Ot.push(ew.value),Ut&&(Ut=ew.inclusive)}return new to(Ot,Ut)}(C,E),Me=this.nn(E,C,K),Le=this.nn(E,C,ne),dt=this.sn(E,C,z),Lt=this.rn(E.indexId,R,Me,K.inclusive,Le,ne.inclusive,dt);return ie.forEach(Lt,kt=>r.J(kt,t.limit).next(Mt=>{Mt.forEach(Ot=>{const Ut=je.fromSegments(Ot.documentKey);h.has(Ut)||(h=h.add(Ut),_.push(Ut))})}))}).next(()=>_)}return ie.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,a,c,h,_){const E=(null!=t?t.length:1)*Math.max(r.length,c.length),C=E/(null!=t?t.length:1),x=[];for(let R=0;R<E;++R){const z=t?this.on(t[R/C]):$f,K=this.un(e,z,r[R%C],a),ne=this.cn(e,z,c[R%C],h),Me=_.map(Le=>this.un(e,z,Le,!0));x.push(...this.createRange(K,ne,Me))}return x}un(e,t,r,a){const c=new Wa(e,je.empty(),t,r);return a?c:c.Ke()}cn(e,t,r,a){const c=new Wa(e,je.empty(),t,r);return a?c.Ke():c}en(e,t){const r=new nD(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(c=>{let h=null;for(const _ of c)r.We(_)&&(!h||_.fields.length>h.fields.length)&&(h=_);return h})}getIndexType(e,t){let r=2;return ie.forEach(this.tn(t),a=>this.en(e,a).next(c=>{c?0!==r&&c.fields.length<function(h){let _=new cn(xn.comparator),E=!1;for(const C of h.filters){const x=C;x.field.isKeyField()||("array-contains"===x.op||"array-contains-any"===x.op?E=!0:_=_.add(x.field))}for(const C of h.orderBy)C.field.isKeyField()||(_=_.add(C.field));return _.size+(E?1:0)}(a)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new Hf;for(const a of ll(e)){const c=t.data.field(a.fieldPath);if(null==c)return null;const h=r.qe(a.kind);za.Te.ce(c,h)}return r.$e()}on(e){const t=new Hf;return za.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new Hf;return za.Te.ce(Yu(this.databaseId,t),r.qe(function(a){const c=ll(a);return 0===c.length?0:c[c.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let a=[];a.push(new Hf);let c=0;for(const h of ll(e)){const _=r[c++];for(const E of a)if(this.ln(t,h.fieldPath)&&If(_))a=this.fn(a,h,_);else{const C=E.qe(h.kind);za.Te.ce(_,C)}}return this.dn(a)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const a=[...e],c=[];for(const h of r.arrayValue.values||[])for(const _ of a){const E=new Hf;E.seed(_.$e()),za.Te.ce(h,E.qe(t.kind)),c.push(E)}return c}ln(e,t){return!!e.filters.find(r=>r instanceof zr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=zf(e),a=uh(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(c=>{const h=[];return ie.forEach(c,_=>a.get([_.indexId,this.uid]).next(E=>{h.push(function(C,x){const R=x?new Ef(x.sequenceNumber,new Zi(sc(x.readTime),new je(ro(x.documentKey)),x.largestBatchId)):Ef.empty(),z=C.fields.map(([K,ne])=>new Yp(xn.fromServerFormat(K),ne));return new Zp(C.indexId,C.collectionGroup,z,R)}(_,E))})).next(()=>h)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,a)=>{const c=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==c?c:xt(r.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const a=zf(e),c=uh(e);return this._n(e).next(h=>a.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(_=>ie.forEach(_,E=>c.put($y(E.indexId,this.user,h,r)))))}updateIndexEntries(e,t){const r=new Map;return ie.forEach(t,(a,c)=>{const h=r.get(a.collectionGroup);return(h?ie.resolve(h):this.getFieldIndexes(e,a.collectionGroup)).next(_=>(r.set(a.collectionGroup,_),ie.forEach(_,E=>this.wn(e,a,E).next(C=>{const x=this.mn(c,E);return C.isEqual(x)?ie.resolve():this.gn(e,c,E,C,x)}))))})}yn(e,t,r,a){return Gf(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,a){return Gf(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const a=Gf(e);let c=new cn(qa);return a.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(h,_)=>{c=c.add(new Wa(r.indexId,t,_.arrayValue,_.directionalValue))}).next(()=>c)}mn(e,t){let r=new cn(qa);const a=this.an(t,e);if(null==a)return r;const c=gy(t);if(null!=c){const h=e.data.field(c.fieldPath);if(If(h))for(const _ of h.arrayValue.values||[])r=r.add(new Wa(t.indexId,e.key,this.on(_),a))}else r=r.add(new Wa(t.indexId,e.key,$f,a));return r}gn(e,t,r,a,c){xe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const h=[];return function(_,E,C,x,R){const z=_.getIterator(),K=E.getIterator();let ne=hl(z),Me=hl(K);for(;ne||Me;){let Le=!1,dt=!1;if(ne&&Me){const Lt=C(ne,Me);Lt<0?dt=!0:Lt>0&&(Le=!0)}else null!=ne?dt=!0:Le=!0;Le?(x(Me),Me=hl(K)):dt?(R(ne),ne=hl(z)):(ne=hl(z),Me=hl(K))}}(a,c,qa,_=>{h.push(this.yn(e,t,r,_))},_=>{h.push(this.pn(e,t,r,_))}),ie.waitFor(h)}_n(e){let t=1;return uh(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,a,c)=>{c.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((h,_)=>qa(h,_)).filter((h,_,E)=>!_||0!==qa(h,E[_-1]));const a=[];a.push(e);for(const h of r){const _=qa(h,e),E=qa(h,t);if(0===_)a[0]=e.Ke();else if(_>0&&E<0)a.push(h),a.push(h.Ke());else if(E>0)break}a.push(t);const c=[];for(let h=0;h<a.length;h+=2)c.push(IDBKeyRange.bound([a[h].indexId,this.uid,a[h].arrayValue,a[h].directionalValue,$f,[]],[a[h+1].indexId,this.uid,a[h+1].arrayValue,a[h+1].directionalValue,$f,[]]));return c}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Qy)}getMinOffset(e,t){return ie.mapArray(this.tn(t),r=>this.en(e,r).next(a=>a||rt())).next(Qy)}}function Yy(n){return Ln(n,"collectionParents")}function Gf(n){return Ln(n,"indexEntries")}function zf(n){return Ln(n,"indexConfiguration")}function uh(n){return Ln(n,"indexState")}function Qy(n){Ct(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const a=n[r].indexState.offset;my(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Zi(e.readTime,e.documentKey,t)}const Kw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Si{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Si(e,Si.DEFAULT_COLLECTION_PERCENTILE,Si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Zw(n,e,t){const r=n.store("mutations"),a=n.store("documentMutations"),c=[],h=IDBKeyRange.only(t.batchId);let _=0;const E=r.Z({range:h},(x,R,z)=>(_++,z.delete()));c.push(E.next(()=>{Ct(1===_)}));const C=[];for(const x of t.mutations){const R=mg(e,x.key.path,t.batchId);c.push(a.delete(R)),C.push(x.key)}return ie.waitFor(c).next(()=>C)}function bg(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw rt();e=n.noDocument}return JSON.stringify(e).length}Si.DEFAULT_COLLECTION_PERCENTILE=10,Si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Si.DEFAULT=new Si(41943040,Si.DEFAULT_COLLECTION_PERCENTILE,Si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Si.DISABLED=new Si(-1,0,0);class Wf{constructor(e,t,r,a){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=a,this.In={}}static oe(e,t,r,a){Ct(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new Wf(c,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ka(e).Z({index:"userMutationsIndex",range:r},(a,c,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,r,a){const c=Al(e),h=Ka(e);return h.add({}).next(_=>{Ct("number"==typeof _);const E=new tc(_,t,r,a),C=function(z,K,ne){const Me=ne.baseMutations.map(dt=>th(z.re,dt)),Le=ne.mutations.map(dt=>th(z.re,dt));return{userId:K,batchId:ne.batchId,localWriteTimeMs:ne.localWriteTime.toMillis(),baseMutations:Me,mutations:Le}}(this.It,this.userId,E),x=[];let R=new cn((z,K)=>xt(z.canonicalString(),K.canonicalString()));for(const z of a){const K=mg(this.userId,z.key.path,_);R=R.add(z.key.path.popLast()),x.push(h.put(C)),x.push(c.put(K,WI))}return R.forEach(z=>{x.push(this.indexManager.addToCollectionParentIndex(e,z))}),e.addOnCommittedListener(()=>{this.In[_]=E.keys()}),ie.waitFor(x).next(()=>E)})}lookupMutationBatch(e,t){return Ka(e).get(t).next(r=>r?(Ct(r.userId===this.userId),oc(this.It,r)):null)}Tn(e,t){return this.In[t]?ie.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const a=r.keys();return this.In[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let c=null;return Ka(e).Z({index:"userMutationsIndex",range:a},(h,_,E)=>{_.userId===this.userId&&(Ct(_.batchId>=r),c=oc(this.It,_)),E.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ka(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(a,c,h)=>{r=c.batchId,h.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ka(e).W("userMutationsIndex",t).next(r=>r.map(a=>oc(this.It,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=gg(this.userId,t.path),a=IDBKeyRange.lowerBound(r),c=[];return Al(e).Z({range:a},(h,_,E)=>{const[C,x,R]=h,z=ro(x);if(C===this.userId&&t.path.isEqual(z))return Ka(e).get(R).next(K=>{if(!K)throw rt();Ct(K.userId===this.userId),c.push(oc(this.It,K))});E.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new cn(xt);const a=[];return t.forEach(c=>{const h=gg(this.userId,c.path),_=IDBKeyRange.lowerBound(h),E=Al(e).Z({range:_},(C,x,R)=>{const[z,K,ne]=C,Me=ro(K);z===this.userId&&c.path.isEqual(Me)?r=r.add(ne):R.done()});a.push(E)}),ie.waitFor(a).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,c=gg(this.userId,r),h=IDBKeyRange.lowerBound(c);let _=new cn(xt);return Al(e).Z({range:h},(E,C,x)=>{const[R,z,K]=E,ne=ro(z);R===this.userId&&r.isPrefixOf(ne)?ne.length===a&&(_=_.add(K)):x.done()}).next(()=>this.En(e,_))}En(e,t){const r=[],a=[];return t.forEach(c=>{a.push(Ka(e).get(c).next(h=>{if(null===h)throw rt();Ct(h.userId===this.userId),r.push(oc(this.It,h))}))}),ie.waitFor(a).next(()=>r)}removeMutationBatch(e,t){return Zw(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ie.forEach(r,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ie.resolve();const r=IDBKeyRange.lowerBound([this.userId]),a=[];return Al(e).Z({range:r},(c,h,_)=>{if(c[0]===this.userId){const E=ro(c[1]);a.push(E)}else _.done()}).next(()=>{Ct(0===a.length)})})}containsKey(e,t){return Cg(e,this.userId,t)}Rn(e){return Jy(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Cg(n,e,t){const r=gg(e,t.path),a=r[1],c=IDBKeyRange.lowerBound(r);let h=!1;return Al(n).Z({range:c,X:!0},(_,E,C)=>{const[x,R,z]=_;x===e&&R===a&&(h=!0),C.done()}).next(()=>h)}function Ka(n){return Ln(n,"mutations")}function Al(n){return Ln(n,"documentMutations")}function Jy(n){return Ln(n,"mutationQueues")}class ac{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new ac(0)}static vn(){return new ac(-1)}}class Yw{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new ac(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>It.fromTimestamp(new In(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Sn(e,a)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Sl(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Ct(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let a=0;const c=[];return Sl(e).Z((h,_)=>{const E=ah(_);E.sequenceNumber<=t&&null===r.get(E.targetId)&&(a++,c.push(this.removeTargetData(e,E)))}).next(()=>ie.waitFor(c)).next(()=>a)}forEachTarget(e,t){return Sl(e).Z((r,a)=>{const c=ah(a);t(c)})}Vn(e){return Xy(e).get("targetGlobalKey").next(t=>(Ct(null!==t),t))}Sn(e,t){return Xy(e).put("targetGlobalKey",t)}Dn(e,t){return Sl(e).put(jy(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Gd(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let c=null;return Sl(e).Z({range:a,index:"queryTargetsIndex"},(h,_,E)=>{const C=ah(_);bf(t,C.target)&&(c=C,E.done())}).next(()=>c)}addMatchingKeys(e,t,r){const a=[],c=Za(e);return t.forEach(h=>{const _=di(h.path);a.push(c.put({targetId:r,path:_})),a.push(this.referenceDelegate.addReference(e,r,h))}),ie.waitFor(a)}removeMatchingKeys(e,t,r){const a=Za(e);return ie.forEach(t,c=>{const h=di(c.path);return ie.waitFor([a.delete([r,h]),this.referenceDelegate.removeReference(e,r,c)])})}removeMatchingKeysForTargetId(e,t){const r=Za(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=Za(e);let c=Ft();return a.Z({range:r,X:!0},(h,_,E)=>{const C=ro(h[1]),x=new je(C);c=c.add(x)}).next(()=>c)}containsKey(e,t){const r=di(t.path),a=IDBKeyRange.bound([r],[pw(r)],!1,!0);let c=0;return Za(e).Z({index:"documentTargetsIndex",X:!0,range:a},([h,_],E,C)=>{0!==h&&(c++,C.done())}).next(()=>c>0)}se(e,t){return Sl(e).get(t).next(r=>r?ah(r):null)}}function Sl(n){return Ln(n,"targets")}function Xy(n){return Ln(n,"targetGlobal")}function Za(n){return Ln(n,"targetDocuments")}function rD([n,e],[t,r]){const a=xt(n,t);return 0===a?xt(e,r):a}class iD{constructor(e){this.xn=e,this.buffer=new cn(rD),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();rD(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class sD{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;xe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ge.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){qu(r)?xe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Ra(r)}yield t.Fn(3e5)}))}}class Qw{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ie.resolve(bi.at);const r=new iD(t);return this.$n.forEachTarget(e,a=>r.On(a.sequenceNumber)).next(()=>this.$n.Ln(e,a=>r.On(a))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(Kw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kw):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,a,c,h,_,E,C;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),a=this.params.maximumSequenceNumbersToCollect):a=R,h=Date.now(),this.nthSequenceNumber(e,a))).next(R=>(r=R,_=Date.now(),this.removeTargets(e,r,t))).next(R=>(c=R,E=Date.now(),this.removeOrphanedDocuments(e,r))).next(R=>(C=Date.now(),qp()<=Ar.in.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-x}ms\n\tDetermined least recently used ${a} in `+(_-h)+`ms\n\tRemoved ${c} targets in `+(E-_)+`ms\n\tRemoved ${R} documents in `+(C-E)+`ms\nTotal Duration: ${C-x}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:R})))}}class oD{constructor(e,t){this.db=e,this.garbageCollector=new Qw(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,a)=>t(a))}addReference(e,t,r){return Yn(e,r)}removeReference(e,t,r){return Yn(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Yn(e,t)}Gn(e,t){return function(r,a){let c=!1;return Jy(r).tt(h=>Cg(r,h,a).next(_=>(_&&(c=!0),ie.resolve(!_)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let c=0;return this.Kn(e,(h,_)=>{if(_<=t){const E=this.Gn(e,h).next(C=>{if(!C)return c++,r.getEntry(e,h).next(()=>(r.removeEntry(h,It.min()),Za(e).delete([0,di(h.path)])))});a.push(E)}}).next(()=>ie.waitFor(a)).next(()=>r.apply(e)).next(()=>c)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Yn(e,t)}Kn(e,t){const r=Za(e);let a,c=bi.at;return r.Z({index:"documentTargetsIndex"},([h,_],{path:E,sequenceNumber:C})=>{0===h?(c!==bi.at&&t(new je(ro(a)),c),c=C,a=E):c=bi.at}).next(()=>{c!==bi.at&&t(new je(ro(a)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Yn(n,e){return Za(n).put((r=n.currentSequenceNumber,{targetId:0,path:di(e.path),sequenceNumber:r}));var r}class e_{constructor(){this.changes=new ja(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class aD{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return uc(e).put(r)}removeEntry(e,t,r){return uc(e).delete(function(a,c){const h=a.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],Ga(c),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Dn.newInvalidDocument(t);return uc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ch(t))},(a,c)=>{r=this.jn(t,c)}).next(()=>r)}Wn(e,t){let r={size:0,document:Dn.newInvalidDocument(t)};return uc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ch(t))},(a,c)=>{r={document:this.jn(t,c),size:bg(c)}}).next(()=>r)}getEntries(e,t){let r=Ti();return this.zn(e,t,(a,c)=>{const h=this.jn(a,c);r=r.insert(a,h)}).next(()=>r)}Hn(e,t){let r=Ti(),a=new Kn(je.comparator);return this.zn(e,t,(c,h)=>{const _=this.jn(c,h);r=r.insert(c,_),a=a.insert(c,bg(h))}).next(()=>({documents:r,Jn:a}))}zn(e,t,r){if(t.isEmpty())return ie.resolve();let a=new cn(tE);t.forEach(E=>a=a.add(E));const c=IDBKeyRange.bound(ch(a.first()),ch(a.last())),h=a.getIterator();let _=h.getNext();return uc(e).Z({index:"documentKeyIndex",range:c},(E,C,x)=>{const R=je.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;_&&tE(_,R)<0;)r(_,null),_=h.getNext();_&&_.isEqual(R)&&(r(_,C),_=h.hasNext()?h.getNext():null),_?x.j(ch(_)):x.done()}).next(()=>{for(;_;)r(_,null),_=h.hasNext()?h.getNext():null})}getAllFromCollection(e,t,r){const a=[t.popLast().toArray(),t.lastSegment(),Ga(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return uc(e).W(IDBKeyRange.bound(a,c,!0)).next(h=>{let _=Ti();for(const E of h){const C=this.jn(je.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);_=_.insert(C.key,C)}return _})}getAllFromCollectionGroup(e,t,r,a){let c=Ti();const h=xl(t,r),_=xl(t,Zi.max());return uc(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(h,_,!0)},(E,C,x)=>{const R=this.jn(je.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);c=c.insert(R.key,R),c.size===a&&x.done()}).next(()=>c)}newChangeBuffer(e){return new Xw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return eE(e).get("remoteDocumentGlobalKey").next(t=>(Ct(!!t),t))}Qn(e,t){return eE(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function oh(n,e){let t;if(e.document)t=By(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=je.fromSegments(e.noDocument.path),a=sc(e.noDocument.readTime);t=Dn.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return rt();{const r=je.fromSegments(e.unknownDocument.path),a=sc(e.unknownDocument.version);t=Dn.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime(function(r){const a=new In(r[0],r[1]);return It.fromTimestamp(a)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(It.min()))return r}return Dn.newInvalidDocument(e)}}function Jw(n){return new aD(n)}class Xw extends e_{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new ja(r=>r.toString(),(r,a)=>r.isEqual(a))}applyChanges(e){const t=[];let r=0,a=new cn((c,h)=>xt(c.canonicalString(),h.canonicalString()));return this.changes.forEach((c,h)=>{const _=this.Xn.get(c);if(t.push(this.Yn.removeEntry(e,c,_.readTime)),h.isValidDocument()){const E=Tl(this.Yn.It,h);a=a.add(c.path.popLast()),r+=bg(E)-_.size,t.push(this.Yn.addEntry(e,c,E))}else if(r-=_.size,this.trackRemovals){const E=Tl(this.Yn.It,h.convertToNoDocument(It.min()));t.push(this.Yn.addEntry(e,c,E))}}),a.forEach(c=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,c))}),t.push(this.Yn.updateMetadata(e,r)),ie.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:a})=>(a.forEach((c,h)=>{this.Xn.set(c,{size:h,readTime:r.get(c).readTime})}),r))}}function eE(n){return Ln(n,"remoteDocumentGlobal")}function uc(n){return Ln(n,"remoteDocumentsV14")}function ch(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function xl(n,e){const t=e.documentKey.path.toArray();return[n,Ga(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function tE(n,e){const t=n.path.toArray(),r=e.path.toArray();let a=0;for(let c=0;c<t.length-2&&c<r.length-2;++c)if(a=xt(t[c],r[c]),a)return a;return a=xt(t.length,r.length),a||(a=xt(t[t.length-2],r[r.length-2]),a||xt(t[t.length-1],r[r.length-1]))}class uD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class t_{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(r=a,this.getBaseDocument(e,t,r))).next(a=>(null!==r&&El(r.mutation,a,Yi.empty(),In.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ft()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ft()){const a=Ha();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,r).next(c=>{let h=Jd();return c.forEach((_,E)=>{h=h.insert(_,E.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const r=Ha();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ft()))}populateOverlays(e,t,r){const a=[];return r.forEach(c=>{t.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((h,_)=>{t.set(h,_)})})}computeViews(e,t,r,a){let c=Ti();const h=Dl(),_=Dl();return t.forEach((E,C)=>{const x=r.get(C.key);a.has(C.key)&&(void 0===x||x.mutation instanceof Vo)?c=c.insert(C.key,C):void 0!==x&&(h.set(C.key,x.mutation.getFieldMask()),El(x.mutation,C,x.mutation.getFieldMask(),In.now()))}),this.recalculateAndSaveOverlays(e,c).next(E=>(E.forEach((C,x)=>h.set(C,x)),t.forEach((C,x)=>{var R;return _.set(C,new uD(x,null!==(R=h.get(C))&&void 0!==R?R:null))}),_))}recalculateAndSaveOverlays(e,t){const r=Dl();let a=new Kn((h,_)=>h-_),c=Ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const _ of h)_.keys().forEach(E=>{const C=t.get(E);if(null===C)return;let x=r.get(E)||Yi.empty();x=_.applyToLocalView(C,x),r.set(E,x);const R=(a.get(_.batchId)||Ft()).add(E);a=a.insert(_.batchId,R)})}).next(()=>{const h=[],_=a.getReverseIterator();for(;_.hasNext();){const E=_.getNext(),C=E.key,x=E.value,R=Lw();x.forEach(z=>{if(!c.has(z)){const K=Sf(t.get(z),r.get(z));null!==K&&R.set(z,K),c=c.add(z)}}),h.push(this.documentOverlayCache.saveOverlays(e,C,R))}return ie.waitFor(h)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return je.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Mw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var a}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next(c=>{const h=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-c.size):ie.resolve(Ha());let _=-1,E=c;return h.next(C=>ie.forEach(C,(x,R)=>(_<R.largestBatchId&&(_=R.largestBatchId),c.get(x)?ie.resolve():this.getBaseDocument(e,x,R).next(z=>{E=E.insert(x,z)}))).next(()=>this.populateOverlays(e,C,c)).next(()=>this.computeViews(e,E,C,Ft())).next(x=>({batchId:_,changes:Fw(x)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new je(t)).next(r=>{let a=Jd();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const a=t.collectionGroup;let c=Jd();return this.indexManager.getCollectionParents(e,a).next(h=>ie.forEach(h,_=>{const E=(C=t,x=_.child(a),new Qu(x,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,x;return this.getDocumentsMatchingCollectionQuery(e,E,r).next(C=>{C.forEach((x,R)=>{c=c.insert(x,R)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r){let a;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(c=>(a=c,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(c=>{c.forEach((_,E)=>{const C=E.getKey();null===a.get(C)&&(a=a.insert(C,Dn.newInvalidDocument(C)))});let h=Jd();return a.forEach((_,E)=>{const C=c.get(_);void 0!==C&&El(C.mutation,E,Yi.empty(),In.now()),Ow(t,E)&&(h=h.insert(_,E))}),h})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ie.resolve(Dn.newInvalidDocument(t))}}class cD{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ie.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Or(r.createTime)}),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:_g(r.bundledQuery),readTime:Or(r.readTime)}),ie.resolve();var r}}class nE{constructor(){this.overlays=new Kn(je.comparator),this.es=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ha();return ie.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&r.set(a,c)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((a,c)=>{this.ue(e,t,c)}),ie.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.es.get(r);return void 0!==a&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.es.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const a=Ha(),c=t.length+1,h=new je(t.child("")),_=this.overlays.getIteratorFrom(h);for(;_.hasNext();){const E=_.getNext().value,C=E.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===c&&E.largestBatchId>r&&a.set(E.getKey(),E)}return ie.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let c=new Kn((C,x)=>C-x);const h=this.overlays.getIterator();for(;h.hasNext();){const C=h.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let x=c.get(C.largestBatchId);null===x&&(x=Ha(),c=c.insert(C.largestBatchId,x)),x.set(C.getKey(),C)}}const _=Ha(),E=c.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach((C,x)=>_.set(C,x)),!(_.size()>=a)););return ie.resolve(_)}ue(e,t,r){const a=this.overlays.get(r.key);if(null!==a){const h=this.es.get(a.largestBatchId).delete(r.key);this.es.set(a.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new rc(t,r));let c=this.es.get(t);void 0===c&&(c=Ft(),this.es.set(t,c)),this.es.set(t,c.add(r.key))}}class rE{constructor(){this.ns=new cn(Ir.ss),this.rs=new cn(Ir.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Ir(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Ir(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new je(new zt([])),r=new Ir(t,e),a=new Ir(t,e+1),c=[];return this.rs.forEachInRange([r,a],h=>{this.cs(h),c.push(h.key)}),c}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new je(new zt([])),r=new Ir(t,e),a=new Ir(t,e+1);let c=Ft();return this.rs.forEachInRange([r,a],h=>{c=c.add(h.key)}),c}containsKey(e){const t=new Ir(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ir{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return je.comparator(e.key,t.key)||xt(e._s,t._s)}static os(e,t){return xt(e._s,t._s)||je.comparator(e.key,t.key)}}class n_{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new cn(Ir.ss)}checkEmpty(e){return ie.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,a){const c=this.ws;this.ws++;const h=new tc(c,t,r,a);this.mutationQueue.push(h);for(const _ of a)this.gs=this.gs.add(new Ir(_.key,c)),this.indexManager.addToCollectionParentIndex(e,_.key.path.popLast());return ie.resolve(h)}lookupMutationBatch(e,t){return ie.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.ps(t+1),c=a<0?0:a;return ie.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ir(t,0),a=new Ir(t,Number.POSITIVE_INFINITY),c=[];return this.gs.forEachInRange([r,a],h=>{const _=this.ys(h._s);c.push(_)}),ie.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new cn(xt);return t.forEach(a=>{const c=new Ir(a,0),h=new Ir(a,Number.POSITIVE_INFINITY);this.gs.forEachInRange([c,h],_=>{r=r.add(_._s)})}),ie.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let c=r;je.isDocumentKey(c)||(c=c.child(""));const h=new Ir(new je(c),0);let _=new cn(xt);return this.gs.forEachWhile(E=>{const C=E.key.path;return!!r.isPrefixOf(C)&&(C.length===a&&(_=_.add(E._s)),!0)},h),ie.resolve(this.Is(_))}Is(e){const t=[];return e.forEach(r=>{const a=this.ys(r);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){Ct(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return ie.forEach(t.mutations,a=>{const c=new Ir(a.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Ir(t,0),a=this.gs.firstAfterOrEqual(r);return ie.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return ie.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class jo{constructor(e){this.Es=e,this.docs=new Kn(je.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),c=a?a.size:0,h=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():Dn.newInvalidDocument(t))}getEntries(e,t){let r=Ti();return t.forEach(a=>{const c=this.docs.get(a);r=r.insert(a,c?c.document.mutableCopy():Dn.newInvalidDocument(a))}),ie.resolve(r)}getAllFromCollection(e,t,r){let a=Ti();const c=new je(t.child("")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:_,value:{document:E}}=h.getNext();if(!t.isPrefixOf(_.path))break;_.path.length>t.length+1||my(Fo(E),r)<=0||(a=a.insert(E.key,E.mutableCopy()))}return ie.resolve(a)}getAllFromCollectionGroup(e,t,r,a){rt()}As(e,t){return ie.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new lD(this)}getSize(e){return ie.resolve(this.size)}}class lD extends e_{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?t.push(this.Yn.addEntry(e,a)):this.Yn.removeEntry(r)}),ie.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class dD{constructor(e){this.persistence=e,this.Rs=new ja(t=>Gd(t),bf),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.bs=0,this.Ps=new rE,this.targetCount=0,this.vs=ac.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,a)=>t(a)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ie.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new ac(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Dn(t),ie.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let a=0;const c=[];return this.Rs.forEach((h,_)=>{_.sequenceNumber<=t&&null===r.get(_.targetId)&&(this.Rs.delete(h),c.push(this.removeMatchingKeysForTargetId(e,_.targetId)),a++)}),ie.waitFor(c).next(()=>a)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach(h=>{c.push(a.markPotentiallyOrphaned(e,h))}),ie.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this.Ps.containsKey(t))}}class io{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new bi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new dD(this),this.indexManager=new Ky,this.remoteDocumentCache=new jo(r=>this.referenceDelegate.xs(r)),this.It=new Cl(t),this.Ns=new cD(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new nE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new n_(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){xe("MemoryPersistence","Starting transaction:",e);const a=new so(this.Ss.next());return this.referenceDelegate.ks(),r(a).next(c=>this.referenceDelegate.Os(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Ms(e,t){return ie.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class so extends yI{constructor(e){super(),this.currentSequenceNumber=e}}class xi{constructor(e){this.persistence=e,this.Fs=new rE,this.$s=null}static Bs(e){return new xi(e)}get Ls(){if(this.$s)return this.$s;throw rt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(a=>this.Ls.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(c=>this.Ls.add(c.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.Ls,r=>{const a=je.fromPath(r);return this.Us(e,a).next(c=>{c||t.removeEntry(a,It.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return ie.or([()=>ie.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class iE{constructor(e){this.It=e}$(e,t,r,a){const c=new yy("createOrUpgrade",t);var _;r<1&&a>=1&&(e.createObjectStore("owner"),(_=e).createObjectStore("mutationQueues",{keyPath:"userId"}),_.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pg,{unique:!0}),_.createObjectStore("documentMutations"),r_(e),function(_){_.createObjectStore("remoteDocuments")}(e));let h=ie.resolve();return r<3&&a>=3&&(0!==r&&(function(_){_.deleteObjectStore("targetDocuments"),_.deleteObjectStore("targets"),_.deleteObjectStore("targetGlobal")}(e),r_(e)),h=h.next(()=>function(_){const E=_.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:It.min().toTimestamp(),targetCount:0};return E.put("targetGlobalKey",C)}(c))),r<4&&a>=4&&(0!==r&&(h=h.next(()=>function(_,E){return E.store("mutations").W().next(C=>{_.deleteObjectStore("mutations"),_.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pg,{unique:!0});const x=E.store("mutations"),R=C.map(z=>x.put(z));return ie.waitFor(R)})}(e,c))),h=h.next(()=>{!function(_){_.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&a>=5&&(h=h.next(()=>this.qs(c))),r<6&&a>=6&&(h=h.next(()=>(function(_){_.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(c)))),r<7&&a>=7&&(h=h.next(()=>this.Gs(c))),r<8&&a>=8&&(h=h.next(()=>this.Qs(e,c))),r<9&&a>=9&&(h=h.next(()=>{!function(_){_.objectStoreNames.contains("remoteDocumentChanges")&&_.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&a>=10&&(h=h.next(()=>this.js(c))),r<11&&a>=11&&(h=h.next(()=>{(function(_){_.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(_){_.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&a>=12&&(h=h.next(()=>{!function(_){const E=_.createObjectStore("documentOverlays",{keyPath:Uy});E.createIndex("collectionPathOverlayIndex",eD,{unique:!1}),E.createIndex("collectionGroupOverlayIndex",Uo,{unique:!1})}(e)})),r<13&&a>=13&&(h=h.next(()=>function(_){const E=_.createObjectStore("remoteDocumentsV14",{keyPath:qI});E.createIndex("documentKeyIndex",KI),E.createIndex("collectionGroupIndex",ZI)}(e)).next(()=>this.Ws(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&a>=14&&(h=h.next(()=>this.zs(e,c))),r<15&&a>=15&&(h=h.next(()=>function(_){_.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),_.createObjectStore("indexState",{keyPath:AC}).createIndex("sequenceNumberIndex",Vf,{unique:!1}),_.createObjectStore("indexEntries",{keyPath:JI}).createIndex("documentKeyIndex",XI,{unique:!1})}(e))),h}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,a)=>{t+=bg(a)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(a=>ie.forEach(a,c=>{const h=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",h).next(_=>ie.forEach(_,E=>{Ct(E.userId===c.userId);const C=oc(this.It,E);return Zw(e,c.userId,C).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const c=[];return r.Z((h,_)=>{const E=new zt(h),C=[0,di(E)];c.push(t.get(C).next(x=>x?ie.resolve():t.put({targetId:0,path:di(E),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>ie.waitFor(c))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:bl});const r=t.store("collectionParents"),a=new Dg,c=h=>{if(a.add(h)){const _=h.lastSegment(),E=h.popLast();return r.put({collectionId:_,parent:di(E)})}};return t.store("remoteDocuments").Z({X:!0},(h,_)=>{const E=new zt(h);return c(E.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([h,_,E],C)=>{const x=ro(_);return c(x.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,a)=>{const c=ah(a),h=jy(this.It,c);return t.put(h)})}Ws(e,t){const r=t.store("remoteDocuments"),a=[];return r.Z((c,h)=>{const _=t.store("remoteDocumentsV14"),E=(C=h,C.document?new je(zt.fromString(C.document.name).popFirst(5)):C.noDocument?je.fromSegments(C.noDocument.path):C.unknownDocument?je.fromSegments(C.unknownDocument.path):rt()).path.toArray();var C;const x={prefixPath:E.slice(0,E.length-2),collectionGroup:E[E.length-2],documentId:E[E.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};a.push(_.put(x))}).next(()=>ie.waitFor(a))}zs(e,t){const r=t.store("mutations"),a=Jw(this.It),c=new io(xi.Bs,this.It.re);return r.W().next(h=>{const _=new Map;return h.forEach(E=>{var C;let x=null!==(C=_.get(E.userId))&&void 0!==C?C:Ft();oc(this.It,E).keys().forEach(R=>x=x.add(R)),_.set(E.userId,x)}),ie.forEach(_,(E,C)=>{const x=new gr(C),R=wg.oe(this.It,x),z=c.getIndexManager(x),K=Wf.oe(x,this.It,z,c.referenceDelegate);return new t_(a,K,R,z).recalculateAndSaveOverlaysForDocumentKeys(new Uf(t,bi.at),E).next()})})}}function r_(n){n.createObjectStore("targetDocuments",{keyPath:QI}).createIndex("documentTargetsIndex",yg,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",YI,{unique:!0}),n.createObjectStore("targetGlobal")}const i_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class s_{constructor(e,t,r,a,c,h,_,E,C,x,R=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=c,this.window=h,this.document=_,this.Js=C,this.Ys=x,this.Xs=R,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=z=>Promise.resolve(),!s_.C())throw new Ae(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new oD(this,a),this.ii=t+"main",this.It=new Cl(E),this.ri=new bs(this.ii,this.Xs,new iE(this.It)),this.Cs=new Yw(this.referenceDelegate,this.It),this.remoteDocumentCache=Jw(this.It),this.Ns=new tD,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===x&&ir("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ae(ae.FAILED_PRECONDITION,i_);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new bi(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,ge.Z)(function*(a){if(t.started)return e(a)});return function(a){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ge.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ge.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Tg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(qu(e))return xe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return xe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return qf(e).get("owner").next(t=>ie.resolve(this.mi(t)))}gi(e){return Tg(e).delete(this.clientId)}yi(){var e=this;return(0,ge.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const a=Ln(r,"clientMetadata");return a.W().next(c=>{const h=e.Ii(c,18e5),_=c.filter(E=>-1===h.indexOf(E));return ie.forEach(_,E=>a.delete(E.clientId)).next(()=>_)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ie.resolve(!0):qf(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ae(ae.FAILED_PRECONDITION,i_);return!1}}return!(!this.networkEnabled||!this.inForeground)||Tg(e).W().next(r=>void 0===this.Ii(r,5e3).find(a=>{if(this.clientId!==a.clientId){const h=!this.inForeground&&a.inForeground,_=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||h&&_)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&xe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ge.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Uf(t,bi.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Tg(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Wf.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Zy(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return wg.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){xe("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",c=15===(h=this.Xs)?Ts:14===h?Bf:13===h?ec:12===h?ti:11===h?sh:void rt();var h;let _;return this.ri.runTransaction(e,a,c,E=>(_=new Uf(E,this.Ss?this.Ss.next():bi.at),"readwrite-primary"===t?this.fi(_).next(C=>!!C||this.di(_)).next(C=>{if(!C)throw ir(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ae(ae.FAILED_PRECONDITION,mI);return r(_)}).next(C=>this.wi(_).next(()=>C)):this.Vi(_).next(()=>r(_)))).then(E=>(_.raiseOnCommittedEvent(),E))}Vi(e){return qf(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ae(ae.FAILED_PRECONDITION,i_)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return qf(e).put("owner",t)}static C(){return bs.C()}_i(e){const t=qf(e);return t.get("owner").next(r=>this.mi(r)?(xe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ie.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(ir(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Bt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return xe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ir("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){ir("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function qf(n){return Ln(n,"owner")}function Tg(n){return Ln(n,"clientMetadata")}function Kf(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Ml{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=a}static Ci(e,t){let r=Ft(),a=Ft();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new Ml(e,t.fromCache,r,a)}}class sE{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,a){return this.ki(e,t).next(c=>c||this.Oi(e,t,a,r)).next(c=>c||this.Mi(e,t))}ki(e,t){if(xw(t))return ie.resolve(null);let r=Ci(t);return this.indexManager.getIndexType(e,r).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=Tf(t,null,"F"),r=Ci(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(c=>{const h=Ft(...c);return this.Ni.getDocuments(e,h).next(_=>this.indexManager.getMinOffset(e,r).next(E=>{const C=this.Fi(t,_);return this.$i(t,C,h,E.readTime)?this.ki(e,Tf(t,null,"F")):this.Bi(e,C,t,E)}))})))}Oi(e,t,r,a){return xw(t)||a.isEqual(It.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(c=>{const h=this.Fi(t,c);return this.$i(t,h,r,a)?this.Mi(e,t):(qp()<=Ar.in.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Af(t)),this.Bi(e,h,t,dl(a,-1)))})}Fi(e,t){let r=new cn(TI(e));return t.forEach((a,c)=>{Ow(e,c)&&(r=r.add(c))}),r}$i(e,t,r,a){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const c="F"===e.limitType?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Mi(e,t){return qp()<=Ar.in.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",Af(t)),this.Ni.getDocumentsMatchingQuery(e,t,Zi.min())}Bi(e,t,r,a){return this.Ni.getDocumentsMatchingQuery(e,r,a).next(c=>(t.forEach(h=>{c=c.insert(h.key,h)}),c))}}class oE{constructor(e,t,r,a){this.persistence=e,this.Li=t,this.It=a,this.Ui=new Kn(xt),this.qi=new ja(c=>Gd(c),bf),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new t_(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function aE(n,e,t,r){return new oE(n,e,t,r)}function o_(n,e){return Ag.apply(this,arguments)}function Ag(){return Ag=(0,ge.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next(c=>(a=c,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(c=>{const h=[],_=[];let E=Ft();for(const C of a){h.push(C.batchId);for(const x of C.mutations)E=E.add(x.key)}for(const C of c){_.push(C.batchId);for(const x of C.mutations)E=E.add(x.key)}return t.localDocuments.getDocuments(r,E).next(C=>({ji:C,removedBatchIds:h,addedBatchIds:_}))})})}),Ag.apply(this,arguments)}function Sg(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=e.batch.keys(),c=t.Gi.newChangeBuffer({trackRemovals:!0});return function(h,_,E,C){const x=E.batch,R=x.keys();let z=ie.resolve();return R.forEach(K=>{z=z.next(()=>C.getEntry(_,K)).next(ne=>{const Me=E.docVersions.get(K);Ct(null!==Me),ne.version.compareTo(Me)<0&&(x.applyToRemoteDocument(ne,E),ne.isValidDocument()&&(ne.setReadTime(E.commitVersion),C.addEntry(ne)))})}),z.next(()=>h.mutationQueue.removeMutationBatch(_,x))}(t,r,e,c).next(()=>c.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let _=Ft();for(let E=0;E<h.mutationResults.length;++E)h.mutationResults[E].transformResults.length>0&&(_=_.add(h.batch.mutations[E].key));return _}(e))).next(()=>t.localDocuments.getDocuments(r,a))})}function uE(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function cE(n,e){const t=qe(n),r=e.snapshotVersion;let a=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const h=t.Gi.newChangeBuffer({trackRemovals:!0});a=t.Ui;const _=[];e.targetChanges.forEach((x,R)=>{const z=a.get(R);if(!z)return;_.push(t.Cs.removeMatchingKeys(c,x.removedDocuments,R).next(()=>t.Cs.addMatchingKeys(c,x.addedDocuments,R)));let K=z.withSequenceNumber(c.currentSequenceNumber);var ne,Me,Le;e.targetMismatches.has(R)?K=K.withResumeToken(yr.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):x.resumeToken.approximateByteSize()>0&&(K=K.withResumeToken(x.resumeToken,r)),a=a.insert(R,K),Me=K,Le=x,(0===(ne=z).resumeToken.approximateByteSize()||Me.snapshotVersion.toMicroseconds()-ne.snapshotVersion.toMicroseconds()>=3e8||Le.addedDocuments.size+Le.modifiedDocuments.size+Le.removedDocuments.size>0)&&_.push(t.Cs.updateTargetData(c,K))});let E=Ti(),C=Ft();if(e.documentUpdates.forEach(x=>{e.resolvedLimboDocuments.has(x)&&_.push(t.persistence.referenceDelegate.updateLimboDocument(c,x))}),_.push(a_(c,h,e.documentUpdates).next(x=>{E=x.Wi,C=x.zi})),!r.isEqual(It.min())){const x=t.Cs.getLastRemoteSnapshotVersion(c).next(R=>t.Cs.setTargetsMetadata(c,c.currentSequenceNumber,r));_.push(x)}return ie.waitFor(_).next(()=>h.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,E,C)).next(()=>E)}).then(c=>(t.Ui=a,c))}function a_(n,e,t){let r=Ft(),a=Ft();return t.forEach(c=>r=r.add(c)),e.getEntries(n,r).next(c=>{let h=Ti();return t.forEach((_,E)=>{const C=c.get(_);E.isFoundDocument()!==C.isFoundDocument()&&(a=a.add(_)),E.isNoDocument()&&E.version.isEqual(It.min())?(e.removeEntry(_,E.readTime),h=h.insert(_,E)):!C.isValidDocument()||E.version.compareTo(C.version)>0||0===E.version.compareTo(C.version)&&C.hasPendingWrites?(e.addEntry(E),h=h.insert(_,E)):xe("LocalStore","Ignoring outdated watch update for ",_,". Current version:",C.version," Watch version:",E.version)}),{Wi:h,zi:a}})}function u_(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ya(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return t.Cs.getTargetData(r,e).next(c=>c?(a=c,ie.resolve(a)):t.Cs.allocateTargetId(r).next(h=>(a=new Ji(e,h,0,r.currentSequenceNumber),t.Cs.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=t.Ui.get(r.targetId);return(null===a||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Nl(n,e,t){return Zf.apply(this,arguments)}function Zf(){return Zf=(0,ge.Z)(function*(n,e,t){const r=qe(n),a=r.Ui.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",c,h=>r.persistence.referenceDelegate.removeTarget(h,a)))}catch(h){if(!qu(h))throw h;xe("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.Ui=r.Ui.remove(e),r.qi.delete(a.target)}),Zf.apply(this,arguments)}function Yf(n,e,t){const r=qe(n);let a=It.min(),c=Ft();return r.persistence.runTransaction("Execute query","readonly",h=>function(_,E,C){const x=qe(_),R=x.qi.get(C);return void 0!==R?ie.resolve(x.Ui.get(R)):x.Cs.getTargetData(E,C)}(r,h,Ci(e)).next(_=>{if(_)return a=_.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(h,_.targetId).next(E=>{c=E})}).next(()=>r.Li.getDocumentsMatchingQuery(h,e,t?a:It.min(),t?c:Ft())).next(_=>(d_(r,CI(e),_),{documents:_,Hi:c})))}function c_(n,e){const t=qe(n),r=qe(t.Cs),a=t.Ui.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",c=>r.se(c,e).next(h=>h?h.target:null))}function l_(n,e){const t=qe(n),r=t.Ki.get(e)||It.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Gi.getAllFromCollectionGroup(a,e,dl(r,-1),Number.MAX_SAFE_INTEGER)).then(a=>(d_(t,e,a),a))}function d_(n,e,t){let r=n.Ki.get(e)||It.min();t.forEach((a,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)}),n.Ki.set(e,r)}function xg(){return xg=(0,ge.Z)(function*(n,e,t,r){const a=qe(n);let c=Ft(),h=Ti();for(const C of t){const x=e.Ji(C.metadata.name);C.document&&(c=c.add(x));const R=e.Yi(C);R.setReadTime(e.Xi(C.metadata.readTime)),h=h.insert(x,R)}const _=a.Gi.newChangeBuffer({trackRemovals:!0}),E=yield Ya(a,(C=r,Ci(Wd(zt.fromString(`__bundle__/docs/${C}`)))));var C;return a.persistence.runTransaction("Apply bundle documents","readwrite",C=>a_(C,_,h).next(x=>(_.apply(C),x)).next(x=>a.Cs.removeMatchingKeysForTargetId(C,E.targetId).next(()=>a.Cs.addMatchingKeys(C,c,E.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(C,x.Wi,x.zi)).next(()=>x.Wi)))}),xg.apply(this,arguments)}function hD(n,e){return h_.apply(this,arguments)}function h_(){return h_=(0,ge.Z)(function*(n,e,t=Ft()){const r=yield Ya(n,Ci(_g(e.bundledQuery))),a=qe(n);return a.persistence.runTransaction("Save named query","readwrite",c=>{const h=Or(e.readTime);if(r.snapshotVersion.compareTo(h)>=0)return a.Ns.saveNamedQuery(c,e);const _=r.withResumeToken(yr.EMPTY_BYTE_STRING,h);return a.Ui=a.Ui.insert(_.targetId,_),a.Cs.updateTargetData(c,_).next(()=>a.Cs.removeMatchingKeysForTargetId(c,r.targetId)).next(()=>a.Cs.addMatchingKeys(c,t,r.targetId)).next(()=>a.Ns.saveNamedQuery(c,e))})}),h_.apply(this,arguments)}function dE(n,e){return`firestore_clients_${n}_${e}`}function hE(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function f_(n,e){return`firestore_targets_${n}_${e}`}class Mg{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static Zi(e,t,r){const a=JSON.parse(r);let c,h="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return h&&a.error&&(h="string"==typeof a.error.message&&"string"==typeof a.error.code,h&&(c=new Ae(a.error.code,a.error.message))),h?new Mg(e,t,a.state,c):(ir("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qf{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let a,c="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(a=new Ae(r.error.code,r.error.message))),c?new Qf(e,r.state,a):(ir("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ng{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let a="object"==typeof r&&r.activeTargetIds instanceof Array,c=Mf();for(let h=0;a&&h<r.activeTargetIds.length;++h)a=ww(r.activeTargetIds[h]),c=c.add(r.activeTargetIds[h]);return a?new Ng(e,c):(ir("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class p_{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new p_(t.clientId,t.onlineState):(ir("SharedClientState",`Failed to parse online state: ${e}`),null)}}class g_{constructor(){this.activeTargetIds=Mf()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class m_{constructor(e,t,r,a,c){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Kn(xt),this.started=!1,this.cr=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.ar=dE(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new g_),this.lr=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(_){return`firestore_bundle_loaded_v2_${_}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ge.Z)(function*(){const t=yield e.syncEngine.vi();for(const a of t){if(a===e.sr)continue;const c=e.getItem(dE(e.persistenceKey,a));if(c){const h=Ng.Zi(a,c);h&&(e.ur=e.ur.insert(h.clientId,h))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const a=e.yr(r);a&&e.pr(a)}for(const a of e.cr)e.rr(a);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(f_(this.persistenceKey,e));if(r){const a=Qf.Zi(e,r);a&&(t=a.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(f_(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(a=>{this.Er(a)}),this.currentUser=e,r.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return xe("SharedClientState","READ",e,t),t}setItem(e,t){xe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){xe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(xe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void ir("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ge.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const a=t.vr(r.key);return t.Vr(a,null)}{const a=t.Sr(r.key,r.newValue);if(a)return t.Vr(a.clientId,a)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const a=t.Dr(r.key,r.newValue);if(a)return t.Cr(a)}}else if(t._r.test(r.key)){if(null!==r.newValue){const a=t.Nr(r.key,r.newValue);if(a)return t.kr(a)}}else if(r.key===t.wr){if(null!==r.newValue){const a=t.yr(r.newValue);if(a)return t.pr(a)}}else if(r.key===t.hr){const a=function(c){let h=bi.at;if(null!=c)try{const _=JSON.parse(c);Ct("number"==typeof _),h=_}catch(_){ir("SharedClientState","Failed to read sequence number from WebStorage",_)}return h}(r.newValue);a!==bi.at&&t.sequenceNumberHandler(a)}else if(r.key===t.mr){const a=t.Or(r.newValue);yield Promise.all(a.map(c=>t.syncEngine.Mr(c)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const a=new Mg(this.currentUser,e,t,r),c=hE(this.persistenceKey,this.currentUser,e);this.setItem(c,a.tr())}Er(e){const t=hE(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const a=f_(this.persistenceKey,e),c=new Qf(e,t,r);this.setItem(a,c.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return Ng.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),a=Number(r[1]);return Mg.Zi(new gr(void 0!==r[2]?r[2]:null),a,t)}Nr(e,t){const r=this._r.exec(e),a=Number(r[1]);return Qf.Zi(a,t)}yr(e){return p_.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ge.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);xe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),a=this.Ir(this.ur),c=this.Ir(r),h=[],_=[];return c.forEach(E=>{a.has(E)||h.push(E)}),a.forEach(E=>{c.has(E)||_.push(E)}),this.syncEngine.Br(h,_).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Mf();return e.forEach((r,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class fE{constructor(){this.Lr=new g_,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new g_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class fD{qr(e){}shutdown(){}}class pE{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){xe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){xe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const pD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gD{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class mD extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,a,c){const h=this.ho(e,t);xe("RestConnection","Sending: ",h,r);const _={};return this.lo(_,a,c),this.fo(e,h,_,r).then(E=>(xe("RestConnection","Received: ",E),E),E=>{throw zu("RestConnection",`${e} failed with error: `,E,"url: ",h,"request:",r),E})}_o(e,t,r,a,c,h){return this.ao(e,t,r,a,c)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Oa,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,c)=>e[c]=a),r&&r.headers.forEach((a,c)=>e[c]=a)}ho(e,t){return`${this.oo}/v1/${t}:${pD[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,a){return new Promise((c,h)=>{const _=new Wp;_.setWithCredentials(!0),_.listenOnce(cw.COMPLETE,()=>{var C;try{switch(_.getLastErrorCode()){case vf.NO_ERROR:const x=_.getResponseJson();xe("Connection","XHR received:",JSON.stringify(x)),c(x);break;case vf.TIMEOUT:xe("Connection",'RPC "'+e+'" timed out'),h(new Ae(ae.DEADLINE_EXCEEDED,"Request time out"));break;case vf.HTTP_ERROR:const R=_.getStatus();if(xe("Connection",'RPC "'+e+'" failed with status:',R,"response text:",_.getResponseText()),R>0){let z=_.getResponseJson();Array.isArray(z)&&(z=z[0]);const K=null===(C=z)||void 0===C?void 0:C.error;if(K&&K.status&&K.message){const ne=function(Me){const Le=Me.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(Le)>=0?Le:ae.UNKNOWN}(K.status);h(new Ae(ne,K.message))}else h(new Ae(ae.UNKNOWN,"Server responded with status "+_.getStatus()))}else h(new Ae(ae.UNAVAILABLE,"Connection failed."));break;default:rt()}}finally{xe("Connection",'RPC "'+e+'" completed.')}});const E=JSON.stringify(a);_.send(t,"POST",E,r,15)})}wo(e,t,r){const a=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=mC(),h=uI(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(_.xmlHttpFactory=new cI({})),this.lo(_.initMessageHeaders,t,r),_.encodeInitMessageHeaders=!0;const E=a.join("");xe("Connection","Creating WebChannel: "+E,_);const C=c.createWebChannel(E,_);let x=!1,R=!1;const z=new gD({Hr:ne=>{R?xe("Connection","Not sending because WebChannel is closed:",ne):(x||(xe("Connection","Opening WebChannel transport."),C.open(),x=!0),xe("Connection","WebChannel sending:",ne),C.send(ne))},Jr:()=>C.close()}),K=(ne,Me,Le)=>{ne.listen(Me,dt=>{try{Le(dt)}catch(Lt){setTimeout(()=>{throw Lt},0)}})};return K(C,Ld.EventType.OPEN,()=>{R||xe("Connection","WebChannel transport opened.")}),K(C,Ld.EventType.CLOSE,()=>{R||(R=!0,xe("Connection","WebChannel transport closed"),z.io())}),K(C,Ld.EventType.ERROR,ne=>{R||(R=!0,zu("Connection","WebChannel transport errored:",ne),z.io(new Ae(ae.UNAVAILABLE,"The operation could not be completed")))}),K(C,Ld.EventType.MESSAGE,ne=>{var Me;if(!R){const Le=ne.data[0];Ct(!!Le);const dt=Le,Lt=dt.error||(null===(Me=dt[0])||void 0===Me?void 0:Me.error);if(Lt){xe("Connection","WebChannel received error:",Lt);const kt=Lt.status;let Mt=function(Ut){const qr=Er[Ut];if(void 0!==qr)return kw(qr)}(kt),Ot=Lt.message;void 0===Mt&&(Mt=ae.INTERNAL,Ot="Unknown error status: "+kt+" with message "+Lt.message),R=!0,z.io(new Ae(Mt,Ot)),C.close()}else xe("Connection","WebChannel received:",Le),z.ro(Le)}}),K(h,lw.STAT_EVENT,ne=>{ne.stat===Gu.PROXY?xe("Connection","Detected buffering proxy"):ne.stat===Gu.NOPROXY&&xe("Connection","Detected no buffering proxy")}),setTimeout(()=>{z.so()},0),z}}function gE(){return typeof window<"u"?window:null}function Jf(){return typeof document<"u"?document:null}function lh(n){return new CC(n,!0)}class Og{constructor(e,t,r=1e3,a=1.5,c=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=a,this.po=c,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),a=Math.max(0,t-r);a>0&&xe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,a,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class y_{constructor(e,t,r,a,c,h,_,E){this.Hs=e,this.vo=r,this.Vo=a,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=_,this.listener=E,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Og(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,ge.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,ge.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,ge.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(ir(t.toString()),ir("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.So===t&&this.Go(r,a)},r=>{e(()=>{const a=new Ae(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(a)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(a=>{r(()=>this.Qo(a))}),this.stream.onMessage(a=>{r(()=>this.onMessage(a))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,ge.Z)(function*(){e.state=0,e.start()}))}Qo(e){return xe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(xe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mE extends y_{constructor(e,t,r,a,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,h),this.It=c}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function $w(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(E=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===E?1:"REMOVE"===E?2:"CURRENT"===E?3:"RESET"===E?4:rt(),a=e.targetChange.targetIds||[],c=function(E,C){return E.gt?(Ct(void 0===C||"string"==typeof C),yr.fromBase64String(C||"")):(Ct(void 0===C||C instanceof Uint8Array),yr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,_=h&&function(E){const C=void 0===E.code?ae.UNKNOWN:kw(E.code);return new Ae(C,E.message||"")}(h);t=new Ly(r,a,c,_||null)}else if("documentChange"in e){const r=e.documentChange,a=Qi(n,r.document.name),c=Or(r.document.updateTime),h=new Nr({mapValue:{fields:r.document.fields}}),_=Dn.newFoundDocument(a,c,h);t=new cg(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,a=Qi(n,r.document),c=r.readTime?Or(r.readTime):It.min(),h=Dn.newNoDocument(a,c);t=new cg([],r.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const r=e.documentRemove,a=Qi(n,r.document);t=new cg([],r.removedTargetIds||[],a,null)}else{if(!("filter"in e))return rt();{const r=e.filter,c=new OI(r.count||0);t=new Bw(r.targetId,c)}}var E;return t}(this.It,e),r=function(a){if(!("targetChange"in a))return It.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?It.min():c.readTime?Or(c.readTime):It.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=dg(this.It),t.addTarget=function(a,c){let h;const _=c.target;return h=Cf(_)?{documents:Lf(a,_)}:{query:nh(a,_)},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0?h.resumeToken=Uw(a,c.resumeToken):c.snapshotVersion.compareTo(It.min())>0&&(h.readTime=eh(a,c.snapshotVersion.toTimestamp())),h}(this.It,e);const r=function UI(n,e){const t=function(r,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return rt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=dg(this.It),t.removeTarget=e,this.Bo(t)}}class yE extends y_{constructor(e,t,r,a,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,h),this.It=c,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function $a(n,e){return n&&n.length>0?(Ct(void 0!==e),n.map(t=>function(r,a){let c=Or(r.updateTime?r.updateTime:a);return c.isEqual(It.min())&&(c=Or(a)),new NI(c,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Or(e.commitTime);return this.listener.Zo(r,t)}return Ct(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=dg(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>th(this.It,r))};this.Bo(t)}}class _E extends class{}{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=a,this.nu=!1}su(){if(this.nu)throw new Ae(ae.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.ao(e,t,r,a,c)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ae(ae.UNKNOWN,a.toString())})}_o(e,t,r,a){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection._o(e,t,r,c,h,a)).catch(c=>{throw"FirebaseError"===c.name?(c.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ae(ae.UNKNOWN,c.toString())})}terminate(){this.nu=!0}}class wE{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(ir(t),this.ou=!1):xe("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class EE{constructor(e,t,r,a,c){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=c,this.mu.qr(_=>{r.enqueueAndForget((0,ge.Z)(function*(){var E;lt(h)&&(xe("RemoteStore","Restarting streams for network reachability change."),yield(E=(0,ge.Z)(function*(C){const x=qe(C);x._u.add(4),yield dh(x),x.gu.set("Unknown"),x._u.delete(4),yield oo(x)}),function(C){return E.apply(this,arguments)})(h))}))}),this.gu=new wE(r,a)}}function oo(n){return __.apply(this,arguments)}function __(){return __=(0,ge.Z)(function*(n){if(lt(n))for(const e of n.wu)yield e(!0)}),__.apply(this,arguments)}function dh(n){return cc.apply(this,arguments)}function cc(){return cc=(0,ge.Z)(function*(n){for(const e of n.wu)yield e(!1)}),cc.apply(this,arguments)}function v_(n,e){const t=qe(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),DE(t)?kg(t):Ho(t).ko()&&IE(t,e))}function Ol(n,e){const t=qe(n),r=Ho(t);t.du.delete(e),r.ko()&&w_(t,e),0===t.du.size&&(r.ko()?r.Fo():lt(t)&&t.gu.set("Unknown"))}function IE(n,e){n.yu.Mt(e.targetId),Ho(n).zo(e)}function w_(n,e){n.yu.Mt(e),Ho(n).Ho(e)}function kg(n){n.yu=new PI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),Ho(n).start(),n.gu.uu()}function DE(n){return lt(n)&&!Ho(n).No()&&n.du.size>0}function lt(n){return 0===qe(n)._u.size}function bE(n){n.yu=void 0}function yD(n){return E_.apply(this,arguments)}function E_(){return E_=(0,ge.Z)(function*(n){n.du.forEach((e,t)=>{IE(n,e)})}),E_.apply(this,arguments)}function hh(n,e){return I_.apply(this,arguments)}function I_(){return I_=(0,ge.Z)(function*(n,e){bE(n),DE(n)?(n.gu.hu(e),kg(n)):n.gu.set("Unknown")}),I_.apply(this,arguments)}function Pg(n,e,t){return fh.apply(this,arguments)}function fh(){return fh=(0,ge.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof Ly&&2===e.state&&e.cause)try{yield(r=(0,ge.Z)(function*(a,c){const h=c.cause;for(const _ of c.targetIds)a.du.has(_)&&(yield a.remoteSyncer.rejectListen(_,h),a.du.delete(_),a.yu.removeTarget(_))}),function(a,c){return r.apply(this,arguments)})(n,e)}catch(r){xe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Cn(n,r)}else if(e instanceof cg?n.yu.Gt(e):e instanceof Bw?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(It.min()))try{const r=yield uE(n.localStore);t.compareTo(r)>=0&&(yield function(a,c){const h=a.yu.te(c);return h.targetChanges.forEach((_,E)=>{if(_.resumeToken.approximateByteSize()>0){const C=a.du.get(E);C&&a.du.set(E,C.withResumeToken(_.resumeToken,c))}}),h.targetMismatches.forEach(_=>{const E=a.du.get(_);if(!E)return;a.du.set(_,E.withResumeToken(yr.EMPTY_BYTE_STRING,E.snapshotVersion)),w_(a,_);const C=new Ji(E.target,_,1,E.sequenceNumber);IE(a,C)}),a.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){xe("RemoteStore","Failed to raise snapshot:",r),yield Cn(n,r)}var r}),fh.apply(this,arguments)}function Cn(n,e,t){return CE.apply(this,arguments)}function CE(){return CE=(0,ge.Z)(function*(n,e,t){if(!qu(e))throw e;n._u.add(1),yield dh(n),n.gu.set("Offline"),t||(t=()=>uE(n.localStore)),n.asyncQueue.enqueueRetryable((0,ge.Z)(function*(){xe("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield oo(n)}))}),CE.apply(this,arguments)}function D_(n,e){return e().catch(t=>Cn(n,t,e))}function Rl(n){return b_.apply(this,arguments)}function b_(){return b_=(0,ge.Z)(function*(n){const e=qe(n),t=As(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;TE(e);)try{const a=yield u_(e.localStore,r);if(null===a){0===e.fu.length&&t.Fo();break}r=a.batchId,AE(e,a)}catch(a){yield Cn(e,a)}C_(e)&&T_(e)}),b_.apply(this,arguments)}function TE(n){return lt(n)&&n.fu.length<10}function AE(n,e){n.fu.push(e);const t=As(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function C_(n){return lt(n)&&!As(n).No()&&n.fu.length>0}function T_(n){As(n).start()}function _D(n){return A_.apply(this,arguments)}function A_(){return A_=(0,ge.Z)(function*(n){As(n).eu()}),A_.apply(this,arguments)}function vD(n){return kl.apply(this,arguments)}function kl(){return kl=(0,ge.Z)(function*(n){const e=As(n);for(const t of n.fu)e.Xo(t.mutations)}),kl.apply(this,arguments)}function wD(n,e,t){return S_.apply(this,arguments)}function S_(){return S_=(0,ge.Z)(function*(n,e,t){const r=n.fu.shift(),a=nc.from(r,e,t);yield D_(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield Rl(n)}),S_.apply(this,arguments)}function ED(n,e){return ph.apply(this,arguments)}function ph(){return ph=(0,ge.Z)(function*(n,e){var t;e&&As(n).Yo&&(yield(t=(0,ge.Z)(function*(r,a){if(Fy(c=a.code)&&c!==ae.ABORTED){const h=r.fu.shift();As(r).Mo(),yield D_(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,a)),yield Rl(r)}var c}),function(r,a){return t.apply(this,arguments)})(n,e)),C_(n)&&T_(n)}),ph.apply(this,arguments)}function x_(n,e){return Fg.apply(this,arguments)}function Fg(){return Fg=(0,ge.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),xe("RemoteStore","RemoteStore received new credentials");const r=lt(t);t._u.add(3),yield dh(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield oo(t)}),Fg.apply(this,arguments)}function Lg(n,e){return M_.apply(this,arguments)}function M_(){return M_=(0,ge.Z)(function*(n,e){const t=qe(n);e?(t._u.delete(2),yield oo(t)):e||(t._u.add(2),yield dh(t),t.gu.set("Unknown"))}),M_.apply(this,arguments)}function Ho(n){return n.pu||(n.pu=function(e,t,r){const a=qe(e);return a.su(),new mE(t,a.connection,a.authCredentials,a.appCheckCredentials,a.It,r)}(n.datastore,n.asyncQueue,{Yr:yD.bind(null,n),Zr:hh.bind(null,n),Wo:Pg.bind(null,n)}),n.wu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.pu.Mo(),DE(n)?kg(n):n.gu.set("Unknown")):(yield n.pu.stop(),bE(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function As(n){return n.Iu||(n.Iu=function(e,t,r){const a=qe(e);return a.su(),new yE(t,a.connection,a.authCredentials,a.appCheckCredentials,a.It,r)}(n.datastore,n.asyncQueue,{Yr:_D.bind(null,n),Zr:ED.bind(null,n),tu:vD.bind(null,n),Zo:wD.bind(null,n)}),n.wu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.Iu.Mo(),yield Rl(n)):(yield n.Iu.stop(),n.fu.length>0&&(xe("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class N_{constructor(e,t,r,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=c,this.deferred=new mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,t,r,a,c){const h=Date.now()+r,_=new N_(e,t,h,a,c);return _.start(r),_}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ae(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gh(n,e){if(ir("AsyncQueue",`${e}: ${n}`),qu(n))return new Ae(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class mh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||je.comparator(t.key,r.key):(t,r)=>je.comparator(t.key,r.key),this.keyedMap=Jd(),this.sortedSet=new Kn(this.comparator)}static emptySet(e){return new mh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof mh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=r.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new mh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class O_{constructor(){this.Tu=new Kn(je.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):rt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Pl{constructor(e,t,r,a,c,h,_,E,C){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=_,this.excludesMetadataChanges=E,this.hasCachedResults=C}static fromInitialDocuments(e,t,r,a,c){const h=[];return t.forEach(_=>{h.push({type:0,doc:_})}),new Pl(e,t,mh.emptySet(t),h,r,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class SE{constructor(){this.Au=void 0,this.listeners=[]}}class ID{constructor(){this.queries=new ja(e=>Nw(e),Kd),this.onlineState="Unknown",this.Ru=new Set}}function Vg(n,e){return R_.apply(this,arguments)}function R_(){return R_=(0,ge.Z)(function*(n,e){const t=qe(n),r=e.query;let a=!1,c=t.queries.get(r);if(c||(a=!0,c=new SE),a)try{c.Au=yield t.onListen(r)}catch(h){const _=gh(h,`Initialization of query '${Af(e.query)}' failed`);return void e.onError(_)}t.queries.set(r,c),c.listeners.push(e),e.bu(t.onlineState),c.Au&&e.Pu(c.Au)&&ME(t)}),R_.apply(this,arguments)}function k_(n,e){return xE.apply(this,arguments)}function xE(){return xE=(0,ge.Z)(function*(n,e){const t=qe(n),r=e.query;let a=!1;const c=t.queries.get(r);if(c){const h=c.listeners.indexOf(e);h>=0&&(c.listeners.splice(h,1),a=0===c.listeners.length)}if(a)return t.queries.delete(r),t.onUnlisten(r)}),xE.apply(this,arguments)}function SC(n,e){const t=qe(n);let r=!1;for(const a of e){const h=t.queries.get(a.query);if(h){for(const _ of h.listeners)_.Pu(a)&&(r=!0);h.Au=a}}r&&ME(t)}function xC(n,e,t){const r=qe(n),a=r.queries.get(e);if(a)for(const c of a.listeners)c.onError(t);r.queries.delete(e)}function ME(n){n.Ru.forEach(e=>{e.next()})}class Bg{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)3!==a.type&&r.push(a);e=new Pl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Pl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class Ug{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class NE{constructor(e){this.It=e}Ji(e){return Qi(this.It,e)}Yi(e){return e.metadata.exists?By(this.It,e.document,!1):Dn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Or(e)}}class DD{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=P_(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=zt.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new NE(this.It);for(const a of e)if(a.metadata.queries){const c=r.Ji(a.metadata.name);for(const h of a.metadata.queries){const _=(t.get(h)||Ft()).add(c);t.set(h,_)}}return t}complete(){var e=this;return(0,ge.Z)(function*(){const t=yield function lE(n,e,t,r){return xg.apply(this,arguments)}(e.localStore,new NE(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const a of e.queries)yield hD(e.localStore,a,r.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function P_(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class yh{constructor(e){this.key=e}}class OE{constructor(e){this.key=e}}class RE{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Ft(),this.mutatedKeys=Ft(),this.Gu=TI(e),this.Qu=new mh(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new O_,a=t?t.Qu:this.Qu;let c=t?t.mutatedKeys:this.mutatedKeys,h=a,_=!1;const E="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,C="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((x,R)=>{const z=a.get(x),K=Ow(this.query,R)?R:null,ne=!!z&&this.mutatedKeys.has(z.key),Me=!!K&&(K.hasLocalMutations||this.mutatedKeys.has(K.key)&&K.hasCommittedMutations);let Le=!1;z&&K?z.data.isEqual(K.data)?ne!==Me&&(r.track({type:3,doc:K}),Le=!0):this.Hu(z,K)||(r.track({type:2,doc:K}),Le=!0,(E&&this.Gu(K,E)>0||C&&this.Gu(K,C)<0)&&(_=!0)):!z&&K?(r.track({type:0,doc:K}),Le=!0):z&&!K&&(r.track({type:1,doc:z}),Le=!0,(E||C)&&(_=!0)),Le&&(K?(h=h.add(K),c=Me?c.add(x):c.delete(x)):(h=h.delete(x),c=c.delete(x)))}),null!==this.query.limit)for(;h.size>this.query.limit;){const x="F"===this.query.limitType?h.last():h.first();h=h.delete(x.key),c=c.delete(x.key),r.track({type:1,doc:x})}return{Qu:h,zu:r,$i:_,mutatedKeys:c}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const a=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const c=e.zu.Eu();c.sort((C,x)=>function(R,z){const K=ne=>{switch(ne){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt()}};return K(R)-K(z)}(C.type,x.type)||this.Gu(C.doc,x.doc)),this.Ju(r);const h=t?this.Yu():[],_=0===this.Ku.size&&this.current?1:0,E=_!==this.qu;return this.qu=_,0!==c.length||E?{snapshot:new Pl(this.query,e.Qu,a,c,e.mutatedKeys,0===_,E,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:h}:{Xu:h}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new O_,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Ft(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new OE(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new yh(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Ft();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Pl.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class bD{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class CD{constructor(e){this.key=e,this.nc=!1}}class TD{constructor(e,t,r,a,c,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.sc={},this.ic=new ja(_=>Nw(_),Kd),this.rc=new Map,this.oc=new Set,this.uc=new Kn(je.comparator),this.cc=new Map,this.ac=new rE,this.hc={},this.lc=new Map,this.fc=ac.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function kE(n,e){return F_.apply(this,arguments)}function F_(){return F_=(0,ge.Z)(function*(n,e){const t=J_(n);let r,a;const c=t.ic.get(e);if(c)r=c.targetId,t.sharedClientState.addLocalQueryTarget(r),a=c.view.ec();else{const h=yield Ya(t.localStore,Ci(e));t.isPrimaryClient&&v_(t.remoteStore,h);const _=t.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,a=yield L_(t,e,r,"current"===_,h.resumeToken)}return a}),F_.apply(this,arguments)}function L_(n,e,t,r,a){return Fl.apply(this,arguments)}function Fl(){return Fl=(0,ge.Z)(function*(n,e,t,r,a){n._c=(R,z,K)=>{return(ne=(0,ge.Z)(function*(Me,Le,dt,Lt){let kt=Le.view.Wu(dt);kt.$i&&(kt=yield Yf(Me.localStore,Le.query,!1).then(({documents:Ut})=>Le.view.Wu(Ut,kt)));const Mt=Lt&&Lt.targetChanges.get(Le.targetId),Ot=Le.view.applyChanges(kt,Me.isPrimaryClient,Mt);return H_(Me,Le.targetId,Ot.Xu),Ot.snapshot}),function(Me,Le,dt,Lt){return ne.apply(this,arguments)})(n,R,z,K);var ne};const c=yield Yf(n.localStore,e,!0),h=new RE(e,c.Hi),_=h.Wu(c.documents),E=Xd.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,a),C=h.applyChanges(_,n.isPrimaryClient,E);H_(n,t,C.Xu);const x=new bD(e,t,h);return n.ic.set(e,x),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),C.snapshot}),Fl.apply(this,arguments)}function AD(n,e){return jg.apply(this,arguments)}function jg(){return jg=(0,ge.Z)(function*(n,e){const t=qe(n),r=t.ic.get(e),a=t.rc.get(r.targetId);if(a.length>1)return t.rc.set(r.targetId,a.filter(c=>!Kd(c,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Nl(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Ol(t.remoteStore,r.targetId),_h(t,r.targetId)}).catch(Ra))):(_h(t,r.targetId),yield Nl(t.localStore,r.targetId,!0))}),jg.apply(this,arguments)}function Hg(){return Hg=(0,ge.Z)(function*(n,e,t){const r=X_(n);try{const a=yield function(c,h){const _=qe(c),E=In.now(),C=h.reduce((z,K)=>z.add(K.key),Ft());let x,R;return _.persistence.runTransaction("Locally write mutations","readwrite",z=>{let K=Ti(),ne=Ft();return _.Gi.getEntries(z,C).next(Me=>{K=Me,K.forEach((Le,dt)=>{dt.isValidDocument()||(ne=ne.add(Le))})}).next(()=>_.localDocuments.getOverlayedDocuments(z,K)).next(Me=>{x=Me;const Le=[];for(const dt of h){const Lt=Qd(dt,x.get(dt.key).overlayedDocument);null!=Lt&&Le.push(new Vo(dt.key,Lt,eg(Lt.value.mapValue),bn.exists(!0)))}return _.mutationQueue.addMutationBatch(z,E,Le,h)}).next(Me=>{R=Me;const Le=Me.applyToLocalDocumentSet(x,ne);return _.documentOverlayCache.saveOverlays(z,Me.batchId,Le)})}).then(()=>({batchId:R.batchId,changes:Fw(x)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),function(c,h,_){let E=c.hc[c.currentUser.toKey()];E||(E=new Kn(xt)),E=E.insert(h,_),c.hc[c.currentUser.toKey()]=E}(r,a.batchId,t),yield Qa(r,a.changes),yield Rl(r.remoteStore)}catch(a){const c=gh(a,"Failed to persist write");t.reject(c)}}),Hg.apply(this,arguments)}function PE(n,e){return $g.apply(this,arguments)}function $g(){return $g=(0,ge.Z)(function*(n,e){const t=qe(n);try{const r=yield cE(t.localStore,e);e.targetChanges.forEach((a,c)=>{const h=t.cc.get(c);h&&(Ct(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?h.nc=!0:a.modifiedDocuments.size>0?Ct(h.nc):a.removedDocuments.size>0&&(Ct(h.nc),h.nc=!1))}),yield Qa(t,r,e)}catch(r){yield Ra(r)}}),$g.apply(this,arguments)}function FE(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const a=[];r.ic.forEach((c,h)=>{const _=h.view.bu(e);_.snapshot&&a.push(_.snapshot)}),function(c,h){const _=qe(c);_.onlineState=h;let E=!1;_.queries.forEach((C,x)=>{for(const R of x.listeners)R.bu(h)&&(E=!0)}),E&&ME(_)}(r.eventManager,e),a.length&&r.sc.Wo(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function V_(n,e,t){return B_.apply(this,arguments)}function B_(){return B_=(0,ge.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.cc.get(e),c=a&&a.key;if(c){let h=new Kn(je.comparator);h=h.insert(c,Dn.newNoDocument(c,It.min()));const _=Ft().add(c),E=new Nf(It.min(),new Map,new cn(xt),h,_);yield PE(r,E),r.uc=r.uc.remove(c),r.cc.delete(e),$_(r)}else yield Nl(r.localStore,e,!1).then(()=>_h(r,e,t)).catch(Ra)}),B_.apply(this,arguments)}function LE(n,e){return Gg.apply(this,arguments)}function Gg(){return Gg=(0,ge.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const a=yield Sg(t.localStore,e);zg(t,r,null),j_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Qa(t,a)}catch(a){yield Ra(a)}}),Gg.apply(this,arguments)}function xD(n,e,t){return U_.apply(this,arguments)}function U_(){return U_=(0,ge.Z)(function*(n,e,t){const r=qe(n);try{const a=yield function(c,h){const _=qe(c);return _.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let C;return _.mutationQueue.lookupMutationBatch(E,h).next(x=>(Ct(null!==x),C=x.keys(),_.mutationQueue.removeMutationBatch(E,x))).next(()=>_.mutationQueue.performConsistencyCheck(E)).next(()=>_.documentOverlayCache.removeOverlaysForBatchId(E,C,h)).next(()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,C)).next(()=>_.localDocuments.getDocuments(E,C))})}(r.localStore,e);zg(r,e,t),j_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Qa(r,a)}catch(a){yield Ra(a)}}),U_.apply(this,arguments)}function Xf(){return Xf=(0,ge.Z)(function*(n,e){const t=qe(n);lt(t.remoteStore)||xe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(c){const h=qe(c);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",_=>h.mutationQueue.getHighestUnacknowledgedBatchId(_))}(t.localStore);if(-1===r)return void e.resolve();const a=t.lc.get(r)||[];a.push(e),t.lc.set(r,a)}catch(r){const a=gh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),Xf.apply(this,arguments)}function j_(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function zg(n,e,t){const r=qe(n);let a=r.hc[r.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),r.hc[r.currentUser.toKey()]=a}}function _h(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||VE(n,r)})}function VE(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(Ol(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),$_(n))}function H_(n,e,t){for(const r of t)r instanceof yh?(n.ac.addReference(r.key,e),ND(n,r)):r instanceof OE?(xe("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||VE(n,r.key)):rt()}function ND(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(xe("SyncEngine","New document in limbo: "+t),n.oc.add(r),$_(n))}function $_(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new je(zt.fromString(e)),r=n.fc.next();n.cc.set(r,new CD(t)),n.uc=n.uc.insert(t,r),v_(n.remoteStore,new Ji(Ci(Wd(t.path)),r,2,bi.at))}}function Qa(n,e,t){return G_.apply(this,arguments)}function G_(){return G_=(0,ge.Z)(function*(n,e,t){const r=qe(n),a=[],c=[],h=[];var _;r.ic.isEmpty()||(r.ic.forEach((_,E)=>{h.push(r._c(E,e,t).then(C=>{if((C||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(E.targetId,C?.fromCache?"not-current":"current"),C){a.push(C);const x=Ml.Ci(E.targetId,C);c.push(x)}}))}),yield Promise.all(h),r.sc.Wo(a),yield(_=(0,ge.Z)(function*(E,C){const x=qe(E);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>ie.forEach(C,z=>ie.forEach(z.Si,K=>x.persistence.referenceDelegate.addReference(R,z.targetId,K)).next(()=>ie.forEach(z.Di,K=>x.persistence.referenceDelegate.removeReference(R,z.targetId,K)))))}catch(R){if(!qu(R))throw R;xe("LocalStore","Failed to update sequence numbers: "+R)}for(const R of C){const z=R.targetId;if(!R.fromCache){const K=x.Ui.get(z),Me=K.withLastLimboFreeSnapshotVersion(K.snapshotVersion);x.Ui=x.Ui.insert(z,Me)}}}),function(E,C){return _.apply(this,arguments)})(r.localStore,c))}),G_.apply(this,arguments)}function OD(n,e){return Wg.apply(this,arguments)}function Wg(){return Wg=(0,ge.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){xe("SyncEngine","User change. New user:",e.toKey());const r=yield o_(t.localStore,e);t.currentUser=e,(a=t).lc.forEach(h=>{h.forEach(_=>{_.reject(new Ae(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Qa(t,r.ji)}var a}),Wg.apply(this,arguments)}function BE(n,e){const t=qe(n),r=t.cc.get(e);if(r&&r.nc)return Ft().add(r.key);{let a=Ft();const c=t.rc.get(e);if(!c)return a;for(const h of c){const _=t.ic.get(h);a=a.unionWith(_.view.ju)}return a}}function RD(n,e){return z_.apply(this,arguments)}function z_(){return z_=(0,ge.Z)(function*(n,e){const t=qe(n),r=yield Yf(t.localStore,e.query,!0),a=e.view.tc(r);return t.isPrimaryClient&&H_(t,e.targetId,a.Xu),a}),z_.apply(this,arguments)}function UE(n,e){return W_.apply(this,arguments)}function W_(){return W_=(0,ge.Z)(function*(n,e){const t=qe(n);return l_(t.localStore,e).then(r=>Qa(t,r))}),W_.apply(this,arguments)}function kD(n,e,t,r){return q_.apply(this,arguments)}function q_(){return q_=(0,ge.Z)(function*(n,e,t,r){const a=qe(n),c=yield function(h,_){const E=qe(h),C=qe(E.mutationQueue);return E.persistence.runTransaction("Lookup mutation documents","readonly",x=>C.Tn(x,_).next(R=>R?E.localDocuments.getDocuments(x,R):ie.resolve(null)))}(a.localStore,e);var _;null!==c?("pending"===t?yield Rl(a.remoteStore):"acknowledged"===t||"rejected"===t?(zg(a,e,r||null),j_(a,e),_=e,qe(qe(a.localStore).mutationQueue).An(_)):rt(),yield Qa(a,c)):xe("SyncEngine","Cannot apply mutation batch with id: "+e)}),q_.apply(this,arguments)}function ep(){return ep=(0,ge.Z)(function*(n,e){const t=qe(n);if(J_(t),X_(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),a=yield Z_(t,r.toArray());t.dc=!0,yield Lg(t.remoteStore,!0);for(const c of a)v_(t.remoteStore,c)}else if(!1===e&&!1!==t.dc){const r=[];let a=Promise.resolve();t.rc.forEach((c,h)=>{t.sharedClientState.isLocalQueryTarget(h)?r.push(h):a=a.then(()=>(_h(t,h),Nl(t.localStore,h,!0))),Ol(t.remoteStore,h)}),yield a,yield Z_(t,r),function(c){const h=qe(c);h.cc.forEach((_,E)=>{Ol(h.remoteStore,E)}),h.ac.fs(),h.cc=new Map,h.uc=new Kn(je.comparator)}(t),t.dc=!1,yield Lg(t.remoteStore,!1)}}),ep.apply(this,arguments)}function Z_(n,e,t){return tp.apply(this,arguments)}function tp(){return tp=(0,ge.Z)(function*(n,e,t){const r=qe(n),a=[],c=[];for(const h of e){let _;const E=r.rc.get(h);if(E&&0!==E.length){_=yield Ya(r.localStore,Ci(E[0]));for(const C of E){const x=r.ic.get(C),R=yield RD(r,x);R.snapshot&&c.push(R.snapshot)}}else{const C=yield c_(r.localStore,h);_=yield Ya(r.localStore,C),yield L_(r,jE(C),h,!1,_.resumeToken)}a.push(_)}return r.sc.Wo(c),a}),tp.apply(this,arguments)}function jE(n){return Sw(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function PD(n){const e=qe(n);return qe(qe(e.localStore).persistence).vi()}function Y_(n,e,t,r){return Q_.apply(this,arguments)}function Q_(){return Q_=(0,ge.Z)(function*(n,e,t,r){const a=qe(n);if(a.dc)return void xe("SyncEngine","Ignoring unexpected query state notification.");const c=a.rc.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const h=yield l_(a.localStore,CI(c[0])),_=Nf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,yr.EMPTY_BYTE_STRING);yield Qa(a,h,_);break}case"rejected":yield Nl(a.localStore,e,!0),_h(a,e,r);break;default:rt()}}),Q_.apply(this,arguments)}function HE(n,e,t){return lc.apply(this,arguments)}function lc(){return lc=(0,ge.Z)(function*(n,e,t){const r=J_(n);if(r.dc){for(const a of e){if(r.rc.has(a)){xe("SyncEngine","Adding an already active target "+a);continue}const c=yield c_(r.localStore,a),h=yield Ya(r.localStore,c);yield L_(r,jE(c),h.targetId,!1,h.resumeToken),v_(r.remoteStore,h)}for(const a of t)r.rc.has(a)&&(yield Nl(r.localStore,a,!1).then(()=>{Ol(r.remoteStore,a),_h(r,a)}).catch(Ra))}}),lc.apply(this,arguments)}function J_(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=PE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BE.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=V_.bind(null,e),e.sc.Wo=SC.bind(null,e.eventManager),e.sc.wc=xC.bind(null,e.eventManager),e}function X_(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=LE.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xD.bind(null,e),e}class ev{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ge.Z)(function*(){t.It=lh(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return aE(this.persistence,new sE,e.initialUser,this.It)}yc(e){return new io(xi.Bs,this.It)}gc(e){return new fE}terminate(){var e=this;return(0,ge.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class qg extends ev{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield X_(r.Ac.syncEngine),yield Rl(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return aE(this.persistence,new sE,e.initialUser,this.It)}Tc(e,t){return new sD(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new EI(t,this.persistence);return new wI(e.asyncQueue,r)}yc(e){const t=Kf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Si.withCacheSize(this.cacheSizeBytes):Si.DEFAULT;return new s_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,gE(),Jf(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new fE}}class FD extends qg{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e);const a=r.Ac.syncEngine;r.sharedClientState instanceof m_&&(r.sharedClientState.syncEngine={Fr:kD.bind(null,a),$r:Y_.bind(null,a),Br:HE.bind(null,a),vi:PD.bind(null,a),Mr:UE.bind(null,a)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var c=(0,ge.Z)(function*(h){yield function K_(n,e){return ep.apply(this,arguments)}(r.Ac.syncEngine,h),r.gcScheduler&&(h&&!r.gcScheduler.started?r.gcScheduler.start():h||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(h&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():h||r.indexBackfillerScheduler.stop())});return function(h){return c.apply(this,arguments)}}())})()}gc(e){const t=gE();if(!m_.C(t))throw new Ae(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Kf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new m_(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Kg{initialize(e,t){var r=this;return(0,ge.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=a=>FE(r.syncEngine,a,1),r.remoteStore.remoteSyncer.handleCredentialChange=OD.bind(null,r.syncEngine),yield Lg(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new ID}createDatastore(e){const t=lh(e.databaseInfo.databaseId),r=new mD(e.databaseInfo);return new _E(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,a=e.asyncQueue,c=_=>FE(this.syncEngine,_,0),h=pE.C()?new pE:new fD,new EE(t,r,a,c,h);var t,r,a,c,h}createSyncEngine(e,t){return function(r,a,c,h,_,E,C){const x=new TD(r,a,c,h,_,E);return C&&(x.dc=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ge.Z)(function*(t){const r=qe(t);xe("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield dh(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function tv(n,e,t){if(!t)throw new Ae(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function $E(n,e,t,r){if(!0===e&&!0===r)throw new Ae(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Zg(n){if(!je.isDocumentKey(n))throw new Ae(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function nv(n){if(je.isDocumentKey(n))throw new Ae(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function np(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":rt()}function $t(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=np(n);throw new Ae(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function rv(n,e){if(e<=0)throw new Ae(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const GE=new Map;class zE{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ae(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ae(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,$E("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rp{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zE({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ae(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ae(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zE(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new fw;switch(t.type){case"gapi":return new hI(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ae(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=GE.get(e);t&&(xe("ComponentProvider","Removing Datastore"),GE.delete(e),t.terminate())}(this),Promise.resolve()}}class gn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ao(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gn(this.firestore,e,this._key)}}class hi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hi(this.firestore,e,this._query)}}class ao extends hi{constructor(e,t,r){super(e,t,Wd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gn(this.firestore,null,new je(e))}withConverter(e){return new ao(this.firestore,e,this._path)}}function qE(n,e,...t){if(n=(0,Bt.m9)(n),tv("collection","path",e),n instanceof rp){const r=zt.fromString(e,...t);return nv(r),new ao(n,null,r)}{if(!(n instanceof gn||n instanceof ao))throw new Ae(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(zt.fromString(e,...t));return nv(r),new ao(n.firestore,null,r)}}function iv(n,e,...t){if(n=(0,Bt.m9)(n),1===arguments.length&&(e=py.R()),tv("doc","path",e),n instanceof rp){const r=zt.fromString(e,...t);return Zg(r),new gn(n,null,new je(r))}{if(!(n instanceof gn||n instanceof ao))throw new Ae(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(zt.fromString(e,...t));return Zg(r),new gn(n.firestore,n instanceof ao?n.converter:null,new je(r))}}function VD(n,e){return n=(0,Bt.m9)(n),e=(0,Bt.m9)(e),(n instanceof gn||n instanceof ao)&&(e instanceof gn||e instanceof ao)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function sv(n,e){return n=(0,Bt.m9)(n),e=(0,Bt.m9)(e),n instanceof hi&&e instanceof hi&&n.firestore===e.firestore&&Kd(n._query,e._query)&&n.converter===e.converter}function KE(n,e=10240){let t=0;return{read:()=>(0,ge.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ge.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Yg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):ir("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class BD{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new mr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,ge.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,ge.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),a=Number(r);isNaN(a)&&e.Dc(`length string (${r}) is not valid number`);const c=yield e.Cc(a);return new Ug(JSON.parse(c),t.length+a)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,ge.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,ge.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class HD{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ge.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ae(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(a=(0,ge.Z)(function*(c,h){const _=qe(c),E=dg(_.It)+"/documents",C={documents:h.map(K=>Rf(_.It,K))},x=yield _._o("BatchGetDocuments",E,C,h.length),R=new Map;x.forEach(K=>{const ne=function Hw(n,e){return"found"in e?function(t,r){Ct(!!r.found);const a=Qi(t,r.found.name),c=Or(r.found.updateTime),h=new Nr({mapValue:{fields:r.found.fields}});return Dn.newFoundDocument(a,c,h)}(n,e):"missing"in e?function(t,r){Ct(!!r.missing),Ct(!!r.readTime);const a=Qi(t,r.missing),c=Or(r.readTime);return Dn.newNoDocument(a,c)}(n,e):rt()}(_.It,K);R.set(ne.key.toString(),ne)});const z=[];return h.forEach(K=>{const ne=R.get(K.toString());Ct(!!ne),z.push(ne)}),z}),function(c,h){return a.apply(this,arguments)})(t.datastore,e);var a;return r.forEach(a=>t.recordVersion(a)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Il(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ge.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,a)=>{const c=je.fromPath(a);e.mutations.push(new xf(c,e.precondition(c)))}),yield(r=(0,ge.Z)(function*(a,c){const h=qe(a),_=dg(h.It)+"/documents",E={writes:c.map(C=>th(h.It,C))};yield h.ao("Commit",_,E)}),function(a,c){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw rt();t=It.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ae(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(It.min())?bn.exists(!1):bn.updateTime(t):bn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(It.min()))throw new Ae(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return bn.updateTime(t)}return bn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class $D{constructor(e,t,r,a,c){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=a,this.deferred=c,this.kc=r.maxAttempts,this.xo=new Og(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,ge.Z)(function*(){const t=new HD(e.datastore),r=e.Mc(t);r&&r.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(c=>{e.Fc(c)}))}).catch(a=>{e.Fc(a)})}))}Mc(e){try{const t=this.updateFunction(e);return!gl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Fy(t)}return!1}}class GD{constructor(e,t,r,a){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=gr.UNAUTHENTICATED,this.clientId=py.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var h=(0,ge.Z)(function*(_){xe("FirestoreClient","Received user=",_.uid),yield c.authCredentialListener(_),c.user=_});return function(_){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(r,h=>(xe("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}getConfiguration(){var e=this;return(0,ge.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ae(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const a=gh(r,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function ZE(n,e){return ov.apply(this,arguments)}function ov(){return ov=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),xe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,ge.Z)(function*(c){r.isEqual(c)||(yield o_(e.localStore,c),r=c)});return function(c){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),ov.apply(this,arguments)}function vh(n,e){return Qg.apply(this,arguments)}function Qg(){return Qg=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Jg(n);xe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(a=>x_(e.remoteStore,a)),n.setAppCheckTokenChangeListener((a,c)=>x_(e.remoteStore,c)),n.onlineComponents=e}),Qg.apply(this,arguments)}function Jg(n){return Xg.apply(this,arguments)}function Xg(){return Xg=(0,ge.Z)(function*(n){return n.offlineComponents||(xe("FirestoreClient","Using default OfflineComponentProvider"),yield ZE(n,new ev)),n.offlineComponents}),Xg.apply(this,arguments)}function ip(n){return em.apply(this,arguments)}function em(){return em=(0,ge.Z)(function*(n){return n.onlineComponents||(xe("FirestoreClient","Using default OnlineComponentProvider"),yield vh(n,new Kg)),n.onlineComponents}),em.apply(this,arguments)}function av(n){return Jg(n).then(e=>e.persistence)}function tm(n){return Jg(n).then(e=>e.localStore)}function YE(n){return ip(n).then(e=>e.remoteStore)}function uv(n){return ip(n).then(e=>e.syncEngine)}function wh(n){return lv.apply(this,arguments)}function lv(){return lv=(0,ge.Z)(function*(n){const e=yield ip(n),t=e.eventManager;return t.onListen=kE.bind(null,e.syncEngine),t.onUnlisten=AD.bind(null,e.syncEngine),t}),lv.apply(this,arguments)}function nm(n,e,t={}){const r=new mr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(a,c,h,_,E){const C=new Yg({next:R=>{c.enqueueAndForget(()=>k_(a,x));const z=R.docs.has(h);!z&&R.fromCache?E.reject(new Ae(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&R.fromCache&&_&&"server"===_.source?E.reject(new Ae(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(R)},error:R=>E.reject(R)}),x=new Bg(Wd(h.path),C,{includeMetadataChanges:!0,Nu:!0});return Vg(a,x)}(yield wh(n),n.asyncQueue,e,t,r)})),r.promise}function QE(n,e,t={}){const r=new mr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(a,c,h,_,E){const C=new Yg({next:R=>{c.enqueueAndForget(()=>k_(a,x)),R.fromCache&&"server"===_.source?E.reject(new Ae(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(R)},error:R=>E.reject(R)}),x=new Bg(h,C,{includeMetadataChanges:!0,Nu:!0});return Vg(a,x)}(yield wh(n),n.asyncQueue,e,t,r)})),r.promise}class KD{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Og(this,"async_queue_retry"),this.Wc=()=>{const t=Jf();t&&xe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=Jf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=Jf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new mr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,ge.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!qu(t))throw t;xe("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,ir("INTERNAL UNHANDLED ERROR: ",function(c){let h=c.message||"";return c.stack&&(h=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),h}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const a=N_.createAndSchedule(this,e,t,r,c=>this.Yc(c));return this.qc.push(a),a}zc(){this.Kc&&rt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,ge.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function hv(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const a of["next","error","complete"])if(a in r&&"function"==typeof r[a])return!0;return!1}(n)}class rm{constructor(){this._progressObserver={},this._taskCompletionResolver=new mr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Tn extends rp{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new KD,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||sm(this),this._firestoreClient.terminate()}}function Qn(n){return n._firestoreClient||sm(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function sm(n){var e;const t=n._freezeSettings(),r=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new pl(n._databaseId,c,n._persistenceKey,(_=t).host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,_.useFetchStreams));var c,_;n._firestoreClient=new GD(n._authCredentials,n._appCheckCredentials,n._queue,r)}function XE(n,e,t){const r=new mr;return n.asyncQueue.enqueue((0,ge.Z)(function*(){try{yield ZE(n,t),yield vh(n,e),r.resolve()}catch(a){const c=a;if(!("FirebaseError"===(h=c).name?h.code===ae.FAILED_PRECONDITION||h.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&h instanceof DOMException)||22===h.code||20===h.code||11===h.code))throw c;zu("Error enabling offline persistence. Falling back to persistence disabled: "+c),r.reject(c)}var h})).then(()=>r.promise)}function n0(n){if(n._initialized||n._terminated)throw new Ae(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Go{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Go(yr.fromBase64String(e))}catch(t){throw new Ae(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Go(yr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ja{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ae(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Xa{constructor(e){this._methodName=e}}class om{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xt(this._lat,e._lat)||xt(this._long,e._long)}}const XD=/^__.*__$/;class eb{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Vo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ua(e,this.data,t,this.fieldTransforms)}}class r0{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Vo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function s0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt()}}class ap{constructor(e,t,r,a,c,h){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=a,void 0===c&&this.na(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new ap(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ia({path:r,oa:!1});return a.ua(e),a}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ia({path:r,oa:!1});return a.na(),a}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return dm(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(s0(this.sa)&&XD.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class o0{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||lh(e)}da(e,t,r,a=!1){return new ap({sa:e,methodName:t,fa:r,path:xn.emptyPath(),oa:!1,la:a},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Ll(n){const e=n._freezeSettings(),t=lh(n._databaseId);return new o0(n._databaseId,!!e.ignoreUndefinedProperties,t)}function up(n,e,t,r,a,c={}){const h=n.da(c.merge||c.mergeFields?2:0,e,t,a);yv("Data must be an object, but it was:",h,r);const _=u0(r,h);let E,C;if(c.merge)E=new Yi(h.fieldMask),C=h.fieldTransforms;else if(c.mergeFields){const x=[];for(const R of c.mergeFields){const z=cm(e,R,t);if(!h.contains(z))throw new Ae(ae.INVALID_ARGUMENT,`Field '${z}' is specified in your field mask but missing from your input data.`);hm(x,z)||x.push(z)}E=new Yi(x),C=h.fieldTransforms.filter(R=>E.covers(R.field))}else E=null,C=h.fieldTransforms;return new eb(new Nr(_),E,C)}class cp extends Xa{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cp}}function ni(n,e,t){return new ap({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class dc extends Xa{_toFieldTransform(e){return new Zd(e.path,new Ju)}isEqual(e){return e instanceof dc}}class tb extends Xa{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=ni(this,e,!0),r=this._a.map(c=>uo(c,t)),a=new wl(r);return new Zd(e.path,a)}isEqual(e){return this===e}}class nb extends Xa{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=ni(this,e,!0),r=this._a.map(c=>uo(c,t)),a=new Va(r);return new Zd(e.path,a)}isEqual(e){return this===e}}class kC extends Xa{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Xu(e.It,xI(e.It,this.wa));return new Zd(e.path,t)}isEqual(e){return this===e}}function a0(n,e,t,r){const a=n.da(1,e,t);yv("Data must be an object, but it was:",a,r);const c=[],h=Nr.empty();Ku(r,(E,C)=>{const x=lm(e,E,t);C=(0,Bt.m9)(C);const R=a.ca(x);if(C instanceof cp)c.push(x);else{const z=uo(C,R);null!=z&&(c.push(x),h.set(x,z))}});const _=new Yi(c);return new r0(h,_,a.fieldTransforms)}function am(n,e,t,r,a,c){const h=n.da(1,e,t),_=[cm(e,r,t)],E=[a];if(c.length%2!=0)throw new Ae(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let z=0;z<c.length;z+=2)_.push(cm(e,c[z])),E.push(c[z+1]);const C=[],x=Nr.empty();for(let z=_.length-1;z>=0;--z)if(!hm(C,_[z])){const K=_[z];let ne=E[z];ne=(0,Bt.m9)(ne);const Me=h.ca(K);if(ne instanceof cp)C.push(K);else{const Le=uo(ne,Me);null!=Le&&(C.push(K),x.set(K,Le))}}const R=new Yi(C);return new r0(x,R,h.fieldTransforms)}function mv(n,e,t,r=!1){return uo(t,n.da(r?4:3,e))}function uo(n,e){if(um(n=(0,Bt.m9)(n)))return yv("Unsupported field value:",e,n),u0(n,e);if(n instanceof Xa)return function(t,r){if(!s0(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(r);a&&r.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const a=[];let c=0;for(const h of t){let _=uo(h,r.aa(c));null==_&&(_={nullValue:"NULL_VALUE"}),a.push(_),c++}return{arrayValue:{values:a}}}(n,e)}return function(t,r){if(null===(t=(0,Bt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return xI(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=In.fromDate(t);return{timestampValue:eh(r.It,a)}}if(t instanceof In){const a=new In(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:eh(r.It,a)}}if(t instanceof om)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Go)return{bytesValue:Uw(r.It,t._byteString)};if(t instanceof gn){const a=r.databaseId,c=t.firestore._databaseId;if(!c.isEqual(a))throw r.ha(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Of(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${np(t)}`)}(n,e)}function u0(n,e){const t={};return _w(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ku(n,(r,a)=>{const c=uo(a,e.ra(r));null!=c&&(t[r]=c)}),{mapValue:{fields:t}}}function um(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof In||n instanceof om||n instanceof Go||n instanceof gn||n instanceof Xa)}function yv(n,e,t){if(!um(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=np(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function cm(n,e,t){if((e=(0,Bt.m9)(e))instanceof Ja)return e._internalPath;if("string"==typeof e)return lm(n,e);throw dm("Field path arguments must be of type string or ",n,!1,void 0,t)}const rb=new RegExp("[~\\*/\\[\\]]");function lm(n,e,t){if(e.search(rb)>=0)throw dm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ja(...e.split("."))._internalPath}catch{throw dm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function dm(n,e,t,r,a){const c=r&&!r.isEmpty(),h=void 0!==a;let _=`Function ${e}() called with invalid data`;t&&(_+=" (via `toFirestore()`)"),_+=". ";let E="";return(c||h)&&(E+=" (found",c&&(E+=` in field ${r}`),h&&(E+=` in document ${a}`),E+=")"),new Ae(ae.INVALID_ARGUMENT,_+n+E)}function hm(n,e){return n.some(t=>t.isEqual(e))}class Eh{constructor(e,t,r,a,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new gn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new c0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Vl("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class c0 extends Eh{data(){return super.data()}}function Vl(n,e){return"string"==typeof e?lm(n,e):e instanceof Ja?e._internalPath:e._delegate._internalPath}function fm(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ae(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pm{}function eu(n,...e){for(const t of e)n=t._apply(n);return n}class ib extends pm{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=Ll(e.firestore),r=function(a,c,h,_,E,C,x){let R;if(E.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Ae(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){Ev(x,C);const K=[];for(const ne of x)K.push(p0(_,a,ne));R={arrayValue:{values:K}}}else R=p0(_,a,x)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||Ev(x,C),R=mv(h,"where",x,"in"===C||"not-in"===C);const z=zr.create(E,C,R);return function(K,ne){if(ne.dt()){const Le=rg(K);if(null!==Le&&!Le.isEqual(ne.field))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Le.toString()}' and '${ne.field.toString()}'`);const dt=Ny(K);null!==dt&&Iv(0,ne.field,dt)}const Me=function(Le,dt){for(const Lt of Le.filters)if(dt.indexOf(Lt.op)>=0)return Lt.op;return null}(K,function(Le){switch(Le){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ne.op));if(null!==Me)throw new Ae(ae.INVALID_ARGUMENT,Me===ne.op?`Invalid query. You cannot use more than one '${ne.op.toString()}' filter.`:`Invalid query. You cannot use '${ne.op.toString()}' filters with '${Me.toString()}' filters.`)}(a,z),z}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new hi(e.firestore,e.converter,function(a,c){const h=a.filters.concat([c]);return new Qu(a.path,a.collectionGroup,a.explicitOrderBy.slice(),h,a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}class Ih extends pm{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,a,c){if(null!==r.startAt)throw new Ae(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ae(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new Fa(a,c);return function(_,E){if(null===Ny(_)){const C=rg(_);null!==C&&Iv(0,C,E.field)}}(r,h),h}(e._query,this.ma,this.pa);return new hi(e.firestore,e.converter,function(r,a){const c=r.explicitOrderBy.concat([a]);return new Qu(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class _v extends pm{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new hi(e.firestore,e.converter,Tf(e._query,this.Ia,this.Ta))}}class d0 extends pm{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=wv(e,this.type,this.Ea,this.Aa);return new hi(e.firestore,e.converter,(a=t,new Qu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,a,r.endAt)));var r,a}}class h0 extends pm{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=wv(e,this.type,this.Ea,this.Aa);return new hi(e.firestore,e.converter,(a=t,new Qu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,a)));var r,a}}function wv(n,e,t,r){if(t[0]=(0,Bt.m9)(t[0]),t[0]instanceof Eh)return function(a,c,h,_,E){if(!_)throw new Ae(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const C=[];for(const x of qd(a))if(x.field.isKeyField())C.push(Yu(c,_.key));else{const R=_.data.field(x.field);if(vw(R))throw new Ae(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===R){const z=x.field.canonicalString();throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${z}' (used as the orderBy) does not exist.`)}C.push(R)}return new to(C,E)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const a=Ll(n.firestore);return function(c,h,_,E,C,x){const R=c.explicitOrderBy;if(C.length>R.length)throw new Ae(ae.INVALID_ARGUMENT,`Too many arguments provided to ${E}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const z=[];for(let K=0;K<C.length;K++){const ne=C[K];if(R[K].field.isKeyField()){if("string"!=typeof ne)throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${E}(), but got a ${typeof ne}`);if(!Mw(c)&&-1!==ne.indexOf("/"))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${E}() must be a plain document ID, but '${ne}' contains a slash.`);const Me=c.path.child(zt.fromString(ne));if(!je.isDocumentKey(Me))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${E}() must result in a valid document path, but '${Me}' is not because it contains an odd number of segments.`);const Le=new je(Me);z.push(Yu(h,Le))}else{const Me=mv(_,E,ne);z.push(Me)}}return new to(z,x)}(n._query,n.firestore._databaseId,a,e,t,r)}}function p0(n,e,t){if("string"==typeof(t=(0,Bt.m9)(t))){if(""===t)throw new Ae(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mw(e)&&-1!==t.indexOf("/"))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(zt.fromString(t));if(!je.isDocumentKey(r))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Yu(n,new je(r))}if(t instanceof gn)return Yu(n,t._key);throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${np(t)}.`)}function Ev(n,e){if(!Array.isArray(n)||0===n.length)throw new Ae(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ae(ae.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Iv(n,e,t){if(!t.isEqual(e))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Dv{convertValue(e,t="none"){switch(jd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Zn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw rt()}}convertObject(e,t){const r={};return Ku(e.fields,(a,c)=>{r[a]=this.convertValue(c,t)}),r}convertGeoPoint(e){return new om(Zn(e.latitude),Zn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=vy(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ud(e));default:return null}}convertTimestamp(e){const t=ka(e);return new In(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=zt.fromString(e);Ct(GI(r));const a=new Zu(r.get(1),r.get(3)),c=new je(r.popFirst(5));return a.isEqual(t)||ir(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function gm(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class g0 extends Dv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Go(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gn(this.firestore,null,t)}}class Bl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zo extends Eh{constructor(e,t,r,a,c,h){super(e,t,r,a,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Dh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Vl("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Dh extends zo{data(e={}){return super.data(e)}}class tu{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Bl(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Dh(this._firestore,this._userDataWriter,r.key,r,new Bl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,a){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map(h=>({type:"added",doc:new Dh(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Bl(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:c++}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>a||3!==h.type).map(h=>{const _=new Dh(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Bl(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let E=-1,C=-1;return 0!==h.type&&(E=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),1!==h.type&&(c=c.add(h.doc),C=c.indexOf(h.doc.key)),{type:m0(h.type),doc:_,oldIndex:E,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function m0(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt()}}function y0(n,e){return n instanceof zo&&e instanceof zo?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof tu&&e instanceof tu&&n._firestore===e._firestore&&sv(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Ul extends Dv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Go(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gn(this.firestore,null,t)}}function cb(n,e,t){n=$t(n,gn);const r=$t(n.firestore,Tn),a=gm(n.converter,e,t);return jl(r,[up(Ll(r),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,bn.none())])}function lb(n,e,t,...r){n=$t(n,gn);const a=$t(n.firestore,Tn),c=Ll(a);let h;return h="string"==typeof(e=(0,Bt.m9)(e))||e instanceof Ja?am(c,"updateDoc",n._key,e,t,r):a0(c,"updateDoc",n._key,e),jl(a,[h.toMutation(n._key,bn.exists(!0))])}function lp(n,...e){var t,r,a;n=(0,Bt.m9)(n);let c={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||hv(e[h])||(c=e[h],h++);const _={includeMetadataChanges:c.includeMetadataChanges};if(hv(e[h])){const R=e[h];e[h]=null===(t=R.next)||void 0===t?void 0:t.bind(R),e[h+1]=null===(r=R.error)||void 0===r?void 0:r.bind(R),e[h+2]=null===(a=R.complete)||void 0===a?void 0:a.bind(R)}let E,C,x;if(n instanceof gn)C=$t(n.firestore,Tn),x=Wd(n._key.path),E={next:R=>{e[h]&&e[h](bh(C,n,R))},error:e[h+1],complete:e[h+2]};else{const R=$t(n,hi);C=$t(R.firestore,Tn),x=R._query;const z=new Ul(C);E={next:K=>{e[h]&&e[h](new tu(C,z,R,K))},error:e[h+1],complete:e[h+2]},fm(n._query)}return function(R,z,K,ne){const Me=new Yg(ne),Le=new Bg(z,Me,K);return R.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return Vg(yield wh(R),Le)})),()=>{Me.bc(),R.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return k_(yield wh(R),Le)}))}}(Qn(C),x,_,E)}function jl(n,e){return function(t,r){const a=new mr;return t.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function SD(n,e,t){return Hg.apply(this,arguments)}(yield uv(t),r,a)})),a.promise}(Qn(n),e)}function bh(n,e,t){const r=t.docs.get(e._key),a=new Ul(n);return new zo(n,a,e._key,r,new Bl(t.hasPendingWrites,t.fromCache),e.converter)}const GC={maxAttempts:5};class mm{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ll(e)}set(e,t,r){this._verifyNotCommitted();const a=nu(e,this._firestore),c=gm(a.converter,t,r),h=up(this._dataReader,"WriteBatch.set",a._key,c,null!==a.converter,r);return this._mutations.push(h.toMutation(a._key,bn.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const c=nu(e,this._firestore);let h;return h="string"==typeof(t=(0,Bt.m9)(t))||t instanceof Ja?am(this._dataReader,"WriteBatch.update",c._key,t,r,a):a0(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(h.toMutation(c._key,bn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=nu(e,this._firestore);return this._mutations=this._mutations.concat(new Il(t._key,bn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function nu(n,e){if((n=(0,Bt.m9)(n)).firestore!==e)throw new Ae(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class fb extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ll(e)}get(e){const t=nu(e,this._firestore),r=new g0(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return rt();const c=a[0];if(c.isFoundDocument())return new Eh(this._firestore,r,c.key,c,t.converter);if(c.isNoDocument())return new Eh(this._firestore,r,t._key,null,t.converter);throw rt()})}set(e,t,r){const a=nu(e,this._firestore),c=gm(a.converter,t,r),h=up(this._dataReader,"Transaction.set",a._key,c,null!==a.converter,r);return this._transaction.set(a._key,h),this}update(e,t,r,...a){const c=nu(e,this._firestore);let h;return h="string"==typeof(t=(0,Bt.m9)(t))||t instanceof Ja?am(this._dataReader,"Transaction.update",c._key,t,r,a):a0(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,h),this}delete(e){const t=nu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=nu(e,this._firestore),r=new Ul(this._firestore);return super.get(e).then(a=>new zo(this._firestore,r,t._key,a._document,new Bl(!1,!1),t.converter))}}function v0(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ae("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function w0(){if(typeof Uint8Array>"u")throw new Ae("unimplemented","Uint8Arrays are not available in this environment.")}function _b(){if(!function II(){return typeof atob<"u"}())throw new Ae("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Oa=ui.SDK_VERSION,(0,ui._registerComponent)(new bo.wA("firestore",(t,{instanceIdentifier:r,options:a})=>{const c=t.getProvider("app").getImmediate(),h=new Tn(new dI(t.getProvider("auth-internal")),new wf(t.getProvider("app-check-internal")),function(_,E){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new Ae(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zu(_.options.projectId,E)}(c,r),c);return a=Object.assign({useFetchStreams:e},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),(0,ui.registerVersion)(dw,"3.7.3",n),(0,ui.registerVersion)(dw,"3.7.3","esm2017")}();class dp{constructor(e){this._delegate=e}static fromBase64String(e){return _b(),new dp(Go.fromBase64String(e))}static fromUint8Array(e){return w0(),new dp(Go.fromUint8Array(e))}toBase64(){return _b(),this._delegate.toBase64()}toUint8Array(){return w0(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function _m(n){return function E0(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class YC{enableIndexedDbPersistence(e,t){return function JE(n,e){n0(n=$t(n,Tn));const t=Qn(n),r=n._freezeSettings(),a=new Kg;return XE(t,a,new qg(a,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function YD(n){n0(n=$t(n,Tn));const e=Qn(n),t=n._freezeSettings(),r=new Kg;return XE(e,r,new FD(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function RC(n){if(n._initialized&&!n._terminated)throw new Ae(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new mr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{yield(t=(0,ge.Z)(function*(r){if(!bs.C())return Promise.resolve();const a=r+"main";yield bs.delete(a)}),function(r){return t.apply(this,arguments)})(Kf(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Ss{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Zu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&zu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function WE(n,e,t,r={}){var a;const c=(n=$t(n,rp))._getSettings();if("firestore.googleapis.com"!==c.host&&c.host!==e&&zu("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},c),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let h,_;if("string"==typeof r.mockUserToken)h=r.mockUserToken,_=gr.MOCK_USER;else{h=(0,Bt.Sg)(r.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new Ae(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new gr(E)}n._authCredentials=new yC(new hw(h,_))}}(this._delegate,e,t,r)}enableNetwork(){return function pv(n){return function zD(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield av(n),t=yield YE(n);return e.setNetworkEnabled(!0),function(r){const a=qe(r);return a._u.delete(0),oo(a)}(t)}))}(Qn(n=$t(n,Tn)))}(this._delegate)}disableNetwork(){return function e0(n){return function sp(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield av(n),t=yield YE(n);return e.setNetworkEnabled(!1),(r=(0,ge.Z)(function*(a){const c=qe(a);c._u.add(0),yield dh(c),c.gu.set("Offline")}),function(a){return r.apply(this,arguments)})(t);var r}))}(Qn(n=$t(n,Tn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,$E("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function fv(n){return function(e){const t=new mr;return e.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function MD(n,e){return Xf.apply(this,arguments)}(yield uv(e),t)})),t.promise}(Qn(n=$t(n,Tn)))}(this._delegate)}onSnapshotsInSync(e){return function $C(n,e){return function dv(n,e){const t=new Yg(e);return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield wh(n),a=t,qe(r).Ru.add(a),void a.next();var r,a})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield wh(n),a=t,void qe(r).Ru.delete(a);var r,a}))}}(Qn(n=$t(n,Tn)),hv(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ae("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ah(this,qE(this._delegate,e))}catch(t){throw fi(t,"collection()","Firestore.collection()")}}doc(e){try{return new Mi(this,iv(this._delegate,e))}catch(t){throw fi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new pi(this,function LD(n,e){if(n=$t(n,rp),tv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ae(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new hi(n,null,(t=e,new Qu(zt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw fi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function pb(n,e,t){n=$t(n,Tn);const r=Object.assign(Object.assign({},GC),t);return function(a){if(a.maxAttempts<1)throw new Ae(ae.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(a,c,h){const _=new mr;return a.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){const E=yield function cv(n){return ip(n).then(e=>e.datastore)}(a);new $D(a.asyncQueue,E,h,c,_).run()})),_.promise}(Qn(n),a=>e(new fb(n,a)),r)}(this._delegate,t=>e(new I0(this,t)))}batch(){return Qn(this._delegate),new Xi(new mm(this._delegate,e=>jl(this._delegate,e)))}loadBundle(e){return function gv(n,e){const t=Qn(n=$t(n,Tn)),r=new rm;return function op(n,e,t,r){const a=function(c,h){let _;return _="string"==typeof c?(new TextEncoder).encode(c):c,E=function(E,C){if(E instanceof Uint8Array)return KE(E,C);if(E instanceof ArrayBuffer)return KE(new Uint8Array(E),C);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(_),new BD(E,h);var E}(t,lh(e));n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){!function MC(n,e,t){const r=qe(n);var a;(a=(0,ge.Z)(function*(c,h,_){try{const E=yield h.getMetadata();if(yield function(z,K){const ne=qe(z),Me=Or(K.createTime);return ne.persistence.runTransaction("hasNewerBundle","readonly",Le=>ne.Ns.getBundleMetadata(Le,K.id)).then(Le=>!!Le&&Le.createTime.compareTo(Me)>=0)}(c.localStore,E))return yield h.close(),_._completeWith({taskState:"Success",documentsLoaded:(z=E).totalDocuments,bytesLoaded:z.totalBytes,totalDocuments:z.totalDocuments,totalBytes:z.totalBytes}),Promise.resolve(new Set);_._updateProgress(P_(E));const C=new DD(E,c.localStore,h.It);let x=yield h.mc();for(;x;){const z=yield C.Fu(x);z&&_._updateProgress(z),x=yield h.mc()}const R=yield C.complete();return yield Qa(c,R.Lu,void 0),yield function(z,K){const ne=qe(z);return ne.persistence.runTransaction("Save bundle","readwrite",Me=>ne.Ns.saveBundleMetadata(Me,K))}(c.localStore,E),_._completeWith(R.progress),Promise.resolve(R.Bu)}catch(E){return zu("SyncEngine",`Loading bundle failed with ${E}`),_._failWith(E),Promise.resolve(new Set)}var z}),function(c,h,_){return a.apply(this,arguments)})(r,e,t).then(a=>{r.sharedClientState.notifyBundleLoaded(a)})}(yield uv(n),a,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function QD(n,e){return function qD(n,e){return n.asyncQueue.enqueue((0,ge.Z)(function*(){return function(t,r){const a=qe(t);return a.persistence.runTransaction("Get named query","readonly",c=>a.Ns.getNamedQuery(c,r))}(yield tm(n),e)}))}(Qn(n=$t(n,Tn)),e).then(t=>t?new hi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new pi(this,t):null)}}class vm extends Dv{constructor(e){super(),this.firestore=e}convertBytes(e){return new dp(new Go(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Mi.forKey(t,this.firestore,null)}}class I0{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new vm(e)}get(e){const t=hc(e);return this._delegate.get(t).then(r=>new Ch(this._firestore,new zo(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const a=hc(e);return r?(v0("Transaction.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const c=hc(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...a),this}delete(e){const t=hc(e);return this._delegate.delete(t),this}}class Xi{constructor(e){this._delegate=e}set(e,t,r){const a=hc(e);return r?(v0("WriteBatch.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const c=hc(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...a),this}delete(e){const t=hc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Hl{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Dh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Th(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Hl.INSTANCES;let a=r.get(e);a||(a=new WeakMap,r.set(e,a));let c=a.get(t);return c||(c=new Hl(e,new vm(e),t),a.set(t,c)),c}}Hl.INSTANCES=new WeakMap;class Mi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new vm(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ae("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Mi(t,new gn(t._delegate,r,new je(e)))}static forKey(e,t,r){return new Mi(t,new gn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ah(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ah(this.firestore,qE(this._delegate,e))}catch(t){throw fi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Bt.m9)(e))instanceof gn&&VD(this._delegate,e)}set(e,t){t=v0("DocumentReference.set",t);try{return t?cb(this._delegate,e,t):cb(this._delegate,e)}catch(r){throw fi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?lb(this._delegate,e):lb(this._delegate,e,t,...r)}catch(a){throw fi(a,"updateDoc()","DocumentReference.update()")}}delete(){return function jC(n){return jl($t(n.firestore,Tn),[new Il(n._key,bn.none())])}(this._delegate)}onSnapshot(...e){const t=D0(e),r=wm(e,a=>new Ch(this.firestore,new zo(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return lp(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function _0(n){n=$t(n,gn);const e=$t(n.firestore,Tn),t=Qn(e),r=new Ul(e);return function WD(n,e){const t=new mr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(a,c,h){try{const _=yield function(E,C){const x=qe(E);return x.persistence.runTransaction("read document","readonly",R=>x.localDocuments.getDocument(R,C))}(a,c);_.isFoundDocument()?h.resolve(_):_.isNoDocument()?h.resolve(null):h.reject(new Ae(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(_){const E=gh(_,`Failed to get document '${c} from cache`);h.reject(E)}}),function(a,c,h){return r.apply(this,arguments)})(yield tm(n),e,t);var r})),t.promise}(t,n._key).then(a=>new zo(e,r,n._key,a,new Bl(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function LC(n){n=$t(n,gn);const e=$t(n.firestore,Tn);return nm(Qn(e),n._key,{source:"server"}).then(t=>bh(e,n,t))}(this._delegate):function ub(n){n=$t(n,gn);const e=$t(n.firestore,Tn);return nm(Qn(e),n._key).then(t=>bh(e,n,t))}(this._delegate),t.then(r=>new Ch(this.firestore,new zo(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Mi(this.firestore,this._delegate.withConverter(e?Hl.getInstance(this.firestore,e):null))}}function fi(n,e,t){return n.message=n.message.replace(e,t),n}function D0(n){for(const e of n)if("object"==typeof e&&!_m(e))return e;return{}}function wm(n,e){var t,r;let a;return a=_m(n[0])?n[0]:_m(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:c=>{a.next&&a.next(e(c))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(r=a.complete)||void 0===r?void 0:r.bind(a)}}class Ch{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Mi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return y0(this._delegate,e._delegate)}}class Th extends Ch{data(e){const t=this._delegate.data(e);return function lI(n,e){n||rt()}(void 0!==t),t}}class pi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new vm(e)}where(e,t,r){try{return new pi(this.firestore,eu(this._delegate,function l0(n,e,t){const r=e,a=Vl("where",n);return new ib(a,r,t)}(e,t,r)))}catch(a){throw fi(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new pi(this.firestore,eu(this._delegate,function sb(n,e="asc"){const t=e,r=Vl("orderBy",n);return new Ih(r,t)}(e,t)))}catch(r){throw fi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new pi(this.firestore,eu(this._delegate,function vv(n){return rv("limit",n),new _v("limit",n,"F")}(e)))}catch(t){throw fi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new pi(this.firestore,eu(this._delegate,function PC(n){return rv("limitToLast",n),new _v("limitToLast",n,"L")}(e)))}catch(t){throw fi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new pi(this.firestore,eu(this._delegate,function FC(...n){return new d0("startAt",n,!0)}(...e)))}catch(t){throw fi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new pi(this.firestore,eu(this._delegate,function ob(...n){return new d0("startAfter",n,!1)}(...e)))}catch(t){throw fi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new pi(this.firestore,eu(this._delegate,function ab(...n){return new h0("endBefore",n,!1)}(...e)))}catch(t){throw fi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new pi(this.firestore,eu(this._delegate,function f0(...n){return new h0("endAt",n,!0)}(...e)))}catch(t){throw fi(t,"endAt()","Query.endAt()")}}isEqual(e){return sv(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function BC(n){n=$t(n,hi);const e=$t(n.firestore,Tn),t=Qn(e),r=new Ul(e);return function $o(n,e){const t=new mr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(a,c,h){try{const _=yield Yf(a,c,!0),E=new RE(c,_.Hi),C=E.Wu(_.documents),x=E.applyChanges(C,!1);h.resolve(x.snapshot)}catch(_){const E=gh(_,`Failed to execute query '${c} against cache`);h.reject(E)}}),function(a,c,h){return r.apply(this,arguments)})(yield tm(n),e,t);var r})),t.promise}(t,n._query).then(a=>new tu(e,r,n,a))}(this._delegate):"server"===e?.source?function UC(n){n=$t(n,hi);const e=$t(n.firestore,Tn),t=Qn(e),r=new Ul(e);return QE(t,n._query,{source:"server"}).then(a=>new tu(e,r,n,a))}(this._delegate):function VC(n){n=$t(n,hi);const e=$t(n.firestore,Tn),t=Qn(e),r=new Ul(e);return fm(n._query),QE(t,n._query).then(a=>new tu(e,r,n,a))}(this._delegate),t.then(r=>new Em(this.firestore,new tu(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=D0(e),r=wm(e,a=>new Em(this.firestore,new tu(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return lp(this._delegate,t,r)}withConverter(e){return new pi(this.firestore,this._delegate.withConverter(e?Hl.getInstance(this.firestore,e):null))}}class b0{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Th(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Em{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new pi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Th(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new b0(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Th(this._firestore,r))})}isEqual(e){return y0(this._delegate,e._delegate)}}class Ah extends pi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Mi(this.firestore,e):null}doc(e){try{return new Mi(this.firestore,void 0===e?iv(this._delegate):iv(this._delegate,e))}catch(t){throw fi(t,"doc()","CollectionReference.doc()")}}add(e){return function HC(n,e){const t=$t(n.firestore,Tn),r=iv(n),a=gm(n.converter,e);return jl(t,[up(Ll(n.firestore),"addDoc",r._key,a,null!==n.converter,{}).toMutation(r._key,bn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Mi(this.firestore,t))}isEqual(e){return VD(this._delegate,e._delegate)}withConverter(e){return new Ah(this.firestore,this._delegate.withConverter(e?Hl.getInstance(this.firestore,e):null))}}function hc(n){return $t(n,gn)}class Cv{constructor(...e){this._delegate=new Ja(...e)}static documentId(){return new Cv(xn.keyField().canonicalString())}isEqual(e){return(e=(0,Bt.m9)(e))instanceof Ja&&this._delegate._internalPath.isEqual(e._internalPath)}}class ru{constructor(e){this._delegate=e}static serverTimestamp(){const e=function WC(){return new dc("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new ru(e)}static delete(){const e=function zC(){return new cp("deleteField")}();return e._methodName="FieldValue.delete",new ru(e)}static arrayUnion(...e){const t=function qC(...n){return new tb("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new ru(t)}static arrayRemove(...e){const t=function gb(...n){return new nb("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new ru(t)}static increment(e){const t=function ym(n){return new kC("increment",n)}(e);return t._methodName="FieldValue.increment",new ru(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const fc={Firestore:Ss,GeoPoint:om,Timestamp:In,Blob:dp,Transaction:I0,WriteBatch:Xi,DocumentReference:Mi,DocumentSnapshot:Ch,Query:pi,QueryDocumentSnapshot:Th,QuerySnapshot:Em,CollectionReference:Ah,FieldPath:Cv,FieldValue:ru,setLogLevel:function bv(n){!function fy(n){Ki.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function Tv(n){(function C0(n,e){n.INTERNAL.registerComponent(new bo.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(r,a)},"PUBLIC").setServiceProps(Object.assign({},fc)))})(n,(e,t)=>new Ss(e,t,new YC)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(Ea.Z);var Wo=F(7579),vb=F(6451),Av=F(5363),T0=F(8421);function $l(n,e){return(0,ys.e)((t,r)=>{let a=null,c=0,h=!1;const _=()=>h&&!a&&r.complete();t.subscribe((0,jr.x)(r,E=>{a?.unsubscribe();let C=0;const x=c++;(0,T0.Xf)(n(E,x)).subscribe(a=(0,jr.x)(r,R=>r.next(e?e(E,R,x,C++):R),()=>{a=null,_()}))},()=>{h=!0,_()}))})}var wb=F(6063);class Eb extends Wo.x{constructor(e=1/0,t=1/0,r=wb.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:a,_timestampProvider:c,_windowTime:h}=this;t||(r.push(e),!a&&r.push(c.now()+h)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:a}=this,c=a.slice();for(let h=0;h<c.length&&!e.closed;h+=r?1:2)e.next(c[h]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:a}=this,c=(a?1:2)*e;if(e<1/0&&c<r.length&&r.splice(0,r.length-c),!a){const h=t.now();let _=0;for(let E=1;E<r.length&&r[E]<=h;E+=2)_=E;_&&r.splice(0,_+1)}}}var A0=F(3099);function Ib(n,e,t){let r,a=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:a=!1,scheduler:t}=n):r=n??1/0,(0,A0.B)({connector:()=>new Eb(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}const x0=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var M0=F(515);function QC(n){return n<=0?()=>M0.E:(0,ys.e)((e,t)=>{let r=0;e.subscribe((0,jr.x)(t,a=>{++r<=n&&(t.next(a),n<=r&&t.complete())}))})}function Sv(n){return(0,ys.e)((e,t)=>{let r=!1;e.subscribe((0,jr.x)(t,a=>{r=!0,t.next(a)},()=>{r||t.next(n),t.complete()}))})}function N0(n=O0){return(0,ys.e)((e,t)=>{let r=!1;e.subscribe((0,jr.x)(t,a=>{r=!0,t.next(a)},()=>r?t.complete():t.error(n())))})}function O0(){return new x0}var xv=F(576);function Mv(n,e){return(0,xv.m)(e)?$l(()=>n,e):$l(()=>n)}var hp=F(9468);F(5867);const Ov=new Map,gp={activated:!1,tokenObservers:[]},Cb={initialized:!1,enabled:!1};function Wr(n){return Ov.get(n)||Object.assign({},gp)}function qo(){return Cb}class bm{constructor(e,t,r,a,c){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=a,this.upperBound=c,this.pending=null,this.nextErrorWaitInterval=a,a>c)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ge.Z)(function*(){t.stop();try{t.pending=new Bt.BH,yield function rT(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Bt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ni=new Bt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Lv(n){if(!Wr(n).activated)throw Ni.create("use-before-activation",{appName:n.name})}function Bv(n,e){return Uv.apply(this,arguments)}function Uv(){return Uv=(0,ge.Z)(function*({url:n,body:e},t){var r,a;const c={"Content-Type":"application/json"},h=t.getImmediate({optional:!0});if(h){const K=yield h.getHeartbeatsHeader();K&&(c["X-Firebase-Client"]=K)}const _={method:"POST",body:JSON.stringify(e),headers:c};let E,C;try{E=yield fetch(n,_)}catch(K){throw Ni.create("fetch-network-error",{originalErrorMessage:null===(r=K)||void 0===r?void 0:r.message})}if(200!==E.status)throw Ni.create("fetch-status-error",{httpStatus:E.status});try{C=yield E.json()}catch(K){throw Ni.create("fetch-parse-error",{originalErrorMessage:null===(a=K)||void 0===a?void 0:a.message})}const x=C.ttl.match(/^([\d.]+)(s)$/);if(!x||!x[2]||isNaN(Number(x[1])))throw Ni.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${C.ttl}`});const R=1e3*Number(x[1]),z=Date.now();return{token:C.token,expireTimeMillis:z+R,issuedAtTimeMillis:z}}),Uv.apply(this,arguments)}function B0(n,e){const{projectId:t,appId:r,apiKey:a}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${a}`,body:{debug_token:e}}}const Sh="firebase-app-check-store";let jv=null;function Hv(){return jv||(jv=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=a=>{n(a.target.result)},r.onerror=a=>{var c;e(Ni.create("storage-open",{originalErrorMessage:null===(c=a.target.error)||void 0===c?void 0:c.message}))},r.onupgradeneeded=a=>{0===a.oldVersion&&a.target.result.createObjectStore(Sh,{keyPath:"compositeKey"})}}catch(r){e(Ni.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),jv)}function Gv(){return Gv=(0,ge.Z)(function*(n,e){const r=(yield Hv()).transaction(Sh,"readwrite"),c=r.objectStore(Sh).put({compositeKey:n,value:e});return new Promise((h,_)=>{c.onsuccess=E=>{h()},r.onerror=E=>{var C;_(Ni.create("storage-set",{originalErrorMessage:null===(C=E.target.error)||void 0===C?void 0:C.message}))}})}),Gv.apply(this,arguments)}const Am=new Ar.Yd("@firebase/app-check");function H0(n,e){return(0,Bt.hl)()?function xb(n,e){return function Nb(n,e){return Gv.apply(this,arguments)}(function Ob(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Am.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function kb(){return qo().enabled}function Pb(){return G0.apply(this,arguments)}function G0(){return G0=(0,ge.Z)(function*(){const n=qo();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),G0.apply(this,arguments)}const uT={error:"UNKNOWN_ERROR"};function i(n){return Bt.US.encodeString(JSON.stringify(n),!1)}function s(n){return o.apply(this,arguments)}function o(){return o=(0,ge.Z)(function*(n,e=!1){const t=n.app;Lv(t);const r=Wr(t);let c,a=r.token;if(a&&!I(a)&&(r.token=void 0,a=void 0),!a){const E=yield r.cachedTokenPromise;E&&(I(E)?a=E:yield H0(t,void 0))}if(!e&&a&&I(a))return{token:a.token};let _,h=!1;if(kb()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Bv(B0(t,yield Pb()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),h=!0);const E=yield r.exchangeTokenPromise;return yield H0(t,E),r.token=E,{token:E.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),h=!0),a=yield Wr(t).exchangeTokenPromise}catch(E){"appCheck/throttled"===E.code?Am.warn(E.message):Am.error(E),c=E}return a?c?_=I(a)?{token:a.token,internalError:c}:T(c):(_={token:a.token},r.token=a,yield H0(t,a)):_=T(c),h&&w(t,_),_}),o.apply(this,arguments)}function l(n,e){const t=Wr(n),r=t.tokenObservers.filter(a=>a.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function f(n){const{app:e}=n,t=Wr(e);let r=t.tokenRefresher;r||(r=function y(n){const{app:e}=n;return new bm((0,ge.Z)(function*(){let r;if(r=Wr(e).token?yield s(n,!0):yield s(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Wr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function w(n,e){const t=Wr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function I(n){return n.expireTimeMillis-Date.now()>0}function T(n){return{token:i(uT),error:n}}class M{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Wr(this.app);for(const t of e)l(this.app,t.next);return Promise.resolve()}}const cT="app-check-internal";!function sS(){(0,ui._registerComponent)(new bo.wA("app-check",n=>function O(n,e){return new M(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(cT).initialize()})),(0,ui._registerComponent)(new bo.wA(cT,n=>function H(n){return{getToken:e=>s(n,e),addTokenListener:e=>function u(n,e,t,r){const{app:a}=n,c=Wr(a);if(c.tokenObservers=[...c.tokenObservers,{next:t,error:r,type:e}],c.token&&I(c.token)){const _=c.token;Promise.resolve().then(()=>{t({token:_.token}),f(n)}).catch(()=>{})}c.cachedTokenPromise.then(()=>f(n))}(n,"INTERNAL",e),removeTokenListener:e=>l(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ui.registerVersion)("@firebase/app-check","0.5.17")}();class Vb{constructor(){return(0,$n.vb)("app-check")}}typeof window<"u"&&window;var dT=F(127);const hT=new g.OlP("angularfire2.auth.use-emulator"),fT=new g.OlP("angularfire2.auth.settings"),pT=new g.OlP("angularfire2.auth.tenant-id"),gT=new g.OlP("angularfire2.auth.langugage-code"),mT=new g.OlP("angularfire2.auth.use-device-language"),yT=new g.OlP("angularfire.auth.persistence"),_T=(n,e,t,r,a,c,h,_)=>(0,Ur.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const E=e.runOutsideAngular(()=>n.auth());if(t&&E.useEmulator(...t),r&&(E.tenantId=r),E.languageCode=a,c&&E.useDeviceLanguage(),h)for(const[C,x]of Object.entries(h))E.settings[C]=x;return _&&E.setPersistence(_),E},[t,r,a,c,h,_]);let vT=(()=>{class n{constructor(t,r,a,c,h,_,E,C,x,R,z,K){const ne=new Wo.x,Me=nr(void 0).pipe((0,Av.Q)(h.outsideAngular),$l(()=>c.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,1277)))),(0,pn.U)(()=>(0,Ur.on)(t,c,r)),(0,pn.U)(Le=>_T(Le,c,_,C,x,R,E,z)),Ib({bufferSize:1,refCount:!1}));if(ur(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=nr(null);else{Me.pipe(function R0(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ks((a,c)=>n(a,c,r)):qs.y,QC(1),t?Sv(e):N0(()=>new x0))}()).subscribe();const dt=Me.pipe($l(Mt=>Mt.getRedirectResult().then(Ot=>Ot,()=>null)),$n.iC,Ib({bufferSize:1,refCount:!1})),Lt=Me.pipe($l(Mt=>new ya.y(Ot=>({unsubscribe:c.runOutsideAngular(()=>Mt.onAuthStateChanged(Ut=>Ot.next(Ut),Ut=>Ot.error(Ut),()=>Ot.complete()))})))),kt=Me.pipe($l(Mt=>new ya.y(Ot=>({unsubscribe:c.runOutsideAngular(()=>Mt.onIdTokenChanged(Ut=>Ot.next(Ut),Ut=>Ot.error(Ut),()=>Ot.complete()))}))));this.authState=dt.pipe(Mv(Lt),(0,hp.R)(h.outsideAngular),(0,Av.Q)(h.insideAngular)),this.user=dt.pipe(Mv(kt),(0,hp.R)(h.outsideAngular),(0,Av.Q)(h.insideAngular)),this.idToken=this.user.pipe($l(Mt=>Mt?(0,ei.D)(Mt.getIdToken()):nr(null))),this.idTokenResult=this.user.pipe($l(Mt=>Mt?(0,ei.D)(Mt.getIdTokenResult()):nr(null))),this.credential=(0,vb.T)(dt,ne,this.authState.pipe(Ks(Mt=>!Mt))).pipe((0,pn.U)(Mt=>Mt?.user?Mt:null),(0,hp.R)(h.outsideAngular),(0,Av.Q)(h.insideAngular))}return(0,Ur.pX)(this,Me,c,{spy:{apply:(Le,dt,Lt)=>{(Le.startsWith("signIn")||Le.startsWith("createUser"))&&Lt.then(kt=>ne.next(kt))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ur.Dh),g.LFG(Ur.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG($n.HU),g.LFG(hT,8),g.LFG(fT,8),g.LFG(pT,8),g.LFG(gT,8),g.LFG(mT,8),g.LFG(yT,8),g.LFG(Vb,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function wT(n,e){return function dS(n,e=Io.z){return new ya.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function Ub(n,e){return wT(n,e).pipe((0,pn.U)(t=>({payload:t,type:"query"})))}function W0(n,e){return Ub(n,e).pipe(va(void 0),_s(),(0,pn.U)(([t,r])=>{const a=r.payload.docChanges(),c=a.map(h=>({type:h.type,payload:h}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((h,_)=>{const E=a.find(x=>x.doc.ref.isEqual(h.ref)),C=t?.payload.docs.find(x=>x.ref.isEqual(h.ref));E&&JSON.stringify(E.doc.metadata)===JSON.stringify(h.metadata)||!E&&C&&JSON.stringify(C.metadata)===JSON.stringify(h.metadata)||c.push({type:"modified",payload:{oldIndex:_,newIndex:_,type:"modified",doc:h}})}),c}))}function ET(n,e,t){return W0(n,t).pipe(wa((r,a)=>function fS(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function pS(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return jb(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return jb(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return jb(n,e.oldIndex,1)}return n}(n,r))}),n}(r,a.map(c=>c.payload),e),[]),function hd(n,e=qs.y){return n=n??Gc,(0,ys.e)((t,r)=>{let a,c=!0;t.subscribe((0,jr.x)(r,h=>{const _=e(h);(c||!n(a,_))&&(c=!1,a=_,r.next(h))}))})}(),(0,pn.U)(r=>r.map(a=>({type:a.type,payload:a}))))}function jb(n,e,t,...r){const a=n.slice();return a.splice(e,t,...r),a}function IT(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class DT{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=W0(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,pn.U)(r=>r.filter(a=>e.indexOf(a.type)>-1)))),t.pipe(va(void 0),_s(),Ks(([r,a])=>a.length>0||!r),(0,pn.U)(([r,a])=>a),$n.iC)}auditTrail(e){return this.stateChanges(e).pipe(wa((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=IT(e);return ET(this.query,t,this.afs.schedulers.outsideAngular).pipe($n.iC)}valueChanges(e={}){return Ub(this.query,this.afs.schedulers.outsideAngular).pipe((0,pn.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),$n.iC)}get(e){return(0,ei.D)(this.query.get(e)).pipe($n.iC)}add(e){return this.ref.add(e)}doc(e){return new bT(this.ref.doc(e),this.afs)}}class bT{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:a,query:c}=AT(r,t);return new DT(a,c,this.afs)}snapshotChanges(){return function hS(n,e){return wT(n,e).pipe(va(void 0),_s(),(0,pn.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe($n.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,pn.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ei.D)(this.ref.get(e)).pipe($n.iC)}}class gS{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?W0(this.query,this.afs.schedulers.outsideAngular).pipe((0,pn.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ks(t=>t.length>0),$n.iC):W0(this.query,this.afs.schedulers.outsideAngular).pipe($n.iC)}auditTrail(e){return this.stateChanges(e).pipe(wa((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=IT(e);return ET(this.query,t,this.afs.schedulers.outsideAngular).pipe($n.iC)}valueChanges(e={}){return Ub(this.query,this.afs.schedulers.outsideAngular).pipe((0,pn.U)(r=>r.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),$n.iC)}get(e){return(0,ei.D)(this.query.get(e)).pipe($n.iC)}}const CT=new g.OlP("angularfire2.enableFirestorePersistence"),TT=new g.OlP("angularfire2.firestore.persistenceSettings"),mS=new g.OlP("angularfire2.firestore.settings"),yS=new g.OlP("angularfire2.firestore.use-emulator");function AT(n,e=(t=>t)){return{query:e(n),ref:n}}let ST=(()=>{class n{constructor(t,r,a,c,h,_,E,C,x,R,z,K,ne,Me,Le,dt,Lt){this.schedulers=E;const kt=(0,Ur.on)(t,_,r),Mt=x;R&&_T(kt,_,z,ne,Me,Le,K,dt),[this.firestore,this.persistenceEnabled$]=(0,Ur.cc)(`${kt.name}.firestore`,"AngularFirestore",kt.name,()=>{const Ot=_.runOutsideAngular(()=>kt.firestore());if(c&&Ot.settings(c),Mt&&Ot.useEmulator(...Mt),a&&!ur(h)){const Ut=()=>{try{return(0,ei.D)(Ot.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(qr){return typeof console<"u"&&console.warn(qr),nr(!1)}};return[Ot,_.runOutsideAngular(Ut)]}return[Ot,nr(!1)]},[c,Mt,a])}collection(t,r){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:c,query:h}=AT(a,r),_=this.schedulers.ngZone.run(()=>c);return new DT(_,h,this)}collectionGroup(t,r){const a=r||(h=>h),c=this.firestore.collectionGroup(t);return new gS(a(c),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>r);return new bT(a,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ur.Dh),g.LFG(Ur.xv,8),g.LFG(CT,8),g.LFG(mS,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG($n.HU),g.LFG(TT,8),g.LFG(yS,8),g.LFG(vT,8),g.LFG(hT,8),g.LFG(fT,8),g.LFG(pT,8),g.LFG(gT,8),g.LFG(mT,8),g.LFG(yT,8),g.LFG(Vb,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),_S=(()=>{class n{constructor(){dT.Z.registerVersion("angularfire",$n.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:CT,useValue:!0},{provide:TT,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[ST]}),n})();var xT=F(5577);class MT{}class NT{}class zl{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const a=t.slice(0,r),c=a.toLowerCase(),h=t.slice(r+1).trim();this.maybeSetNormalizedName(a,c),this.headers.has(c)?this.headers.get(c).push(h):this.headers.set(c,[h])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const a=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(a,r),this.maybeSetNormalizedName(t,a))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof zl?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new zl;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof zl?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const a=("a"===e.op?this.headers.get(t):void 0)||[];a.push(...r),this.headers.set(t,a);break;case"d":const c=e.value;if(c){let h=this.headers.get(t);if(!h)return;h=h.filter(_=>-1===c.indexOf(_)),0===h.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,h)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class wS{encodeKey(e){return OT(e)}encodeValue(e){return OT(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const IS=/%(\d[a-f0-9])/gi,DS={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function OT(n){return encodeURIComponent(n).replace(IS,(e,t)=>DS[t]??e)}function q0(n){return`${n}`}class xh{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new wS,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function ES(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(a=>{const c=a.indexOf("="),[h,_]=-1==c?[e.decodeKey(a),""]:[e.decodeKey(a.slice(0,c)),e.decodeValue(a.slice(c+1))],E=t.get(h)||[];E.push(_),t.set(h,E)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],a=Array.isArray(r)?r.map(q0):[q0(r)];this.map.set(t,a)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const a=e[r];Array.isArray(a)?a.forEach(c=>{t.push({param:r,value:c,op:"a"})}):t.push({param:r,value:a,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new xh({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(q0(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const a=r.indexOf(q0(e.value));-1!==a&&r.splice(a,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class bS{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function RT(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function kT(n){return typeof Blob<"u"&&n instanceof Blob}function PT(n){return typeof FormData<"u"&&n instanceof FormData}class Zv{constructor(e,t,r,a){let c;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function CS(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||a?(this.body=void 0!==r?r:null,c=a):c=r,c&&(this.reportProgress=!!c.reportProgress,this.withCredentials=!!c.withCredentials,c.responseType&&(this.responseType=c.responseType),c.headers&&(this.headers=c.headers),c.context&&(this.context=c.context),c.params&&(this.params=c.params)),this.headers||(this.headers=new zl),this.context||(this.context=new bS),this.params){const h=this.params.toString();if(0===h.length)this.urlWithParams=t;else{const _=t.indexOf("?");this.urlWithParams=t+(-1===_?"?":_<t.length-1?"&":"")+h}}else this.params=new xh,this.urlWithParams=t}serializeBody(){return null===this.body?null:RT(this.body)||kT(this.body)||PT(this.body)||function TS(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof xh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||PT(this.body)?null:kT(this.body)?this.body.type||null:RT(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof xh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,a=e.responseType||this.responseType,c=void 0!==e.body?e.body:this.body,h=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,_=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let E=e.headers||this.headers,C=e.params||this.params;const x=e.context??this.context;return void 0!==e.setHeaders&&(E=Object.keys(e.setHeaders).reduce((R,z)=>R.set(z,e.setHeaders[z]),E)),e.setParams&&(C=Object.keys(e.setParams).reduce((R,z)=>R.set(z,e.setParams[z]),C)),new Zv(t,r,c,{params:C,headers:E,context:x,reportProgress:_,responseType:a,withCredentials:h})}}var Rr=(()=>((Rr=Rr||{})[Rr.Sent=0]="Sent",Rr[Rr.UploadProgress=1]="UploadProgress",Rr[Rr.ResponseHeader=2]="ResponseHeader",Rr[Rr.DownloadProgress=3]="DownloadProgress",Rr[Rr.Response=4]="Response",Rr[Rr.User=5]="User",Rr))();class Hb{constructor(e,t=200,r="OK"){this.headers=e.headers||new zl,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class $b extends Hb{constructor(e={}){super(e),this.type=Rr.ResponseHeader}clone(e={}){return new $b({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class K0 extends Hb{constructor(e={}){super(e),this.type=Rr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new K0({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class FT extends Hb{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Gb(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let LT=(()=>{class n{constructor(t){this.handler=t}request(t,r,a={}){let c;if(t instanceof Zv)c=t;else{let E,C;E=a.headers instanceof zl?a.headers:new zl(a.headers),a.params&&(C=a.params instanceof xh?a.params:new xh({fromObject:a.params})),c=new Zv(t,r,void 0!==a.body?a.body:null,{headers:E,context:a.context,params:C,reportProgress:a.reportProgress,responseType:a.responseType||"json",withCredentials:a.withCredentials})}const h=nr(c).pipe(function vS(n,e){return(0,xv.m)(e)?(0,xT.z)(n,e,1):(0,xT.z)(n,1)}(E=>this.handler.handle(E)));if(t instanceof Zv||"events"===a.observe)return h;const _=h.pipe(Ks(E=>E instanceof K0));switch(a.observe||"body"){case"body":switch(c.responseType){case"arraybuffer":return _.pipe((0,pn.U)(E=>{if(null!==E.body&&!(E.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return E.body}));case"blob":return _.pipe((0,pn.U)(E=>{if(null!==E.body&&!(E.body instanceof Blob))throw new Error("Response is not a Blob.");return E.body}));case"text":return _.pipe((0,pn.U)(E=>{if(null!==E.body&&"string"!=typeof E.body)throw new Error("Response is not a string.");return E.body}));default:return _.pipe((0,pn.U)(E=>E.body))}case"response":return _;default:throw new Error(`Unreachable: unhandled observe type ${a.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new xh).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,a={}){return this.request("PATCH",t,Gb(a,r))}post(t,r,a={}){return this.request("POST",t,Gb(a,r))}put(t,r,a={}){return this.request("PUT",t,Gb(a,r))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(MT))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class VT{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const BT=new g.OlP("HTTP_INTERCEPTORS");let AS=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const SS=/^\)\]\}',?\n/;let UT=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ya.y(r=>{const a=this.xhrFactory.build();if(a.open(t.method,t.urlWithParams),t.withCredentials&&(a.withCredentials=!0),t.headers.forEach((K,ne)=>a.setRequestHeader(K,ne.join(","))),t.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const K=t.detectContentTypeHeader();null!==K&&a.setRequestHeader("Content-Type",K)}if(t.responseType){const K=t.responseType.toLowerCase();a.responseType="json"!==K?K:"text"}const c=t.serializeBody();let h=null;const _=()=>{if(null!==h)return h;const K=a.statusText||"OK",ne=new zl(a.getAllResponseHeaders()),Me=function xS(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(a)||t.url;return h=new $b({headers:ne,status:a.status,statusText:K,url:Me}),h},E=()=>{let{headers:K,status:ne,statusText:Me,url:Le}=_(),dt=null;204!==ne&&(dt=typeof a.response>"u"?a.responseText:a.response),0===ne&&(ne=dt?200:0);let Lt=ne>=200&&ne<300;if("json"===t.responseType&&"string"==typeof dt){const kt=dt;dt=dt.replace(SS,"");try{dt=""!==dt?JSON.parse(dt):null}catch(Mt){dt=kt,Lt&&(Lt=!1,dt={error:Mt,text:dt})}}Lt?(r.next(new K0({body:dt,headers:K,status:ne,statusText:Me,url:Le||void 0})),r.complete()):r.error(new FT({error:dt,headers:K,status:ne,statusText:Me,url:Le||void 0}))},C=K=>{const{url:ne}=_(),Me=new FT({error:K,status:a.status||0,statusText:a.statusText||"Unknown Error",url:ne||void 0});r.error(Me)};let x=!1;const R=K=>{x||(r.next(_()),x=!0);let ne={type:Rr.DownloadProgress,loaded:K.loaded};K.lengthComputable&&(ne.total=K.total),"text"===t.responseType&&!!a.responseText&&(ne.partialText=a.responseText),r.next(ne)},z=K=>{let ne={type:Rr.UploadProgress,loaded:K.loaded};K.lengthComputable&&(ne.total=K.total),r.next(ne)};return a.addEventListener("load",E),a.addEventListener("error",C),a.addEventListener("timeout",C),a.addEventListener("abort",C),t.reportProgress&&(a.addEventListener("progress",R),null!==c&&a.upload&&a.upload.addEventListener("progress",z)),a.send(c),r.next({type:Rr.Sent}),()=>{a.removeEventListener("error",C),a.removeEventListener("abort",C),a.removeEventListener("load",E),a.removeEventListener("timeout",C),t.reportProgress&&(a.removeEventListener("progress",R),null!==c&&a.upload&&a.upload.removeEventListener("progress",z)),a.readyState!==a.DONE&&a.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ps))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const zb=new g.OlP("XSRF_COOKIE_NAME"),Wb=new g.OlP("XSRF_HEADER_NAME");class jT{}let MS=(()=>{class n{constructor(t,r,a){this.doc=t,this.platform=r,this.cookieName=a,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Zo(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ce),g.LFG(g.Lbi),g.LFG(zb))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),qb=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const a=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||a.startsWith("http://")||a.startsWith("https://"))return r.handle(t);const c=this.tokenService.getToken();return null!==c&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,c)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(jT),g.LFG(Wb))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),NS=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(BT,[]);this.chain=r.reduceRight((a,c)=>new VT(a,c),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(NT),g.LFG(g.zs3))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),OS=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:qb,useClass:AS}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:zb,useValue:t.cookieName}:[],t.headerName?{provide:Wb,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[qb,{provide:BT,useExisting:qb,multi:!0},{provide:jT,useClass:MS},{provide:zb,useValue:"XSRF-TOKEN"},{provide:Wb,useValue:"X-XSRF-TOKEN"}]}),n})(),RS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[LT,{provide:MT,useClass:NS},UT,{provide:NT,useExisting:UT}],imports:[OS.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})(),kS=(()=>{class n{constructor(t){this.http=t}getCountries(t){return this.http.get("https://restcountries.com/v2/name/"+t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(LT))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function PS(n,e){1&n&&g._UZ(0,"app-recent-searches",7),2&n&&g.Q6J("result",e.$implicit)}function FS(n,e){1&n&&g._UZ(0,"app-result",8),2&n&&g.Q6J("country",e.$implicit)}let HT=(()=>{class n{constructor(t,r){this.firestore=t,this.api=r,this.title="countryTrivia",this.searchResult="",this.name=localStorage.getItem("name"),this.searchQuery="",this.searchArray=[],this.getMessages().subscribe(a=>this.searchArray=a)}getMessages(){return this.firestore.collection("searchQueries",t=>t.orderBy("timestamp")).valueChanges()}sendQuery(){this.firestore.collection("searchQueries").add({name:this.name,searchQuery:this.name+": "+this.searchQuery,timestamp:new dT.Z.firestore.Timestamp(Date.now()/1e3,0)}),this.searchQuery=""}saveName(){localStorage.setItem("name",this.name)}getAPIData(t){this.api.getCountries(this.searchQuery).subscribe(r=>{this.countryData=r})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(ST),g.Y36(kS))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:17,vars:4,consts:[["type","text",3,"ngModel","ngModelChange"],["type","text","placeholder","Search","id","searchInput",3,"ngModel","keyup.enter","ngModelChange"],[3,"click"],["id","recentSearches"],[3,"result",4,"ngFor","ngForOf"],["id","searchResult"],["app-data","",3,"country",4,"ngFor","ngForOf"],[3,"result"],["app-data","",3,"country"]],template:function(t,r){1&t&&(g.TgZ(0,"h1"),g._uU(1,"Country Trivia"),g.qZA(),g.TgZ(2,"header")(3,"label"),g._uU(4,"Name: "),g.qZA(),g.TgZ(5,"input",0),g.NdJ("ngModelChange",function(c){return r.name=c})("ngModelChange",function(){return r.saveName()}),g.qZA(),g._UZ(6,"br")(7,"br"),g.TgZ(8,"input",1),g.NdJ("keyup.enter",function(){return r.sendQuery()})("ngModelChange",function(c){return r.searchQuery=c}),g.qZA(),g._uU(9," \xa0 "),g.TgZ(10,"button",2),g.NdJ("click",function(){return r.getAPIData(r.searchQuery),r.sendQuery()}),g._uU(11,"Search"),g.qZA()(),g.TgZ(12,"section",3)(13,"div"),g.YNc(14,PS,1,1,"app-recent-searches",4),g.qZA()(),g.TgZ(15,"section",5),g.YNc(16,FS,1,1,"app-result",6),g.qZA()),2&t&&(g.xp6(5),g.Q6J("ngModel",r.name),g.xp6(3),g.Q6J("ngModel",r.searchQuery),g.xp6(6),g.Q6J("ngForOf",r.searchArray),g.xp6(2),g.Q6J("ngForOf",r.countryData))},styles:["header[_ngcontent-%COMP%]{position:sticky;padding:10px;width:25%;background-color:#708090;color:#fff}#recentSearches[_ngcontent-%COMP%]{background-color:#87cefa;float:right;padding:2em}#searchResult[_ngcontent-%COMP%]{float:left}#messageInput[_ngcontent-%COMP%]{width:500px;justify-content:center}"]}),n})();const{isArray:LS}=Array,{getPrototypeOf:VS,prototype:BS,keys:US}=Object;const{isArray:$S}=Array;function WS(n,e){return n.reduce((t,r,a)=>(t[r]=e[a],t),{})}let $T=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=a=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n}),n})(),mp=(()=>{class n extends $T{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const pc=new g.OlP("NgValueAccessor"),ZS={provide:pc,useExisting:(0,g.Gpc)(()=>Z0),multi:!0},QS=new g.OlP("CompositionEventMode");let Z0=(()=>{class n extends $T{constructor(t,r,a){super(t,r),this._compositionMode=a,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function YS(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(QS,8))},n.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(c){return r._handleInput(c.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(c){return r._compositionEnd(c.target.value)})},features:[g._Bn([ZS]),g.qOj]}),n})();const Oi=new g.OlP("NgValidators"),Nh=new g.OlP("NgAsyncValidators");function eA(n){return null!=n}function tA(n){return(0,g.QGY)(n)?(0,ei.D)(n):n}function nA(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function rA(n,e){return e.map(t=>t(n))}function iA(n){return n.map(e=>function ex(n){return!n.validate}(e)?e:t=>e.validate(t))}function Kb(n){return null!=n?function sA(n){if(!n)return null;const e=n.filter(eA);return 0==e.length?null:function(t){return nA(rA(t,e))}}(iA(n)):null}function oA(n){if(!n)return null;const e=n.filter(eA);return 0==e.length?null:function(t){return function qS(...n){const e=(0,cr.jO)(n),{args:t,keys:r}=function jS(n){if(1===n.length){const e=n[0];if(LS(e))return{args:e,keys:null};if(function HS(n){return n&&"object"==typeof n&&VS(n)===BS}(e)){const t=US(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n),a=new ya.y(c=>{const{length:h}=t;if(!h)return void c.complete();const _=new Array(h);let E=h,C=h;for(let x=0;x<h;x++){let R=!1;(0,T0.Xf)(t[x]).subscribe((0,jr.x)(c,z=>{R||(R=!0,C--),_[x]=z},()=>E--,void 0,()=>{(!E||!R)&&(C||c.next(r?WS(r,_):_),c.complete())}))}});return e?a.pipe(function zS(n){return(0,pn.U)(e=>function GS(n,e){return $S(e)?n(...e):n(e)}(n,e))}(e)):a}(rA(t,e).map(tA)).pipe((0,pn.U)(nA))}}function Zb(n){return null!=n?oA(iA(n)):null}function aA(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Yb(n){return n?Array.isArray(n)?n:[n]:[]}function Q0(n,e){return Array.isArray(n)?n.includes(e):n===e}function lA(n,e){const t=Yb(e);return Yb(n).forEach(a=>{Q0(t,a)||t.push(a)}),t}function dA(n,e){return Yb(e).filter(t=>!Q0(n,t))}class hA{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Kb(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Zb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class es extends hA{get formDirective(){return null}get path(){return null}}class Oh extends hA{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let pA=(()=>{class n extends class fA{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Oh,2))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[g.qOj]}),n})();const Yv="VALID",X0="INVALID",Rm="PENDING",Qv="DISABLED";function mA(n){return Array.isArray(n)?Kb(n):n||null}function yA(n){return Array.isArray(n)?Zb(n):n||null}function eI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function Jv(n,e){(function rC(n,e){const t=function uA(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(aA(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function cA(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(aA(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const a=()=>n.updateValueAndValidity();rI(e._rawValidators,a),rI(e._rawAsyncValidators,a)})(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function lx(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&EA(n,e)})}(n,e),function hx(n,e){const t=(r,a)=>{e.valueAccessor.writeValue(r),a&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function dx(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&EA(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function cx(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function rI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function EA(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function CA(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function TA(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const wx={provide:Oh,useExisting:(0,g.Gpc)(()=>aC)},MA=(()=>Promise.resolve())();let aC=(()=>{class n extends Oh{constructor(t,r,a,c,h){super(),this._changeDetectorRef=h,this.control=new class extends class wA{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=mA(this._rawValidators),this._composedAsyncValidatorFn=yA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Yv}get invalid(){return this.status===X0}get pending(){return this.status==Rm}get disabled(){return this.status===Qv}get enabled(){return this.status!==Qv}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=mA(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=yA(e)}addValidators(e){this.setValidators(lA(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(lA(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(dA(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(dA(e,this._rawAsyncValidators))}hasValidator(e){return Q0(this._rawValidators,e)}hasAsyncValidator(e){return Q0(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Rm,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Qv,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Yv,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Yv||this.status===Rm)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Qv:Yv}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Rm,this._hasOwnPendingAsyncValidator=!0;const t=tA(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,a)=>r&&r._find(a),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?Qv:this.errors?X0:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Rm)?Rm:this._anyControlsHaveStatus(X0)?X0:Yv}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){eI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}{constructor(e=null,t,r){super(function eC(n){return(eI(n)?n.validators:n)||null}(t),function tC(n,e){return(eI(e)?e.asyncValidators:n)||null}(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),eI(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=TA(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){CA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){CA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){TA(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},this._registered=!1,this.update=new g.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(a),this.valueAccessor=function sC(n,e){if(!e)return null;let t,r,a;return Array.isArray(e),e.forEach(c=>{c.constructor===Z0?t=c:function gx(n){return Object.getPrototypeOf(n.constructor)===mp}(c)?r=c:a=c}),a||r||t||null}(0,c)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function iC(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Jv(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){MA.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,a=0!==r&&(0,g.D6c)(r);MA.then(()=>{a&&!this.control.disabled?this.control.disable():!a&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function tI(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(es,9),g.Y36(Oi,10),g.Y36(Nh,10),g.Y36(pc,10),g.Y36(g.sBO,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([wx]),g.qOj,g.TTD]}),n})(),OA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})(),zx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[OA]}),n})(),Wx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[zx]}),n})();const YA_firebase={projectId:"cs336-finalproject-1fd79",appId:"1:943195271889:web:ca9266957800b526038bf0",storageBucket:"cs336-finalproject-1fd79.appspot.com",locationId:"us-central",apiKey:"AIzaSyALf42FcdUiLWHJ1c_eKGneoRH4fJPAuaw",authDomain:"cs336-finalproject-1fd79.firebaseapp.com",messagingSenderId:"943195271889",measurementId:"G-QWN3LVTWC5"};let Kx=(()=>{class n{constructor(){this.result={}}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-recent-searches"]],inputs:{result:"result"},decls:7,vars:5,consts:[["id","time"]],template:function(t,r){1&t&&(g.TgZ(0,"span"),g._uU(1),g.qZA(),g._uU(2,"\xa0\n"),g.TgZ(3,"span",0),g._uU(4),g.ALo(5,"date"),g.qZA(),g._UZ(6,"br")),2&t&&(g.xp6(1),g.hij(" ",r.result.searchQuery,""),g.xp6(3),g.Oqu(g.xi3(5,2,r.result.timestamp.toDate(),"medium")))},dependencies:[Ph],styles:["#time[_ngcontent-%COMP%]{font-size:x-small;color:gray}"]}),n})(),Zx=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-result"]],inputs:{country:"country"},decls:2,vars:3,template:function(t,r){1&t&&(g.TgZ(0,"p"),g._uU(1),g.qZA()),2&t&&(g.xp6(1),g.lnq(" ",r.country.name," Population: ",r.country.population," Location: ",r.country.latlng,"\n"))}}),n})(),Yx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[HT]}),n.\u0275inj=g.cJS({imports:[Uc,Wx,Ur.hO.initializeApp(YA_firebase),_S,RS]}),n})();g.B6R(HT,function(){return[Rs,Z0,pA,aC,Kx,Zx]},[]),(0,g.G48)(),Su().bootstrapModule(Yx).catch(n=>console.error(n))},5867:(ht,Te,F)=>{F.d(Te,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=F(9681);(0,g.registerVersion)("firebase","9.14.0","app")},127:(ht,Te,F)=>{F.d(Te,{Z:()=>g.Z});var g=F(3942);g.Z.registerVersion("firebase","9.14.0","app-compat")},1277:(ht,Te,F)=>{F.r(Te);var g=F(5861),X=F(3942),k=F(2090),ue=F(9681),se=F(1877),he=F(655),ce=F(4859);const Se=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ke=function Ne(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},fe=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ye=new se.Yd("@firebase/auth");function Xe(m,...d){Ye.logLevel<=se.in.ERROR&&Ye.error(`Auth (${ue.SDK_VERSION}): ${m}`,...d)}function be(m,...d){throw Ue(m,...d)}function me(m,...d){return Ue(m,...d)}function we(m,d,p){const v=Object.assign(Object.assign({},Ke()),{[d]:p});return new k.LL("auth","Firebase",v).create(d,{appName:m.name})}function Be(m,d,p){if(!(d instanceof p))throw p.name!==d.constructor.name&&be(m,"argument-error"),we(m,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ue(m,...d){if("string"!=typeof m){const p=d[0],v=[...d.slice(1)];return v[0]&&(v[0].appName=m.name),m._errorFactory.create(p,...v)}return fe.create(m,...d)}function V(m,d,...p){if(!m)throw Ue(d,...p)}function pe(m){const d="INTERNAL ASSERTION FAILED: "+m;throw Xe(d),new Error(d)}function W(m,d){m||pe(d)}const Y=new Map;function re(m){W(m instanceof Function,"Expected a class definition");let d=Y.get(m);return d?(W(d instanceof m,"Instance stored in cache mismatched with class"),d):(d=new m,Y.set(m,d),d)}function Oe(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.href)||""}function at(){return"http:"===Wt()||"https:"===Wt()}function Wt(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.protocol)||null}class Xt{constructor(d,p){this.shortDelay=d,this.longDelay=p,W(p>d,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function Pt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(at()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ln(m,d){W(m.emulator,"Emulator should always be set here");const{url:p}=m.emulator;return d?`${p}${d.startsWith("/")?d.slice(1):d}`:p}class Gt{static initialize(d,p,v){this.fetchImpl=d,p&&(this.headersImpl=p),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void pe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void pe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void pe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const qt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Dr=new Xt(3e4,6e4);function At(m,d){return m.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:m.tenantId}):d}function nn(m,d,p,v){return ts.apply(this,arguments)}function ts(){return(ts=(0,g.Z)(function*(m,d,p,v,A={}){return ri(m,A,(0,g.Z)(function*(){let N={},$={};v&&("GET"===d?$=v:N={body:JSON.stringify(v)});const oe=(0,k.xO)(Object.assign({key:m.config.apiKey},$)).slice(1),Fe=yield m._getAdditionalHeaders();return Fe["Content-Type"]="application/json",m.languageCode&&(Fe["X-Firebase-Locale"]=m.languageCode),Gt.fetch()(ii(m,m.config.apiHost,p,oe),Object.assign({method:d,headers:Fe,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function ri(m,d,p){return br.apply(this,arguments)}function br(){return(br=(0,g.Z)(function*(m,d,p){m._canInitEmulator=!1;const v=Object.assign(Object.assign({},qt),d);try{const A=new Kr(m),N=yield Promise.race([p(),A.promise]);A.clearNetworkTimeout();const $=yield N.json();if("needConfirmation"in $)throw Zr(m,"account-exists-with-different-credential",$);if(N.ok&&!("errorMessage"in $))return $;{const oe=N.ok?$.errorMessage:$.error.message,[Fe,Je]=oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fe)throw Zr(m,"credential-already-in-use",$);if("EMAIL_EXISTS"===Fe)throw Zr(m,"email-already-in-use",$);if("USER_DISABLED"===Fe)throw Zr(m,"user-disabled",$);const wt=v[Fe]||Fe.toLowerCase().replace(/[_\s]+/g,"-");if(Je)throw we(m,wt,Je);be(m,wt)}}catch(A){if(A instanceof k.ZR)throw A;be(m,"network-request-failed")}})).apply(this,arguments)}function kr(m,d,p,v){return xs.apply(this,arguments)}function xs(){return(xs=(0,g.Z)(function*(m,d,p,v,A={}){const N=yield nn(m,d,p,v,A);return"mfaPendingCredential"in N&&be(m,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function ii(m,d,p,v){const A=`${d}${p}?${v}`;return m.config.emulator?ln(m.config,A):`${m.config.apiScheme}://${A}`}class Kr{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((p,v)=>{this.timer=setTimeout(()=>v(me(this.auth,"network-request-failed")),Dr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Zr(m,d,p){const v={appName:m.name};p.email&&(v.email=p.email),p.phoneNumber&&(v.phoneNumber=p.phoneNumber);const A=me(m,d,v);return A.customData._tokenResponse=p,A}function Qe(){return(Qe=(0,g.Z)(function*(m,d){return nn(m,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function _r(m,d){return ns.apply(this,arguments)}function ns(){return(ns=(0,g.Z)(function*(m,d){return nn(m,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Vn(m,d){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,g.Z)(function*(m,d){return nn(m,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function gi(m){if(m)try{const d=new Date(Number(m));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function on(){return(on=(0,g.Z)(function*(m,d=!1){const p=(0,k.m9)(m),v=yield p.getIdToken(d),A=ot(v);V(A&&A.exp&&A.auth_time&&A.iat,p.auth,"internal-error");const N="object"==typeof A.firebase?A.firebase:void 0,$=N?.sign_in_provider;return{claims:A,token:v,authTime:gi(gt(A.auth_time)),issuedAtTime:gi(gt(A.iat)),expirationTime:gi(gt(A.exp)),signInProvider:$||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function gt(m){return 1e3*Number(m)}function ot(m){var d;const[p,v,A]=m.split(".");if(void 0===p||void 0===v||void 0===A)return Xe("JWT malformed, contained fewer than 3 sections"),null;try{const N=(0,k.tV)(v);return N?JSON.parse(N):(Xe("Failed to decode base64 JWT payload"),null)}catch(N){return Xe("Caught error parsing JWT payload as JSON",null===(d=N)||void 0===d?void 0:d.toString()),null}}function sr(m,d){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,g.Z)(function*(m,d,p=!1){if(p)return d;try{return yield d}catch(v){throw v instanceof k.ZR&&Pr(v)&&m.auth.currentUser===m&&(yield m.auth.signOut()),v}})).apply(this,arguments)}function Pr({code:m}){return"auth/user-disabled"===m||"auth/user-token-expired"===m}class Tt{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var p;if(d){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const A=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(d=!1){var p=this;if(!this.isRunning)return;const v=this.getInterval(d);this.timerId=setTimeout((0,g.Z)(function*(){yield p.iteration()}),v)}iteration(){var d=this;return(0,g.Z)(function*(){var p;try{yield d.user.getIdToken(!0)}catch(v){return void("auth/network-request-failed"===(null===(p=v)||void 0===p?void 0:p.code)&&d.schedule(!0))}d.schedule()})()}}class rs{constructor(d,p){this.createdAt=d,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=gi(this.lastLoginAt),this.creationTime=gi(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Zt(m){return mi.apply(this,arguments)}function mi(){return(mi=(0,g.Z)(function*(m){var d;const p=m.auth,v=yield m.getIdToken(),A=yield sr(m,Vn(p,{idToken:v}));V(A?.users.length,p,"internal-error");const N=A.users[0];m._notifyReloadListener(N);const $=null!==(d=N.providerUserInfo)&&void 0!==d&&d.length?tt(N.providerUserInfo):[],oe=Cr(m.providerData,$),wt=!!m.isAnonymous&&!(m.email&&N.passwordHash||oe?.length),pt={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:oe,metadata:new rs(N.createdAt,N.lastLoginAt),isAnonymous:wt};Object.assign(m,pt)})).apply(this,arguments)}function Bn(){return(Bn=(0,g.Z)(function*(m){const d=(0,k.m9)(m);yield Zt(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function Cr(m,d){return[...m.filter(v=>!d.some(A=>A.providerId===v.providerId)),...d]}function tt(m){return m.map(d=>{var{providerId:p}=d,v=(0,he._T)(d,["providerId"]);return{providerId:p,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function et(){return(et=(0,g.Z)(function*(m,d){const p=yield ri(m,{},(0,g.Z)(function*(){const v=(0,k.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:A,apiKey:N}=m.config,$=ii(m,A,"/v1/token",`key=${N}`),oe=yield m._getAdditionalHeaders();return oe["Content-Type"]="application/x-www-form-urlencoded",Gt.fetch()($,{method:"POST",headers:oe,body:v})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class Et{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){V(d.idToken,"internal-error"),V(typeof d.idToken<"u","internal-error"),V(typeof d.refreshToken<"u","internal-error");const p="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):function Jt(m){const d=ot(m);return V(d,"internal-error"),V(typeof d.exp<"u","internal-error"),V(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,p)}getToken(d,p=!1){var v=this;return(0,g.Z)(function*(){return V(!v.accessToken||v.refreshToken,d,"user-token-expired"),p||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(d,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,p){var v=this;return(0,g.Z)(function*(){const{accessToken:A,refreshToken:N,expiresIn:$}=yield function De(m,d){return et.apply(this,arguments)}(d,p);v.updateTokensAndExpiration(A,N,Number($))})()}updateTokensAndExpiration(d,p,v){this.refreshToken=p||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(d,p){const{refreshToken:v,accessToken:A,expirationTime:N}=p,$=new Et;return v&&(V("string"==typeof v,"internal-error",{appName:d}),$.refreshToken=v),A&&(V("string"==typeof A,"internal-error",{appName:d}),$.accessToken=A),N&&(V("number"==typeof N,"internal-error",{appName:d}),$.expirationTime=N),$}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new Et,this.toJSON())}_performRefresh(){return pe("not implemented")}}function vt(m,d){V("string"==typeof m||typeof m>"u","internal-error",{appName:d})}class Nt{constructor(d){var{uid:p,auth:v,stsTokenManager:A}=d,N=(0,he._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Tt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=v,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new rs(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(d){var p=this;return(0,g.Z)(function*(){const v=yield sr(p,p.stsTokenManager.getToken(p.auth,d));return V(v,p.auth,"internal-error"),p.accessToken!==v&&(p.accessToken=v,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),v})()}getIdTokenResult(d){return function Mn(m){return on.apply(this,arguments)}(this,d)}reload(){return function Yt(m){return Bn.apply(this,arguments)}(this)}_assign(d){this!==d&&(V(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(p=>Object.assign({},p)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){return new Nt(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(d){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,p=!1){var v=this;return(0,g.Z)(function*(){let A=!1;d.idToken&&d.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(d),A=!0),p&&(yield Zt(v)),yield v.auth._persistUserIfCurrent(v),A&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var d=this;return(0,g.Z)(function*(){const p=yield d.getIdToken();return yield sr(d,function Ko(m,d){return Qe.apply(this,arguments)}(d.auth,{idToken:p})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,p){var v,A,N,$,oe,Fe,Je,wt;const pt=null!==(v=p.displayName)&&void 0!==v?v:void 0,Wn=null!==(A=p.email)&&void 0!==A?A:void 0,qn=null!==(N=p.phoneNumber)&&void 0!==N?N:void 0,Ds=null!==($=p.photoURL)&&void 0!==$?$:void 0,df=null!==(oe=p.tenantId)&&void 0!==oe?oe:void 0,hf=null!==(Fe=p._redirectEventId)&&void 0!==Fe?Fe:void 0,ff=null!==(Je=p.createdAt)&&void 0!==Je?Je:void 0,Jm=null!==(wt=p.lastLoginAt)&&void 0!==wt?wt:void 0,{uid:Bp,emailVerified:Xm,isAnonymous:Hu,providerData:Ma,stsTokenManager:al}=p;V(Bp&&al,d,"internal-error");const pf=Et.fromJSON(this.name,al);V("string"==typeof Bp,d,"internal-error"),vt(pt,d.name),vt(Wn,d.name),V("boolean"==typeof Xm,d,"internal-error"),V("boolean"==typeof Hu,d,"internal-error"),vt(qn,d.name),vt(Ds,d.name),vt(df,d.name),vt(hf,d.name),vt(ff,d.name),vt(Jm,d.name);const Rd=new Nt({uid:Bp,auth:d,email:Wn,emailVerified:Xm,displayName:pt,isAnonymous:Hu,photoURL:Ds,phoneNumber:qn,tenantId:df,stsTokenManager:pf,createdAt:ff,lastLoginAt:Jm});return Ma&&Array.isArray(Ma)&&(Rd.providerData=Ma.map(Na=>Object.assign({},Na))),hf&&(Rd._redirectEventId=hf),Rd}static _fromIdTokenResponse(d,p,v=!1){return(0,g.Z)(function*(){const A=new Et;A.updateFromServerResponse(p);const N=new Nt({uid:p.localId,auth:d,stsTokenManager:A,isAnonymous:v});return yield Zt(N),N})()}}const L=(()=>{class m{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(p,v){var A=this;return(0,g.Z)(function*(){A.storage[p]=v})()}_get(p){var v=this;return(0,g.Z)(function*(){const A=v.storage[p];return void 0===A?null:A})()}_remove(p){var v=this;return(0,g.Z)(function*(){delete v.storage[p]})()}_addListener(p,v){}_removeListener(p,v){}}return m.type="NONE",m})();function q(m,d,p){return`firebase:${m}:${d}:${p}`}class _e{constructor(d,p,v){this.persistence=d,this.auth=p,this.userKey=v;const{config:A,name:N}=this.auth;this.fullUserKey=q(this.userKey,A.apiKey,N),this.fullPersistenceKey=q("persistence",A.apiKey,N),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,g.Z)(function*(){const p=yield d.persistence._get(d.fullUserKey);return p?Nt._fromJSON(d.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var p=this;return(0,g.Z)(function*(){if(p.persistence===d)return;const v=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=d,v?p.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,p,v="authUser"){return(0,g.Z)(function*(){if(!p.length)return new _e(re(L),d,v);const A=(yield Promise.all(p.map(function(){var Je=(0,g.Z)(function*(wt){if(yield wt._isAvailable())return wt});return function(wt){return Je.apply(this,arguments)}}()))).filter(Je=>Je);let N=A[0]||re(L);const $=q(v,d.config.apiKey,d.name);let oe=null;for(const Je of p)try{const wt=yield Je._get($);if(wt){const pt=Nt._fromJSON(d,wt);Je!==N&&(oe=pt),N=Je;break}}catch{}const Fe=A.filter(Je=>Je._shouldAllowMigration);return N._shouldAllowMigration&&Fe.length?(N=Fe[0],oe&&(yield N._set($,oe.toJSON())),yield Promise.all(p.map(function(){var Je=(0,g.Z)(function*(wt){if(wt!==N)try{yield wt._remove($)}catch{}});return function(wt){return Je.apply(this,arguments)}}())),new _e(N,d,v)):new _e(N,d,v)})()}}function Z(m){const d=m.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(sn(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(Ge(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(Pe(d))return"Blackberry";if($e(d))return"Webos";if(ut(d))return"Safari";if((d.includes("chrome/")||Kt(d))&&!d.includes("edge/"))return"Chrome";if(jt(d))return"Android";{const v=m.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===v?.length)return v[1]}return"Other"}function Ge(m=(0,k.z$)()){return/firefox\//i.test(m)}function ut(m=(0,k.z$)()){const d=m.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function Kt(m=(0,k.z$)()){return/crios\//i.test(m)}function sn(m=(0,k.z$)()){return/iemobile/i.test(m)}function jt(m=(0,k.z$)()){return/android/i.test(m)}function Pe(m=(0,k.z$)()){return/blackberry/i.test(m)}function $e(m=(0,k.z$)()){return/webos/i.test(m)}function Rt(m=(0,k.z$)()){return/iphone|ipad|ipod/i.test(m)||/macintosh/i.test(m)&&/mobile/i.test(m)}function Ms(m=(0,k.z$)()){return Rt(m)||jt(m)||$e(m)||Pe(m)||/windows phone/i.test(m)||sn(m)}function is(m,d=[]){let p;switch(m){case"Browser":p=Z((0,k.z$)());break;case"Worker":p=`${Z((0,k.z$)())}-${m}`;break;default:p=m}const v=d.length?d.join(","):"FirebaseCore-web";return`${p}/JsCore/${ue.SDK_VERSION}/${v}`}class co{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,p){const v=N=>new Promise(($,oe)=>{try{$(d(N))}catch(Fe){oe(Fe)}});v.onAbort=p,this.queue.push(v);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(d){var p=this;return(0,g.Z)(function*(){var v;if(p.auth.currentUser===d)return;const A=[];try{for(const N of p.queue)yield N(d),N.onAbort&&A.push(N.onAbort)}catch(N){A.reverse();for(const $ of A)try{$()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:null===(v=N)||void 0===v?void 0:v.message})}})()}}class St{constructor(d,p,v){this.app=d,this.heartbeatServiceProvider=p,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ns(this),this.idTokenSubscription=new Ns(this),this.beforeStateQueue=new co(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(d,p){var v=this;return p&&(this._popupRedirectResolver=re(p)),this._initializationPromise=this.queue((0,g.Z)(function*(){var A,N;if(!v._deleted&&(v.persistenceManager=yield _e.create(v,d),!v._deleted)){if(null!==(A=v._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch{}yield v.initializeCurrentUser(p),v.lastNotifiedUid=(null===(N=v.currentUser)||void 0===N?void 0:N.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,g.Z)(function*(){if(d._deleted)return;const p=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||p){if(d.currentUser&&p&&d.currentUser.uid===p.uid)return d._currentUser._assign(p),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(p,!0)}})()}initializeCurrentUser(d){var p=this;return(0,g.Z)(function*(){var v;const A=yield p.assertedPersistence.getCurrentUser();let N=A,$=!1;if(d&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const oe=null===(v=p.redirectUser)||void 0===v?void 0:v._redirectEventId,Fe=N?._redirectEventId,Je=yield p.tryRedirectSignIn(d);(!oe||oe===Fe)&&Je?.user&&(N=Je.user,$=!0)}if(!N)return p.directlySetCurrentUser(null);if(!N._redirectEventId){if($)try{yield p.beforeStateQueue.runMiddleware(N)}catch(oe){N=A,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(oe))}return N?p.reloadAndSetCurrentUserOrClear(N):p.directlySetCurrentUser(null)}return V(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===N._redirectEventId?p.directlySetCurrentUser(N):p.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(d){var p=this;return(0,g.Z)(function*(){let v=null;try{v=yield p._popupRedirectResolver._completeRedirectFn(p,d,!0)}catch{yield p._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(d){var p=this;return(0,g.Z)(function*(){var v;try{yield Zt(d)}catch(A){if("auth/network-request-failed"!==(null===(v=A)||void 0===v?void 0:v.code))return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function Ze(){if(typeof navigator>"u")return null;const m=navigator;return m.languages&&m.languages[0]||m.language||null}()}_delete(){var d=this;return(0,g.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var p=this;return(0,g.Z)(function*(){const v=d?(0,k.m9)(d):null;return v&&V(v.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(v&&v._clone(p))})()}_updateCurrentUser(d,p=!1){var v=this;return(0,g.Z)(function*(){if(!v._deleted)return d&&V(v.tenantId===d.tenantId,v,"tenant-id-mismatch"),p||(yield v.beforeStateQueue.runMiddleware(d)),v.queue((0,g.Z)(function*(){yield v.directlySetCurrentUser(d),v.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,g.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var p=this;return this.queue((0,g.Z)(function*(){yield p.assertedPersistence.setPersistence(re(d))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new k.LL("auth","Firebase",d())}onAuthStateChanged(d,p,v){return this.registerStateListener(this.authStateSubscription,d,p,v)}beforeAuthStateChanged(d,p){return this.beforeStateQueue.pushCallback(d,p)}onIdTokenChanged(d,p,v){return this.registerStateListener(this.idTokenSubscription,d,p,v)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,p){var v=this;return(0,g.Z)(function*(){const A=yield v.getOrInitRedirectPersistenceManager(p);return null===d?A.removeCurrentUser():A.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var p=this;return(0,g.Z)(function*(){if(!p.redirectPersistenceManager){const v=d&&re(d)||p._popupRedirectResolver;V(v,p,"argument-error"),p.redirectPersistenceManager=yield _e.create(p,[re(v._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(d){var p=this;return(0,g.Z)(function*(){var v,A;return p._isInitialized&&(yield p.queue((0,g.Z)(function*(){}))),(null===(v=p._currentUser)||void 0===v?void 0:v._redirectEventId)===d?p._currentUser:(null===(A=p.redirectUser)||void 0===A?void 0:A._redirectEventId)===d?p.redirectUser:null})()}_persistUserIfCurrent(d){var p=this;return(0,g.Z)(function*(){if(d===p.currentUser)return p.queue((0,g.Z)(function*(){return p.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(p=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,p,v,A){if(this._deleted)return()=>{};const N="function"==typeof p?p:p.next.bind(p),$=this._isInitialized?Promise.resolve():this._initializationPromise;return V($,this,"internal-error"),$.then(()=>N(this.currentUser)),"function"==typeof p?d.addObserver(p,v,A):d.addObserver(p)}directlySetCurrentUser(d){var p=this;return(0,g.Z)(function*(){p.currentUser&&p.currentUser!==d&&p._currentUser._stopProactiveRefresh(),d&&p.isProactiveRefreshEnabled&&d._startProactiveRefresh(),p.currentUser=d,d?yield p.assertedPersistence.setCurrentUser(d):yield p.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=is(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,g.Z)(function*(){var p;const v={"X-Client-Version":d.clientVersion};d.app.options.appId&&(v["X-Firebase-gmpid"]=d.app.options.appId);const A=yield null===(p=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return A&&(v["X-Firebase-Client"]=A),v})()}}function hn(m){return(0,k.m9)(m)}class Ns{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,k.ne)(p=>this.observer=p)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function yi(m){const d=m.indexOf(":");return d<0?"":m.substr(0,d+1)}function ss(m){if(!m)return null;const d=Number(m);return isNaN(d)?null:d}class or{constructor(d,p){this.providerId=d,this.signInMethod=p}toJSON(){return pe("not implemented")}_getIdTokenResponse(d){return pe("not implemented")}_linkToIdToken(d,p){return pe("not implemented")}_getReauthenticationResolver(d){return pe("not implemented")}}function Rn(m,d){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,g.Z)(function*(m,d){return nn(m,"POST","/v1/accounts:resetPassword",At(m,d))})).apply(this,arguments)}function rn(m,d){return gc.apply(this,arguments)}function gc(){return(gc=(0,g.Z)(function*(m,d){return nn(m,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function mc(m,d){return Os.apply(this,arguments)}function Os(){return(Os=(0,g.Z)(function*(m,d){return nn(m,"POST","/v1/accounts:update",At(m,d))})).apply(this,arguments)}function Rs(){return(Rs=(0,g.Z)(function*(m,d){return kr(m,"POST","/v1/accounts:signInWithPassword",At(m,d))})).apply(this,arguments)}function as(m,d){return si.apply(this,arguments)}function si(){return(si=(0,g.Z)(function*(m,d){return nn(m,"POST","/v1/accounts:sendOobCode",At(m,d))})).apply(this,arguments)}function ar(m,d){return yc.apply(this,arguments)}function yc(){return(yc=(0,g.Z)(function*(m,d){return as(m,d)})).apply(this,arguments)}function Xn(m,d){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,g.Z)(function*(m,d){return as(m,d)})).apply(this,arguments)}function su(m,d){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,g.Z)(function*(m,d){return as(m,d)})).apply(this,arguments)}function _c(m,d){return vr.apply(this,arguments)}function vr(){return(vr=(0,g.Z)(function*(m,d){return as(m,d)})).apply(this,arguments)}function Wl(){return(Wl=(0,g.Z)(function*(m,d){return kr(m,"POST","/v1/accounts:signInWithEmailLink",At(m,d))})).apply(this,arguments)}function vc(){return(vc=(0,g.Z)(function*(m,d){return kr(m,"POST","/v1/accounts:signInWithEmailLink",At(m,d))})).apply(this,arguments)}class wc extends or{constructor(d,p,v,A=null){super("password",v),this._email=d,this._password=p,this._tenantId=A}static _fromEmailAndPassword(d,p){return new wc(d,p,"password")}static _fromEmailAndCode(d,p,v=null){return new wc(d,p,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(d){var p=this;return(0,g.Z)(function*(){switch(p.signInMethod){case"password":return function Yo(m,d){return Rs.apply(this,arguments)}(d,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function Rh(m,d){return Wl.apply(this,arguments)}(d,{email:p._email,oobCode:p._password});default:be(d,"internal-error")}})()}_linkToIdToken(d,p){var v=this;return(0,g.Z)(function*(){switch(v.signInMethod){case"password":return rn(d,{idToken:p,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function kh(m,d){return vc.apply(this,arguments)}(d,{idToken:p,email:v._email,oobCode:v._password});default:be(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function jn(m,d){return ql.apply(this,arguments)}function ql(){return(ql=(0,g.Z)(function*(m,d){return kr(m,"POST","/v1/accounts:signInWithIdp",At(m,d))})).apply(this,arguments)}class Ri extends or{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const p=new Ri(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(p.idToken=d.idToken),d.accessToken&&(p.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(p.nonce=d.nonce),d.pendingToken&&(p.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(p.accessToken=d.oauthToken,p.secret=d.oauthTokenSecret):be("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d,{providerId:v,signInMethod:A}=p,N=(0,he._T)(p,["providerId","signInMethod"]);if(!v||!A)return null;const $=new Ri(v,A);return $.idToken=N.idToken||void 0,$.accessToken=N.accessToken||void 0,$.secret=N.secret,$.nonce=N.nonce,$.pendingToken=N.pendingToken||null,$}_getIdTokenResponse(d){return jn(d,this.buildRequest())}_linkToIdToken(d,p){const v=this.buildRequest();return v.idToken=p,jn(d,v)}_getReauthenticationResolver(d){const p=this.buildRequest();return p.autoCreate=!1,jn(d,p)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),d.postBody=(0,k.xO)(p)}return d}}function vp(m,d){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,g.Z)(function*(m,d){return nn(m,"POST","/v1/accounts:sendVerificationCode",At(m,d))})).apply(this,arguments)}function us(){return(us=(0,g.Z)(function*(m,d){return kr(m,"POST","/v1/accounts:signInWithPhoneNumber",At(m,d))})).apply(this,arguments)}function Zl(){return(Zl=(0,g.Z)(function*(m,d){const p=yield kr(m,"POST","/v1/accounts:signInWithPhoneNumber",At(m,d));if(p.temporaryProof)throw Zr(m,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Ep={USER_NOT_FOUND:"user-not-found"};function Yl(){return(Yl=(0,g.Z)(function*(m,d){return kr(m,"POST","/v1/accounts:signInWithPhoneNumber",At(m,Object.assign(Object.assign({},d),{operation:"REAUTH"})),Ep)})).apply(this,arguments)}class cs extends or{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,p){return new cs({verificationId:d,verificationCode:p})}static _fromTokenResponse(d,p){return new cs({phoneNumber:d,temporaryProof:p})}_getIdTokenResponse(d){return function Ec(m,d){return us.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,p){return function wp(m,d){return Zl.apply(this,arguments)}(d,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function Ph(m,d){return Yl.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:p,verificationId:v,verificationCode:A}=this.params;return d&&p?{temporaryProof:d,phoneNumber:p}:{sessionInfo:v,code:A}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:p,verificationCode:v,phoneNumber:A,temporaryProof:N}=d;return v||p||A||N?new cs({verificationId:p,verificationCode:v,phoneNumber:A,temporaryProof:N}):null}}class ou{constructor(d){var p,v,A,N,$,oe;const Fe=(0,k.zd)((0,k.pd)(d)),Je=null!==(p=Fe.apiKey)&&void 0!==p?p:null,wt=null!==(v=Fe.oobCode)&&void 0!==v?v:null,pt=function Ql(m){switch(m){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Fe.mode)&&void 0!==A?A:null);V(Je&&wt&&pt,"argument-error"),this.apiKey=Je,this.operation=pt,this.code=wt,this.continueUrl=null!==(N=Fe.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==($=Fe.languageCode)&&void 0!==$?$:null,this.tenantId=null!==(oe=Fe.tenantId)&&void 0!==oe?oe:null}static parseLink(d){const p=function Jl(m){const d=(0,k.zd)((0,k.pd)(m)).link,p=d?(0,k.zd)((0,k.pd)(d)).deep_link_id:null,v=(0,k.zd)((0,k.pd)(m)).deep_link_id;return(v?(0,k.zd)((0,k.pd)(v)).link:null)||v||p||d||m}(d);try{return new ou(p)}catch{return null}}}let _i=(()=>{class m{constructor(){this.providerId=m.PROVIDER_ID}static credential(p,v){return wc._fromEmailAndPassword(p,v)}static credentialWithLink(p,v){const A=ou.parseLink(v);return V(A,"argument-error"),wc._fromEmailAndCode(p,A.code,A.tenantId)}}return m.PROVIDER_ID="password",m.EMAIL_PASSWORD_SIGN_IN_METHOD="password",m.EMAIL_LINK_SIGN_IN_METHOD="emailLink",m})();class ki{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class Pi extends ki{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class ks extends Pi{static credentialFromJSON(d){const p="string"==typeof d?JSON.parse(d):d;return V("providerId"in p&&"signInMethod"in p,"argument-error"),Ri._fromParams(p)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return V(d.idToken||d.accessToken,"argument-error"),Ri._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return ks.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return ks.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:p,oauthAccessToken:v,oauthTokenSecret:A,pendingToken:N,nonce:$,providerId:oe}=d;if(!v&&!A&&!p&&!N||!oe)return null;try{return new ks(oe)._credential({idToken:p,accessToken:v,nonce:$,pendingToken:N})}catch{return null}}}let Jo=(()=>{class m extends Pi{constructor(){super("facebook.com")}static credential(p){return Ri._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return m.credential(p.oauthAccessToken)}catch{return null}}}return m.FACEBOOK_SIGN_IN_METHOD="facebook.com",m.PROVIDER_ID="facebook.com",m})(),au=(()=>{class m extends Pi{constructor(){super("google.com"),this.addScope("profile")}static credential(p,v){return Ri._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:v})}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:v,oauthAccessToken:A}=p;if(!v&&!A)return null;try{return m.credential(v,A)}catch{return null}}}return m.GOOGLE_SIGN_IN_METHOD="google.com",m.PROVIDER_ID="google.com",m})(),Ic=(()=>{class m extends Pi{constructor(){super("github.com")}static credential(p){return Ri._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return m.credential(p.oauthAccessToken)}catch{return null}}}return m.GITHUB_SIGN_IN_METHOD="github.com",m.PROVIDER_ID="github.com",m})();class Xo extends or{constructor(d,p){super(d,d),this.pendingToken=p}_getIdTokenResponse(d){return jn(d,this.buildRequest())}_linkToIdToken(d,p){const v=this.buildRequest();return v.idToken=p,jn(d,v)}_getReauthenticationResolver(d){const p=this.buildRequest();return p.autoCreate=!1,jn(d,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d,{providerId:v,signInMethod:A,pendingToken:N}=p;return v&&A&&N&&v===A?new Xo(v,N):null}static _create(d,p){return new Xo(d,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Qr extends ki{constructor(d){V(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return Qr.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return Qr.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const p=Xo.fromJSON(d);return V(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:p,providerId:v}=d;if(!p||!v)return null;try{return Xo._create(v,p)}catch{return null}}}let Lr=(()=>{class m extends Pi{constructor(){super("twitter.com")}static credential(p,v){return Ri._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:v})}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:v,oauthTokenSecret:A}=p;if(!v||!A)return null;try{return m.credential(v,A)}catch{return null}}}return m.TWITTER_SIGN_IN_METHOD="twitter.com",m.PROVIDER_ID="twitter.com",m})();function lo(m,d){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,g.Z)(function*(m,d){return kr(m,"POST","/v1/accounts:signUp",At(m,d))})).apply(this,arguments)}class ur{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,p,v,A=!1){return(0,g.Z)(function*(){const N=yield Nt._fromIdTokenResponse(d,v,A),$=Vh(v);return new ur({user:N,providerId:$,_tokenResponse:v,operationType:p})})()}static _forOperation(d,p,v){return(0,g.Z)(function*(){yield d._updateTokensIfNecessary(v,!0);const A=Vh(v);return new ur({user:d,providerId:A,_tokenResponse:v,operationType:p})})()}}function Vh(m){return m.providerId?m.providerId:"phoneNumber"in m?"phone":null}function yn(){return(yn=(0,g.Z)(function*(m){var d;const p=hn(m);if(yield p._initializationPromise,null!==(d=p.currentUser)&&void 0!==d&&d.isAnonymous)return new ur({user:p.currentUser,providerId:null,operationType:"signIn"});const v=yield lo(p,{returnSecureToken:!0}),A=yield ur._fromIdTokenResponse(p,"signIn",v,!0);return yield p._updateCurrentUser(A.user),A})).apply(this,arguments)}class Dc extends k.ZR{constructor(d,p,v,A){var N;super(p.code,p.message),this.operationType=v,this.user=A,Object.setPrototypeOf(this,Dc.prototype),this.customData={appName:d.name,tenantId:null!==(N=d.tenantId)&&void 0!==N?N:void 0,_serverResponse:p.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(d,p,v,A){return new Dc(d,p,v,A)}}function Ip(m,d,p,v){return("reauthenticate"===d?p._getReauthenticationResolver(m):p._getIdTokenResponse(m)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?Dc._fromErrorAndOperation(m,N,d,v):N})}function Jr(m){return new Set(m.map(({providerId:d})=>d).filter(d=>!!d))}function uu(){return(uu=(0,g.Z)(function*(m,d){const p=(0,k.m9)(m);yield Ht(!0,p,d);const{providerUserInfo:v}=yield _r(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[d]}),A=Jr(v||[]);return p.providerData=p.providerData.filter(N=>A.has(N.providerId)),A.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function Ps(m,d){return Li.apply(this,arguments)}function Li(){return(Li=(0,g.Z)(function*(m,d,p=!1){const v=yield sr(m,d._linkToIdToken(m.auth,yield m.getIdToken()),p);return ur._forOperation(m,"link",v)})).apply(this,arguments)}function Ht(m,d,p){return cu.apply(this,arguments)}function cu(){return(cu=(0,g.Z)(function*(m,d,p){yield Zt(d);const A=!1===m?"provider-already-linked":"no-such-provider";V(Jr(d.providerData).has(p)===m,d.auth,A)})).apply(this,arguments)}function Fs(m,d){return lu.apply(this,arguments)}function lu(){return(lu=(0,g.Z)(function*(m,d,p=!1){var v;const{auth:A}=m,N="reauthenticate";try{const $=yield sr(m,Ip(A,N,d,m),p);V($.idToken,A,"internal-error");const oe=ot($.idToken);V(oe,A,"internal-error");const{sub:Fe}=oe;return V(m.uid===Fe,A,"user-mismatch"),ur._forOperation(m,N,$)}catch($){throw"auth/user-not-found"===(null===(v=$)||void 0===v?void 0:v.code)&&be(A,"user-mismatch"),$}})).apply(this,arguments)}function oi(m,d){return du.apply(this,arguments)}function du(){return(du=(0,g.Z)(function*(m,d,p=!1){const v="signIn",A=yield Ip(m,v,d),N=yield ur._fromIdTokenResponse(m,v,A);return p||(yield m._updateCurrentUser(N.user)),N})).apply(this,arguments)}function fn(m,d){return bt.apply(this,arguments)}function bt(){return(bt=(0,g.Z)(function*(m,d){return oi(hn(m),d)})).apply(this,arguments)}function hu(m,d){return Uh.apply(this,arguments)}function Uh(){return(Uh=(0,g.Z)(function*(m,d){const p=(0,k.m9)(m);return yield Ht(!1,p,d.providerId),Ps(p,d)})).apply(this,arguments)}function fu(m,d){return pu.apply(this,arguments)}function pu(){return(pu=(0,g.Z)(function*(m,d){return Fs((0,k.m9)(m),d)})).apply(this,arguments)}function bc(m,d){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,g.Z)(function*(m,d){return kr(m,"POST","/v1/accounts:signInWithCustomToken",At(m,d))})).apply(this,arguments)}function ea(){return(ea=(0,g.Z)(function*(m,d){const p=hn(m),v=yield bc(p,{token:d,returnSecureToken:!0}),A=yield ur._fromIdTokenResponse(p,"signIn",v);return yield p._updateCurrentUser(A.user),A})).apply(this,arguments)}class Ie{constructor(d,p){this.factorId=d,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(d,p){return"phoneInfo"in p?Vt._fromServerResponse(d,p):be(d,"internal-error")}}class Vt extends Ie{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,p){return new Vt(p)}}function Tc(m,d,p){var v;V((null===(v=p.url)||void 0===v?void 0:v.length)>0,m,"invalid-continue-uri"),V(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,m,"invalid-dynamic-link-domain"),d.continueUrl=p.url,d.dynamicLinkDomain=p.dynamicLinkDomain,d.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(V(p.iOS.bundleId.length>0,m,"missing-ios-bundle-id"),d.iOSBundleId=p.iOS.bundleId),p.android&&(V(p.android.packageName.length>0,m,"missing-android-pkg-name"),d.androidInstallApp=p.android.installApp,d.androidMinimumVersionCode=p.android.minimumVersion,d.androidPackageName=p.android.packageName)}function _n(){return(_n=(0,g.Z)(function*(m,d,p){const v=(0,k.m9)(m),A={requestType:"PASSWORD_RESET",email:d};p&&Tc(v,A,p),yield Xn(v,A)})).apply(this,arguments)}function ho(){return(ho=(0,g.Z)(function*(m,d,p){yield Rn((0,k.m9)(m),{oobCode:d,newPassword:p})})).apply(this,arguments)}function ta(){return(ta=(0,g.Z)(function*(m,d){yield mc((0,k.m9)(m),{oobCode:d})})).apply(this,arguments)}function na(m,d){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,g.Z)(function*(m,d){const p=(0,k.m9)(m),v=yield Rn(p,{oobCode:d}),A=v.requestType;switch(V(A,p,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":V(v.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":V(v.mfaInfo,p,"internal-error");default:V(v.email,p,"internal-error")}let N=null;return v.mfaInfo&&(N=Ie._fromServerResponse(hn(p),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:N},operation:A}})).apply(this,arguments)}function ed(){return(ed=(0,g.Z)(function*(m,d){const{data:p}=yield na((0,k.m9)(m),d);return p.email})).apply(this,arguments)}function vn(){return(vn=(0,g.Z)(function*(m,d,p){const v=hn(m),A=yield lo(v,{returnSecureToken:!0,email:d,password:p}),N=yield ur._fromIdTokenResponse(v,"signIn",A);return yield v._updateCurrentUser(N.user),N})).apply(this,arguments)}function Ls(){return(Ls=(0,g.Z)(function*(m,d,p){const v=(0,k.m9)(m),A={requestType:"EMAIL_SIGNIN",email:d};V(p.handleCodeInApp,v,"argument-error"),p&&Tc(v,A,p),yield su(v,A)})).apply(this,arguments)}function ia(){return(ia=(0,g.Z)(function*(m,d,p){const v=(0,k.m9)(m),A=_i.credentialWithLink(d,p||Oe());return V(A._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),fn(v,A)})).apply(this,arguments)}function bp(m,d){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,g.Z)(function*(m,d){return nn(m,"POST","/v1/accounts:createAuthUri",At(m,d))})).apply(this,arguments)}function sa(){return(sa=(0,g.Z)(function*(m,d){const v={identifier:d,continueUri:at()?Oe():"http://localhost"},{signinMethods:A}=yield bp((0,k.m9)(m),v);return A||[]})).apply(this,arguments)}function oa(){return(oa=(0,g.Z)(function*(m,d){const p=(0,k.m9)(m),A={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};d&&Tc(p.auth,A,d);const{email:N}=yield ar(p.auth,A);N!==m.email&&(yield m.reload())})).apply(this,arguments)}function yu(){return(yu=(0,g.Z)(function*(m,d,p){const v=(0,k.m9)(m),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield m.getIdToken(),newEmail:d};p&&Tc(v.auth,N,p);const{email:$}=yield _c(v.auth,N);$!==m.email&&(yield m.reload())})).apply(this,arguments)}function _u(m,d){return kc.apply(this,arguments)}function kc(){return(kc=(0,g.Z)(function*(m,d){return nn(m,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Fc(){return(Fc=(0,g.Z)(function*(m,{displayName:d,photoURL:p}){if(void 0===d&&void 0===p)return;const v=(0,k.m9)(m),N={idToken:yield v.getIdToken(),displayName:d,photoUrl:p,returnSecureToken:!0},$=yield sr(v,_u(v.auth,N));v.displayName=$.displayName||null,v.photoURL=$.photoUrl||null;const oe=v.providerData.find(({providerId:Fe})=>"password"===Fe);oe&&(oe.displayName=v.displayName,oe.photoURL=v.photoURL),yield v._updateTokensIfNecessary($)})).apply(this,arguments)}function Bs(m,d,p){return vu.apply(this,arguments)}function vu(){return(vu=(0,g.Z)(function*(m,d,p){const{auth:v}=m,N={idToken:yield m.getIdToken(),returnSecureToken:!0};d&&(N.email=d),p&&(N.password=p);const $=yield sr(m,rn(v,N));yield m._updateTokensIfNecessary($,!0)})).apply(this,arguments)}class Vr{constructor(d,p,v={}){this.isNewUser=d,this.providerId=p,this.profile=v}}class an extends Vr{constructor(d,p,v,A){super(d,p,v),this.username=A}}class nd extends Vr{constructor(d,p){super(d,"facebook.com",p)}}class Lc extends an{constructor(d,p){super(d,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class jh extends Vr{constructor(d,p){super(d,"google.com",p)}}class Vc extends an{constructor(d,p,v){super(d,"twitter.com",p,v)}}function wu(m){const{user:d,_tokenResponse:p}=m;return d.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Hn(m){var d,p;if(!m)return null;const{providerId:v}=m,A=m.rawUserInfo?JSON.parse(m.rawUserInfo):{},N=m.isNewUser||"identitytoolkit#SignupNewUserResponse"===m.kind;if(!v&&m?.idToken){const $=null===(p=null===(d=ot(m.idToken))||void 0===d?void 0:d.firebase)||void 0===p?void 0:p.sign_in_provider;if($)return new Vr(N,"anonymous"!==$&&"custom"!==$?$:null)}if(!v)return null;switch(v){case"facebook.com":return new nd(N,A);case"github.com":return new Lc(N,A);case"google.com":return new jh(N,A);case"twitter.com":return new Vc(N,A,m.screenName||null);case"custom":case"anonymous":return new Vr(N,null);default:return new Vr(N,v,A)}}(p)}class js{constructor(d,p,v){this.type=d,this.credential=p,this.auth=v}static _fromIdtoken(d,p){return new js("enroll",d,p)}static _fromMfaPendingCredential(d){return new js("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var p,v;if(d?.multiFactorSession){if(null!==(p=d.multiFactorSession)&&void 0!==p&&p.pendingCredential)return js._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(v=d.multiFactorSession)&&void 0!==v&&v.idToken)return js._fromIdtoken(d.multiFactorSession.idToken)}return null}}class Iu{constructor(d,p,v){this.session=d,this.hints=p,this.signInResolver=v}static _fromError(d,p){const v=hn(d),A=p.customData._serverResponse,N=(A.mfaInfo||[]).map(oe=>Ie._fromServerResponse(v,oe));V(A.mfaPendingCredential,v,"internal-error");const $=js._fromMfaPendingCredential(A.mfaPendingCredential);return new Iu($,N,function(){var oe=(0,g.Z)(function*(Fe){const Je=yield Fe._process(v,$);delete A.mfaInfo,delete A.mfaPendingCredential;const wt=Object.assign(Object.assign({},A),{idToken:Je.idToken,refreshToken:Je.refreshToken});switch(p.operationType){case"signIn":const pt=yield ur._fromIdTokenResponse(v,p.operationType,wt);return yield v._updateCurrentUser(pt.user),pt;case"reauthenticate":return V(p.user,v,"internal-error"),ur._forOperation(p.user,p.operationType,wt);default:be(v,"internal-error")}});return function(Fe){return oe.apply(this,arguments)}}())}resolveSignIn(d){var p=this;return(0,g.Z)(function*(){return p.signInResolver(d)})()}}function Du(m,d){return nn(m,"POST","/v2/accounts/mfaEnrollment:start",At(m,d))}class Hh{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(v=>Ie._fromServerResponse(d.auth,v)))})}static _fromUser(d){return new Hh(d)}getSession(){var d=this;return(0,g.Z)(function*(){return js._fromIdtoken(yield d.user.getIdToken(),d.user.auth)})()}enroll(d,p){var v=this;return(0,g.Z)(function*(){const A=d,N=yield v.getSession(),$=yield sr(v.user,A._process(v.user.auth,N,p));return yield v.user._updateTokensIfNecessary($),v.user.reload()})()}unenroll(d){var p=this;return(0,g.Z)(function*(){var v;const A="string"==typeof d?d:d.uid,N=yield p.user.getIdToken(),$=yield sr(p.user,function od(m,d){return nn(m,"POST","/v2/accounts/mfaEnrollment:withdraw",At(m,d))}(p.user.auth,{idToken:N,mfaEnrollmentId:A}));p.enrolledFactors=p.enrolledFactors.filter(({uid:oe})=>oe!==A),yield p.user._updateTokensIfNecessary($);try{yield p.user.reload()}catch(oe){if("auth/user-token-expired"!==(null===(v=oe)||void 0===v?void 0:v.code))throw oe}})()}}const go=new WeakMap,Hs="__sak";class Cu{constructor(d,p){this.storageRetriever=d,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(Hs,"1"),this.storage.removeItem(Hs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,p){return this.storage.setItem(d,JSON.stringify(p)),Promise.resolve()}_get(d){const p=this.storage.getItem(d);return Promise.resolve(p?JSON.parse(p):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const ua=(()=>{class m extends Cu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,v)=>this.onStorageEvent(p,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function aa(){const m=(0,k.z$)();return ut(m)||Rt(m)}()&&function dn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ms(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const v of Object.keys(this.listeners)){const A=this.storage.getItem(v),N=this.localCache[v];A!==N&&p(v,N,A)}}onStorageEvent(p,v=!1){if(!p.key)return void this.forAllChangedKeys((oe,Fe,Je)=>{this.notifyListeners(oe,Je)});const A=p.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const oe=this.storage.getItem(A);if(p.newValue!==oe)null!==p.newValue?this.storage.setItem(A,p.newValue):this.storage.removeItem(A);else if(this.localCache[A]===p.newValue&&!v)return}const N=()=>{const oe=this.storage.getItem(A);!v&&this.localCache[A]===oe||this.notifyListeners(A,oe)},$=this.storage.getItem(A);!function Un(){return(0,k.w1)()&&10===document.documentMode}()||$===p.newValue||p.newValue===p.oldValue?N():setTimeout(N,10)}notifyListeners(p,v){this.localCache[p]=v;const A=this.listeners[p];if(A)for(const N of Array.from(A))N(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,v,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:v,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,v){var A=()=>super._set,N=this;return(0,g.Z)(function*(){yield A().call(N,p,v),N.localCache[p]=JSON.stringify(v)})()}_get(p){var v=()=>super._get,A=this;return(0,g.Z)(function*(){const N=yield v().call(A,p);return A.localCache[p]=JSON.stringify(N),N})()}_remove(p){var v=()=>super._remove,A=this;return(0,g.Z)(function*(){yield v().call(A,p),delete A.localCache[p]})()}}return m.type="LOCAL",m})(),wi=(()=>{class m extends Cu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,v){}_removeListener(p,v){}}return m.type="SESSION",m})();let cd=(()=>{class m{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const v=this.receivers.find(N=>N.isListeningto(p));if(v)return v;const A=new m(p);return this.receivers.push(A),A}isListeningto(p){return this.eventTarget===p}handleEvent(p){var v=this;return(0,g.Z)(function*(){const A=p,{eventId:N,eventType:$,data:oe}=A.data,Fe=v.handlersMap[$];if(!Fe?.size)return;A.ports[0].postMessage({status:"ack",eventId:N,eventType:$});const Je=Array.from(Fe).map(function(){var pt=(0,g.Z)(function*(Wn){return Wn(A.origin,oe)});return function(Wn){return pt.apply(this,arguments)}}()),wt=yield function la(m){return Promise.all(m.map(function(){var d=(0,g.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(v){return{fulfilled:!1,reason:v}}});return function(p){return d.apply(this,arguments)}}()))}(Je);A.ports[0].postMessage({status:"done",eventId:N,eventType:$,response:wt})})()}_subscribe(p,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(v)}_unsubscribe(p,v){this.handlersMap[p]&&v&&this.handlersMap[p].delete(v),(!v||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return m.receivers=[],m})();function da(m="",d=10){let p="";for(let v=0;v<d;v++)p+=Math.floor(10*Math.random());return m+p}class Bc{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,p,v=50){var A=this;return(0,g.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let $,oe;return new Promise((Fe,Je)=>{const wt=da("",20);N.port1.start();const pt=setTimeout(()=>{Je(new Error("unsupported_event"))},v);oe={messageChannel:N,onMessage(Wn){const qn=Wn;if(qn.data.eventId===wt)switch(qn.data.status){case"ack":clearTimeout(pt),$=setTimeout(()=>{Je(new Error("timeout"))},3e3);break;case"done":clearTimeout($),Fe(qn.data.response);break;default:clearTimeout(pt),clearTimeout($),Je(new Error("invalid_response"))}}},A.handlers.add(oe),N.port1.addEventListener("message",oe.onMessage),A.target.postMessage({eventType:d,eventId:wt,data:p},[N.port2])}).finally(()=>{oe&&A.removeMessageHandler(oe)})})()}}function Sn(){return window}function Tu(){return typeof Sn().WorkerGlobalScope<"u"&&"function"==typeof Sn().importScripts}function ha(){return(ha=(0,g.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const hs="firebaseLocalStorageDb",fs="firebaseLocalStorage",Uc="fbase_key";class Gs{constructor(d){this.request=d}toPromise(){return new Promise((d,p)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function fa(m,d){return m.transaction([fs],d?"readwrite":"readonly").objectStore(fs)}function pa(){const m=indexedDB.open(hs,1);return new Promise((d,p)=>{m.addEventListener("error",()=>{p(m.error)}),m.addEventListener("upgradeneeded",()=>{const v=m.result;try{v.createObjectStore(fs,{keyPath:Uc})}catch(A){p(A)}}),m.addEventListener("success",(0,g.Z)(function*(){const v=m.result;v.objectStoreNames.contains(fs)?d(v):(v.close(),yield function dd(){const m=indexedDB.deleteDatabase(hs);return new Gs(m).toPromise()}(),d(yield pa()))}))})}function ps(m,d,p){return jc.apply(this,arguments)}function jc(){return(jc=(0,g.Z)(function*(m,d,p){const v=fa(m,!0).put({[Uc]:d,value:p});return new Gs(v).toPromise()})).apply(this,arguments)}function ga(){return(ga=(0,g.Z)(function*(m,d){const p=fa(m,!1).get(d),v=yield new Gs(p).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function zs(m,d){const p=fa(m,!0).delete(d);return new Gs(p).toPromise()}const yo=(()=>{class m{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,g.Z)(function*(){return p.db||(p.db=yield pa()),p.db})()}_withRetries(p){var v=this;return(0,g.Z)(function*(){let A=0;for(;;)try{const N=yield v._openDb();return yield p(N)}catch(N){if(A++>3)throw N;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,g.Z)(function*(){return Tu()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,g.Z)(function*(){p.receiver=cd._getInstance(function Su(){return Tu()?self:null}()),p.receiver._subscribe("keyChanged",function(){var v=(0,g.Z)(function*(A,N){return{keyProcessed:(yield p._poll()).includes(N.key)}});return function(A,N){return v.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var v=(0,g.Z)(function*(A,N){return["keyChanged"]});return function(A,N){return v.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,g.Z)(function*(){var v,A;if(p.activeServiceWorker=yield function $s(){return ha.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Bc(p.activeServiceWorker);const N=yield p.sender._send("ping",{},800);!N||(null===(v=N[0])||void 0===v?void 0:v.fulfilled)&&(null===(A=N[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var v=this;return(0,g.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function Au(){var m;return(null===(m=navigator?.serviceWorker)||void 0===m?void 0:m.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:p},v.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const p=yield pa();return yield ps(p,Hs,"1"),yield zs(p,Hs),!0}catch{}return!1})()}_withPendingWrite(p){var v=this;return(0,g.Z)(function*(){v.pendingWrites++;try{yield p()}finally{v.pendingWrites--}})()}_set(p,v){var A=this;return(0,g.Z)(function*(){return A._withPendingWrite((0,g.Z)(function*(){return yield A._withRetries(N=>ps(N,p,v)),A.localCache[p]=v,A.notifyServiceWorker(p)}))})()}_get(p){var v=this;return(0,g.Z)(function*(){const A=yield v._withRetries(N=>function xu(m,d){return ga.apply(this,arguments)}(N,p));return v.localCache[p]=A,A})()}_remove(p){var v=this;return(0,g.Z)(function*(){return v._withPendingWrite((0,g.Z)(function*(){return yield v._withRetries(A=>zs(A,p)),delete v.localCache[p],v.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,g.Z)(function*(){const v=yield p._withRetries($=>{const oe=fa($,!1).getAll();return new Gs(oe).toPromise()});if(!v)return[];if(0!==p.pendingWrites)return[];const A=[],N=new Set;for(const{fbase_key:$,value:oe}of v)N.add($),JSON.stringify(p.localCache[$])!==JSON.stringify(oe)&&(p.notifyListeners($,oe),A.push($));for(const $ of Object.keys(p.localCache))p.localCache[$]&&!N.has($)&&(p.notifyListeners($,null),A.push($));return A})()}notifyListeners(p,v){this.localCache[p]=v;const A=this.listeners[p];if(A)for(const N of Array.from(A))N(v)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return m.type="LOCAL",m})();function _o(m,d){return nn(m,"POST","/v2/accounts/mfaSignIn:start",At(m,d))}function gs(){return(gs=(0,g.Z)(function*(m){return(yield nn(m,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function wo(m){return new Promise((d,p)=>{const v=document.createElement("script");v.setAttribute("src",m),v.onload=d,v.onerror=A=>{const N=me("internal-error");N.customData=A,p(N)},v.type="text/javascript",v.charset="UTF-8",function vo(){var m,d;return null!==(d=null===(m=document.getElementsByTagName("head"))||void 0===m?void 0:m[0])&&void 0!==d?d:document}().appendChild(v)})}function Ou(m){return`__${m}${Math.floor(1e6*Math.random())}`}const ma=1e12;class un{constructor(d){this.auth=d,this.counter=ma,this._widgets=new Map}render(d,p){const v=this.counter;return this._widgets.set(v,new Cp(d,this.auth.name,p||{})),this.counter++,v}reset(d){var p;const v=d||ma;null===(p=this._widgets.get(v))||void 0===p||p.delete(),this._widgets.delete(v)}getResponse(d){var p;return(null===(p=this._widgets.get(d||ma))||void 0===p?void 0:p.getResponse())||""}execute(d){var p=this;return(0,g.Z)(function*(){var v;return null===(v=p._widgets.get(d||ma))||void 0===v||v.execute(),""})()}}class Cp{constructor(d,p,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof d?document.getElementById(d):d;V(A,"argument-error",{appName:p}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function km(m){const d=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<m;v++)d.push(p.charAt(Math.floor(Math.random()*p.length)));return d.join("")}(50);const{callback:d,"expired-callback":p}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Tp=Ou("rcb"),Pm=new Xt(3e4,6e4);class $h{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=Sn().grecaptcha)||void 0===d||!d.render)}load(d,p=""){return V(function tw(m){return m.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(m)}(p),d,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(Sn().grecaptcha):new Promise((v,A)=>{const N=Sn().setTimeout(()=>{A(me(d,"network-request-failed"))},Pm.get());Sn()[Tp]=()=>{Sn().clearTimeout(N),delete Sn()[Tp];const oe=Sn().grecaptcha;if(!oe)return void A(me(d,"internal-error"));const Fe=oe.render;oe.render=(Je,wt)=>{const pt=Fe(Je,wt);return this.counter++,pt},this.hostLanguage=p,v(oe)},wo(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:Tp,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(N),A(me(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var p;return!(null===(p=Sn().grecaptcha)||void 0===p||!p.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class $c{load(d){return(0,g.Z)(function*(){return new un(d)})()}clearedOneInstance(){}}const Lm="recaptcha",Vm={theme:"light",type:"image"};class tr{constructor(d,p=Object.assign({},Vm),v){this.parameters=p,this.type=Lm,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=hn(v),this.isInvisible="invisible"===this.parameters.size,V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof d?document.getElementById(d):d;V(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new $c:new $h,this.validateStartingState()}verify(){var d=this;return(0,g.Z)(function*(){d.assertNotDestroyed();const p=yield d.render(),v=d.getAssertedRecaptcha();return v.getResponse(p)||new Promise(N=>{const $=oe=>{!oe||(d.tokenChangeListeners.delete($),N(oe))};d.tokenChangeListeners.add($),d.isInvisible&&v.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){V(!this.parameters.sitekey,this.auth,"argument-error"),V(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return p=>{if(this.tokenChangeListeners.forEach(v=>v(p)),"function"==typeof d)d(p);else if("string"==typeof d){const v=Sn()[d];"function"==typeof v&&v(p)}}}assertNotDestroyed(){V(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,g.Z)(function*(){if(yield d.init(),!d.widgetId){let p=d.container;if(!d.isInvisible){const v=document.createElement("div");p.appendChild(v),p=v}d.widgetId=d.getAssertedRecaptcha().render(p,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,g.Z)(function*(){V(at()&&!Tu(),d.auth,"internal-error"),yield function Ur(){let m=null;return new Promise(d=>{"complete"!==document.readyState?(m=()=>d(),window.addEventListener("load",m)):d()}).catch(d=>{throw m&&window.removeEventListener("load",m),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const p=yield function Br(m){return gs.apply(this,arguments)}(d.auth);V(p,d.auth,"internal-error"),d.parameters.sitekey=p})()}getAssertedRecaptcha(){return V(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Io{constructor(d,p){this.verificationId=d,this.onConfirmation=p}confirm(d){const p=cs._fromVerification(this.verificationId,d);return this.onConfirmation(p)}}function ei(){return(ei=(0,g.Z)(function*(m,d,p){const v=hn(m),A=yield ms(v,d,(0,k.m9)(p));return new Io(A,N=>fn(v,N))})).apply(this,arguments)}function nr(){return(nr=(0,g.Z)(function*(m,d,p){const v=(0,k.m9)(m);yield Ht(!1,v,"phone");const A=yield ms(v.auth,d,(0,k.m9)(p));return new Io(A,N=>hu(v,N))})).apply(this,arguments)}function Do(){return(Do=(0,g.Z)(function*(m,d,p){const v=(0,k.m9)(m),A=yield ms(v.auth,d,(0,k.m9)(p));return new Io(A,N=>fu(v,N))})).apply(this,arguments)}function ms(m,d,p){return _a.apply(this,arguments)}function _a(){return(_a=(0,g.Z)(function*(m,d,p){var v;const A=yield p.verify();try{let N;if(V("string"==typeof A,m,"argument-error"),V(p.type===Lm,m,"argument-error"),N="string"==typeof d?{phoneNumber:d}:d,"session"in N){const $=N.session;if("phoneNumber"in N)return V("enroll"===$.type,m,"internal-error"),(yield Du(m,{idToken:$.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{V("signin"===$.type,m,"internal-error");const oe=(null===(v=N.multiFactorHint)||void 0===v?void 0:v.uid)||N.multiFactorUid;return V(oe,m,"missing-multi-factor-info"),(yield _o(m,{mfaPendingCredential:$.credential,mfaEnrollmentId:oe,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:$}=yield vp(m,{phoneNumber:N.phoneNumber,recaptchaToken:A});return $}}finally{p._reset()}})).apply(this,arguments)}function va(){return(va=(0,g.Z)(function*(m,d){yield Ps((0,k.m9)(m),d)})).apply(this,arguments)}let jr=(()=>{class m{constructor(p){this.providerId=m.PROVIDER_ID,this.auth=hn(p)}verifyPhoneNumber(p,v){return ms(this.auth,p,(0,k.m9)(v))}static credential(p,v){return cs._fromVerification(p,v)}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:v,temporaryProof:A}=p;return v&&A?cs._fromTokenResponse(v,A):null}}return m.PROVIDER_ID="phone",m.PHONE_SIGN_IN_METHOD="phone",m})();function _s(m,d){return d?re(d):(V(m._popupRedirectResolver,m,"argument-error"),m._popupRedirectResolver)}class pn extends or{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return jn(d,this._buildIdpRequest())}_linkToIdToken(d,p){return jn(d,this._buildIdpRequest(p))}_getReauthenticationResolver(d){return jn(d,this._buildIdpRequest())}_buildIdpRequest(d){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(p.idToken=d),p}}function Hr(m){return oi(m.auth,new pn(m),m.bypassAuthState)}function wa(m){const{auth:d,user:p}=m;return V(p,d,"internal-error"),Fs(p,new pn(m),m.bypassAuthState)}function qs(m){return hd.apply(this,arguments)}function hd(){return(hd=(0,g.Z)(function*(m){const{auth:d,user:p}=m;return V(p,d,"internal-error"),Ps(p,new pn(m),m.bypassAuthState)})).apply(this,arguments)}class Gc{constructor(d,p,v,A,N=!1){this.auth=d,this.resolver=v,this.user=A,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var d=this;return new Promise(function(){var p=(0,g.Z)(function*(v,A){d.pendingPromise={resolve:v,reject:A};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(N){d.reject(N)}});return function(v,A){return p.apply(this,arguments)}}())}onAuthEvent(d){var p=this;return(0,g.Z)(function*(){const{urlResponse:v,sessionId:A,postBody:N,tenantId:$,error:oe,type:Fe}=d;if(oe)return void p.reject(oe);const Je={auth:p.auth,requestUri:v,sessionId:A,tenantId:$||void 0,postBody:N||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Fe)(Je))}catch(wt){p.reject(wt)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return Hr;case"linkViaPopup":case"linkViaRedirect":return qs;case"reauthViaPopup":case"reauthViaRedirect":return wa;default:be(this.auth,"internal-error")}}resolve(d){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ks=new Xt(2e3,1e4);function Ea(){return(Ea=(0,g.Z)(function*(m,d,p){const v=hn(m);Be(m,d,ki);const A=_s(v,p);return new Bt(v,"signInViaPopup",d,A).executeNotNull()})).apply(this,arguments)}function ui(){return(ui=(0,g.Z)(function*(m,d,p){const v=(0,k.m9)(m);Be(v.auth,d,ki);const A=_s(v.auth,p);return new Bt(v.auth,"reauthViaPopup",d,A,v).executeNotNull()})).apply(this,arguments)}function Ar(){return(Ar=(0,g.Z)(function*(m,d,p){const v=(0,k.m9)(m);Be(v.auth,d,ki);const A=_s(v.auth,p);return new Bt(v.auth,"linkViaPopup",d,A,v).executeNotNull()})).apply(this,arguments)}let Bt=(()=>{class m extends Gc{constructor(p,v,A,N,$){super(p,v,N,$),this.provider=A,this.authWindow=null,this.pollId=null,m.currentPopupAction&&m.currentPopupAction.cancel(),m.currentPopupAction=this}executeNotNull(){var p=this;return(0,g.Z)(function*(){const v=yield p.execute();return V(v,p.auth,"internal-error"),v})()}onExecution(){var p=this;return(0,g.Z)(function*(){W(1===p.filter.length,"Popup operations only handle one event");const v=da();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],v),p.authWindow.associatedEvent=v,p.resolver._originValidation(p.auth).catch(A=>{p.reject(A)}),p.resolver._isIframeWebStorageSupported(p.auth,A=>{A||p.reject(me(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(me(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,m.currentPopupAction=null}pollUserCancellation(){const p=()=>{var v,A;this.pollId=null!==(A=null===(v=this.authWindow)||void 0===v?void 0:v.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(me(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,Ks.get())};p()}}return m.currentPopupAction=null,m})();const lr=new Map;class nt extends Gc{constructor(d,p,v=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,v),this.eventId=null}execute(){var d=()=>super.execute,p=this;return(0,g.Z)(function*(){let v=lr.get(p.auth._key());if(!v){try{const N=(yield function Co(m,d){return mt.apply(this,arguments)}(p.resolver,p.auth))?yield d().call(p):null;v=()=>Promise.resolve(N)}catch(A){v=()=>Promise.reject(A)}lr.set(p.auth._key(),v)}return p.bypassAuthState||lr.set(p.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(d){var p=()=>super.onAuthEvent,v=this;return(0,g.Z)(function*(){if("signInViaRedirect"===d.type)return p().call(v,d);if("unknown"!==d.type){if(d.eventId){const A=yield v.auth._redirectUserForId(d.eventId);if(A)return v.user=A,p().call(v,d);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function mt(){return(mt=(0,g.Z)(function*(m,d){const p=vs(d),v=ji(m);if(!(yield v._isAvailable()))return!1;const A="true"===(yield v._get(p));return yield v._remove(p),A})).apply(this,arguments)}function Zs(m,d){return To.apply(this,arguments)}function To(){return(To=(0,g.Z)(function*(m,d){return ji(m)._set(vs(d),"true")})).apply(this,arguments)}function $r(m,d){lr.set(m._key(),d)}function ji(m){return re(m._redirectPersistence)}function vs(m){return q("pendingRedirect",m.config.apiKey,m.name)}function Pn(){return(Pn=(0,g.Z)(function*(m,d,p){const v=hn(m);Be(m,d,ki);const A=_s(v,p);return yield Zs(A,v),A._openRedirect(v,d,"signInViaRedirect")})).apply(this,arguments)}function Hi(){return(Hi=(0,g.Z)(function*(m,d,p){const v=(0,k.m9)(m);Be(v.auth,d,ki);const A=_s(v.auth,p);yield Zs(A,v.auth);const N=yield Ve(v);return A._openRedirect(v.auth,d,"reauthViaRedirect",N)})).apply(this,arguments)}function S(){return(S=(0,g.Z)(function*(m,d,p){const v=(0,k.m9)(m);Be(v.auth,d,ki);const A=_s(v.auth,p);yield Ht(!1,v,d.providerId),yield Zs(A,v.auth);const N=yield Ve(v);return A._openRedirect(v.auth,d,"linkViaRedirect",N)})).apply(this,arguments)}function G(){return(G=(0,g.Z)(function*(m,d){return yield hn(m)._initializationPromise,ee(m,d,!1)})).apply(this,arguments)}function ee(m,d){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,g.Z)(function*(m,d,p=!1){const v=hn(m),A=_s(v,d),$=yield new nt(v,A,p).execute();return $&&!p&&(delete $.user._redirectEventId,yield v._persistUserIfCurrent($.user),yield v._setRedirectUser(null,d)),$})).apply(this,arguments)}function Ve(m){return We.apply(this,arguments)}function We(){return(We=(0,g.Z)(function*(m){const d=da(`${m.uid}:::`);return m._redirectEventId=d,yield m.auth._setRedirectUser(m),yield m.auth._persistUserIfCurrent(m),d})).apply(this,arguments)}class yt{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let p=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(d,v)&&(p=!0,this.sendToConsumer(d,v),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function Gn(m){switch(m.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rr(m);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=d,p=!0)),p}sendToConsumer(d,p){var v;if(d.error&&!rr(d)){const A=(null===(v=d.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";p.onError(me(this.auth,A))}else p.onAuthEvent(d)}isEventForConsumer(d,p){const v=null===p.eventId||!!d.eventId&&d.eventId===p.eventId;return p.filter.includes(d.type)&&v}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ft(d))}saveEventToCache(d){this.cachedEventUids.add(ft(d)),this.lastProcessedEventTime=Date.now()}}function ft(m){return[m.type,m.eventId,m.sessionId,m.tenantId].filter(d=>d).join("-")}function rr({type:m,error:d}){return"unknown"===m&&"auth/no-auth-event"===d?.code}function Sr(m){return ws.apply(this,arguments)}function ws(){return(ws=(0,g.Z)(function*(m,d={}){return nn(m,"GET","/v1/projects",d)})).apply(this,arguments)}const Ys=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zc=/^https?/;function Qs(){return(Qs=(0,g.Z)(function*(m){if(m.config.emulator)return;const{authorizedDomains:d}=yield Sr(m);for(const p of d)try{if(Ei(p))return}catch{}be(m,"unauthorized-domain")})).apply(this,arguments)}function Ei(m){const d=Oe(),{protocol:p,hostname:v}=new URL(d);if(m.startsWith("chrome-extension://")){const $=new URL(m);return""===$.hostname&&""===v?"chrome-extension:"===p&&m.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===p&&$.hostname===v}if(!zc.test(p))return!1;if(Ys.test(m))return v===m;const A=m.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(v)}const Es=new Xt(3e4,6e4);function Ia(){const m=Sn().___jsl;if(m?.H)for(const d of Object.keys(m.H))if(m.H[d].r=m.H[d].r||[],m.H[d].L=m.H[d].L||[],m.H[d].r=[...m.H[d].L],m.CP)for(let p=0;p<m.CP.length;p++)m.CP[p]=null}let qc=null;function Um(m){return qc=qc||function Ru(m){return new Promise((d,p)=>{var v,A,N;function $(){Ia(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{Ia(),p(me(m,"network-request-failed"))},timeout:Es.get()})}if(null!==(A=null===(v=Sn().gapi)||void 0===v?void 0:v.iframes)&&void 0!==A&&A.Iframe)d(gapi.iframes.getContext());else{if(null===(N=Sn().gapi)||void 0===N||!N.load){const oe=Ou("iframefcb");return Sn()[oe]=()=>{gapi.load?$():p(me(m,"network-request-failed"))},wo(`https://apis.google.com/js/api.js?onload=${oe}`).catch(Fe=>p(Fe))}$()}}).catch(d=>{throw qc=null,d})}(m),qc}const pd=new Xt(5e3,15e3),gd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Hm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Kc(m){const d=m.config;V(d.authDomain,m,"auth-domain-config-required");const p=d.emulator?ln(d,"emulator/auth/iframe"):`https://${m.config.authDomain}/__/auth/iframe`,v={apiKey:d.apiKey,appName:m.name,v:ue.SDK_VERSION},A=Hm.get(m.config.apiHost);A&&(v.eid=A);const N=m._getFrameworks();return N.length&&(v.fw=N.join(",")),`${p}?${(0,k.xO)(v).slice(1)}`}function Sp(){return Sp=(0,g.Z)(function*(m){const d=yield Um(m),p=Sn().gapi;return V(p,m,"internal-error"),d.open({where:document.body,url:Kc(m),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gd,dontclear:!0},v=>new Promise(function(){var A=(0,g.Z)(function*(N,$){yield v.restyle({setHideOnLeave:!1});const oe=me(m,"network-request-failed"),Fe=Sn().setTimeout(()=>{$(oe)},pd.get());function Je(){Sn().clearTimeout(Fe),N(v)}v.ping(Je).then(Je,()=>{$(oe)})});return function(N,$){return A.apply(this,arguments)}}()))}),Sp.apply(this,arguments)}const Wh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class md{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Qc(m,d,p,v,A,N){V(m.config.authDomain,m,"auth-domain-config-required"),V(m.config.apiKey,m,"invalid-api-key");const $={apiKey:m.config.apiKey,appName:m.name,authType:p,redirectUrl:v,v:ue.SDK_VERSION,eventId:A};if(d instanceof ki){d.setDefaultLanguage(m.languageCode),$.providerId=d.providerId||"",(0,k.xb)(d.getCustomParameters())||($.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Fe,Je]of Object.entries(N||{}))$[Fe]=Je}if(d instanceof Pi){const Fe=d.getScopes().filter(Je=>""!==Je);Fe.length>0&&($.scopes=Fe.join(","))}m.tenantId&&($.tid=m.tenantId);const oe=$;for(const Fe of Object.keys(oe))void 0===oe[Fe]&&delete oe[Fe];return`${function Kh({config:m}){return m.emulator?ln(m,"emulator/auth/handler"):`https://${m.authDomain}/__/auth/handler`}(m)}?${(0,k.xO)(oe).slice(1)}`}const _d="webStorageSupport";class vd extends class Yh{constructor(d){this.factorId=d}_process(d,p,v){switch(p.type){case"enroll":return this._finalizeEnroll(d,p.credential,v);case"signin":return this._finalizeSignIn(d,p.credential);default:return pe("unexpected MultiFactorSessionType")}}}{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new vd(d)}_finalizeEnroll(d,p,v){return function bu(m,d){return nn(m,"POST","/v2/accounts/mfaEnrollment:finalize",At(m,d))}(d,{idToken:p,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,p){return function Nu(m,d){return nn(m,"POST","/v2/accounts/mfaSignIn:finalize",At(m,d))}(d,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Mp=(()=>{class m{constructor(){}static assertion(p){return vd._fromCredential(p)}}return m.FACTOR_ID="phone",m})();var ku="@firebase/auth",wd="0.20.11";class Qh{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var p=this;return(0,g.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const p=this.auth.onIdTokenChanged(v=>{var A;d((null===(A=v)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(d,p),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const p=this.internalListeners.get(d);!p||(this.internalListeners.delete(d),p(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Js(){return window}function Fu(){return(Fu=(0,g.Z)(function*(m,d,p){var v;const{BuildInfo:A}=Js();W(d.sessionId,"AuthEvent did not contain a session ID");const N=yield Id(d.sessionId),$={};return Rt()?$.ibi=A.packageName:jt()?$.apn=A.packageName:be(m,"operation-not-supported-in-this-environment"),A.displayName&&($.appDisplayName=A.displayName),$.sessionId=N,Qc(m,p,d.type,void 0,null!==(v=d.eventId)&&void 0!==v?v:void 0,$)})).apply(this,arguments)}function Jc(){return(Jc=(0,g.Z)(function*(m){const{BuildInfo:d}=Js(),p={};Rt()?p.iosBundleId=d.packageName:jt()?p.androidPackageName=d.packageName:be(m,"operation-not-supported-in-this-environment"),yield Sr(m,p)})).apply(this,arguments)}function Da(){return(Da=(0,g.Z)(function*(m,d,p){const{cordova:v}=Js();let A=()=>{};try{yield new Promise((N,$)=>{let oe=null;function Fe(){var pt;N();const Wn=null===(pt=v.plugins.browsertab)||void 0===pt?void 0:pt.close;"function"==typeof Wn&&Wn(),"function"==typeof p?.close&&p.close()}function Je(){oe||(oe=window.setTimeout(()=>{$(me(m,"redirect-cancelled-by-user"))},2e3))}function wt(){"visible"===document?.visibilityState&&Je()}d.addPassiveListener(Fe),document.addEventListener("resume",Je,!1),jt()&&document.addEventListener("visibilitychange",wt,!1),A=()=>{d.removePassiveListener(Fe),document.removeEventListener("resume",Je,!1),document.removeEventListener("visibilitychange",wt,!1),oe&&window.clearTimeout(oe)}})}finally{A()}})).apply(this,arguments)}function Id(m){return Dd.apply(this,arguments)}function Dd(){return(Dd=(0,g.Z)(function*(m){const d=Km(m),p=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(p)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Km(m){if(W(/[0-9a-zA-Z]+/.test(m),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(m);const d=new ArrayBuffer(m.length),p=new Uint8Array(d);for(let v=0;v<m.length;v++)p[v]=m.charCodeAt(v);return p}(0,k.Pz)("authIdTokenMaxAge"),function hr(m){(0,ue._registerComponent)(new ce.wA("auth",(d,{options:p})=>{const v=d.getProvider("app").getImmediate(),A=d.getProvider("heartbeat"),{apiKey:N,authDomain:$}=v.options;return((oe,Fe)=>{V(N&&!N.includes(":"),"invalid-api-key",{appName:oe.name}),V(!$?.includes(":"),"argument-error",{appName:oe.name});const Je={apiKey:N,authDomain:$,clientPlatform:m,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:is(m)},wt=new St(oe,Fe,Je);return function Re(m,d){const p=d?.persistence||[],v=(Array.isArray(p)?p:[p]).map(re);d?.errorMap&&m._updateErrorMap(d.errorMap),m._initializeWithPersistence(v,d?.popupRedirectResolver)}(wt,p),wt})(v,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,p,v)=>{d.getProvider("auth-internal").initialize()})),(0,ue._registerComponent)(new ce.wA("auth-internal",d=>{const p=hn(d.getProvider("auth").getImmediate());return new Qh(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ue.registerVersion)(ku,wd,function dr(m){switch(m){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(m)),(0,ue.registerVersion)(ku,wd,"esm2017")}("Browser");class bd extends yt{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(d)),super.onEvent(d)}initialized(){var d=this;return(0,g.Z)(function*(){yield d.initPromise})()}}function Xc(m){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,g.Z)(function*(m){const d=yield el()._get(tl(m));return d&&(yield el()._remove(tl(m))),d})).apply(this,arguments)}function Lu(){const m=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const v=Math.floor(Math.random()*d.length);m.push(d.charAt(v))}return m.join("")}function el(){return re(ua)}function tl(m){return q("authEvent",m.config.apiKey,m.name)}function Ii(m){if(!m?.includes("?"))return{};const[d,...p]=m.split("?");return(0,k.zd)(p.join("?"))}function fr(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:me("no-auth-event")}}function Ta(){var m;return(null===(m=self?.location)||void 0===m?void 0:m.protocol)||null}function Ad(m=(0,k.z$)()){return!("file:"!==Ta()&&"ionic:"!==Ta()&&"capacitor:"!==Ta()||!m.toLowerCase().match(/iphone|ipad|ipod|android/))}function il(){try{const m=self.localStorage,d=da();if(m)return m.setItem(d,"1"),m.removeItem(d),!function rf(m=(0,k.z$)()){return function Sd(){return(0,k.w1)()&&11===document?.documentMode}()||function rl(m=(0,k.z$)()){return/Edge\/\d+/.test(m)}(m)}()||(0,k.hl)()}catch{return Mo()&&(0,k.hl)()}return!1}function Mo(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function sl(){return(function Fp(){return"http:"===Ta()||"https:"===Ta()}()||(0,k.ru)()||Ad())&&!function Aa(){return(0,k.b$)()||(0,k.UG)()}()&&il()&&!Mo()}function No(){return Ad()&&typeof document<"u"}function Sa(){return(Sa=(0,g.Z)(function*(){return!!No()&&new Promise(m=>{const d=setTimeout(()=>{m(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),m(!0)})})})).apply(this,arguments)}const ci={LOCAL:"local",NONE:"none",SESSION:"session"},Xs=V,of="persistence";function Oo(m){return ol.apply(this,arguments)}function ol(){return(ol=(0,g.Z)(function*(m){yield m._initializationPromise;const d=xa(),p=q(of,m.config.apiKey,m.name);d&&d.setItem(p,m._getPersistence())})).apply(this,arguments)}function xa(){var m;try{return(null===(m=function sf(){return typeof window<"u"?window:null}())||void 0===m?void 0:m.sessionStorage)||null}catch{return null}}const Is=V;class li{constructor(){this.browserResolver=re(class $i{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wi,this._completeRedirectFn=ee,this._overrideRedirectResult=$r}_openPopup(d,p,v,A){var N=this;return(0,g.Z)(function*(){var $;W(null===($=N.eventManagers[d._key()])||void 0===$?void 0:$.manager,"_initialize() not called before _openPopup()");const oe=Qc(d,p,v,Oe(),A);return function xp(m,d,p,v=500,A=600){const N=Math.max((window.screen.availHeight-A)/2,0).toString(),$=Math.max((window.screen.availWidth-v)/2,0).toString();let oe="";const Fe=Object.assign(Object.assign({},Wh),{width:v.toString(),height:A.toString(),top:N,left:$}),Je=(0,k.z$)().toLowerCase();p&&(oe=Kt(Je)?"_blank":p),Ge(Je)&&(d=d||"http://localhost",Fe.scrollbars="yes");const wt=Object.entries(Fe).reduce((Wn,[qn,Ds])=>`${Wn}${qn}=${Ds},`,"");if(function Fr(m=(0,k.z$)()){var d;return Rt(m)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(Je)&&"_self"!==oe)return function qh(m,d){const p=document.createElement("a");p.href=m,p.target=d;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(v)}(d||"",oe),new md(null);const pt=window.open(d||"",oe,wt);V(pt,m,"popup-blocked");try{pt.focus()}catch{}return new md(pt)}(d,oe,da())})()}_openRedirect(d,p,v,A){var N=this;return(0,g.Z)(function*(){return yield N._originValidation(d),function ai(m){Sn().location.href=m}(Qc(d,p,v,Oe(),A)),new Promise(()=>{})})()}_initialize(d){const p=d._key();if(this.eventManagers[p]){const{manager:A,promise:N}=this.eventManagers[p];return A?Promise.resolve(A):(W(N,"If manager is not set, promise should be"),N)}const v=this.initAndGetManager(d);return this.eventManagers[p]={promise:v},v.catch(()=>{delete this.eventManagers[p]}),v}initAndGetManager(d){var p=this;return(0,g.Z)(function*(){const v=yield function zh(m){return Sp.apply(this,arguments)}(d),A=new yt(d);return v.register("authEvent",N=>(V(N?.authEvent,d,"invalid-auth-event"),{status:A.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[d._key()]={manager:A},p.iframes[d._key()]=v,A})()}_isIframeWebStorageSupported(d,p){this.iframes[d._key()].send(_d,{type:_d},A=>{var N;const $=null===(N=A?.[0])||void 0===N?void 0:N[_d];void 0!==$&&p(!!$),be(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const p=d._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Wc(m){return Qs.apply(this,arguments)}(d)),this.originValidationPromises[p]}get _shouldInitProactively(){return Ms()||ut()||Rt()}}),this.cordovaResolver=re(class Vu{constructor(){this._redirectPersistence=wi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ee,this._overrideRedirectResult=$r}_initialize(d){var p=this;return(0,g.Z)(function*(){const v=d._key();let A=p.eventManagers.get(v);return A||(A=new bd(d),p.eventManagers.set(v,A),p.attachCallbackListeners(d,A)),A})()}_openPopup(d){be(d,"operation-not-supported-in-this-environment")}_openRedirect(d,p,v,A){var N=this;return(0,g.Z)(function*(){!function tf(m){var d,p,v,A,N,$,oe,Fe,Je,wt;const pt=Js();V("function"==typeof(null===(d=pt?.universalLinks)||void 0===d?void 0:d.subscribe),m,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),V(typeof(null===(p=pt?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),V("function"==typeof(null===(N=null===(A=null===(v=pt?.cordova)||void 0===v?void 0:v.plugins)||void 0===A?void 0:A.browsertab)||void 0===N?void 0:N.openUrl),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(Fe=null===(oe=null===($=pt?.cordova)||void 0===$?void 0:$.plugins)||void 0===oe?void 0:oe.browsertab)||void 0===Fe?void 0:Fe.isAvailable),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(wt=null===(Je=pt?.cordova)||void 0===Je?void 0:Je.InAppBrowser)||void 0===wt?void 0:wt.open),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const $=yield N._initialize(d);yield $.initialized(),$.resetRedirect(),function Ao(){lr.clear()}(),yield N._originValidation(d);const oe=function Op(m,d,p=null){return{type:d,eventId:p,urlResponse:null,sessionId:Lu(),postBody:null,tenantId:m.tenantId,error:me(m,"no-auth-event")}}(d,v,A);yield function nf(m,d){return el()._set(tl(m),d)}(d,oe);const Fe=yield function Pu(m,d,p){return Fu.apply(this,arguments)}(d,oe,p),Je=yield function ef(m){const{cordova:d}=Js();return new Promise(p=>{d.plugins.browsertab.isAvailable(v=>{let A=null;v?d.plugins.browsertab.openUrl(m):A=d.InAppBrowser.open(m,function Jn(m=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(m)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(m)}()?"_blank":"_system","location=yes"),p(A)})})}(Fe);return function qm(m,d,p){return Da.apply(this,arguments)}(d,$,Je)})()}_isIframeWebStorageSupported(d,p){throw new Error("Method not implemented.")}_originValidation(d){const p=d._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Wm(m){return Jc.apply(this,arguments)}(d)),this.originValidationPromises[p]}attachCallbackListeners(d,p){const{universalLinks:v,handleOpenURL:A,BuildInfo:N}=Js(),$=setTimeout((0,g.Z)(function*(){yield Xc(d),p.onEvent(fr())}),500),oe=function(){var wt=(0,g.Z)(function*(pt){clearTimeout($);const Wn=yield Xc(d);let qn=null;Wn&&pt?.url&&(qn=function Zm(m,d){var p,v;const A=function Ym(m){const d=Ii(m),p=d.link?decodeURIComponent(d.link):void 0,v=Ii(p).link,A=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return Ii(A).link||A||v||p||m}(d);if(A.includes("/__/auth/callback")){const N=Ii(A),$=N.firebaseError?function xo(m){try{return JSON.parse(m)}catch{return null}}(decodeURIComponent(N.firebaseError)):null,oe=null===(v=null===(p=$?.code)||void 0===p?void 0:p.split("auth/"))||void 0===v?void 0:v[1],Fe=oe?me(oe):null;return Fe?{type:m.type,eventId:m.eventId,tenantId:m.tenantId,error:Fe,urlResponse:null,sessionId:null,postBody:null}:{type:m.type,eventId:m.eventId,tenantId:m.tenantId,sessionId:m.sessionId,urlResponse:A,postBody:null}}return null}(Wn,pt.url)),p.onEvent(qn||fr())});return function(Wn){return wt.apply(this,arguments)}}();typeof v<"u"&&"function"==typeof v.subscribe&&v.subscribe(null,oe);const Fe=A,Je=`${N.packageName.toLowerCase()}://`;Js().handleOpenURL=function(){var wt=(0,g.Z)(function*(pt){if(pt.toLowerCase().startsWith(Je)&&oe({url:pt}),"function"==typeof Fe)try{Fe(pt)}catch(Wn){console.error(Wn)}});return function(pt){return wt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=wi,this._completeRedirectFn=ee,this._overrideRedirectResult=$r}_initialize(d){var p=this;return(0,g.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,p,v,A){var N=this;return(0,g.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(d,p,v,A)})()}_openRedirect(d,p,v,A){var N=this;return(0,g.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(d,p,v,A)})()}_isIframeWebStorageSupported(d,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,p)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return No()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Is(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,g.Z)(function*(){if(d.underlyingResolver)return;const p=yield function xd(){return Sa.apply(this,arguments)}();d.underlyingResolver=p?d.cordovaResolver:d.browserResolver})()}}function af(m){return m.unwrap()}function Md(m){return Uu(m)}function Uu(m){const{_tokenResponse:d}=m instanceof k.ZR?m.customData:m;if(!d)return null;if(!(m instanceof k.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return jr.credentialFromResult(m);const p=d.providerId;if(!p||"password"===p)return null;let v;switch(p){case"google.com":v=au;break;case"facebook.com":v=Jo;break;case"github.com":v=Ic;break;case"twitter.com":v=Lr;break;default:const{oauthIdToken:A,oauthAccessToken:N,oauthTokenSecret:$,pendingToken:oe,nonce:Fe}=d;return N||$||A||oe?oe?p.startsWith("saml.")?Xo._create(p,oe):Ri._fromParams({providerId:p,signInMethod:p,pendingToken:oe,idToken:A,accessToken:N}):new ks(p).credential({idToken:A,accessToken:N,rawNonce:Fe}):null}return m instanceof k.ZR?v.credentialFromError(m):v.credentialFromResult(m)}function zn(m,d){return d.catch(p=>{throw p instanceof k.ZR&&function Nd(m,d){var p,v;const A=null===(p=d.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===(null===(v=d)||void 0===v?void 0:v.code))d.resolver=new Od(m,function wn(m,d){var p;const v=(0,k.m9)(m),A=d;return V(d.customData.operationType,v,"argument-error"),V(null===(p=A.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,v,"argument-error"),Iu._fromError(v,A)}(m,d));else if(A){const N=Uu(d),$=d;N&&($.credential=N,$.tenantId=A.tenantId||void 0,$.email=A.email||void 0,$.phoneNumber=A.phoneNumber||void 0)}}(m,p),p}).then(p=>{const A=p.user;return{operationType:p.operationType,credential:Md(p),additionalUserInfo:wu(p),user:Gi.getOrCreate(A)}})}function Di(m,d){return ju.apply(this,arguments)}function ju(){return(ju=(0,g.Z)(function*(m,d){const p=yield d;return{verificationId:p.verificationId,confirm:v=>zn(m,p.confirm(v))}})).apply(this,arguments)}class Od{constructor(d,p){this.resolver=p,this.auth=function uf(m){return m.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return zn(af(this.auth),this.resolver.resolveSignIn(d))}}class Gi{constructor(d){this._delegate=d,this.multiFactor=function mo(m){const d=(0,k.m9)(m);return go.has(d)||go.set(d,Hh._fromUser(d)),go.get(d)}(d)}static getOrCreate(d){return Gi.USER_MAP.has(d)||Gi.USER_MAP.set(d,new Gi(d)),Gi.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var p=this;return(0,g.Z)(function*(){return zn(p.auth,hu(p._delegate,d))})()}linkWithPhoneNumber(d,p){var v=this;return(0,g.Z)(function*(){return Di(v.auth,function cr(m,d,p){return nr.apply(this,arguments)}(v._delegate,d,p))})()}linkWithPopup(d){var p=this;return(0,g.Z)(function*(){return zn(p.auth,function bo(m,d,p){return Ar.apply(this,arguments)}(p._delegate,d,li))})()}linkWithRedirect(d){var p=this;return(0,g.Z)(function*(){return yield Oo(hn(p.auth)),function D(m,d,p){return function b(m,d,p){return S.apply(this,arguments)}(m,d,p)}(p._delegate,d,li)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var p=this;return(0,g.Z)(function*(){return zn(p.auth,fu(p._delegate,d))})()}reauthenticateWithPhoneNumber(d,p){return Di(this.auth,function $n(m,d,p){return Do.apply(this,arguments)}(this._delegate,d,p))}reauthenticateWithPopup(d){return zn(this.auth,function ge(m,d,p){return ui.apply(this,arguments)}(this._delegate,d,li))}reauthenticateWithRedirect(d){var p=this;return(0,g.Z)(function*(){return yield Oo(hn(p.auth)),function So(m,d,p){return function En(m,d,p){return Hi.apply(this,arguments)}(m,d,p)}(p._delegate,d,li)})()}sendEmailVerification(d){return function Oc(m,d){return oa.apply(this,arguments)}(this._delegate,d)}unlink(d){var p=this;return(0,g.Z)(function*(){return yield function wr(m,d){return uu.apply(this,arguments)}(p._delegate,d),p})()}updateEmail(d){return function td(m,d){return Bs((0,k.m9)(m),d,null)}(this._delegate,d)}updatePassword(d){return function Vs(m,d){return Bs((0,k.m9)(m),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function ys(m,d){return va.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function Pc(m,d){return Fc.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,p){return function Rc(m,d,p){return yu.apply(this,arguments)}(this._delegate,d,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Gi.USER_MAP=new WeakMap;const en=V;let Ro=(()=>{class m{constructor(p,v){if(this.app=p,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=p.options;en(A,"invalid-api-key",{appName:p.name}),en(A,"invalid-api-key",{appName:p.name});const N=typeof window<"u"?li:void 0;this._delegate=v.initialize({options:{persistence:zi(A,p.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(Se),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Gi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,v){!function iu(m,d,p){const v=hn(m);V(v._canInitEmulator,v,"emulator-config-failed"),V(/^https?:\/\//.test(d),v,"invalid-emulator-scheme");const A=!!p?.disableWarnings,N=yi(d),{host:$,port:oe}=function On(m){const d=yi(m),p=/(\/\/)?([^?#/]+)/.exec(m.substr(d.length));if(!p)return{host:"",port:null};const v=p[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(v);if(A){const N=A[1];return{host:N,port:ss(v.substr(N.length+1))}}{const[N,$]=v.split(":");return{host:N,port:ss($)}}}(d);v.config.emulator={url:`${N}//${$}${null===oe?"":`:${oe}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:$,port:oe,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function os(){function m(){const d=document.createElement("p"),p=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",m):m())}()}(this._delegate,p,v)}applyActionCode(p){return function Xr(m,d){return ta.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return na(this._delegate,p)}confirmPasswordReset(p,v){return function gu(m,d,p){return ho.apply(this,arguments)}(this._delegate,p,v)}createUserWithEmailAndPassword(p,v){var A=this;return(0,g.Z)(function*(){return zn(A._delegate,function ra(m,d,p){return vn.apply(this,arguments)}(A._delegate,p,v))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function mu(m,d){return sa.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Bi(m,d){return"EMAIL_SIGNIN"===ou.parseLink(d)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,g.Z)(function*(){en(sl(),p._delegate,"operation-not-supported-in-this-environment");const v=yield function P(m,d){return G.apply(this,arguments)}(p._delegate,li);return v?zn(p._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function kp(m,d){hn(m)._logFramework(d)}(this._delegate,p)}onAuthStateChanged(p,v,A){const{next:N,error:$,complete:oe}=ko(p,v,A);return this._delegate.onAuthStateChanged(N,$,oe)}onIdTokenChanged(p,v,A){const{next:N,error:$,complete:oe}=ko(p,v,A);return this._delegate.onIdTokenChanged(N,$,oe)}sendSignInLinkToEmail(p,v){return function Mc(m,d,p){return Ls.apply(this,arguments)}(this._delegate,p,v)}sendPasswordResetEmail(p,v){return function Ac(m,d,p){return _n.apply(this,arguments)}(this._delegate,p,v||void 0)}setPersistence(p){var v=this;return(0,g.Z)(function*(){let A;switch(function Lp(m,d){Xs(Object.values(ci).includes(d),m,"invalid-persistence-type"),(0,k.b$)()?Xs(d!==ci.SESSION,m,"unsupported-persistence-type"):(0,k.UG)()?Xs(d===ci.NONE,m,"unsupported-persistence-type"):Mo()?Xs(d===ci.NONE||d===ci.LOCAL&&(0,k.hl)(),m,"unsupported-persistence-type"):Xs(d===ci.NONE||il(),m,"unsupported-persistence-type")}(v._delegate,p),p){case ci.SESSION:A=wi;break;case ci.LOCAL:A=(yield re(yo)._isAvailable())?yo:ua;break;case ci.NONE:A=L;break;default:return be("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return zn(this._delegate,function Bh(m){return yn.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return zn(this._delegate,fn(this._delegate,p))}signInWithCustomToken(p){return zn(this._delegate,function Cc(m,d){return ea.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,v){return zn(this._delegate,function vi(m,d,p){return fn((0,k.m9)(m),_i.credential(d,p))}(this._delegate,p,v))}signInWithEmailLink(p,v){return zn(this._delegate,function Dp(m,d,p){return ia.apply(this,arguments)}(this._delegate,p,v))}signInWithPhoneNumber(p,v){return Di(this._delegate,function ya(m,d,p){return ei.apply(this,arguments)}(this._delegate,p,v))}signInWithPopup(p){var v=this;return(0,g.Z)(function*(){return en(sl(),v._delegate,"operation-not-supported-in-this-environment"),zn(v._delegate,function fd(m,d,p){return Ea.apply(this,arguments)}(v._delegate,p,li))})()}signInWithRedirect(p){var v=this;return(0,g.Z)(function*(){return en(sl(),v._delegate,"operation-not-supported-in-this-environment"),yield Oo(v._delegate),function kn(m,d,p){return function Gh(m,d,p){return Pn.apply(this,arguments)}(m,d,p)}(v._delegate,p,li)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function xc(m,d){return ed.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return m.Persistence=ci,m})();function ko(m,d,p){let v=m;"function"!=typeof m&&({next:v,error:d,complete:p}=m);const A=v;return{next:$=>A($&&Gi.getOrCreate($)),error:d,complete:p}}function zi(m,d){const p=function Bu(m,d){const p=xa();if(!p)return[];const v=q(of,m,d);switch(p.getItem(v)){case ci.NONE:return[L];case ci.LOCAL:return[yo,wi];case ci.SESSION:return[wi];default:return[]}}(m,d);if(typeof self<"u"&&!p.includes(yo)&&p.push(yo),typeof window<"u")for(const v of[ua,wi])p.includes(v)||p.push(v);return p.includes(L)||p.push(L),p}class cf{constructor(){this.providerId="phone",this._delegate=new jr(af(X.Z.auth()))}static credential(d,p){return jr.credential(d,p)}verifyPhoneNumber(d,p){return this._delegate.verifyPhoneNumber(d,p)}unwrap(){return this._delegate}}cf.PHONE_SIGN_IN_METHOD=jr.PHONE_SIGN_IN_METHOD,cf.PROVIDER_ID=jr.PROVIDER_ID;const Vp=V;class nw{constructor(d,p,v=X.Z.app()){var A;Vp(null===(A=v.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new tr(d,p,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function lf(m){m.INTERNAL.registerComponent(new ce.wA("auth-compat",d=>{const p=d.getProvider("app-compat").getImmediate(),v=d.getProvider("auth");return new Ro(p,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:_i,FacebookAuthProvider:Jo,GithubAuthProvider:Ic,GoogleAuthProvider:au,OAuthProvider:ks,SAMLAuthProvider:Qr,PhoneAuthProvider:cf,PhoneMultiFactorGenerator:Mp,RecaptchaVerifier:nw,TwitterAuthProvider:Lr,Auth:Ro,AuthCredential:or,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),m.registerVersion("@firebase/auth-compat","0.2.24")}(X.Z)},8306:(ht,Te,F)=>{F.d(Te,{y:()=>U});var g=F(2961),X=F(727),k=F(8822),ue=F(4671);var ce=F(2416),le=F(576),ve=F(2806);let U=(()=>{class Ne{constructor(Ke){Ke&&(this._subscribe=Ke)}lift(Ke){const fe=new Ne;return fe.source=this,fe.operator=Ke,fe}subscribe(Ke,fe,de){const Ye=function He(Ne){return Ne&&Ne instanceof g.Lv||function J(Ne){return Ne&&(0,le.m)(Ne.next)&&(0,le.m)(Ne.error)&&(0,le.m)(Ne.complete)}(Ne)&&(0,X.Nn)(Ne)}(Ke)?Ke:new g.Hp(Ke,fe,de);return(0,ve.x)(()=>{const{operator:Xe,source:be}=this;Ye.add(Xe?Xe.call(Ye,be):be?this._subscribe(Ye):this._trySubscribe(Ye))}),Ye}_trySubscribe(Ke){try{return this._subscribe(Ke)}catch(fe){Ke.error(fe)}}forEach(Ke,fe){return new(fe=j(fe))((de,Ye)=>{const Xe=new g.Hp({next:be=>{try{Ke(be)}catch(me){Ye(me),Xe.unsubscribe()}},error:Ye,complete:de});this.subscribe(Xe)})}_subscribe(Ke){var fe;return null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(Ke)}[k.L](){return this}pipe(...Ke){return function he(Ne){return 0===Ne.length?ue.y:1===Ne.length?Ne[0]:function(Ke){return Ne.reduce((fe,de)=>de(fe),Ke)}}(Ke)(this)}toPromise(Ke){return new(Ke=j(Ke))((fe,de)=>{let Ye;this.subscribe(Xe=>Ye=Xe,Xe=>de(Xe),()=>fe(Ye))})}}return Ne.create=Se=>new Ne(Se),Ne})();function j(Ne){var Se;return null!==(Se=Ne??ce.v.Promise)&&void 0!==Se?Se:Promise}},7579:(ht,Te,F)=>{F.d(Te,{x:()=>ce});var g=F(8306),X=F(727);const ue=(0,F(3888).d)(ve=>function(){ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=F(8737),he=F(2806);let ce=(()=>{class ve extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const J=new le(this,this);return J.operator=j,J}_throwIfClosed(){if(this.closed)throw new ue}next(j){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(j)}})}error(j){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:J}=this;for(;J.length;)J.shift().error(j)}})}complete(){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:J,isStopped:He,observers:Ne}=this;return J||He?X.Lc:(this.currentObservers=null,Ne.push(j),new X.w0(()=>{this.currentObservers=null,(0,se.P)(Ne,j)}))}_checkFinalizedStatuses(j){const{hasError:J,thrownError:He,isStopped:Ne}=this;J?j.error(He):Ne&&j.complete()}asObservable(){const j=new g.y;return j.source=this,j}}return ve.create=(U,j)=>new le(U,j),ve})();class le extends ce{constructor(U,j){super(),this.destination=U,this.source=j}next(U){var j,J;null===(J=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===J||J.call(j,U)}error(U){var j,J;null===(J=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===J||J.call(j,U)}complete(){var U,j;null===(j=null===(U=this.destination)||void 0===U?void 0:U.complete)||void 0===j||j.call(U)}_subscribe(U){var j,J;return null!==(J=null===(j=this.source)||void 0===j?void 0:j.subscribe(U))&&void 0!==J?J:X.Lc}}},2961:(ht,Te,F)=>{F.d(Te,{Hp:()=>Ke,Lv:()=>J});var g=F(576),X=F(727),k=F(2416),ue=F(7849);function se(){}const he=ve("C",void 0,void 0);function ve(be,me,we){return{kind:be,value:me,error:we}}var U=F(3410),j=F(2806);class J extends X.w0{constructor(me){super(),this.isStopped=!1,me?(this.destination=me,(0,X.Nn)(me)&&me.add(this)):this.destination=Xe}static create(me,we,Be){return new Ke(me,we,Be)}next(me){this.isStopped?Ye(function le(be){return ve("N",be,void 0)}(me),this):this._next(me)}error(me){this.isStopped?Ye(function ce(be){return ve("E",void 0,be)}(me),this):(this.isStopped=!0,this._error(me))}complete(){this.isStopped?Ye(he,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(me){this.destination.next(me)}_error(me){try{this.destination.error(me)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function Ne(be,me){return He.call(be,me)}class Se{constructor(me){this.partialObserver=me}next(me){const{partialObserver:we}=this;if(we.next)try{we.next(me)}catch(Be){fe(Be)}}error(me){const{partialObserver:we}=this;if(we.error)try{we.error(me)}catch(Be){fe(Be)}else fe(me)}complete(){const{partialObserver:me}=this;if(me.complete)try{me.complete()}catch(we){fe(we)}}}class Ke extends J{constructor(me,we,Be){let Ue;if(super(),(0,g.m)(me)||!me)Ue={next:me??void 0,error:we??void 0,complete:Be??void 0};else{let V;this&&k.v.useDeprecatedNextContext?(V=Object.create(me),V.unsubscribe=()=>this.unsubscribe(),Ue={next:me.next&&Ne(me.next,V),error:me.error&&Ne(me.error,V),complete:me.complete&&Ne(me.complete,V)}):Ue=me}this.destination=new Se(Ue)}}function fe(be){k.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(be):(0,ue.h)(be)}function Ye(be,me){const{onStoppedNotification:we}=k.v;we&&U.z.setTimeout(()=>we(be,me))}const Xe={closed:!0,next:se,error:function de(be){throw be},complete:se}},727:(ht,Te,F)=>{F.d(Te,{Lc:()=>he,w0:()=>se,Nn:()=>ce});var g=F(576);const k=(0,F(3888).d)(ve=>function(j){ve(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((J,He)=>`${He+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var ue=F(8737);class se{constructor(U){this.initialTeardown=U,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let U;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Ne of j)Ne.remove(this);else j.remove(this);const{initialTeardown:J}=this;if((0,g.m)(J))try{J()}catch(Ne){U=Ne instanceof k?Ne.errors:[Ne]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const Ne of He)try{le(Ne)}catch(Se){U=U??[],Se instanceof k?U=[...U,...Se.errors]:U.push(Se)}}if(U)throw new k(U)}}add(U){var j;if(U&&U!==this)if(this.closed)le(U);else{if(U instanceof se){if(U.closed||U._hasParent(this))return;U._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(U)}}_hasParent(U){const{_parentage:j}=this;return j===U||Array.isArray(j)&&j.includes(U)}_addParent(U){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(U),j):j?[j,U]:U}_removeParent(U){const{_parentage:j}=this;j===U?this._parentage=null:Array.isArray(j)&&(0,ue.P)(j,U)}remove(U){const{_finalizers:j}=this;j&&(0,ue.P)(j,U),U instanceof se&&U._removeParent(this)}}se.EMPTY=(()=>{const ve=new se;return ve.closed=!0,ve})();const he=se.EMPTY;function ce(ve){return ve instanceof se||ve&&"closed"in ve&&(0,g.m)(ve.remove)&&(0,g.m)(ve.add)&&(0,g.m)(ve.unsubscribe)}function le(ve){(0,g.m)(ve)?ve():ve.unsubscribe()}},2416:(ht,Te,F)=>{F.d(Te,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ht,Te,F)=>{F.d(Te,{E:()=>X});const X=new(F(8306).y)(se=>se.complete())},8996:(ht,Te,F)=>{F.d(Te,{D:()=>me});var g=F(8421),X=F(5363),k=F(9468),he=F(8306),le=F(2202),ve=F(576),U=F(9672);function J(we,Be){if(!we)throw new Error("Iterable cannot be null");return new he.y(Ue=>{(0,U.f)(Ue,Be,()=>{const V=we[Symbol.asyncIterator]();(0,U.f)(Ue,Be,()=>{V.next().then(pe=>{pe.done?Ue.complete():Ue.next(pe.value)})},0,!0)})})}var He=F(3670),Ne=F(8239),Se=F(1144),Ke=F(6495),fe=F(2206),de=F(4532),Ye=F(3260);function me(we,Be){return Be?function be(we,Be){if(null!=we){if((0,He.c)(we))return function ue(we,Be){return(0,g.Xf)(we).pipe((0,k.R)(Be),(0,X.Q)(Be))}(we,Be);if((0,Se.z)(we))return function ce(we,Be){return new he.y(Ue=>{let V=0;return Be.schedule(function(){V===we.length?Ue.complete():(Ue.next(we[V++]),Ue.closed||this.schedule())})})}(we,Be);if((0,Ne.t)(we))return function se(we,Be){return(0,g.Xf)(we).pipe((0,k.R)(Be),(0,X.Q)(Be))}(we,Be);if((0,fe.D)(we))return J(we,Be);if((0,Ke.T)(we))return function j(we,Be){return new he.y(Ue=>{let V;return(0,U.f)(Ue,Be,()=>{V=we[le.h](),(0,U.f)(Ue,Be,()=>{let pe,W;try{({value:pe,done:W}=V.next())}catch(Y){return void Ue.error(Y)}W?Ue.complete():Ue.next(pe)},0,!0)}),()=>(0,ve.m)(V?.return)&&V.return()})}(we,Be);if((0,Ye.L)(we))return function Xe(we,Be){return J((0,Ye.Q)(we),Be)}(we,Be)}throw(0,de.z)(we)}(we,Be):(0,g.Xf)(we)}},8421:(ht,Te,F)=>{F.d(Te,{Xf:()=>He});var g=F(655),X=F(1144),k=F(8239),ue=F(8306),se=F(3670),he=F(2206),ce=F(4532),le=F(6495),ve=F(3260),U=F(576),j=F(7849),J=F(8822);function He(be){if(be instanceof ue.y)return be;if(null!=be){if((0,se.c)(be))return function Ne(be){return new ue.y(me=>{const we=be[J.L]();if((0,U.m)(we.subscribe))return we.subscribe(me);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(be);if((0,X.z)(be))return function Se(be){return new ue.y(me=>{for(let we=0;we<be.length&&!me.closed;we++)me.next(be[we]);me.complete()})}(be);if((0,k.t)(be))return function Ke(be){return new ue.y(me=>{be.then(we=>{me.closed||(me.next(we),me.complete())},we=>me.error(we)).then(null,j.h)})}(be);if((0,he.D)(be))return de(be);if((0,le.T)(be))return function fe(be){return new ue.y(me=>{for(const we of be)if(me.next(we),me.closed)return;me.complete()})}(be);if((0,ve.L)(be))return function Ye(be){return de((0,ve.Q)(be))}(be)}throw(0,ce.z)(be)}function de(be){return new ue.y(me=>{(function Xe(be,me){var we,Be,Ue,V;return(0,g.mG)(this,void 0,void 0,function*(){try{for(we=(0,g.KL)(be);!(Be=yield we.next()).done;)if(me.next(Be.value),me.closed)return}catch(pe){Ue={error:pe}}finally{try{Be&&!Be.done&&(V=we.return)&&(yield V.call(we))}finally{if(Ue)throw Ue.error}}me.complete()})})(be,me).catch(we=>me.error(we))})}},6451:(ht,Te,F)=>{F.d(Te,{T:()=>he});var g=F(8189),X=F(8421),k=F(515),ue=F(7669),se=F(8996);function he(...ce){const le=(0,ue.yG)(ce),ve=(0,ue._6)(ce,1/0),U=ce;return U.length?1===U.length?(0,X.Xf)(U[0]):(0,g.J)(ve)((0,se.D)(U,le)):k.E}},5403:(ht,Te,F)=>{F.d(Te,{x:()=>X});var g=F(2961);function X(ue,se,he,ce,le){return new k(ue,se,he,ce,le)}class k extends g.Lv{constructor(se,he,ce,le,ve,U){super(se),this.onFinalize=ve,this.shouldUnsubscribe=U,this._next=he?function(j){try{he(j)}catch(J){se.error(J)}}:super._next,this._error=le?function(j){try{le(j)}catch(J){se.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=ce?function(){try{ce()}catch(j){se.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:he}=this;super.unsubscribe(),!he&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},4004:(ht,Te,F)=>{F.d(Te,{U:()=>k});var g=F(4482),X=F(5403);function k(ue,se){return(0,g.e)((he,ce)=>{let le=0;he.subscribe((0,X.x)(ce,ve=>{ce.next(ue.call(se,ve,le++))}))})}},8189:(ht,Te,F)=>{F.d(Te,{J:()=>k});var g=F(5577),X=F(4671);function k(ue=1/0){return(0,g.z)(X.y,ue)}},5577:(ht,Te,F)=>{F.d(Te,{z:()=>le});var g=F(4004),X=F(8421),k=F(4482),ue=F(9672),se=F(5403),ce=F(576);function le(ve,U,j=1/0){return(0,ce.m)(U)?le((J,He)=>(0,g.U)((Ne,Se)=>U(J,Ne,He,Se))((0,X.Xf)(ve(J,He))),j):("number"==typeof U&&(j=U),(0,k.e)((J,He)=>function he(ve,U,j,J,He,Ne,Se,Ke){const fe=[];let de=0,Ye=0,Xe=!1;const be=()=>{Xe&&!fe.length&&!de&&U.complete()},me=Be=>de<J?we(Be):fe.push(Be),we=Be=>{Ne&&U.next(Be),de++;let Ue=!1;(0,X.Xf)(j(Be,Ye++)).subscribe((0,se.x)(U,V=>{He?.(V),Ne?me(V):U.next(V)},()=>{Ue=!0},void 0,()=>{if(Ue)try{for(de--;fe.length&&de<J;){const V=fe.shift();Se?(0,ue.f)(U,Se,()=>we(V)):we(V)}be()}catch(V){U.error(V)}}))};return ve.subscribe((0,se.x)(U,me,()=>{Xe=!0,be()})),()=>{Ke?.()}}(J,He,ve,j)))}},5363:(ht,Te,F)=>{F.d(Te,{Q:()=>ue});var g=F(9672),X=F(4482),k=F(5403);function ue(se,he=0){return(0,X.e)((ce,le)=>{ce.subscribe((0,k.x)(le,ve=>(0,g.f)(le,se,()=>le.next(ve),he),()=>(0,g.f)(le,se,()=>le.complete(),he),ve=>(0,g.f)(le,se,()=>le.error(ve),he)))})}},3099:(ht,Te,F)=>{F.d(Te,{B:()=>se});var g=F(8421),X=F(7579),k=F(2961),ue=F(4482);function se(ce={}){const{connector:le=(()=>new X.x),resetOnError:ve=!0,resetOnComplete:U=!0,resetOnRefCountZero:j=!0}=ce;return J=>{let He,Ne,Se,Ke=0,fe=!1,de=!1;const Ye=()=>{Ne?.unsubscribe(),Ne=void 0},Xe=()=>{Ye(),He=Se=void 0,fe=de=!1},be=()=>{const me=He;Xe(),me?.unsubscribe()};return(0,ue.e)((me,we)=>{Ke++,!de&&!fe&&Ye();const Be=Se=Se??le();we.add(()=>{Ke--,0===Ke&&!de&&!fe&&(Ne=he(be,j))}),Be.subscribe(we),!He&&Ke>0&&(He=new k.Hp({next:Ue=>Be.next(Ue),error:Ue=>{de=!0,Ye(),Ne=he(Xe,ve,Ue),Be.error(Ue)},complete:()=>{fe=!0,Ye(),Ne=he(Xe,U),Be.complete()}}),(0,g.Xf)(me).subscribe(He))})(J)}}function he(ce,le,...ve){if(!0===le)return void ce();if(!1===le)return;const U=new k.Hp({next:()=>{U.unsubscribe(),ce()}});return le(...ve).subscribe(U)}},9468:(ht,Te,F)=>{F.d(Te,{R:()=>X});var g=F(4482);function X(k,ue=0){return(0,g.e)((se,he)=>{he.add(k.schedule(()=>se.subscribe(he),ue))})}},4408:(ht,Te,F)=>{F.d(Te,{o:()=>se});var g=F(727);class X extends g.w0{constructor(ce,le){super()}schedule(ce,le=0){return this}}const k={setInterval(he,ce,...le){const{delegate:ve}=k;return ve?.setInterval?ve.setInterval(he,ce,...le):setInterval(he,ce,...le)},clearInterval(he){const{delegate:ce}=k;return(ce?.clearInterval||clearInterval)(he)},delegate:void 0};var ue=F(8737);class se extends X{constructor(ce,le){super(ce,le),this.scheduler=ce,this.work=le,this.pending=!1}schedule(ce,le=0){var ve;if(this.closed)return this;this.state=ce;const U=this.id,j=this.scheduler;return null!=U&&(this.id=this.recycleAsyncId(j,U,le)),this.pending=!0,this.delay=le,this.id=null!==(ve=this.id)&&void 0!==ve?ve:this.requestAsyncId(j,this.id,le),this}requestAsyncId(ce,le,ve=0){return k.setInterval(ce.flush.bind(ce,this),ve)}recycleAsyncId(ce,le,ve=0){if(null!=ve&&this.delay===ve&&!1===this.pending)return le;null!=le&&k.clearInterval(le)}execute(ce,le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(ce,le);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ce,le){let U,ve=!1;try{this.work(ce)}catch(j){ve=!0,U=j||new Error("Scheduled action threw falsy error")}if(ve)return this.unsubscribe(),U}unsubscribe(){if(!this.closed){const{id:ce,scheduler:le}=this,{actions:ve}=le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ue.P)(ve,this),null!=ce&&(this.id=this.recycleAsyncId(le,ce,null)),this.delay=null,super.unsubscribe()}}}},7565:(ht,Te,F)=>{F.d(Te,{v:()=>k});var g=F(6063);class X{constructor(se,he=X.now){this.schedulerActionCtor=se,this.now=he}schedule(se,he=0,ce){return new this.schedulerActionCtor(this,se).schedule(ce,he)}}X.now=g.l.now;class k extends X{constructor(se,he=X.now){super(se,he),this.actions=[],this._active=!1}flush(se){const{actions:he}=this;if(this._active)return void he.push(se);let ce;this._active=!0;do{if(ce=se.execute(se.state,se.delay))break}while(se=he.shift());if(this._active=!1,ce){for(;se=he.shift();)se.unsubscribe();throw ce}}}},4986:(ht,Te,F)=>{F.d(Te,{z:()=>k});var g=F(4408);const k=new(F(7565).v)(g.o)},6063:(ht,Te,F)=>{F.d(Te,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(ht,Te,F)=>{F.d(Te,{z:()=>g});const g={setTimeout(X,k,...ue){const{delegate:se}=g;return se?.setTimeout?se.setTimeout(X,k,...ue):setTimeout(X,k,...ue)},clearTimeout(X){const{delegate:k}=g;return(k?.clearTimeout||clearTimeout)(X)},delegate:void 0}},2202:(ht,Te,F)=>{F.d(Te,{h:()=>X});const X=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ht,Te,F)=>{F.d(Te,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ht,Te,F)=>{F.d(Te,{_6:()=>he,jO:()=>ue,yG:()=>se});var g=F(576);function k(ce){return ce[ce.length-1]}function ue(ce){return(0,g.m)(k(ce))?ce.pop():void 0}function se(ce){return function X(ce){return ce&&(0,g.m)(ce.schedule)}(k(ce))?ce.pop():void 0}function he(ce,le){return"number"==typeof k(ce)?ce.pop():le}},8737:(ht,Te,F)=>{function g(X,k){if(X){const ue=X.indexOf(k);0<=ue&&X.splice(ue,1)}}F.d(Te,{P:()=>g})},3888:(ht,Te,F)=>{function g(X){const ue=X(se=>{Error.call(se),se.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}F.d(Te,{d:()=>g})},2806:(ht,Te,F)=>{F.d(Te,{O:()=>ue,x:()=>k});var g=F(2416);let X=null;function k(se){if(g.v.useDeprecatedSynchronousErrorHandling){const he=!X;if(he&&(X={errorThrown:!1,error:null}),se(),he){const{errorThrown:ce,error:le}=X;if(X=null,ce)throw le}}else se()}function ue(se){g.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=se)}},9672:(ht,Te,F)=>{function g(X,k,ue,se=0,he=!1){const ce=k.schedule(function(){ue(),he?X.add(this.schedule(null,se)):this.unsubscribe()},se);if(X.add(ce),!he)return ce}F.d(Te,{f:()=>g})},4671:(ht,Te,F)=>{function g(X){return X}F.d(Te,{y:()=>g})},1144:(ht,Te,F)=>{F.d(Te,{z:()=>g});const g=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(ht,Te,F)=>{F.d(Te,{D:()=>X});var g=F(576);function X(k){return Symbol.asyncIterator&&(0,g.m)(k?.[Symbol.asyncIterator])}},576:(ht,Te,F)=>{function g(X){return"function"==typeof X}F.d(Te,{m:()=>g})},3670:(ht,Te,F)=>{F.d(Te,{c:()=>k});var g=F(8822),X=F(576);function k(ue){return(0,X.m)(ue[g.L])}},6495:(ht,Te,F)=>{F.d(Te,{T:()=>k});var g=F(2202),X=F(576);function k(ue){return(0,X.m)(ue?.[g.h])}},8239:(ht,Te,F)=>{F.d(Te,{t:()=>X});var g=F(576);function X(k){return(0,g.m)(k?.then)}},3260:(ht,Te,F)=>{F.d(Te,{L:()=>ue,Q:()=>k});var g=F(655),X=F(576);function k(se){return(0,g.FC)(this,arguments,function*(){const ce=se.getReader();try{for(;;){const{value:le,done:ve}=yield(0,g.qq)(ce.read());if(ve)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(le)}}finally{ce.releaseLock()}})}function ue(se){return(0,X.m)(se?.getReader)}},4482:(ht,Te,F)=>{F.d(Te,{e:()=>k});var g=F(576);function k(ue){return se=>{if(function X(ue){return(0,g.m)(ue?.lift)}(se))return se.lift(function(he){try{return ue(he,this)}catch(ce){this.error(ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(ht,Te,F)=>{F.d(Te,{h:()=>k});var g=F(2416),X=F(3410);function k(ue){X.z.setTimeout(()=>{const{onUnhandledError:se}=g.v;if(!se)throw ue;se(ue)})}},4532:(ht,Te,F)=>{function g(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Te,{z:()=>g})},655:(ht,Te,F)=>{function ue(W,Y){var re={};for(var te in W)Object.prototype.hasOwnProperty.call(W,te)&&Y.indexOf(te)<0&&(re[te]=W[te]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var Re=0;for(te=Object.getOwnPropertySymbols(W);Re<te.length;Re++)Y.indexOf(te[Re])<0&&Object.prototype.propertyIsEnumerable.call(W,te[Re])&&(re[te[Re]]=W[te[Re]])}return re}function le(W,Y,re,te){return new(re||(re=Promise))(function(Oe,at){function Wt(Xt){try{Ze(te.next(Xt))}catch(ln){at(ln)}}function Pt(Xt){try{Ze(te.throw(Xt))}catch(ln){at(ln)}}function Ze(Xt){Xt.done?Oe(Xt.value):function Re(Oe){return Oe instanceof re?Oe:new re(function(at){at(Oe)})}(Xt.value).then(Wt,Pt)}Ze((te=te.apply(W,Y||[])).next())})}function fe(W){return this instanceof fe?(this.v=W,this):new fe(W)}function de(W,Y,re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Re,te=re.apply(W,Y||[]),Oe=[];return Re={},at("next"),at("throw"),at("return"),Re[Symbol.asyncIterator]=function(){return this},Re;function at(Gt){te[Gt]&&(Re[Gt]=function(qt){return new Promise(function(Dr,At){Oe.push([Gt,qt,Dr,At])>1||Wt(Gt,qt)})})}function Wt(Gt,qt){try{!function Pt(Gt){Gt.value instanceof fe?Promise.resolve(Gt.value.v).then(Ze,Xt):ln(Oe[0][2],Gt)}(te[Gt](qt))}catch(Dr){ln(Oe[0][3],Dr)}}function Ze(Gt){Wt("next",Gt)}function Xt(Gt){Wt("throw",Gt)}function ln(Gt,qt){Gt(qt),Oe.shift(),Oe.length&&Wt(Oe[0][0],Oe[0][1])}}function Xe(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var re,Y=W[Symbol.asyncIterator];return Y?Y.call(W):(W=function J(W){var Y="function"==typeof Symbol&&Symbol.iterator,re=Y&&W[Y],te=0;if(re)return re.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&te>=W.length&&(W=void 0),{value:W&&W[te++],done:!W}}};throw new TypeError(Y?"Object is not iterable.":"Symbol.iterator is not defined.")}(W),re={},te("next"),te("throw"),te("return"),re[Symbol.asyncIterator]=function(){return this},re);function te(Oe){re[Oe]=W[Oe]&&function(at){return new Promise(function(Wt,Pt){!function Re(Oe,at,Wt,Pt){Promise.resolve(Pt).then(function(Ze){Oe({value:Ze,done:Wt})},at)}(Wt,Pt,(at=W[Oe](at)).done,at.value)})}}}F.d(Te,{FC:()=>de,KL:()=>Xe,_T:()=>ue,mG:()=>le,qq:()=>fe})},4650:(ht,Te,F)=>{F.d(Te,{$8M:()=>Nu,AFp:()=>db,ALo:()=>av,AaK:()=>le,B6R:()=>et,CZH:()=>bh,CqO:()=>$f,D6c:()=>zv,EJc:()=>KC,F4k:()=>Dg,FYo:()=>py,FiY:()=>P,G48:()=>JC,GfV:()=>In,Gpc:()=>j,JOm:()=>$i,LFG:()=>kn,Lbi:()=>fb,Lck:()=>X_,NdJ:()=>Zy,OlP:()=>un,Oqu:()=>u_,Q6J:()=>za,QGY:()=>Ky,Qsj:()=>xt,R0b:()=>Xi,RDi:()=>m,Rgc:()=>op,SBq:()=>wf,TTD:()=>Pi,TgZ:()=>Eg,X6Q:()=>Nv,Xpm:()=>De,Y36:()=>zd,YNc:()=>Gy,Yjl:()=>_e,Yz7:()=>qt,ZZ4:()=>Tm,_Bn:()=>HE,_UZ:()=>Wy,_c5:()=>Gv,_uU:()=>a_,aQg:()=>$v,cJS:()=>At,cg1:()=>Ol,dDg:()=>Ah,dqk:()=>Jt,eFA:()=>S0,ekj:()=>n_,eoX:()=>hc,g9A:()=>nu,h0i:()=>lc,hGG:()=>U0,hij:()=>Ya,ifc:()=>ot,ip1:()=>jl,kL8:()=>w_,lG2:()=>q,lnq:()=>Zf,lri:()=>b0,n5z:()=>Ui,oAB:()=>Nt,q4F:()=>It,qLn:()=>je,qOj:()=>pg,qZA:()=>Ig,rWj:()=>Em,sBO:()=>eT,sIi:()=>Vf,s_b:()=>im,soG:()=>ym,uIk:()=>Uf,vHH:()=>Se,vpe:()=>$o,wAp:()=>lt,xi3:()=>cv,xp6:()=>cn,zSh:()=>Ld,zs3:()=>pl});var g=F(7579),X=F(727),k=F(8306),ue=F(6451),se=F(3099);function he(i){for(let s in i)if(i[s]===he)return s;throw Error("Could not find renamed property on target object.")}function ce(i,s){for(const o in s)s.hasOwnProperty(o)&&!i.hasOwnProperty(o)&&(i[o]=s[o])}function le(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(le).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const o=s.indexOf("\n");return-1===o?s:s.substring(0,o)}function ve(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const U=he({__forward_ref__:he});function j(i){return i.__forward_ref__=j,i.toString=function(){return le(this())},i}function J(i){return He(i)?i():i}function He(i){return"function"==typeof i&&i.hasOwnProperty(U)&&i.__forward_ref__===j}class Se extends Error{constructor(s,o){super(function Ke(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}(s,o)),this.code=s}}function fe(i){return"string"==typeof i?i:null==i?"":String(i)}function me(i,s){throw new Se(-201,!1)}function Pt(i,s){null==i&&function Ze(i,s,o,u){throw new Error(`ASSERTION ERROR: ${i}`+(null==u?"":` [Expected=> ${o} ${u} ${s} <=Actual]`))}(s,i,null,"!=")}function qt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function At(i){return{providers:i.providers||[],imports:i.imports||[]}}function nn(i){return ri(i,ii)||ri(i,Zr)}function ri(i,s){return i.hasOwnProperty(s)?i[s]:null}function xs(i){return i&&(i.hasOwnProperty(Kr)||i.hasOwnProperty(Ko))?i[Kr]:null}const ii=he({\u0275prov:he}),Kr=he({\u0275inj:he}),Zr=he({ngInjectableDef:he}),Ko=he({ngInjectorDef:he});var Qe=(()=>((Qe=Qe||{})[Qe.Default=0]="Default",Qe[Qe.Host=1]="Host",Qe[Qe.Self=2]="Self",Qe[Qe.SkipSelf=4]="SkipSelf",Qe[Qe.Optional=8]="Optional",Qe))();let _r;function Vn(i){const s=_r;return _r=i,s}function Yr(i,s,o){const u=nn(i);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&Qe.Optional?null:void 0!==s?s:void me(le(i))}function An(i){return{toString:i}.toString()}var Mn=(()=>((Mn=Mn||{})[Mn.OnPush=0]="OnPush",Mn[Mn.Default=1]="Default",Mn))(),ot=(()=>{return(i=ot||(ot={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",ot;var i})();const Jt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Pr={},Tt=[],rs=he({\u0275cmp:he}),Zt=he({\u0275dir:he}),mi=he({\u0275pipe:he}),Yt=he({\u0275mod:he}),Bn=he({\u0275fac:he}),Cr=he({__NG_ELEMENT_ID__:he});let tt=0;function De(i){return An(()=>{const o=!0===i.standalone,u={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Mn.OnPush,directiveDefs:null,pipeDefs:null,standalone:o,dependencies:o&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||Tt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||ot.Emulated,id:"c"+tt++,styles:i.styles||Tt,_:null,setInput:null,schemas:i.schemas||null,tView:null},f=i.dependencies,y=i.features;return l.inputs=L(i.inputs,u),l.outputs=L(i.outputs),y&&y.forEach(w=>w(l)),l.directiveDefs=f?()=>("function"==typeof f?f():f).map(Et).filter(vt):null,l.pipeDefs=f?()=>("function"==typeof f?f():f).map(ut).filter(vt):null,l})}function et(i,s,o){const u=i.\u0275cmp;u.directiveDefs=()=>("function"==typeof s?s():s).map(Et),u.pipeDefs=()=>("function"==typeof o?o():o).map(ut)}function Et(i){return Z(i)||Ge(i)}function vt(i){return null!==i}function Nt(i){return An(()=>({type:i.type,bootstrap:i.bootstrap||Tt,declarations:i.declarations||Tt,imports:i.imports||Tt,exports:i.exports||Tt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function L(i,s){if(null==i)return Pr;const o={};for(const u in i)if(i.hasOwnProperty(u)){let l=i[u],f=l;Array.isArray(l)&&(f=l[1],l=l[0]),o[l]=u,s&&(s[l]=f)}return o}const q=De;function _e(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Z(i){return i[rs]||null}function Ge(i){return i[Zt]||null}function ut(i){return i[mi]||null}function Xn(i){return Array.isArray(i)&&"object"==typeof i[1]}function Tr(i){return Array.isArray(i)&&!0===i[1]}function su(i){return 0!=(8&i.flags)}function Qo(i){return 2==(2&i.flags)}function _c(i){return 1==(1&i.flags)}function vr(i){return null!==i.template}function Rh(i){return 0!=(256&i[2])}function _i(i,s){return i.hasOwnProperty(Bn)?i[Bn]:null}class ki{constructor(s,o,u){this.previousValue=s,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function Pi(){return ks}function ks(i){return i.type.prototype.ngOnChanges&&(i.setInput=au),Jo}function Jo(){const i=Lh(this),s=i?.current;if(s){const o=i.previous;if(o===Pr)i.previous=s;else for(let u in s)o[u]=s[u];i.current=null,this.ngOnChanges(s)}}function au(i,s,o,u){const l=Lh(i)||function Xo(i,s){return i[Ic]=s}(i,{previous:Pr,current:null}),f=l.current||(l.current={}),y=l.previous,w=this.declaredInputs[o],I=y[w];f[w]=new ki(I&&I.currentValue,s,y===Pr),i[u]=s}Pi.ngInherit=!0;const Ic="__ngSimpleChanges__";function Lh(i){return i[Ic]||null}function yn(i){for(;Array.isArray(i);)i=i[0];return i}function Jr(i,s){return yn(s[i])}function wr(i,s){return yn(s[i.index])}function Ps(i,s){return i.data[s]}function Ht(i,s){const o=s[i];return Xn(o)?o:o[0]}function Fs(i){return 64==(64&i[2])}function oi(i,s){return null==s?null:i[s]}function du(i){i[18]=0}function fn(i,s){i[5]+=s;let o=i,u=i[3];for(;null!==u&&(1===s&&1===o[5]||-1===s&&0===o[5]);)u[5]+=s,o=u,u=u[3]}const bt={lFrame:Pc(null),bindingsEnabled:!0};function Vi(){return bt.bindingsEnabled}function Ie(){return bt.lFrame.lView}function Vt(){return bt.lFrame.tView}function _n(){let i=gu();for(;null!==i&&64===i.type;)i=i.parent;return i}function gu(){return bt.lFrame.currentTNode}function Xr(i,s){const o=bt.lFrame;o.currentTNode=i,o.isParent=s}function ta(){return bt.lFrame.isParent}function Ls(){return bt.lFrame.bindingIndex++}function Bi(i){const s=bt.lFrame,o=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,o}function bp(i,s){const o=bt.lFrame;o.bindingIndex=o.bindingRootIndex=i,mu(s)}function mu(i){bt.lFrame.currentDirectiveIndex=i}function oa(i){bt.lFrame.currentQueryIndex=i}function Rc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function yu(i,s,o){if(o&Qe.SkipSelf){let l=s,f=i;for(;!(l=l.parent,null!==l||o&Qe.Host||(l=Rc(f),null===l||(f=f[15],10&l.type))););if(null===l)return!1;s=l,i=f}const u=bt.lFrame=kc();return u.currentTNode=s,u.lView=i,!0}function _u(i){const s=kc(),o=i[1];bt.lFrame=s,s.currentTNode=o.firstChild,s.lView=i,s.tView=o,s.contextLView=i,s.bindingIndex=o.bindingStartIndex,s.inI18n=!1}function kc(){const i=bt.lFrame,s=null===i?null:i.child;return null===s?Pc(i):s}function Pc(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Fc(){const i=bt.lFrame;return bt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const td=Fc;function Vs(){const i=Fc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Hn(){return bt.lFrame.selectedIndex}function Vr(i){bt.lFrame.selectedIndex=i}function an(){const i=bt.lFrame;return Ps(i.tView,i.selectedIndex)}function Eu(i,s){for(let o=s.directiveStart,u=s.directiveEnd;o<u;o++){const f=i.data[o].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:I,ngAfterViewChecked:T,ngOnDestroy:M}=f;y&&(i.contentHooks||(i.contentHooks=[])).push(-o,y),w&&((i.contentHooks||(i.contentHooks=[])).push(o,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(o,w)),I&&(i.viewHooks||(i.viewHooks=[])).push(-o,I),T&&((i.viewHooks||(i.viewHooks=[])).push(o,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(o,T)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(o,M)}}function Us(i,s,o){po(i,s,3,o)}function fo(i,s,o,u){(3&i[2])===o&&po(i,s,o,u)}function id(i,s){let o=i[2];(3&o)===s&&(o&=2047,o+=1,i[2]=o)}function po(i,s,o,u){const f=u??-1,y=s.length-1;let w=0;for(let I=void 0!==u?65535&i[18]:0;I<y;I++)if("number"==typeof s[I+1]){if(w=s[I],null!=u&&w>=u)break}else s[I]<0&&(i[18]+=65536),(w<f||-1==f)&&(sd(i,o,s,I),i[18]=(4294901760&i[18])+I+2),I++}function sd(i,s,o,u){const l=o[u]<0,f=o[u+1],w=i[l?-o[u]:o[u]];if(l){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(w)}finally{}}}else try{f.call(w)}finally{}}class ds{constructor(s,o,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function mo(i,s,o){let u=0;for(;u<o.length;){const l=o[u];if("number"==typeof l){if(0!==l)break;u++;const f=o[u++],y=o[u++],w=o[u++];i.setAttribute(s,y,w,f)}else{const f=l,y=o[++u];Cu(f)?i.setProperty(s,f,y):i.setAttribute(s,f,y),u++}}return u}function Hs(i){return 3===i||4===i||6===i}function Cu(i){return 64===i.charCodeAt(0)}function aa(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let o=-1;for(let u=0;u<s.length;u++){const l=s[u];"number"==typeof l?o=l:0===o||ad(i,o,l,null,-1===o||2===o?s[++u]:null)}}return i}function ad(i,s,o,u,l){let f=0,y=i.length;if(-1===s)y=-1;else for(;f<i.length;){const w=i[f++];if("number"==typeof w){if(w===s){y=-1;break}if(w>s){y=f-1;break}}}for(;f<i.length;){const w=i[f];if("number"==typeof w)break;if(w===o){if(null===u)return void(null!==l&&(i[f+1]=l));if(u===i[f+1])return void(i[f+2]=l)}f++,null!==u&&f++,null!==l&&f++}-1!==y&&(i.splice(y,0,s),f=y+1),i.splice(f++,0,o),null!==u&&i.splice(f++,0,u),null!==l&&i.splice(f++,0,l)}function ud(i){return-1!==i}function er(i){return 32767&i}function ca(i,s){let o=function ua(i){return i>>16}(i),u=s;for(;o>0;)u=u[15],o--;return u}let wi=!0;function la(i){const s=wi;return wi=i,s}let Sn=0;const ai={};function $s(i,s){const o=Au(i,s);if(-1!==o)return o;const u=s[1];u.firstCreatePass&&(i.injectorIndex=s.length,ha(u.data,i),ha(s,null),ha(u.blueprint,null));const l=Su(i,s),f=i.injectorIndex;if(ud(l)){const y=er(l),w=ca(l,s),I=w[1].data;for(let T=0;T<8;T++)s[f+T]=w[y+T]|I[y+T]}return s[f+8]=l,f}function ha(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Au(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Su(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let o=0,u=null,l=s;for(;null!==l;){if(u=_o(l),null===u)return-1;if(o++,l=l[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function hs(i,s,o){!function Tu(i,s,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(Cr)&&(u=o[Cr]),null==u&&(u=o[Cr]=Sn++);const l=255&u;s.data[i+(l>>5)]|=1<<l}(i,s,o)}function fs(i,s,o){if(o&Qe.Optional||void 0!==i)return i;me()}function Uc(i,s,o,u){if(o&Qe.Optional&&void 0===u&&(u=null),0==(o&(Qe.Self|Qe.Host))){const l=i[9],f=Vn(void 0);try{return l?l.get(s,u,o&Qe.Optional):Yr(s,u,o&Qe.Optional)}finally{Vn(f)}}return fs(u,0,o)}function Gs(i,s,o,u=Qe.Default,l){if(null!==i){if(1024&s[2]){const y=function yo(i,s,o,u,l){let f=i,y=s;for(;null!==f&&null!==y&&1024&y[2]&&!(256&y[2]);){const w=fa(f,y,o,u|Qe.Self,ai);if(w!==ai)return w;let I=f.parent;if(!I){const T=y[21];if(T){const M=T.get(o,ai,u);if(M!==ai)return M}I=_o(y),y=y[15]}f=I}return l}(i,s,o,u,ai);if(y!==ai)return y}const f=fa(i,s,o,u,ai);if(f!==ai)return f}return Uc(s,o,u,l)}function fa(i,s,o,u,l){const f=function jc(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Cr)?i[Cr]:void 0;return"number"==typeof s?s>=0?255&s:Hc:s}(o);if("function"==typeof f){if(!yu(s,i,u))return u&Qe.Host?fs(l,0,u):Uc(s,o,u,l);try{const y=f(u);if(null!=y||u&Qe.Optional)return y;me()}finally{td()}}else if("number"==typeof f){let y=null,w=Au(i,s),I=-1,T=u&Qe.Host?s[16][6]:null;for((-1===w||u&Qe.SkipSelf)&&(I=-1===w?Su(i,s):s[w+8],-1!==I&&ga(u,!1)?(y=s[1],w=er(I),s=ca(I,s)):w=-1);-1!==w;){const M=s[1];if(xu(f,w,M.data)){const O=dd(w,s,o,y,u,T);if(O!==ai)return O}I=s[w+8],-1!==I&&ga(u,s[1].data[w+8]===T)&&xu(f,w,s)?(y=M,w=er(I),s=ca(I,s)):w=-1}}return l}function dd(i,s,o,u,l,f){const y=s[1],w=y.data[i+8],M=function pa(i,s,o,u,l){const f=i.providerIndexes,y=s.data,w=1048575&f,I=i.directiveStart,M=f>>20,H=l?w+M:i.directiveEnd;for(let Q=u?w:w+M;Q<H;Q++){const ye=y[Q];if(Q<I&&o===ye||Q>=I&&ye.type===o)return Q}if(l){const Q=y[I];if(Q&&vr(Q)&&Q.type===o)return I}return null}(w,y,o,null==u?Qo(w)&&wi:u!=y&&0!=(3&w.type),l&Qe.Host&&f===w);return null!==M?ps(s,y,M,w):ai}function ps(i,s,o,u){let l=i[o];const f=s.data;if(function js(i){return i instanceof ds}(l)){const y=l;y.resolving&&function Ye(i,s){const o=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Se(-200,`Circular dependency in DI detected for ${i}${o}`)}(function de(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():fe(i)}(f[o]));const w=la(y.canSeeViewProviders);y.resolving=!0;const I=y.injectImpl?Vn(y.injectImpl):null;yu(i,u,Qe.Default);try{l=i[o]=y.factory(void 0,f,i,u),s.firstCreatePass&&o>=u.directiveStart&&function rd(i,s,o){const{ngOnChanges:u,ngOnInit:l,ngDoCheck:f}=s.type.prototype;if(u){const y=ks(s);(o.preOrderHooks||(o.preOrderHooks=[])).push(i,y),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(i,y)}l&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-i,l),f&&((o.preOrderHooks||(o.preOrderHooks=[])).push(i,f),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(i,f))}(o,f[o],s)}finally{null!==I&&Vn(I),la(w),y.resolving=!1,td()}}return l}function xu(i,s,o){return!!(o[s+(i>>5)]&1<<i)}function ga(i,s){return!(i&Qe.Self||i&Qe.Host&&s)}class zs{constructor(s,o){this._tNode=s,this._lView=o}get(s,o,u){return Gs(this._tNode,this._lView,s,u,o)}}function Hc(){return new zs(_n(),Ie())}function Ui(i){return An(()=>{const s=i.prototype.constructor,o=s[Bn]||Mu(s),u=Object.prototype;let l=Object.getPrototypeOf(i.prototype).constructor;for(;l&&l!==u;){const f=l[Bn]||Mu(l);if(f&&f!==o)return f;l=Object.getPrototypeOf(l)}return f=>new f})}function Mu(i){return He(i)?()=>{const s=Mu(J(i));return s&&s()}:_i(i)}function _o(i){const s=i[1],o=s.type;return 2===o?s.declTNode:1===o?i[6]:null}function Nu(i){return function ld(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const o=i.attrs;if(o){const u=o.length;let l=0;for(;l<u;){const f=o[l];if(Hs(f))break;if(0===f)l+=2;else if("number"==typeof f)for(l++;l<u&&"string"==typeof o[l];)l++;else{if(f===s)return o[l+1];l+=2}}}return null}(_n(),i)}const gs="__parameters__";function Eo(i,s,o){return An(()=>{const u=function Ou(i){return function(...o){if(i){const u=i(...o);for(const l in u)this[l]=u[l]}}}(s);function l(...f){if(this instanceof l)return u.apply(this,f),this;const y=new l(...f);return w.annotation=y,w;function w(I,T,M){const O=I.hasOwnProperty(gs)?I[gs]:Object.defineProperty(I,gs,{value:[]})[gs];for(;O.length<=M;)O.push(null);return(O[M]=O[M]||[]).push(y),I}}return o&&(l.prototype=Object.create(o.prototype)),l.prototype.ngMetadataName=i,l.annotationCls=l,l})}class un{constructor(s,o){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=qt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function nr(i,s){i.forEach(o=>Array.isArray(o)?nr(o,s):s(o))}function $n(i,s,o){s>=i.length?i.push(o):i.splice(s,0,o)}function Do(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Hr(i,s,o){let u=qs(i,s);return u>=0?i[1|u]=o:(u=~u,function va(i,s,o,u){let l=i.length;if(l==s)i.push(o,u);else if(1===l)i.push(u,i[0]),i[0]=o;else{for(l--,i.push(i[l-1],i[l]);l>s;)i[l]=i[l-2],l--;i[s]=o,i[s+1]=u}}(i,u,s,o)),u}function wa(i,s){const o=qs(i,s);if(o>=0)return i[1|o]}function qs(i,s){return function Gc(i,s,o){let u=0,l=i.length>>o;for(;l!==u;){const f=u+(l-u>>1),y=i[f<<o];if(s===y)return f<<o;y>s?l=f:u=f+1}return~(l<<o)}(i,s,1)}const lr={},nt="__NG_DI_FLAG__",Co="ngTempTokenPath",Zs=/\n/gm,Ao="__source";let $r;function ji(i){const s=$r;return $r=i,s}function vs(i,s=Qe.Default){if(void 0===$r)throw new Se(-203,!1);return null===$r?Yr(i,void 0,s):$r.get(i,s&Qe.Optional?null:void 0,s)}function kn(i,s=Qe.Default){return(function ns(){return _r}()||vs)(J(i),s)}function So(i){const s=[];for(let o=0;o<i.length;o++){const u=J(i[o]);if(Array.isArray(u)){if(0===u.length)throw new Se(900,!1);let l,f=Qe.Default;for(let y=0;y<u.length;y++){const w=u[y],I=Hi(w);"number"==typeof I?-1===I?l=w.token:f|=I:l=w}s.push(kn(l,f))}else s.push(kn(u))}return s}function En(i,s){return i[nt]=s,i.prototype[nt]=s,i}function Hi(i){return i[nt]}const P=En(Eo("Optional"),8),ee=En(Eo("SkipSelf"),4);var $i=(()=>(($i=$i||{})[$i.Important=1]="Important",$i[$i.DashCase=2]="DashCase",$i))();const ku=new Map;let wd=0;const Js="__ngContext__";function Mr(i,s){Xn(s)?(i[Js]=s[20],function dr(i){ku.set(i[20],i)}(s)):i[Js]=s}function bd(i,s){return undefined(i,s)}function Ca(i){const s=i[3];return Tr(s)?s[3]:s}function el(i){return xo(i[13])}function tl(i){return xo(i[4])}function xo(i){for(;null!==i&&!Tr(i);)i=i[4];return i}function Ii(i,s,o,u,l){if(null!=u){let f,y=!1;Tr(u)?f=u:Xn(u)&&(y=!0,u=u[0]);const w=yn(u);0===i&&null!==o?null==l?xd(s,o,w):No(s,o,w,l||null,!0):1===i&&null!==o?No(s,o,w,l||null,!0):2===i?function Md(i,s,o){const u=Xs(i,s);u&&function sf(i,s,o,u){i.removeChild(s,o,u)}(i,u,s,o)}(s,w,y):3===i&&s.destroyNode(w),null!=f&&function ju(i,s,o,u,l){const f=o[7];f!==yn(o)&&Ii(s,i,u,f,l);for(let w=10;w<o.length;w++){const I=o[w];Uu(I[1],I,i,s,u,f)}}(s,i,f,o,l)}}function fr(i,s,o){return i.createElement(s,o)}function Ad(i,s){const o=i[9],u=o.indexOf(s),l=s[3];512&s[2]&&(s[2]&=-513,fn(l,-1)),o.splice(u,1)}function Aa(i,s){if(i.length<=10)return;const o=10+s,u=i[o];if(u){const l=u[17];null!==l&&l!==i&&Ad(l,u),s>0&&(i[o-1][4]=u[4]);const f=Do(i,10+s);!function kp(i,s){Uu(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(u[1],u);const y=f[19];null!==y&&y.detachView(f[1]),u[3]=null,u[4]=null,u[2]&=-65}return u}function Sd(i,s){if(!(128&s[2])){const o=s[11];o.destroyNode&&Uu(i,s,o,3,null,null),function Pp(i){let s=i[13];if(!s)return rl(i[1],i);for(;s;){let o=null;if(Xn(s))o=s[13];else{const u=s[10];u&&(o=u)}if(!o){for(;s&&!s[4]&&s!==i;)Xn(s)&&rl(s[1],s),s=s[3];null===s&&(s=i),Xn(s)&&rl(s[1],s),o=s&&s[4]}s=o}}(s)}}function rl(i,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function il(i,s){let o;if(null!=i&&null!=(o=i.destroyHooks))for(let u=0;u<o.length;u+=2){const l=s[o[u]];if(!(l instanceof ds)){const f=o[u+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const w=l[f[y]],I=f[y+1];try{I.call(w)}finally{}}else try{f.call(l)}finally{}}}}(i,s),function rf(i,s){const o=i.cleanup,u=s[7];let l=-1;if(null!==o)for(let f=0;f<o.length-1;f+=2)if("string"==typeof o[f]){const y=o[f+1],w="function"==typeof y?y(s):yn(s[y]),I=u[l=o[f+2]],T=o[f+3];"boolean"==typeof T?w.removeEventListener(o[f],I,T):T>=0?u[l=T]():u[l=-T].unsubscribe(),f+=2}else{const y=u[l=o[f+1]];o[f].call(y)}if(null!==u){for(let f=l+1;f<u.length;f++)(0,u[f])();s[7]=null}}(i,s),1===s[1].type&&s[11].destroy();const o=s[17];if(null!==o&&Tr(s[3])){o!==s[3]&&Ad(o,s);const u=s[19];null!==u&&u.detachView(i)}!function Ed(i){ku.delete(i[20])}(s)}}function Mo(i,s,o){return function sl(i,s,o){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return o[0];if(2&u.flags){const l=i.data[u.directiveStart].encapsulation;if(l===ot.None||l===ot.Emulated)return null}return wr(u,o)}(i,s.parent,o)}function No(i,s,o,u,l){i.insertBefore(s,o,u,l)}function xd(i,s,o){i.appendChild(s,o)}function Sa(i,s,o,u,l){null!==u?No(i,s,o,u,l):xd(i,s,o)}function Xs(i,s){return i.parentNode(s)}let lf,ol=function Oo(i,s,o){return 40&i.type?wr(i,o):null};function Is(i,s,o,u){const l=Mo(i,u,s),f=s[11],w=function Lp(i,s,o){return ol(i,s,o)}(u.parent||s[6],u,s);if(null!=l)if(Array.isArray(o))for(let I=0;I<o.length;I++)Sa(f,l,o[I],w,!1);else Sa(f,l,o,w,!1)}function li(i,s){if(null!==s){const o=s.type;if(3&o)return wr(s,i);if(4&o)return uf(-1,i[s.index]);if(8&o){const u=s.child;if(null!==u)return li(i,u);{const l=i[s.index];return Tr(l)?uf(-1,l):yn(l)}}if(32&o)return bd(s,i)()||yn(i[s.index]);{const u=af(i,s);return null!==u?Array.isArray(u)?u[0]:li(Ca(i[16]),u):li(i,s.next)}}return null}function af(i,s){return null!==s?i[16][6].projection[s.projection]:null}function uf(i,s){const o=10+i+1;if(o<s.length){const u=s[o],l=u[1].firstChild;if(null!==l)return li(u,l)}return s[7]}function Nd(i,s,o,u,l,f,y){for(;null!=o;){const w=u[o.index],I=o.type;if(y&&0===s&&(w&&Mr(yn(w),u),o.flags|=4),64!=(64&o.flags))if(8&I)Nd(i,s,o.child,u,l,f,!1),Ii(s,i,l,w,f);else if(32&I){const T=bd(o,u);let M;for(;M=T();)Ii(s,i,l,M,f);Ii(s,i,l,w,f)}else 16&I?Di(i,s,u,o,l,f):Ii(s,i,l,w,f);o=y?o.projectionNext:o.next}}function Uu(i,s,o,u,l,f){Nd(o,u,i.firstChild,s,l,f,!1)}function Di(i,s,o,u,l,f){const y=o[16],I=y[6].projection[u.projection];if(Array.isArray(I))for(let T=0;T<I.length;T++)Ii(s,i,l,I[T],f);else Nd(i,s,I,y[3],l,f,!0)}function Gi(i,s,o){i.setAttribute(s,"style",o)}function en(i,s,o){""===o?i.removeAttribute(s,"class"):i.setAttribute(s,"class",o)}function m(i){lf=i}const uy=new un("ENVIRONMENT_INITIALIZER"),cy=new un("INJECTOR",-1),ly=new un("INJECTOR_DEF_TYPES");class _f{get(s,o=lr){if(o===lr){const u=new Error(`NullInjectorError: No provider for ${le(s)}!`);throw u.name="NullInjectorError",u}return o}}function qi(...i){return{\u0275providers:dy(0,i)}}function dy(i,...s){const o=[],u=new Set;let l;return nr(s,f=>{const y=f;$u(y,o,[],u)&&(l||(l=[]),l.push(y))}),void 0!==l&&hy(l,o),o}function hy(i,s){for(let o=0;o<i.length;o++){const{providers:l}=i[o];nr(l,f=>{s.push(f)})}}function $u(i,s,o,u){if(!(i=J(i)))return!1;let l=null,f=xs(i);const y=!f&&Z(i);if(f||y){if(y&&!y.standalone)return!1;l=i}else{const I=i.ngModule;if(f=xs(I),!f)return!1;l=I}const w=u.has(l);if(y){if(w)return!1;if(u.add(l),y.dependencies){const I="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const T of I)$u(T,s,o,u)}}else{if(!f)return!1;{if(null!=f.imports&&!w){let T;u.add(l);try{nr(f.imports,M=>{$u(M,s,o,u)&&(T||(T=[]),T.push(M))})}finally{}void 0!==T&&hy(T,s)}if(!w){const T=_i(l)||(()=>new l);s.push({provide:l,useFactory:T,deps:Tt},{provide:ly,useValue:l,multi:!0},{provide:uy,useValue:()=>kn(l),multi:!0})}const I=f.providers;null==I||w||nr(I,M=>{s.push(M)})}}return l!==i&&void 0!==i.providers}const uI=he({provide:String,useValue:he});function vf(i){return null!==i&&"object"==typeof i&&uI in i}function Gu(i){return"function"==typeof i}const Ld=new un("Set Injector scope."),Wp={},dw={};let gr;function Oa(){return void 0===gr&&(gr=new _f),gr}class Ki{}class qp extends Ki{constructor(s,o,u,l){super(),this.parent=o,this.source=u,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ae(s,y=>this.processProvider(y)),this.records.set(cy,Wu(void 0,this)),l.has("environment")&&this.records.set(Ki,Wu(void 0,this));const f=this.records.get(Ld);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(ly.multi,Tt,Qe.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const o=ji(this),u=Vn(void 0);try{return s()}finally{ji(o),Vn(u)}}get(s,o=lr,u=Qe.Default){this.assertNotDestroyed();const l=ji(this),f=Vn(void 0);try{if(!(u&Qe.SkipSelf)){let w=this.records.get(s);if(void 0===w){const I=function lI(i){return"function"==typeof i||"object"==typeof i&&i instanceof un}(s)&&nn(s);w=I&&this.injectableDefInScope(I)?Wu(fy(s),Wp):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(u&Qe.Self?Oa():this.parent).get(s,o=u&Qe.Optional&&o===lr?null:o)}catch(y){if("NullInjectorError"===y.name){if((y[Co]=y[Co]||[]).unshift(le(s)),l)throw y;return function D(i,s,o,u){const l=i[Co];throw s[Ao]&&l.unshift(s[Ao]),i.message=function b(i,s,o,u=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let l=le(s);if(Array.isArray(s))l=s.map(le).join(" -> ");else if("object"==typeof s){let f=[];for(let y in s)if(s.hasOwnProperty(y)){let w=s[y];f.push(y+":"+("string"==typeof w?JSON.stringify(w):le(w)))}l=`{${f.join(", ")}}`}return`${o}${u?"("+u+")":""}[${l}]: ${i.replace(Zs,"\n  ")}`}("\n"+i.message,l,o,u),i.ngTokenPath=l,i[Co]=null,i}(y,s,"R3InjectorError",this.source)}throw y}finally{Vn(f),ji(l)}}resolveInjectorInitializers(){const s=ji(this),o=Vn(void 0);try{const u=this.get(uy.multi,Tt,Qe.Self);for(const l of u)l()}finally{ji(s),Vn(o)}}toString(){const s=[],o=this.records;for(const u of o.keys())s.push(le(u));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Se(205,!1)}processProvider(s){let o=Gu(s=J(s))?s:J(s&&s.provide);const u=function ir(i){return vf(i)?Wu(void 0,i.useValue):Wu(zu(i),Wp)}(s);if(Gu(s)||!0!==s.multi)this.records.get(o);else{let l=this.records.get(o);l||(l=Wu(void 0,Wp,!0),l.factory=()=>So(l.multi),this.records.set(o,l)),o=s,l.multi.push(s)}this.records.set(o,u)}hydrate(s,o){return o.value===Wp&&(o.value=dw,o.value=o.factory()),"object"==typeof o.value&&o.value&&function Ct(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(s){if(!s.providedIn)return!1;const o=J(s.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function fy(i){const s=nn(i),o=null!==s?s.factory:_i(i);if(null!==o)return o;if(i instanceof un)throw new Se(204,!1);if(i instanceof Function)return function xe(i){const s=i.length;if(s>0)throw function ms(i,s){const o=[];for(let u=0;u<i;u++)o.push(s);return o}(s,"?"),new Se(204,!1);const o=function br(i){const s=i&&(i[ii]||i[Zr]);if(s){const o=function kr(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),s}return null}(i);return null!==o?()=>o.factory(i):()=>new i}(i);throw new Se(204,!1)}function zu(i,s,o){let u;if(Gu(i)){const l=J(i);return _i(l)||fy(l)}if(vf(i))u=()=>J(i.useValue);else if(function lw(i){return!(!i||!i.useFactory)}(i))u=()=>i.useFactory(...So(i.deps||[]));else if(function cw(i){return!(!i||!i.useExisting)}(i))u=()=>kn(J(i.useExisting));else{const l=J(i&&(i.useClass||i.provide));if(!function rt(i){return!!i.deps}(i))return _i(l)||fy(l);u=()=>new l(...So(i.deps))}return u}function Wu(i,s,o=!1){return{factory:i,value:s,multi:o?[]:void 0}}function qe(i){return!!i.\u0275providers}function ae(i,s){for(const o of i)Array.isArray(o)?ae(o,s):qe(o)?ae(o.\u0275providers,s):s(o)}class mr{}class dI{resolveComponentFactory(s){throw function hw(i){const s=Error(`No component factory found for ${le(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Kp=(()=>{class i{}return i.NULL=new dI,i})();function hI(){return ul(_n(),Ie())}function ul(i,s){return new wf(wr(i,s))}let wf=(()=>{class i{constructor(o){this.nativeElement=o}}return i.__NG_ELEMENT_ID__=hI,i})();class py{}let xt=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Vd(){const i=Ie(),o=Ht(_n().index,i);return(Xn(o)?o:i)[11]}(),i})(),pw=(()=>{class i{}return i.\u0275prov=qt({token:i,providedIn:"root",factory:()=>null}),i})();class In{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const It=new In("14.2.12"),cl={};function xn(i){return i.ngOriginalError}class je{constructor(){this._console=console}handleError(s){const o=this._findOriginalError(s);this._console.error("ERROR",s),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(s){let o=s&&xn(s);for(;o&&xn(o);)o=xn(o);return o||null}}function ie(i,s,o){let u=i.length;for(;;){const l=i.indexOf(s,o);if(-1===l)return l;if(0===l||i.charCodeAt(l-1)<=32){const f=s.length;if(l+f===u||i.charCodeAt(l+f)<=32)return l}o=l+1}}const bs="ng-template";function _I(i,s,o){let u=0;for(;u<i.length;){let l=i[u++];if(o&&"class"===l){if(l=i[u],-1!==ie(l.toLowerCase(),s,0))return!0}else if(1===l){for(;u<i.length&&"string"==typeof(l=i[u++]);)if(l.toLowerCase()===s)return!0;return!1}}return!1}function Bd(i){return 4===i.type&&i.value!==bs}function qu(i,s,o){return s===(4!==i.type||o?i.value:bs)}function vI(i,s,o){let u=4;const l=i.attrs||[],f=function EI(i){for(let s=0;s<i.length;s++)if(Hs(i[s]))return s;return i.length}(l);let y=!1;for(let w=0;w<s.length;w++){const I=s[w];if("number"!=typeof I){if(!y)if(4&u){if(u=2|1&u,""!==I&&!qu(i,I,o)||""===I&&1===s.length){if(Gr(u))return!1;y=!0}}else{const T=8&u?I:s[++w];if(8&u&&null!==i.attrs){if(!_I(i.attrs,T,o)){if(Gr(u))return!1;y=!0}continue}const O=mw(8&u?"class":I,l,Bd(i),o);if(-1===O){if(Gr(u))return!1;y=!0;continue}if(""!==T){let H;H=O>f?"":l[O+1].toLowerCase();const Q=8&u?H:null;if(Q&&-1!==ie(Q,T,0)||2&u&&T!==H){if(Gr(u))return!1;y=!0}}}}else{if(!y&&!Gr(u)&&!Gr(I))return!1;if(y&&Gr(I))continue;y=!1,u=I|1&u}}return Gr(u)||y}function Gr(i){return 0==(1&i)}function mw(i,s,o,u){if(null===s)return-1;let l=0;if(u||!o){let f=!1;for(;l<s.length;){const y=s[l];if(y===i)return l;if(3===y||6===y)f=!0;else{if(1===y||2===y){let w=s[++l];for(;"string"==typeof w;)w=s[++l];continue}if(4===y)break;if(0===y){l+=4;continue}}l+=f?1:2}return-1}return function bi(i,s){let o=i.indexOf(4);if(o>-1)for(o++;o<i.length;){const u=i[o];if("number"==typeof u)return-1;if(u===s)return o;o++}return-1}(s,i)}function Qp(i,s,o=!1){for(let u=0;u<s.length;u++)if(vI(i,s[u],o))return!0;return!1}function Ku(i,s){return i?":not("+s.trim()+")":s}function _w(i){let s=i[0],o=1,u=2,l="",f=!1;for(;o<i.length;){let y=i[o];if("string"==typeof y)if(2&u){const w=i[++o];l+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&u?l+="."+y:4&u&&(l+=" "+y);else""!==l&&!Gr(y)&&(s+=Ku(f,l),l=""),u=y,f=f||!Gr(u);o++}return""!==l&&(s+=Ku(f,l)),s}const ct={};function cn(i){_y(Vt(),Ie(),Hn()+i,!1)}function _y(i,s,o,u){if(!u)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&Us(s,f,o)}else{const f=i.preOrderHooks;null!==f&&fo(s,f,0,o)}Vr(o)}function vy(i,s=null,o=null,u){const l=Ud(i,s,o,u);return l.resolveInjectorInitializers(),l}function Ud(i,s=null,o=null,u,l=new Set){const f=[o||Tt,qi(i)];return u=u||("object"==typeof i?void 0:le(i)),new qp(f,s||Oa(),u||null,l)}let pl=(()=>{class i{static create(o,u){if(Array.isArray(o))return vy({name:""},u,o,"");{const l=o.name??"";return vy({name:l},o.parent,o.providers,l)}}}return i.THROW_IF_NOT_FOUND=lr,i.NULL=new _f,i.\u0275prov=qt({token:i,providedIn:"any",factory:()=>kn(cy)}),i.__NG_ELEMENT_ID__=-1,i})();function zd(i,s=Qe.Default){const o=Ie();return null===o?kn(i,s):Gs(_n(),o,J(i),s)}function vl(i,s){return i<<17|s<<2}function Cs(i){return i>>17&32767}function Ty(i){return 2|i}function Pa(i){return(131068&i)>>2}function Ay(i,s){return-131069&i|s<<2}function xy(i){return 1|i}function bn(i,s){const o=i.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const l=o[u],f=o[u+1];if(-1!==f){const y=i.data[f];oa(l),y.contentQueries(2,s[f],f)}}}function Sf(i,s,o,u,l,f,y,w,I,T,M){const O=s.blueprint.slice();return O[0]=l,O[2]=76|u,(null!==M||i&&1024&i[2])&&(O[2]|=1024),du(O),O[3]=O[15]=i,O[8]=o,O[10]=y||i&&i[10],O[11]=w||i&&i[11],O[12]=I||i&&i[12]||null,O[9]=T||i&&i[9]||null,O[6]=f,O[20]=function Qh(){return wd++}(),O[21]=M,O[16]=2==s.type?i[16]:O,O}function Yd(i,s,o,u,l){let f=i.data[s];if(null===f)f=function El(i,s,o,u,l){const f=gu(),y=ta(),I=i.data[s]=function kw(i,s,o,u,l,f){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,o,s,u,l);return null===i.firstChild&&(i.firstChild=I),null!==f&&(y?null==f.child&&null!==I.parent&&(f.child=I):null===f.next&&(f.next=I)),I}(i,s,o,u,l),function Dp(){return bt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=o,f.value=u,f.attrs=l;const y=function ho(){const i=bt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Xr(f,!0),f}function Qd(i,s,o,u){if(0===o)return-1;const l=s.length;for(let f=0;f<o;f++)s.push(u),i.blueprint.push(u),i.data.push(null);return l}function og(i,s,o){_u(s);try{const u=i.viewQuery;null!==u&&hg(1,u,o);const l=i.template;null!==l&&Vo(i,s,l,1,o),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&bn(i,s),i.staticViewQueries&&hg(2,i.viewQuery,o);const f=i.components;null!==f&&function sg(i,s){for(let o=0;o<s.length;o++)jw(i,s[o])}(s,f)}catch(u){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),u}finally{s[2]&=-5,Vs()}}function Ua(i,s,o,u){const l=s[2];if(128!=(128&l)){_u(s);try{du(s),function Mc(i){return bt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==o&&Vo(i,s,o,2,u);const y=3==(3&l);if(y){const T=i.preOrderCheckHooks;null!==T&&Us(s,T,null)}else{const T=i.preOrderHooks;null!==T&&fo(s,T,0,null),id(s,0)}if(function VI(i){for(let s=el(i);null!==s;s=tl(s)){if(!s[2])continue;const o=s[9];for(let u=0;u<o.length;u++){const l=o[u],f=l[3];0==(512&l[2])&&fn(f,1),l[2]|=512}}}(s),function Uw(i){for(let s=el(i);null!==s;s=tl(s))for(let o=10;o<s.length;o++){const u=s[o],l=u[1];Fs(u)&&Ua(l,u,l.template,u[8])}}(s),null!==i.contentQueries&&bn(i,s),y){const T=i.contentCheckHooks;null!==T&&Us(s,T)}else{const T=i.contentHooks;null!==T&&fo(s,T,1),id(s,1)}!function NI(i,s){const o=i.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const l=o[u];if(l<0)Vr(~l);else{const f=l,y=o[++u],w=o[++u];bp(y,f),w(2,s[f])}}}finally{Vr(-1)}}(i,s);const w=i.components;null!==w&&function ig(i,s){for(let o=0;o<s.length;o++)Or(i,s[o])}(s,w);const I=i.viewQuery;if(null!==I&&hg(2,I,u),y){const T=i.viewCheckHooks;null!==T&&Us(s,T)}else{const T=i.viewHooks;null!==T&&fo(s,T,2),id(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,fn(s[3],-1))}finally{Vs()}}}function Vo(i,s,o,u,l){const f=Hn(),y=2&u;try{Vr(-1),y&&s.length>22&&_y(i,s,22,!1),o(u,l)}finally{Vr(f)}}function ag(i,s,o){!Vi()||(function Ft(i,s,o,u){const l=o.directiveStart,f=o.directiveEnd;i.firstCreatePass||$s(o,s),Mr(u,s);const y=o.initialInputs;for(let w=l;w<f;w++){const I=i.data[w],T=vr(I);T&&PI(s,o,I);const M=ps(s,i,w,o);Mr(M,s),null!==y&&FI(0,w-l,M,I,0,y),T&&(Ht(o.index,s)[8]=M)}}(i,s,o,wr(o,s)),128==(128&o.flags)&&function kI(i,s,o){const u=o.directiveStart,l=o.directiveEnd,f=o.index,y=function Nc(){return bt.lFrame.currentDirectiveIndex}();try{Vr(f);for(let w=u;w<l;w++){const I=i.data[w],T=s[w];mu(w),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&Mf(I,T)}}finally{Vr(-1),mu(y)}}(i,s,o))}function ug(i,s,o=wr){const u=s.localNames;if(null!==u){let l=s.index+1;for(let f=0;f<u.length;f+=2){const y=u[f+1],w=-1===y?o(s,i):i[y];i[l++]=w}}}function Il(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=xf(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function xf(i,s,o,u,l,f,y,w,I,T){const M=22+u,O=M+l,H=function OI(i,s){const o=[];for(let u=0;u<s;u++)o.push(u<i?null:ct);return o}(M,O),Q="function"==typeof T?T():T;return H[1]={type:i,blueprint:H,template:o,queries:null,viewQuery:w,declTNode:s,data:H.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:O,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:Q,incompleteFirstPass:!1}}function ja(i,s,o){for(let u in i)if(i.hasOwnProperty(u)){const l=i[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(s,l):o[u]=[s,l]}return o}function Pw(i,s){const u=s.directiveEnd,l=i.data,f=s.attrs,y=[];let w=null,I=null;for(let T=s.directiveStart;T<u;T++){const M=l[T],O=M.inputs,H=null===f||Bd(s)?null:LI(O,f);y.push(H),w=ja(O,T,w),I=ja(M.outputs,T,I)}null!==w&&(w.hasOwnProperty("class")&&(s.flags|=16),w.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=y,s.inputs=w,s.outputs=I}function Jd(i,s){const o=Ht(s,i);16&o[2]||(o[2]|=32)}function Dl(i,s,o,u){let l=!1;if(Vi()){const f=function Nf(i,s,o){const u=i.directiveRegistry;let l=null;if(u)for(let f=0;f<u.length;f++){const y=u[f];Qp(o,y.selectors,!1)&&(l||(l=[]),hs($s(o,s),i,y.type),vr(y)?(Xd(i,o),l.unshift(y)):l.push(y))}return l}(i,s,o),y=null===u?null:{"":-1};if(null!==f){l=!0,Ly(o,i.data.length,f.length);for(let M=0;M<f.length;M++){const O=f[M];O.providersResolver&&O.providersResolver(O)}let w=!1,I=!1,T=Qd(i,s,f.length,null);for(let M=0;M<f.length;M++){const O=f[M];o.mergedAttrs=aa(o.mergedAttrs,O.hostAttrs),Vy(i,o,s,T,O),Bw(T,O,y),null!==O.contentQueries&&(o.flags|=8),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(o.flags|=128);const H=O.type.prototype;!w&&(H.ngOnChanges||H.ngOnInit||H.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(o.index),w=!0),!I&&(H.ngOnChanges||H.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(o.index),I=!0),T++}Pw(i,o)}y&&function cg(i,s,o){if(s){const u=i.localNames=[];for(let l=0;l<s.length;l+=2){const f=o[s[l+1]];if(null==f)throw new Se(-301,!1);u.push(s[l],f)}}}(o,u,y)}return o.mergedAttrs=aa(o.mergedAttrs,o.attrs),l}function Vw(i,s,o,u,l,f){const y=f.hostBindings;if(y){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const I=~s.index;(function RI(i){let s=i.length;for(;s>0;){const o=i[--s];if("number"==typeof o&&o<0)return o}return 0})(w)!=I&&w.push(I),w.push(u,l,y)}}function Mf(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Xd(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function Bw(i,s,o){if(o){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)o[s.exportAs[u]]=i;vr(s)&&(o[""]=i)}}function Ly(i,s,o){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+o,i.providerIndexes=s}function Vy(i,s,o,u,l){i.data[u]=l;const f=l.factory||(l.factory=_i(l.type)),y=new ds(f,vr(l),zd);i.blueprint[u]=y,o[u]=y,Vw(i,s,0,u,Qd(i,o,l.hostVars,ct),l)}function PI(i,s,o){const u=wr(s,i),l=Il(o),f=i[10],y=Qi(i,Sf(i,l,null,o.onPush?32:16,u,s,f,f.createRenderer(u,o),null,null,null));i[s.index]=y}function no(i,s,o,u,l,f){const y=wr(i,s);!function lg(i,s,o,u,l,f,y){if(null==f)i.removeAttribute(s,l,o);else{const w=null==y?fe(f):y(f,u||"",l);i.setAttribute(s,l,w,o)}}(s[11],y,f,i.value,o,u,l)}function FI(i,s,o,u,l,f){const y=f[s];if(null!==y){const w=u.setInput;for(let I=0;I<y.length;){const T=y[I++],M=y[I++],O=y[I++];null!==w?u.setInput(o,O,T,M):o[M]=O}}}function LI(i,s){let o=null,u=0;for(;u<s.length;){const l=s[u];if(0!==l)if(5!==l){if("number"==typeof l)break;i.hasOwnProperty(l)&&(null===o&&(o=[]),o.push(l,i[l],s[u+1])),u+=2}else u+=2;else u+=4}return o}function eh(i,s,o,u){return new Array(i,!0,!1,s,null,0,u,o,null,null)}function Or(i,s){const o=Ht(s,i);if(Fs(o)){const u=o[1];48&o[2]?Ua(u,o,u.template,o[8]):o[5]>0&&Of(o)}}function Of(i){for(let u=el(i);null!==u;u=tl(u))for(let l=10;l<u.length;l++){const f=u[l];if(Fs(f))if(512&f[2]){const y=f[1];Ua(y,f,y.template,f[8])}else f[5]>0&&Of(f)}const o=i[1].components;if(null!==o)for(let u=0;u<o.length;u++){const l=Ht(o[u],i);Fs(l)&&l[5]>0&&Of(l)}}function jw(i,s){const o=Ht(s,i),u=o[1];(function Rf(i,s){for(let o=s.length;o<i.blueprint.length;o++)s.push(i.blueprint[o])})(u,o),og(u,o,o[8])}function Qi(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function kf(i){for(;i;){i[2]|=32;const s=Ca(i);if(Rh(i)&&!s)return i;i=s}return null}function Pf(i,s,o,u=!0){const l=s[10];l.begin&&l.begin();try{Ua(i,s,i.template,o)}catch(y){throw u&&th(s,y),y}finally{l.end&&l.end()}}function hg(i,s,o){oa(0),s(i,o)}function By(i){return i[7]||(i[7]=[])}function Hw(i){return i.cleanup||(i.cleanup=[])}function th(i,s){const o=i[9],u=o?o.get(je,null):null;u&&u.handleError(s)}function Ff(i,s,o,u,l){for(let f=0;f<o.length;){const y=o[f++],w=o[f++],I=s[y],T=i.data[y];null!==T.setInput?T.setInput(I,l,u,w):I[w]=l}}function $a(i,s,o){const u=Jr(s,i);!function Vu(i,s,o){i.setValue(s,o)}(i[11],u,o)}function Lf(i,s,o){let u=o?i.styles:null,l=o?i.classes:null,f=0;if(null!==s)for(let y=0;y<s.length;y++){const w=s[y];"number"==typeof w?f=w:1==f?l=ve(l,w):2==f&&(u=ve(u,w+": "+s[++y]+";"))}o?i.styles=u:i.stylesWithoutHost=u,o?i.classes=l:i.classesWithoutHost=l}function nh(i,s,o,u,l=!1){for(;null!==o;){const f=s[o.index];if(null!==f&&u.push(yn(f)),Tr(f))for(let w=10;w<f.length;w++){const I=f[w],T=I[1].firstChild;null!==T&&nh(I[1],I,T,u)}const y=o.type;if(8&y)nh(i,s,o.child,u);else if(32&y){const w=bd(o,s);let I;for(;I=w();)u.push(I)}else if(16&y){const w=af(s,o);if(Array.isArray(w))u.push(...w);else{const I=Ca(s[16]);nh(I[1],I,w,u,!0)}}o=l?o.projectionNext:o.next}return u}class rh{constructor(s,o){this._lView=s,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,o=s[1];return nh(o,s,o.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Tr(s)){const o=s[8],u=o?o.indexOf(this):-1;u>-1&&(Aa(s,u),Do(o,u))}this._attachedToViewContainer=!1}Sd(this._lView[1],this._lView)}onDestroy(s){!function Fy(i,s,o,u){const l=By(s);null===o?l.push(u):(l.push(o),i.firstCreatePass&&Hw(i).push(u,l.length-1))}(this._lView[1],this._lView,null,s)}markForCheck(){kf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Pf(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Td(i,s){Uu(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Se(902,!1);this._appRef=s}}class UI extends rh{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;Pf(s[1],s,s[8],!1)}checkNoChanges(){}get context(){return null}}class fg extends Kp{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const o=Z(s);return new Bo(o,this.ngModule)}}function Gw(i){const s=[];for(let o in i)i.hasOwnProperty(o)&&s.push({propName:i[o],templateName:o});return s}class ih{constructor(s,o){this.injector=s,this.parentInjector=o}get(s,o,u){const l=this.injector.get(s,cl,u);return l!==cl||o===cl?l:this.parentInjector.get(s,o,u)}}class Bo extends mr{constructor(s,o){super(),this.componentDef=s,this.ngModule=o,this.componentType=s.type,this.selector=function Kn(i){return i.map(_w).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return Gw(this.componentDef.inputs)}get outputs(){return Gw(this.componentDef.outputs)}create(s,o,u,l){let f=(l=l||this.ngModule)instanceof Ki?l:l?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new ih(s,f):s,w=y.get(py,null);if(null===w)throw new Se(407,!1);const I=y.get(pw,null),T=w.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",O=u?function Qt(i,s,o){return i.selectRootElement(s,o===ot.ShadowDom)}(T,u,this.componentDef.encapsulation):fr(T,M,function jI(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(M)),H=this.componentDef.onPush?288:272,Q=xf(0,null,null,1,0,null,null,null,null,null),ye=Sf(null,Q,null,H,null,null,w,T,I,y,null);let ke,ze;_u(ye);try{const st=function di(i,s,o,u,l,f){const y=o[1];o[22]=i;const I=Yd(y,22,2,"#host",null),T=I.mergedAttrs=s.hostAttrs;null!==T&&(Lf(I,T,!0),null!==i&&(mo(l,i,T),null!==I.classes&&en(l,i,I.classes),null!==I.styles&&Gi(l,i,I.styles)));const M=u.createRenderer(i,s),O=Sf(o,Il(s),null,s.onPush?32:16,o[22],I,u,M,f||null,null,null);return y.firstCreatePass&&(hs($s(I,o),y,s.type),Xd(y,I),Ly(I,o.length,1)),Qi(o,O),o[22]=O}(O,this.componentDef,ye,w,T);if(O)if(u)mo(T,O,["ng-version",It.full]);else{const{attrs:_t,classes:Ce}=function Jp(i){const s=[],o=[];let u=1,l=2;for(;u<i.length;){let f=i[u];if("string"==typeof f)2===l?""!==f&&s.push(f,i[++u]):8===l&&o.push(f);else{if(!Gr(l))break;l=f}u++}return{attrs:s,classes:o}}(this.componentDef.selectors[0]);_t&&mo(T,O,_t),Ce&&Ce.length>0&&en(T,O,Ce.join(" "))}if(ze=Ps(Q,22),void 0!==o){const _t=ze.projection=[];for(let Ce=0;Ce<this.ngContentSelectors.length;Ce++){const Dt=o[Ce];_t.push(null!=Dt?Array.from(Dt):null)}}ke=function zI(i,s,o,u){const l=o[1],f=function Lw(i,s,o){const u=_n();i.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),Vy(i,u,s,Qd(i,s,1,null),o),Pw(i,u));const l=ps(s,i,u.directiveStart,u);Mr(l,s);const f=wr(u,s);return f&&Mr(f,s),l}(l,o,s);if(i[8]=o[8]=f,null!==u)for(const w of u)w(f,s);if(s.contentQueries){const w=_n();s.contentQueries(1,f,w.directiveStart)}const y=_n();return!l.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Vr(y.index),Vw(o[1],y,0,y.directiveStart,y.directiveEnd,s),Mf(s,f)),f}(st,this.componentDef,ye,[zw]),og(Q,ye,null)}finally{Vs()}return new $I(this.componentType,ke,ul(ze,ye),ye,ze)}}class $I extends class Ae{}{constructor(s,o,u,l,f){super(),this.location=u,this._rootLView=l,this._tNode=f,this.instance=o,this.hostView=this.changeDetectorRef=new UI(l),this.componentType=s}setInput(s,o){const u=this._tNode.inputs;let l;if(null!==u&&(l=u[s])){const f=this._rootLView;Ff(f[1],f,l,s,o),Jd(f,this._tNode.index)}}get injector(){return new zs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function zw(){const i=_n();Eu(Ie()[1],i)}function pg(i){let s=function ro(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),o=!0;const u=[i];for(;s;){let l;if(vr(i))l=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Se(903,!1);l=s.\u0275dir}if(l){if(o){u.push(l);const y=i;y.inputs=mg(i.inputs),y.declaredInputs=mg(i.declaredInputs),y.outputs=mg(i.outputs);const w=l.hostBindings;w&&KI(i,w);const I=l.viewQuery,T=l.contentQueries;if(I&&WI(i,I),T&&qI(i,T),ce(i.inputs,l.inputs),ce(i.declaredInputs,l.declaredInputs),ce(i.outputs,l.outputs),vr(l)&&l.data.animation){const M=i.data;M.animation=(M.animation||[]).concat(l.data.animation)}}const f=l.features;if(f)for(let y=0;y<f.length;y++){const w=f[y];w&&w.ngInherit&&w(i),w===pg&&(o=!1)}}s=Object.getPrototypeOf(s)}!function gg(i){let s=0,o=null;for(let u=i.length-1;u>=0;u--){const l=i[u];l.hostVars=s+=l.hostVars,l.hostAttrs=aa(l.hostAttrs,o=aa(o,l.hostAttrs))}}(u)}function mg(i){return i===Pr?{}:i===Tt?[]:i}function WI(i,s){const o=i.viewQuery;i.viewQuery=o?(u,l)=>{s(u,l),o(u,l)}:s}function qI(i,s){const o=i.contentQueries;i.contentQueries=o?(u,l,f)=>{s(u,l,f),o(u,l,f)}:s}function KI(i,s){const o=i.hostBindings;i.hostBindings=o?(u,l)=>{s(u,l),o(u,l)}:s}let yg=null;function bl(){if(!yg){const i=Jt.Symbol;if(i&&i.iterator)yg=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<s.length;++o){const u=s[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(yg=u)}}}return yg}function Vf(i){return!!Uy(i)&&(Array.isArray(i)||!(i instanceof Map)&&bl()in i)}function Uy(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ti(i,s,o){return!Object.is(i[s],o)&&(i[s]=o,!0)}function ec(i,s,o,u){const l=ti(i,s,o);return ti(i,s+1,u)||l}function Uf(i,s,o,u){const l=Ie();return ti(l,Ls(),s)&&(Vt(),no(an(),l,i,s,o,u)),Uf}function rc(i,s,o,u,l,f,y,w){const T=function Bf(i,s,o,u,l){const f=ec(i,s,o,u);return ti(i,s+2,l)||f}(i,function vi(){return bt.lFrame.bindingIndex}(),o,l,y);return Bi(3),T?s+fe(o)+u+fe(l)+f+fe(y)+w:ct}function Gy(i,s,o,u,l,f,y,w){const I=Ie(),T=Vt(),M=i+22,O=T.firstCreatePass?function Ww(i,s,o,u,l,f,y,w,I){const T=s.consts,M=Yd(s,i,4,y||null,oi(T,w));Dl(s,o,M,oi(T,I)),Eu(s,M);const O=M.tViews=xf(2,M,u,l,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,M),O.queries=s.queries.embeddedTView(M)),M}(M,T,I,s,o,u,l,f,y):T.data[M];Xr(O,!1);const H=I[11].createComment("");Is(T,I,H,O),Mr(H,I),Qi(I,I[M]=eh(H,I,H,O)),_c(O)&&ag(T,I,O),null!=y&&ug(I,O,w)}function za(i,s,o){const u=Ie();return ti(u,Ls(),s)&&function Ai(i,s,o,u,l,f,y,w){const I=wr(s,o);let M,T=s.inputs;!w&&null!=T&&(M=T[u])?(Ff(i,o,M,u,l),Qo(s)&&Jd(o,s.index)):3&s.type&&(u=function Ti(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(u),l=null!=y?y(l,s.value||"",u):l,f.setProperty(I,u,l))}(Vt(),an(),u,i,s,u[11],o,!1),za}function zy(i,s,o,u,l){const y=l?"class":"style";Ff(i,o,s.inputs[y],y,u)}function Eg(i,s,o,u){const l=Ie(),f=Vt(),y=22+i,w=l[11],I=l[y]=fr(w,s,function wu(){return bt.lFrame.currentNamespace}()),T=f.firstCreatePass?function qw(i,s,o,u,l,f,y){const w=s.consts,T=Yd(s,i,2,l,oi(w,f));return Dl(s,o,T,oi(w,y)),null!==T.attrs&&Lf(T,T.attrs,!1),null!==T.mergedAttrs&&Lf(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(y,f,l,0,s,o,u):f.data[y];Xr(T,!0);const M=T.mergedAttrs;null!==M&&mo(w,I,M);const O=T.classes;null!==O&&en(w,I,O);const H=T.styles;return null!==H&&Gi(w,I,H),64!=(64&T.flags)&&Is(f,l,I,T),0===function fu(){return bt.lFrame.elementDepthCount}()&&Mr(I,l),function pu(){bt.lFrame.elementDepthCount++}(),_c(T)&&(ag(f,l,T),function Py(i,s,o){if(su(s)){const l=s.directiveEnd;for(let f=s.directiveStart;f<l;f++){const y=i.data[f];y.contentQueries&&y.contentQueries(1,o[f],f)}}}(f,T,l)),null!==u&&ug(l,T),Eg}function Ig(){let i=_n();ta()?function na(){bt.lFrame.isParent=!1}():(i=i.parent,Xr(i,!1));const s=i;!function bc(){bt.lFrame.elementDepthCount--}();const o=Vt();return o.firstCreatePass&&(Eu(o,i),su(i)&&o.queries.elementEnd(i)),null!=s.classesWithoutHost&&function bu(i){return 0!=(16&i.flags)}(s)&&zy(o,s,Ie(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function od(i){return 0!=(32&i.flags)}(s)&&zy(o,s,Ie(),s.stylesWithoutHost,!1),Ig}function Wy(i,s,o,u){return Eg(i,s,o,u),Ig(),Wy}function Ky(i){return!!i&&"function"==typeof i.then}function Dg(i){return!!i&&"function"==typeof i.subscribe}const $f=Dg;function Zy(i,s,o,u){const l=Ie(),f=Vt(),y=_n();return function zf(i,s,o,u,l,f,y,w){const I=_c(u),M=i.firstCreatePass&&Hw(i),O=s[8],H=By(s);let Q=!0;if(3&u.type||w){const ze=wr(u,s),st=w?w(ze):ze,_t=H.length,Ce=w?tn=>w(yn(tn[u.index])):u.index;let Dt=null;if(!w&&I&&(Dt=function Gf(i,s,o,u){const l=i.cleanup;if(null!=l)for(let f=0;f<l.length-1;f+=2){const y=l[f];if(y===o&&l[f+1]===u){const w=s[7],I=l[f+2];return w.length>I?w[I]:null}"string"==typeof y&&(f+=2)}return null}(i,s,l,u.index)),null!==Dt)(Dt.__ngLastListenerFn__||Dt).__ngNextListenerFn__=f,Dt.__ngLastListenerFn__=f,Q=!1;else{f=Qy(u,s,O,f,!1);const tn=o.listen(st,l,f);H.push(f,tn),M&&M.push(l,Ce,_t,_t+1)}}else f=Qy(u,s,O,f,!1);const ye=u.outputs;let ke;if(Q&&null!==ye&&(ke=ye[l])){const ze=ke.length;if(ze)for(let st=0;st<ze;st+=2){const mn=s[ke[st]][ke[st+1]].subscribe(f),Gl=H.length;H.push(f,mn),M&&M.push(l,u.index,Gl,-(Gl+1))}}}(f,l,l[11],y,i,s,0,u),Zy}function uh(i,s,o,u){try{return!1!==o(u)}catch(l){return th(i,l),!1}}function Qy(i,s,o,u,l){return function f(y){if(y===Function)return u;kf(2&i.flags?Ht(i.index,s):s);let I=uh(s,0,u,y),T=f.__ngNextListenerFn__;for(;T;)I=uh(s,0,T,y)&&I,T=T.__ngNextListenerFn__;return l&&!1===I&&(y.preventDefault(),y.returnValue=!1),I}}function Qw(i,s,o,u,l){const f=i[o+1],y=null===s;let w=u?Cs(f):Pa(f),I=!1;for(;0!==w&&(!1===I||y);){const M=i[w+1];oD(i[w],s)&&(I=!0,i[w+1]=u?xy(M):Ty(M)),w=u?Cs(M):Pa(M)}I&&(i[o+1]=u?Ty(f):xy(f))}function oD(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&qs(i,s)>=0}function n_(i,s){return function so(i,s,o,u){const l=Ie(),f=Vt(),y=Bi(2);f.firstUpdatePass&&function r_(i,s,o,u){const l=i.data;if(null===l[o+1]){const f=l[Hn()],y=function iE(i,s){return s>=i.expandoStartIndex}(i,o);(function cE(i,s){return 0!=(i.flags&(s?16:32))})(f,u)&&null===s&&!y&&(s=!1),s=function i_(i,s,o,u){const l=function sa(i){const s=bt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=u?s.residualClasses:s.residualStyles;if(null===l)0===(u?s.classBindings:s.styleBindings)&&(o=Ml(o=Kf(null,i,s,o,u),s.attrs,u),f=null);else{const y=s.directiveStylingLast;if(-1===y||i[y]!==l)if(o=Kf(l,i,s,o,u),null===f){let I=function s_(i,s,o){const u=o?s.classBindings:s.styleBindings;if(0!==Pa(u))return i[Cs(u)]}(i,s,u);void 0!==I&&Array.isArray(I)&&(I=Kf(null,i,s,I[1],u),I=Ml(I,s.attrs,u),function qf(i,s,o,u){i[Cs(o?s.classBindings:s.styleBindings)]=u}(i,s,u,I))}else f=function Tg(i,s,o){let u;const l=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<l;f++)u=Ml(u,i[f].hostAttrs,o);return Ml(u,s.attrs,o)}(i,s,u)}return void 0!==f&&(u?s.residualClasses=f:s.residualStyles=f),o}(l,f,s,u),function iD(i,s,o,u,l,f){let y=f?s.classBindings:s.styleBindings,w=Cs(y),I=Pa(y);i[u]=o;let M,T=!1;if(Array.isArray(o)){const O=o;M=O[1],(null===M||qs(O,M)>0)&&(T=!0)}else M=o;if(l)if(0!==I){const H=Cs(i[w+1]);i[u+1]=vl(H,w),0!==H&&(i[H+1]=Ay(i[H+1],u)),i[w+1]=function zr(i,s){return 131071&i|s<<17}(i[w+1],u)}else i[u+1]=vl(w,0),0!==w&&(i[w+1]=Ay(i[w+1],u)),w=u;else i[u+1]=vl(I,0),0===w?w=u:i[I+1]=Ay(i[I+1],u),I=u;T&&(i[u+1]=Ty(i[u+1])),Qw(i,M,u,!0),Qw(i,M,u,!1),function sD(i,s,o,u,l){const f=l?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&qs(f,s)>=0&&(o[u+1]=xy(o[u+1]))}(s,M,i,u,f),y=vl(w,I),f?s.classBindings=y:s.styleBindings=y}(l,f,s,o,y,u)}}(f,i,y,u),s!==ct&&ti(l,y,s)&&function o_(i,s,o,u,l,f,y,w){if(!(3&s.type))return;const I=i.data,T=I[w+1];Sg(function Sy(i){return 1==(1&i)}(T)?Ag(I,s,o,l,Pa(T),y):void 0)||(Sg(f)||function Cy(i){return 2==(2&i)}(T)&&(f=Ag(I,null,o,l,w,y)),function Od(i,s,o,u,l){if(s)l?i.addClass(o,u):i.removeClass(o,u);else{let f=-1===u.indexOf("-")?void 0:$i.DashCase;null==l?i.removeStyle(o,u,f):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),f|=$i.Important),i.setStyle(o,u,l,f))}}(u,y,Jr(Hn(),o),l,f))}(f,f.data[Hn()],l,l[11],i,l[y+1]=function uE(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=le(function qn(i){return i instanceof class oe{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}?i.changingThisBreaksApplicationSecurity:i}(i)))),i}(s,o),u,y)}(i,s,null,!0),n_}function Kf(i,s,o,u,l){let f=null;const y=o.directiveEnd;let w=o.directiveStylingLast;for(-1===w?w=o.directiveStart:w++;w<y&&(f=s[w],u=Ml(u,f.hostAttrs,l),f!==i);)w++;return null!==i&&(o.directiveStylingLast=w),u}function Ml(i,s,o){const u=o?1:2;let l=-1;if(null!==s)for(let f=0;f<s.length;f++){const y=s[f];"number"==typeof y?l=y:l===u&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Hr(i,y,!!o||s[++f]))}return void 0===i?null:i}function Ag(i,s,o,u,l,f){const y=null===s;let w;for(;l>0;){const I=i[l],T=Array.isArray(I),M=T?I[1]:I,O=null===M;let H=o[l+1];H===ct&&(H=O?Tt:void 0);let Q=O?wa(H,u):M===u?H:void 0;if(T&&!Sg(Q)&&(Q=wa(I,u)),Sg(Q)&&(w=Q,y))return w;const ye=i[l+1];l=y?Cs(ye):Pa(ye)}if(null!==s){let I=f?s.residualClasses:s.residualStyles;null!=I&&(w=wa(I,u))}return w}function Sg(i){return void 0!==i}function a_(i,s=""){const o=Ie(),u=Vt(),l=i+22,f=u.firstCreatePass?Yd(u,l,1,s,null):u.data[l],y=o[l]=function Cd(i,s){return i.createText(s)}(o[11],s);Is(u,o,y,f),Xr(f,!1)}function u_(i){return Ya("",i,""),u_}function Ya(i,s,o){const u=Ie(),l=function tc(i,s,o,u){return ti(i,Ls(),o)?s+fe(o)+u:ct}(u,i,s,o);return l!==ct&&$a(u,Hn(),l),Ya}function Zf(i,s,o,u,l,f,y){const w=Ie(),I=rc(w,i,s,o,u,l,f,y);return I!==ct&&$a(w,Hn(),I),Zf}const oo=void 0;var dh=["en",[["a","p"],["AM","PM"],oo],[["AM","PM"],oo,oo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],oo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],oo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",oo,"{1} 'at' {0}",oo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function __(i){const o=Math.floor(Math.abs(i)),u=i.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let cc={};function Ol(i){const s=function bE(i){return i.toLowerCase().replace(/_/g,"-")}(i);let o=kg(s);if(o)return o;const u=s.split("-")[0];if(o=kg(u),o)return o;if("en"===u)return dh;throw new Se(701,!1)}function w_(i){return Ol(i)[lt.PluralCase]}function kg(i){return i in cc||(cc[i]=Jt.ng&&Jt.ng.common&&Jt.ng.common.locales&&Jt.ng.common.locales[i]),cc[i]}var lt=(()=>((lt=lt||{})[lt.LocaleId=0]="LocaleId",lt[lt.DayPeriodsFormat=1]="DayPeriodsFormat",lt[lt.DayPeriodsStandalone=2]="DayPeriodsStandalone",lt[lt.DaysFormat=3]="DaysFormat",lt[lt.DaysStandalone=4]="DaysStandalone",lt[lt.MonthsFormat=5]="MonthsFormat",lt[lt.MonthsStandalone=6]="MonthsStandalone",lt[lt.Eras=7]="Eras",lt[lt.FirstDayOfWeek=8]="FirstDayOfWeek",lt[lt.WeekendRange=9]="WeekendRange",lt[lt.DateFormat=10]="DateFormat",lt[lt.TimeFormat=11]="TimeFormat",lt[lt.DateTimeFormat=12]="DateTimeFormat",lt[lt.NumberSymbols=13]="NumberSymbols",lt[lt.NumberFormats=14]="NumberFormats",lt[lt.CurrencyCode=15]="CurrencyCode",lt[lt.CurrencySymbol=16]="CurrencySymbol",lt[lt.CurrencyName=17]="CurrencyName",lt[lt.Currencies=18]="Currencies",lt[lt.Directionality=19]="Directionality",lt[lt.PluralCase=20]="PluralCase",lt[lt.ExtraData=21]="ExtraData",lt))();const hh="en-US";let D_=hh;function K_(i,s,o,u,l){if(i=J(i),Array.isArray(i))for(let f=0;f<i.length;f++)K_(i[f],s,o,u,l);else{const f=Vt(),y=Ie();let w=Gu(i)?i:J(i.provide),I=zu(i);const T=_n(),M=1048575&T.providerIndexes,O=T.directiveStart,H=T.providerIndexes>>20;if(Gu(i)||!i.multi){const Q=new ds(I,l,zd),ye=tp(w,s,l?M:M+H,O);-1===ye?(hs($s(T,y),f,w),ep(f,i,s.length),s.push(w),T.directiveStart++,T.directiveEnd++,l&&(T.providerIndexes+=1048576),o.push(Q),y.push(Q)):(o[ye]=Q,y[ye]=Q)}else{const Q=tp(w,s,M+H,O),ye=tp(w,s,M,M+H),ke=Q>=0&&o[Q],ze=ye>=0&&o[ye];if(l&&!ze||!l&&!ke){hs($s(T,y),f,w);const st=function Q_(i,s,o,u,l){const f=new ds(i,o,zd);return f.multi=[],f.index=s,f.componentProviders=0,Z_(f,l,u&&!o),f}(l?PD:jE,o.length,l,u,I);!l&&ze&&(o[ye].providerFactory=st),ep(f,i,s.length,0),s.push(w),T.directiveStart++,T.directiveEnd++,l&&(T.providerIndexes+=1048576),o.push(st),y.push(st)}else ep(f,i,Q>-1?Q:ye,Z_(o[l?ye:Q],I,!l&&u));!l&&u&&ze&&o[ye].componentProviders++}}}function ep(i,s,o,u){const l=Gu(s),f=function cI(i){return!!i.useClass}(s);if(l||f){const I=(f?J(s.useClass):s).prototype.ngOnDestroy;if(I){const T=i.destroyHooks||(i.destroyHooks=[]);if(!l&&s.multi){const M=T.indexOf(o);-1===M?T.push(o,[u,I]):T[M+1].push(u,I)}else T.push(o,I)}}}function Z_(i,s,o){return o&&i.componentProviders++,i.multi.push(s)-1}function tp(i,s,o,u){for(let l=o;l<u;l++)if(s[l]===i)return l;return-1}function jE(i,s,o,u){return Y_(this.multi,[])}function PD(i,s,o,u){const l=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=ps(o,o[1],this.providerFactory.index,u);f=w.slice(0,y),Y_(l,f);for(let I=y;I<w.length;I++)f.push(w[I])}else f=[],Y_(l,f);return f}function Y_(i,s){for(let o=0;o<i.length;o++)s.push((0,i[o])());return s}function HE(i,s=[]){return o=>{o.providersResolver=(u,l)=>function q_(i,s,o){const u=Vt();if(u.firstCreatePass){const l=vr(i);K_(o,u.data,u.blueprint,l,!0),K_(s,u.data,u.blueprint,l,!1)}}(u,l?l(i):i,s)}}class lc{}function X_(i,s){return new ev(i,s??null)}class ev extends lc{constructor(s,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new fg(this);const u=function sn(i,s){const o=i[Yt]||null;if(!o&&!0===s)throw new Error(`Type ${le(i)} does not have '\u0275mod' property.`);return o}(s);this._bootstrapComponents=function Fo(i){return i instanceof Function?i():i}(u.bootstrap),this._r3Injector=Ud(s,o,[{provide:lc,useValue:this},{provide:Kp,useValue:this.componentFactoryResolver}],le(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class qg extends class J_{}{constructor(s){super(),this.moduleType=s}create(s){return new ev(this.moduleType,s)}}function Jg(i,s,o,u,l,f,y){const w=s+o;return ec(i,w,l,f)?function Uo(i,s,o){return i[s]=o}(i,w+2,y?u.call(y,l,f):u(l,f)):function vh(i,s){const o=i[s];return o===ct?void 0:o}(i,w+2)}function av(i,s){const o=Vt();let u;const l=i+22;o.firstCreatePass?(u=function tm(i,s){if(s)for(let o=s.length-1;o>=0;o--){const u=s[o];if(i===u.name)return u}}(s,o.pipeRegistry),o.data[l]=u,u.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(l,u.onDestroy)):u=o.data[l];const f=u.factory||(u.factory=_i(u.type)),y=Vn(zd);try{const w=la(!1),I=f();return la(w),function wg(i,s,o,u){o>=i.data.length&&(i.data[o]=null,i.blueprint[o]=null),s[o]=u}(o,Ie(),l,I),I}finally{Vn(y)}}function cv(i,s,o,u){const l=i+22,f=Ie(),y=function Li(i,s){return i[s]}(f,l);return function sp(i,s){return i[1].data[s].pure}(f,l)?Jg(f,function vn(){const i=bt.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}(),s,y.transform,o,u,y):y.transform(o,u)}function nm(i){return s=>{setTimeout(i,void 0,s)}}const $o=class WD extends g.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,o,u){let l=s,f=o||(()=>null),y=u;if(s&&"object"==typeof s){const I=s;l=I.next?.bind(I),f=I.error?.bind(I),y=I.complete?.bind(I)}this.__isAsync&&(f=nm(f),l&&(l=nm(l)),y&&(y=nm(y)));const w=super.subscribe({next:l,error:f,complete:y});return s instanceof X.w0&&s.add(w),w}};let op=(()=>{class i{}return i.__NG_ELEMENT_ID__=hv,i})();const qD=op,KD=class extends qD{constructor(s,o,u){super(),this._declarationLView=s,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(s,o){const u=this._declarationTContainer.tViews,l=Sf(this._declarationLView,u,s,16,null,u.declTNode,null,null,null,null,o||null);l[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(l[19]=y.createEmbeddedView(u)),og(u,l,s),new rh(l)}};function hv(){return function rm(i,s){return 4&i.type?new KD(s,i,ul(i,s)):null}(_n(),Ie())}let im=(()=>{class i{}return i.__NG_ELEMENT_ID__=Tn,i})();function Tn(){return function JE(i,s){let o;const u=s[i.index];if(Tr(u))o=u;else{let l;if(8&i.type)l=yn(u);else{const f=s[11];l=f.createComment("");const y=wr(i,s);No(f,Xs(f,y),l,function of(i,s){return i.nextSibling(s)}(f,y),!1)}s[i.index]=o=eh(u,s,l,i),Qi(s,o)}return new ZD(o,i,s)}(_n(),Ie())}const OC=im,ZD=class extends OC{constructor(s,o,u){super(),this._lContainer=s,this._hostTNode=o,this._hostLView=u}get element(){return ul(this._hostTNode,this._hostLView)}get injector(){return new zs(this._hostTNode,this._hostLView)}get parentInjector(){const s=Su(this._hostTNode,this._hostLView);if(ud(s)){const o=ca(s,this._hostLView),u=er(s);return new zs(o[1].data[u+8],o)}return new zs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const o=Qn(this._lContainer);return null!==o&&o[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,o,u){let l,f;"number"==typeof u?l=u:null!=u&&(l=u.index,f=u.injector);const y=s.createEmbeddedView(o||{},f);return this.insert(y,l),y}createComponent(s,o,u,l,f){const y=s&&!function Io(i){return"function"==typeof i}(s);let w;if(y)w=o;else{const O=o||{};w=O.index,u=O.injector,l=O.projectableNodes,f=O.environmentInjector||O.ngModuleRef}const I=y?s:new Bo(Z(s)),T=u||this.parentInjector;if(!f&&null==I.ngModule){const H=(y?T:this.parentInjector).get(Ki,null);H&&(f=H)}const M=I.create(T,l,void 0,f);return this.insert(M.hostView,w),M}insert(s,o){const u=s._lView,l=u[1];if(function lu(i){return Tr(i[3])}(u)){const M=this.indexOf(s);if(-1!==M)this.detach(M);else{const O=u[3],H=new ZD(O,O[6],O[3]);H.detach(H.indexOf(s))}}const f=this._adjustIndex(o),y=this._lContainer;!function Ta(i,s,o,u){const l=10+u,f=o.length;u>0&&(o[l-1][4]=s),u<f-10?(s[4]=o[l],$n(o,10+u,s)):(o.push(s),s[4]=null),s[3]=o;const y=s[17];null!==y&&o!==y&&function Fp(i,s){const o=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===o?i[9]=[s]:o.push(s)}(y,s);const w=s[19];null!==w&&w.insertView(i),s[2]|=64}(l,u,y,f);const w=uf(f,y),I=u[11],T=Xs(I,y[7]);return null!==T&&function nl(i,s,o,u,l,f){u[0]=l,u[6]=s,Uu(i,u,o,1,l,f)}(l,y[6],I,u,T,w),s.attachToViewContainerRef(),$n(sm(y),f,s),s}move(s,o){return this.insert(s,o)}indexOf(s){const o=Qn(this._lContainer);return null!==o?o.indexOf(s):-1}remove(s){const o=this._adjustIndex(s,-1),u=Aa(this._lContainer,o);u&&(Do(sm(this._lContainer),o),Sd(u[1],u))}detach(s){const o=this._adjustIndex(s,-1),u=Aa(this._lContainer,o);return u&&null!=Do(sm(this._lContainer),o)?new rh(u):null}_adjustIndex(s,o=0){return s??this.length+o}};function Qn(i){return i[8]}function sm(i){return i[8]||(i[8]=[])}function lp(...i){}const jl=new un("Application Initializer");let bh=(()=>{class i{constructor(o){this.appInits=o,this.resolve=lp,this.reject=lp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,l)=>{this.resolve=u,this.reject=l})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const f=this.appInits[l]();if(Ky(f))o.push(f);else if($f(f)){const y=new Promise((w,I)=>{f.subscribe({complete:w,error:I})});o.push(y)}}Promise.all(o).then(()=>{u()}).catch(l=>{this.reject(l)}),0===o.length&&u(),this.initialized=!0}}return i.\u0275fac=function(o){return new(o||i)(kn(jl,8))},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const db=new un("AppId",{providedIn:"root",factory:function hb(){return`${mm()}${mm()}${mm()}`}});function mm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const nu=new un("Platform Initializer"),fb=new un("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),pb=new un("appBootstrapListener"),ym=new un("LocaleId",{providedIn:"root",factory:()=>function Pn(i,s=Qe.Default){return"number"!=typeof s&&(s=0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)),kn(i,s)}(ym,Qe.Optional|Qe.SkipSelf)||function gb(){return typeof $localize<"u"&&$localize.locale||hh}()}),KC=new un("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"}),vm=(()=>Promise.resolve(0))();function bv(i){typeof Zone>"u"?vm.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Xi{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $o(!1),this.onMicrotaskEmpty=new $o(!1),this.onStable=new $o(!1),this.onError=new $o(!1),typeof Zone>"u")throw new Se(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!u&&o,l.shouldCoalesceRunChangeDetection=u,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function I0(){let i=Jt.requestAnimationFrame,s=Jt.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const o=i[Zone.__symbol__("OriginalDelegate")];o&&(i=o);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function D0(i){const s=()=>{!function fi(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Jt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,wm(i),i.isCheckStableRunning=!0,Mi(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),wm(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,l,f,y,w)=>{try{return Ch(i),o.invokeTask(l,f,y,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),Th(i)}},onInvoke:(o,u,l,f,y,w,I)=>{try{return Ch(i),o.invoke(l,f,y,w,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),Th(i)}},onHasTask:(o,u,l,f)=>{o.hasTask(l,f),u===l&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,wm(i),Mi(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(o,u,l,f)=>(o.handleError(l,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Xi.isInAngularZone())throw new Se(909,!1)}static assertNotInAngularZone(){if(Xi.isInAngularZone())throw new Se(909,!1)}run(s,o,u){return this._inner.run(s,o,u)}runTask(s,o,u,l){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+l,s,Hl,lp,lp);try{return f.runTask(y,o,u)}finally{f.cancelTask(y)}}runGuarded(s,o,u){return this._inner.runGuarded(s,o,u)}runOutsideAngular(s){return this._outer.run(s)}}const Hl={};function Mi(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function wm(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Ch(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Th(i){i._nesting--,Mi(i)}class pi{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new $o,this.onMicrotaskEmpty=new $o,this.onStable=new $o,this.onError=new $o}run(s,o,u){return s.apply(o,u)}runGuarded(s,o,u){return s.apply(o,u)}runOutsideAngular(s){return s()}runTask(s,o,u,l){return s.apply(o,u)}}const b0=new un(""),Em=new un("");let ru,Ah=(()=>{class i{constructor(o,u,l){this._ngZone=o,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ru||(function Cv(i){ru=i}(l),l.addToWindow(u)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Xi.assertNotInAngularZone(),bv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())bv(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,l){let f=-1;u&&u>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:f,updateCb:l})}whenStable(o,u,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,u,l){return[]}}return i.\u0275fac=function(o){return new(o||i)(kn(Xi),kn(hc),kn(Em))},i.\u0275prov=qt({token:i,factory:i.\u0275fac}),i})(),hc=(()=>{class i{constructor(){this._applications=new Map}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return ru?.findTestabilityInTree(this,o,u)??null}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),fc=null;const C0=new un("AllowMultipleToken"),Tv=new un("PlatformDestroyListeners");function S0(i,s,o=[]){const u=`Platform: ${s}`,l=new un(u);return(f=[])=>{let y=Sv();if(!y||y.injector.get(C0,!1)){const w=[...o,...f,{provide:l,useValue:!0}];i?i(w):function wb(i){if(fc&&!fc.get(C0,!1))throw new Se(400,!1);fc=i;const s=i.get(N0);(function A0(i){const s=i.get(nu,null);s&&s.forEach(o=>o())})(i)}(function M0(i=[],s){return pl.create({name:s,providers:[{provide:Ld,useValue:"platform"},{provide:Tv,useValue:new Set([()=>fc=null])},...i]})}(w,u))}return function x0(i){const s=Sv();if(!s)throw new Se(401,!1);return s}()}}function Sv(){return fc?.get(N0)??null}let N0=(()=>{class i{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const l=function R0(i,s){let o;return o="noop"===i?new pi:("zone.js"===i?void 0:i)||new Xi(s),o}(u?.ngZone,function O0(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(u)),f=[{provide:Xi,useValue:l}];return l.run(()=>{const y=pl.create({providers:f,parent:this.injector,name:o.moduleType.name}),w=o.create(y),I=w.injector.get(je,null);if(!I)throw new Se(402,!1);return l.runOutsideAngular(()=>{const T=l.onError.subscribe({next:M=>{I.handleError(M)}});w.onDestroy(()=>{fp(this._modules,w),T.unsubscribe()})}),function xv(i,s,o){try{const u=o();return Ky(u)?u.catch(l=>{throw s.runOutsideAngular(()=>i.handleError(l)),l}):u}catch(u){throw s.runOutsideAngular(()=>i.handleError(u)),u}}(I,l,()=>{const T=w.injector.get(bh);return T.runInitializers(),T.donePromise.then(()=>(function Rl(i){Pt(i,"Expected localeId to be defined"),"string"==typeof i&&(D_=i.toLowerCase().replace(/_/g,"-"))}(w.injector.get(ym,hh)||hh),this._moduleDoBootstrap(w),w))})})}bootstrapModule(o,u=[]){const l=Mv({},u);return function vb(i,s,o){const u=new qg(o);return Promise.resolve(u)}(0,0,o).then(f=>this.bootstrapModuleFactory(f,l))}_moduleDoBootstrap(o){const u=o.injector.get(hp);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(l=>u.bootstrap(l));else{if(!o.instance.ngDoBootstrap)throw new Se(403,!1);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Se(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(Tv,null);o&&(o.forEach(u=>u()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(o){return new(o||i)(kn(pl))},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Mv(i,s){return Array.isArray(s)?s.reduce(Mv,i):{...i,...s}}let hp=(()=>{class i{constructor(o,u,l){this._zone=o,this._injector=u,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new k.y(w=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{w.next(this._stable),w.complete()})}),y=new k.y(w=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{Xi.assertNotInAngularZone(),bv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,w.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{Xi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{w.next(!1)}))});return()=>{I.unsubscribe(),T.unsubscribe()}});this.isStable=(0,ue.T)(f,y.pipe((0,se.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(o,u){const l=o instanceof mr;if(!this._injector.get(bh).done)throw!l&&function Kt(i){const s=Z(i)||Ge(i)||ut(i);return null!==s&&s.standalone}(o),new Se(405,false);let y;y=l?o:this._injector.get(Kp).resolveComponentFactory(o),this.componentTypes.push(y.componentType);const w=function T0(i){return i.isBoundToModule}(y)?void 0:this._injector.get(lc),T=y.create(pl.NULL,[],u||y.selector,w),M=T.location.nativeElement,O=T.injector.get(b0,null);return O?.registerApplication(M),T.onDestroy(()=>{this.detachView(T.hostView),fp(this.components,T),O?.unregisterApplication(M)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new Se(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;fp(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(pb,[]).concat(this._bootstrapListeners).forEach(l=>l(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>fp(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new Se(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(o){return new(o||i)(kn(Xi),kn(Ki),kn(je))},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function fp(i,s){const o=i.indexOf(s);o>-1&&i.splice(o,1)}let bb=!0,k0=!1;function Nv(){return k0=!0,bb}function JC(){if(k0)throw new Error("Cannot enable prod mode after platform setup.");bb=!1}let eT=(()=>{class i{}return i.__NG_ELEMENT_ID__=tT,i})();function tT(i){return function nT(i,s,o){if(Qo(i)&&!o){const u=Ht(i.index,s);return new rh(u,u)}return 47&i.type?new rh(s[16],s):null}(_n(),Ie(),16==(16&i))}class Lv{constructor(){}supports(s){return Vf(s)}create(s){return new Cm(s)}}const Vv=(i,s)=>s;class Cm{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||Vv}forEachItem(s){let o;for(o=this._itHead;null!==o;o=o._next)s(o)}forEachOperation(s){let o=this._itHead,u=this._removalsHead,l=0,f=null;for(;o||u;){const y=!u||o&&o.currentIndex<V0(u,l,f)?o:u,w=V0(y,l,f),I=y.currentIndex;if(y===u)l--,u=u._nextRemoved;else if(o=o._next,null==y.previousIndex)l++;else{f||(f=[]);const T=w-l,M=I-l;if(T!=M){for(let H=0;H<T;H++){const Q=H<f.length?f[H]:f[H]=0,ye=Q+H;M<=ye&&ye<T&&(f[H]=Q+1)}f[y.previousIndex]=M-T}}w!==I&&s(y,w,I)}}forEachPreviousItem(s){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachMovedItem(s){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}forEachIdentityChange(s){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)s(o)}diff(s){if(null==s&&(s=[]),!Vf(s))throw new Se(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,f,y,o=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)f=s[w],y=this._trackByFn(w,f),null!==o&&Object.is(o.trackById,y)?(u&&(o=this._verifyReinsertion(o,f,y,w)),Object.is(o.item,f)||this._addIdentityChange(o,f)):(o=this._mismatch(o,f,y,w),u=!0),o=o._next}else l=0,function XI(i,s){if(Array.isArray(i))for(let o=0;o<i.length;o++)s(i[o]);else{const o=i[bl()]();let u;for(;!(u=o.next()).done;)s(u.value)}}(s,w=>{y=this._trackByFn(l,w),null!==o&&Object.is(o.trackById,y)?(u&&(o=this._verifyReinsertion(o,w,y,l)),Object.is(o.item,w)||this._addIdentityChange(o,w)):(o=this._mismatch(o,w,y,l),u=!0),o=o._next,l++}),this.length=l;return this._truncate(o),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,o,u,l){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._reinsertAfter(s,f,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,l))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._moveAfter(s,f,l)):s=this._addAfter(new Bv(o,u),f,l),s}_verifyReinsertion(s,o,u,l){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==f?s=this._reinsertAfter(f,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const o=s._next;this._addToRemovals(this._unlink(s)),s=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,f=s._nextRemoved;return null===l?this._removalsHead=f:l._nextRemoved=f,null===f?this._removalsTail=l:f._prevRemoved=l,this._insertAfter(s,o,u),this._addToMoves(s,u),s}_moveAfter(s,o,u){return this._unlink(s),this._insertAfter(s,o,u),this._addToMoves(s,u),s}_addAfter(s,o,u){return this._insertAfter(s,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,o,u){const l=null===o?this._itHead:o._next;return s._next=l,s._prev=o,null===l?this._itTail=s:l._prev=s,null===o?this._itHead=s:o._next=s,null===this._linkedRecords&&(this._linkedRecords=new L0),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const o=s._prev,u=s._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,s}_addToMoves(s,o){return s.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new L0),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,o){return s.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class Bv{constructor(s,o){this.item=s,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Uv{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const o=s._prevDup,u=s._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class L0{constructor(){this.map=new Map}put(s){const o=s.trackById;let u=this.map.get(o);u||(u=new Uv,this.map.set(o,u)),u.add(s)}get(s,o){const l=this.map.get(s);return l?l.get(s,o):null}remove(s){const o=s.trackById;return this.map.get(o).remove(s)&&this.map.delete(o),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function V0(i,s,o){const u=i.previousIndex;if(null===u)return u;let l=0;return o&&u<o.length&&(l=o[u]),u+s+l}class B0{constructor(){}supports(s){return s instanceof Map||Uy(s)}create(){return new Ab}}class Ab{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let o;for(o=this._mapHead;null!==o;o=o._next)s(o)}forEachPreviousItem(s){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)s(o)}forEachChangedItem(s){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}diff(s){if(s){if(!(s instanceof Map||Uy(s)))throw new Se(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,l)=>{if(o&&o.key===l)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const f=this._getOrCreateRecordForKey(l,u);o=this._insertBeforeOrAppend(o,f)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,o){if(s){const u=s._prev;return o._next=s,o._prev=u,s._prev=o,u&&(u._next=o),s===this._mapHead&&(this._mapHead=o),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(s,o){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,o);const f=l._prev,y=l._next;return f&&(f._next=y),y&&(y._prev=f),l._next=null,l._prev=null,l}const u=new Sb(s);return this._records.set(s,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,o){Object.is(o,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=o,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,o){s instanceof Map?s.forEach(o):Object.keys(s).forEach(u=>o(s[u],u))}}class Sb{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Sh(){return new Tm([new Lv])}let Tm=(()=>{class i{constructor(o){this.factories=o}static create(o,u){if(null!=u){const l=u.factories.slice();o=o.concat(l)}return new i(o)}static extend(o){return{provide:i,useFactory:u=>i.create(o,u||Sh()),deps:[[i,new ee,new P]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(null!=u)return u;throw new Se(901,!1)}}return i.\u0275prov=qt({token:i,providedIn:"root",factory:Sh}),i})();function Hv(){return new $v([new B0])}let $v=(()=>{class i{constructor(o){this.factories=o}static create(o,u){if(u){const l=u.factories.slice();o=o.concat(l)}return new i(o)}static extend(o){return{provide:i,useFactory:u=>i.create(o,u||Hv()),deps:[[i,new ee,new P]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(u)return u;throw new Se(901,!1)}}return i.\u0275prov=qt({token:i,providedIn:"root",factory:Hv}),i})();const Gv=S0(null,"core",[]);let U0=(()=>{class i{constructor(o){}}return i.\u0275fac=function(o){return new(o||i)(kn(hp))},i.\u0275mod=Nt({type:i}),i.\u0275inj=At({}),i})();function zv(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(ht,Te,F)=>{F.d(Te,{Z:()=>Se});var g=F(2090),X=F(4859),k=F(9681),ue=F(1877);class se{constructor(fe,de){this._delegate=fe,this.firebase=de,(0,k._addComponent)(fe,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this._delegate.automaticDataCollectionEnabled=fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(fe=>{this._delegate.checkDestroyed(),fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(fe,de=k._DEFAULT_ENTRY_NAME){var Ye;this._delegate.checkDestroyed();const Xe=this._delegate.container.getProvider(fe);return!Xe.isInitialized()&&"EXPLICIT"===(null===(Ye=Xe.getComponent())||void 0===Ye?void 0:Ye.instantiationMode)&&Xe.initialize(),Xe.getImmediate({identifier:de})}_removeServiceInstance(fe,de=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(fe).clearInstance(de)}_addComponent(fe){(0,k._addComponent)(this._delegate,fe)}_addOrOverwriteComponent(fe){(0,k._addOrOverwriteComponent)(this._delegate,fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ce=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function ve(){const Ke=function le(Ke){const fe={},de={__esModule:!0,initializeApp:function be(Ue,V={}){const pe=k.initializeApp(Ue,V);if((0,g.r3)(fe,pe.name))return fe[pe.name];const W=new Ke(pe,de);return fe[pe.name]=W,W},app:Xe,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function we(Ue){const V=Ue.name,pe=V.replace("-compat","");if(k._registerComponent(Ue)&&"PUBLIC"===Ue.type){const W=(Y=Xe())=>{if("function"!=typeof Y[pe])throw ce.create("invalid-app-argument",{appName:V});return Y[pe]()};void 0!==Ue.serviceProps&&(0,g.ZB)(W,Ue.serviceProps),de[pe]=W,Ke.prototype[pe]=function(...Y){return this._getService.bind(this,V).apply(this,Ue.multipleInstances?Y:[])}}return"PUBLIC"===Ue.type?de[pe]:null},removeApp:function Ye(Ue){delete fe[Ue]},useAsService:function Be(Ue,V){return"serverAuth"===V?null:V},modularAPIs:k}};function Xe(Ue){if(!(0,g.r3)(fe,Ue=Ue||k._DEFAULT_ENTRY_NAME))throw ce.create("no-app",{appName:Ue});return fe[Ue]}return de.default=de,Object.defineProperty(de,"apps",{get:function me(){return Object.keys(fe).map(Ue=>fe[Ue])}}),Xe.App=Ke,de}(se);return Ke.INTERNAL=Object.assign(Object.assign({},Ke.INTERNAL),{createFirebaseNamespace:ve,extendNamespace:function fe(de){(0,g.ZB)(Ke,de)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Ke}(),j=new ue.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ke=self.firebase.SDK_VERSION;Ke&&Ke.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Se=U;!function Ne(Ke){(0,k.registerVersion)("@firebase/app-compat","0.1.39",Ke)}()},9681:(ht,Te,F)=>{F.r(Te),F.d(Te,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>xs,_DEFAULT_ENTRY_NAME:()=>Pt,_addComponent:()=>Gt,_addOrOverwriteComponent:()=>qt,_apps:()=>Xt,_clearComponents:()=>ts,_components:()=>ln,_getProvider:()=>At,_registerComponent:()=>Dr,_removeServiceInstance:()=>nn,deleteApp:()=>Ko,getApp:()=>Kr,getApps:()=>Zr,initializeApp:()=>ii,onLog:()=>ns,registerVersion:()=>_r,setLogLevel:()=>Vn});var g=F(5861),X=F(4859),k=F(1877),ue=F(2090),se=F(8766);class he{constructor(De){this.container=De}getPlatformInfoString(){return this.container.getProviders().map(et=>{if(function ce(tt){return"VERSION"===tt.getComponent()?.type}(et)){const Et=et.getImmediate();return`${Et.library}/${Et.version}`}return null}).filter(et=>et).join(" ")}}const le="@firebase/app",U=new k.Yd("@firebase/app"),Pt="[DEFAULT]",Ze={[le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Xt=new Map,ln=new Map;function Gt(tt,De){try{tt.container.addComponent(De)}catch(et){U.debug(`Component ${De.name} failed to register with FirebaseApp ${tt.name}`,et)}}function qt(tt,De){tt.container.addOrOverwriteComponent(De)}function Dr(tt){const De=tt.name;if(ln.has(De))return U.debug(`There were multiple attempts to register component ${De}.`),!1;ln.set(De,tt);for(const et of Xt.values())Gt(et,tt);return!0}function At(tt,De){const et=tt.container.getProvider("heartbeat").getImmediate({optional:!0});return et&&et.triggerHeartbeat(),tt.container.getProvider(De)}function nn(tt,De,et=Pt){At(tt,De).clearInstance(et)}function ts(){ln.clear()}const br=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class kr{constructor(De,et,Et){this._isDeleted=!1,this._options=Object.assign({},De),this._config=Object.assign({},et),this._name=et.name,this._automaticDataCollectionEnabled=et.automaticDataCollectionEnabled,this._container=Et,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this.checkDestroyed(),this._automaticDataCollectionEnabled=De}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(De){this._isDeleted=De}checkDestroyed(){if(this.isDeleted)throw br.create("app-deleted",{appName:this._name})}}const xs="9.14.0";function ii(tt,De={}){let et=tt;"object"!=typeof De&&(De={name:De});const Et=Object.assign({name:Pt,automaticDataCollectionEnabled:!1},De),vt=Et.name;if("string"!=typeof vt||!vt)throw br.create("bad-app-name",{appName:String(vt)});if(et||(et=(0,ue.aH)()),!et)throw br.create("no-options");const Nt=Xt.get(vt);if(Nt){if((0,ue.vZ)(et,Nt.options)&&(0,ue.vZ)(Et,Nt.config))return Nt;throw br.create("duplicate-app",{appName:vt})}const B=new X.H0(vt);for(const q of ln.values())B.addComponent(q);const L=new kr(et,Et,B);return Xt.set(vt,L),L}function Kr(tt=Pt){const De=Xt.get(tt);if(!De&&tt===Pt)return ii();if(!De)throw br.create("no-app",{appName:tt});return De}function Zr(){return Array.from(Xt.values())}function Ko(tt){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,g.Z)(function*(tt){const De=tt.name;Xt.has(De)&&(Xt.delete(De),yield Promise.all(tt.container.getProviders().map(et=>et.delete())),tt.isDeleted=!0)})).apply(this,arguments)}function _r(tt,De,et){var Et;let vt=null!==(Et=Ze[tt])&&void 0!==Et?Et:tt;et&&(vt+=`-${et}`);const Nt=vt.match(/\s|\//),B=De.match(/\s|\//);if(Nt||B){const L=[`Unable to register library "${vt}" with version "${De}":`];return Nt&&L.push(`library name "${vt}" contains illegal characters (whitespace or "/")`),Nt&&B&&L.push("and"),B&&L.push(`version name "${De}" contains illegal characters (whitespace or "/")`),void U.warn(L.join(" "))}Dr(new X.wA(`${vt}-version`,()=>({library:vt,version:De}),"VERSION"))}function ns(tt,De){if(null!==tt&&"function"!=typeof tt)throw br.create("invalid-log-argument");(0,k.Am)(tt,De)}function Vn(tt){(0,k.Ub)(tt)}const An="firebase-heartbeat-store";let Mn=null;function on(){return Mn||(Mn=(0,se.X3)("firebase-heartbeat-database",1,{upgrade:(tt,De)=>{0===De&&tt.createObjectStore(An)}}).catch(tt=>{throw br.create("idb-open",{originalErrorMessage:tt.message})})),Mn}function ot(){return(ot=(0,g.Z)(function*(tt){var De;try{return(yield on()).transaction(An).objectStore(An).get(Nn(tt))}catch(et){if(et instanceof ue.ZR)U.warn(et.message);else{const Et=br.create("idb-get",{originalErrorMessage:null===(De=et)||void 0===De?void 0:De.message});U.warn(Et.message)}}})).apply(this,arguments)}function Jt(tt,De){return sr.apply(this,arguments)}function sr(){return(sr=(0,g.Z)(function*(tt,De){var et;try{const vt=(yield on()).transaction(An,"readwrite");return yield vt.objectStore(An).put(De,Nn(tt)),vt.done}catch(Et){if(Et instanceof ue.ZR)U.warn(Et.message);else{const vt=br.create("idb-set",{originalErrorMessage:null===(et=Et)||void 0===et?void 0:et.message});U.warn(vt.message)}}})).apply(this,arguments)}function Nn(tt){return`${tt.name}!${tt.options.appId}`}class rs{constructor(De){this.container=De,this._heartbeatsCache=null;const et=this.container.getProvider("app").getImmediate();this._storage=new Yt(et),this._heartbeatsCachePromise=this._storage.read().then(Et=>(this._heartbeatsCache=Et,Et))}triggerHeartbeat(){var De=this;return(0,g.Z)(function*(){const Et=De.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),vt=Zt();if(null===De._heartbeatsCache&&(De._heartbeatsCache=yield De._heartbeatsCachePromise),De._heartbeatsCache.lastSentHeartbeatDate!==vt&&!De._heartbeatsCache.heartbeats.some(Nt=>Nt.date===vt))return De._heartbeatsCache.heartbeats.push({date:vt,agent:Et}),De._heartbeatsCache.heartbeats=De._heartbeatsCache.heartbeats.filter(Nt=>{const B=new Date(Nt.date).valueOf();return Date.now()-B<=2592e6}),De._storage.overwrite(De._heartbeatsCache)})()}getHeartbeatsHeader(){var De=this;return(0,g.Z)(function*(){if(null===De._heartbeatsCache&&(yield De._heartbeatsCachePromise),null===De._heartbeatsCache||0===De._heartbeatsCache.heartbeats.length)return"";const et=Zt(),{heartbeatsToSend:Et,unsentEntries:vt}=function mi(tt,De=1024){const et=[];let Et=tt.slice();for(const vt of tt){const Nt=et.find(B=>B.agent===vt.agent);if(Nt){if(Nt.dates.push(vt.date),Bn(et)>De){Nt.dates.pop();break}}else if(et.push({agent:vt.agent,dates:[vt.date]}),Bn(et)>De){et.pop();break}Et=Et.slice(1)}return{heartbeatsToSend:et,unsentEntries:Et}}(De._heartbeatsCache.heartbeats),Nt=(0,ue.L)(JSON.stringify({version:2,heartbeats:Et}));return De._heartbeatsCache.lastSentHeartbeatDate=et,vt.length>0?(De._heartbeatsCache.heartbeats=vt,yield De._storage.overwrite(De._heartbeatsCache)):(De._heartbeatsCache.heartbeats=[],De._storage.overwrite(De._heartbeatsCache)),Nt})()}}function Zt(){return(new Date).toISOString().substring(0,10)}class Yt{constructor(De){this.app=De,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,ue.hl)()&&(0,ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var De=this;return(0,g.Z)(function*(){return(yield De._canUseIndexedDBPromise)&&(yield function gt(tt){return ot.apply(this,arguments)}(De.app))||{heartbeats:[]}})()}overwrite(De){var et=this;return(0,g.Z)(function*(){var Et;if(yield et._canUseIndexedDBPromise){const Nt=yield et.read();return Jt(et.app,{lastSentHeartbeatDate:null!==(Et=De.lastSentHeartbeatDate)&&void 0!==Et?Et:Nt.lastSentHeartbeatDate,heartbeats:De.heartbeats})}})()}add(De){var et=this;return(0,g.Z)(function*(){var Et;if(yield et._canUseIndexedDBPromise){const Nt=yield et.read();return Jt(et.app,{lastSentHeartbeatDate:null!==(Et=De.lastSentHeartbeatDate)&&void 0!==Et?Et:Nt.lastSentHeartbeatDate,heartbeats:[...Nt.heartbeats,...De.heartbeats]})}})()}}function Bn(tt){return(0,ue.L)(JSON.stringify({version:2,heartbeats:tt})).length}!function Cr(tt){Dr(new X.wA("platform-logger",De=>new he(De),"PRIVATE")),Dr(new X.wA("heartbeat",De=>new rs(De),"PRIVATE")),_r(le,"0.8.4",tt),_r(le,"0.8.4","esm2017"),_r("fire-js","")}("")},4859:(ht,Te,F)=>{F.d(Te,{H0:()=>le,wA:()=>k});var g=F(5861),X=F(2090);class k{constructor(U,j,J){this.name=U,this.instanceFactory=j,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const ue="[DEFAULT]";class se{constructor(U,j){this.name=U,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const j=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(j)){const J=new X.BH;if(this.instancesDeferred.set(j,J),this.isInitialized(j)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:j});He&&J.resolve(He)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate(U){var j;const J=this.normalizeInstanceIdentifier(U?.identifier),He=null!==(j=U?.optional)&&void 0!==j&&j;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Ne){if(He)return null;throw Ne}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if(function ce(ve){return"EAGER"===ve.instantiationMode}(U))try{this.getOrInitializeService({instanceIdentifier:ue})}catch{}for(const[j,J]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(j);try{const Ne=this.getOrInitializeService({instanceIdentifier:He});J.resolve(Ne)}catch{}}}}clearInstance(U=ue){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,g.Z)(function*(){const j=Array.from(U.instances.values());yield Promise.all([...j.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...j.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=ue){return this.instances.has(U)}getOptions(U=ue){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:j={}}=U,J=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:J,options:j});for(const[Ne,Se]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(Ne)&&Se.resolve(He);return He}onInit(U,j){var J;const He=this.normalizeInstanceIdentifier(j),Ne=null!==(J=this.onInitCallbacks.get(He))&&void 0!==J?J:new Set;Ne.add(U),this.onInitCallbacks.set(He,Ne);const Se=this.instances.get(He);return Se&&U(Se,He),()=>{Ne.delete(U)}}invokeOnInitCallbacks(U,j){const J=this.onInitCallbacks.get(j);if(J)for(const He of J)try{He(U,j)}catch{}}getOrInitializeService({instanceIdentifier:U,options:j={}}){let J=this.instances.get(U);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(ve=U,ve===ue?void 0:ve),options:j}),this.instances.set(U,J),this.instancesOptions.set(U,j),this.invokeOnInitCallbacks(J,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,J)}catch{}var ve;return J||null}normalizeInstanceIdentifier(U=ue){return this.component?this.component.multipleInstances?U:ue:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class le{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const j=this.getProvider(U.name);if(j.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);j.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const j=new se(U,this);return this.providers.set(U,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(ht,Te,F)=>{F.d(Te,{Am:()=>ve,Ub:()=>le,Yd:()=>ce,in:()=>X});const g=[];var X=(()=>{return(U=X||(X={}))[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",X;var U})();const k={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},ue=X.INFO,se={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},he=(U,j,...J)=>{if(j<U.logLevel)return;const He=(new Date).toISOString(),Ne=se[j];if(!Ne)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Ne](`[${He}]  ${U.name}:`,...J)};class ce{constructor(j){this.name=j,this._logLevel=ue,this._logHandler=he,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in X))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?k[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...j),this._logHandler(this,X.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...j),this._logHandler(this,X.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,X.INFO,...j),this._logHandler(this,X.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,X.WARN,...j),this._logHandler(this,X.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...j),this._logHandler(this,X.ERROR,...j)}}function le(U){g.forEach(j=>{j.setLogLevel(U)})}function ve(U,j){for(const J of g){let He=null;j&&j.level&&(He=k[j.level]),J.userLogHandler=null===U?null:(Ne,Se,...Ke)=>{const fe=Ke.map(de=>{if(null==de)return null;if("string"==typeof de)return de;if("number"==typeof de||"boolean"==typeof de)return de.toString();if(de instanceof Error)return de.message;try{return JSON.stringify(de)}catch{return null}}).filter(de=>de).join(" ");Se>=(He??Ne.logLevel)&&U({level:X[Se].toLowerCase(),message:fe,args:Ke,type:Ne.name})}}}},8766:(ht,Te,F)=>{F.d(Te,{Lj:()=>be,X3:()=>Xe});var g=F(5861);let k,ue;const ce=new WeakMap,le=new WeakMap,ve=new WeakMap,U=new WeakMap,j=new WeakMap;let Ne={get(V,pe,W){if(V instanceof IDBTransaction){if("done"===pe)return le.get(V);if("objectStoreNames"===pe)return V.objectStoreNames||ve.get(V);if("store"===pe)return W.objectStoreNames[1]?void 0:W.objectStore(W.objectStoreNames[0])}return de(V[pe])},set:(V,pe,W)=>(V[pe]=W,!0),has:(V,pe)=>V instanceof IDBTransaction&&("done"===pe||"store"===pe)||pe in V};function fe(V){return"function"==typeof V?function Ke(V){return V!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function he(){return ue||(ue=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(V)?function(...pe){return V.apply(Ye(this),pe),de(ce.get(this))}:function(...pe){return de(V.apply(Ye(this),pe))}:function(pe,...W){const Y=V.call(Ye(this),pe,...W);return ve.set(Y,pe.sort?pe.sort():[pe]),de(Y)}}(V):(V instanceof IDBTransaction&&function He(V){if(le.has(V))return;const pe=new Promise((W,Y)=>{const re=()=>{V.removeEventListener("complete",te),V.removeEventListener("error",Re),V.removeEventListener("abort",Re)},te=()=>{W(),re()},Re=()=>{Y(V.error||new DOMException("AbortError","AbortError")),re()};V.addEventListener("complete",te),V.addEventListener("error",Re),V.addEventListener("abort",Re)});le.set(V,pe)}(V),((V,pe)=>pe.some(W=>V instanceof W))(V,function se(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(V,Ne):V)}function de(V){if(V instanceof IDBRequest)return function J(V){const pe=new Promise((W,Y)=>{const re=()=>{V.removeEventListener("success",te),V.removeEventListener("error",Re)},te=()=>{W(de(V.result)),re()},Re=()=>{Y(V.error),re()};V.addEventListener("success",te),V.addEventListener("error",Re)});return pe.then(W=>{W instanceof IDBCursor&&ce.set(W,V)}).catch(()=>{}),j.set(pe,V),pe}(V);if(U.has(V))return U.get(V);const pe=fe(V);return pe!==V&&(U.set(V,pe),j.set(pe,V)),pe}const Ye=V=>j.get(V);function Xe(V,pe,{blocked:W,upgrade:Y,blocking:re,terminated:te}={}){const Re=indexedDB.open(V,pe),Oe=de(Re);return Y&&Re.addEventListener("upgradeneeded",at=>{Y(de(Re.result),at.oldVersion,at.newVersion,de(Re.transaction))}),W&&Re.addEventListener("blocked",()=>W()),Oe.then(at=>{te&&at.addEventListener("close",()=>te()),re&&at.addEventListener("versionchange",()=>re())}).catch(()=>{}),Oe}function be(V,{blocked:pe}={}){const W=indexedDB.deleteDatabase(V);return pe&&W.addEventListener("blocked",()=>pe()),de(W).then(()=>{})}const me=["get","getKey","getAll","getAllKeys","count"],we=["put","add","delete","clear"],Be=new Map;function Ue(V,pe){if(!(V instanceof IDBDatabase)||pe in V||"string"!=typeof pe)return;if(Be.get(pe))return Be.get(pe);const W=pe.replace(/FromIndex$/,""),Y=pe!==W,re=we.includes(W);if(!(W in(Y?IDBIndex:IDBObjectStore).prototype)||!re&&!me.includes(W))return;const te=function(){var Re=(0,g.Z)(function*(Oe,...at){const Wt=this.transaction(Oe,re?"readwrite":"readonly");let Pt=Wt.store;return Y&&(Pt=Pt.index(at.shift())),(yield Promise.all([Pt[W](...at),re&&Wt.done]))[0]});return function(at){return Re.apply(this,arguments)}}();return Be.set(pe,te),te}!function Se(V){Ne=V(Ne)}(V=>({...V,get:(pe,W,Y)=>Ue(pe,W)||V.get(pe,W,Y),has:(pe,W)=>!!Ue(pe,W)||V.has(pe,W)}))},5861:(ht,Te,F)=>{function g(k,ue,se,he,ce,le,ve){try{var U=k[le](ve),j=U.value}catch(J){return void se(J)}U.done?ue(j):Promise.resolve(j).then(he,ce)}function X(k){return function(){var ue=this,se=arguments;return new Promise(function(he,ce){var le=k.apply(ue,se);function ve(j){g(le,he,ce,ve,U,"next",j)}function U(j){g(le,he,ce,ve,U,"throw",j)}ve(void 0)})}}F.d(Te,{Z:()=>X})}},ht=>{ht(ht.s=5064)}]);