"use strict";(self.webpackChunkcountryTrivia=self.webpackChunkcountryTrivia||[]).push([[179],{2011:(mt,Me,V)=>{V.d(Me,{Dh:()=>de,GT:()=>me,cc:()=>Oe,hO:()=>We,on:()=>$,pX:()=>ae,xv:()=>be});var g=V(4650),j=V(127),N=V(2680);mt=V.hmd(mt);const se=["ngOnDestroy"],ae=(pe,$e,Ge,xe={})=>new Proxy(pe,{get:(Te,we)=>Ge.runOutsideAngular(()=>{var Ze;if(pe[we])return!(null===(Ze=xe?.spy)||void 0===Ze)&&Ze.get&&xe.spy.get(we,pe[we]),pe[we];if(se.indexOf(we)>-1)return()=>{};const te=$e.toPromise().then(ue=>{const fe=ue&&ue[we];return"function"==typeof fe?fe.bind(ue):fe&&fe.then?fe.then(q=>Ge.run(()=>q)):Ge.run(()=>fe)});return new Proxy(()=>{},{get:(ue,fe)=>te[fe],apply:(ue,fe,q)=>te.then(Y=>{var le;const ie=Y&&Y(...q);return!(null===(le=xe?.spy)||void 0===le)&&le.apply&&xe.spy.apply(we,q,ie),ie})})})}),me=(pe,$e)=>{$e.forEach(Ge=>{Object.getOwnPropertyNames(Ge.prototype||Ge).forEach(xe=>{Object.defineProperty(pe.prototype,xe,Object.getOwnPropertyDescriptor(Ge.prototype||Ge,xe))})})};class ve{constructor($e){return $e}}const de=new g.OlP("angularfire2.app.options"),be=new g.OlP("angularfire2.app.name");function $(pe,$e,Ge){const Te="object"==typeof Ge&&Ge||{};Te.name=Te.name||"string"==typeof Ge&&Ge||"[DEFAULT]";const Ze=j.Z.apps.filter(te=>te&&te.name===Te.name)[0]||$e.runOutsideAngular(()=>j.Z.initializeApp(pe,Te));try{JSON.stringify(pe)!==JSON.stringify(Ze.options)&&G("error",`${Ze.name} Firebase App already initialized with different options${mt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ve(Ze)}const G=(pe,...$e)=>{(0,g.X6Q)()&&typeof console<"u"&&console[pe](...$e)},J={provide:ve,useFactory:$,deps:[de,g.R0b,[new g.FiY,be]]};let We=(()=>{class pe{constructor(Ge){j.Z.registerVersion("angularfire",N.q4.full,"core"),j.Z.registerVersion("angularfire",N.q4.full,"app-compat"),j.Z.registerVersion("angular",g.q4F.full,Ge.toString())}static initializeApp(Ge,xe){return{ngModule:pe,providers:[{provide:de,useValue:Ge},{provide:be,useValue:xe}]}}}return pe.\u0275fac=function(Ge){return new(Ge||pe)(g.LFG(g.Lbi))},pe.\u0275mod=g.oAB({type:pe}),pe.\u0275inj=g.cJS({providers:[J]}),pe})();function Oe(pe,$e,Ge,xe,Te){const[,we,Ze]=globalThis.\u0275AngularfireInstanceCache.find(te=>te[0]===pe)||[];if(we)return function Pe(pe,$e){try{return pe.toString()===$e.toString()}catch{return pe===$e}}(Te,Ze)||(ye("error",`${$e} was already initialized on the ${Ge} Firebase App with different settings.${Ke?" You may need to reload as Firebase is not HMR aware.":""}`),ye("warn",{is:Te,was:Ze})),we;{const te=xe();return globalThis.\u0275AngularfireInstanceCache.push([pe,te,Te]),te}}const Ke=!!mt.hot,ye=(pe,...$e)=>{(0,g.X6Q)()&&typeof console<"u"&&console[pe](...$e)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2680:(mt,Me,V)=>{V.d(Me,{q4:()=>uu,iC:()=>Ps,HU:()=>Eo,vb:()=>Et,JM:()=>os,u3:()=>fh});var g=V(4650),j=V(5867),N=V(5861),se=V(9681),ae=V(2090),me=V(4859),ve=V(1877),de=V(8766);const be="@firebase/installations",$="0.5.16",J=`w:${$}`,We="FIS_v2",$e=new ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ge(I){return I instanceof ae.ZR&&I.code.includes("request-failed")}function xe({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Te(I){return{token:I.token,requestStatus:2,expiresIn:Y(I.expiresIn),creationTime:Date.now()}}function we(I,D){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,N.Z)(function*(I,D){const O=(yield D.json()).error;return $e.create("request-failed",{requestName:I,serverCode:O.code,serverMessage:O.message,serverStatus:O.status})})).apply(this,arguments)}function te({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function ue(I,{refreshToken:D}){const S=te(I);return S.append("Authorization",function le(I){return`${We} ${I}`}(D)),S}function fe(I){return q.apply(this,arguments)}function q(){return(q=(0,N.Z)(function*(I){const D=yield I();return D.status>=500&&D.status<600?I():D})).apply(this,arguments)}function Y(I){return Number(I.replace("s","000"))}function ie(I,D){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,N.Z)(function*({appConfig:I,heartbeatServiceProvider:D},{fid:S}){const O=xe(I),Z=te(I),re=D.getImmediate({optional:!0});if(re){const st=yield re.getHeartbeatsHeader();st&&Z.append("x-firebase-client",st)}const je={method:"POST",headers:Z,body:JSON.stringify({fid:S,authVersion:We,appId:I.appId,sdkVersion:J})},Xe=yield fe(()=>fetch(O,je));if(Xe.ok){const st=yield Xe.json();return{fid:st.fid||S,registrationStatus:2,refreshToken:st.refreshToken,authToken:Te(st.authToken)}}throw yield we("Create Installation",Xe)})).apply(this,arguments)}function Le(I){return new Promise(D=>{setTimeout(D,I)})}const Qt=/^[cdef][\w-]{21}$/;function ze(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const S=function nn(I){return function ct(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Qt.test(S)?S:""}catch{return""}}function dn(I){return`${I.appName}!${I.appId}`}const Kt=new Map;function Zt(I,D){const S=dn(I);mr(S,D),function Ti(I,D){const S=function In(){return!Dr&&"BroadcastChannel"in self&&(Dr=new BroadcastChannel("[Firebase] FID Change"),Dr.onmessage=I=>{mr(I.data.key,I.data.fid)}),Dr}();S&&S.postMessage({key:I,fid:D}),function Si(){0===Kt.size&&Dr&&(Dr.close(),Dr=null)}()}(S,D)}function mr(I,D){const S=Kt.get(I);if(S)for(const O of S)O(D)}let Dr=null;const Ln="firebase-installations-store";let ei=null;function Mi(){return ei||(ei=(0,de.X3)("firebase-installations-database",1,{upgrade:(I,D)=>{0===D&&I.createObjectStore(Ln)}})),ei}function Je(I,D){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,N.Z)(function*(I,D){const S=dn(I),Z=(yield Mi()).transaction(Ln,"readwrite"),re=Z.objectStore(Ln),De=yield re.get(S);return yield re.put(D,S),yield Z.done,(!De||De.fid!==D.fid)&&Zt(I,D.fid),D})).apply(this,arguments)}function Vn(I){return ln.apply(this,arguments)}function ln(){return(ln=(0,N.Z)(function*(I){const D=dn(I),O=(yield Mi()).transaction(Ln,"readwrite");yield O.objectStore(Ln).delete(D),yield O.done})).apply(this,arguments)}function rr(I,D){return ys.apply(this,arguments)}function ys(){return(ys=(0,N.Z)(function*(I,D){const S=dn(I),Z=(yield Mi()).transaction(Ln,"readwrite"),re=Z.objectStore(Ln),De=yield re.get(S),je=D(De);return void 0===je?yield re.delete(S):yield re.put(je,S),yield Z.done,je&&(!De||De.fid!==je.fid)&&Zt(I,je.fid),je})).apply(this,arguments)}function hn(I){return fn.apply(this,arguments)}function fn(){return(fn=(0,N.Z)(function*(I){let D;const S=yield rr(I.appConfig,O=>{const Z=un(O),re=dt(I,Z);return D=re.registrationPromise,re.installationEntry});return""===S.fid?{installationEntry:yield D}:{installationEntry:S,registrationPromise:D}})).apply(this,arguments)}function un(I){return Ct(I||{fid:ze(),registrationStatus:0})}function dt(I,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject($e.create("app-offline"))};const S={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},O=function ht(I,D){return bt.apply(this,arguments)}(I,S);return{installationEntry:S,registrationPromise:O}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:Pr(I)}:{installationEntry:D}}function bt(){return(bt=(0,N.Z)(function*(I,D){try{const S=yield ie(I,D);return Je(I.appConfig,S)}catch(S){throw Ge(S)&&409===S.customData.serverCode?yield Vn(I.appConfig):yield Je(I.appConfig,{fid:D.fid,registrationStatus:0}),S}})).apply(this,arguments)}function Pr(I){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,N.Z)(function*(I){let D=yield yr(I.appConfig);for(;1===D.registrationStatus;)yield Le(100),D=yield yr(I.appConfig);if(0===D.registrationStatus){const{installationEntry:S,registrationPromise:O}=yield hn(I);return O||S}return D})).apply(this,arguments)}function yr(I){return rr(I,D=>{if(!D)throw $e.create("installation-not-found");return Ct(D)})}function Ct(I){return function Ar(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function kt(I,D){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,N.Z)(function*({appConfig:I,heartbeatServiceProvider:D},S){const O=Wt(I,S),Z=ue(I,S),re=D.getImmediate({optional:!0});if(re){const st=yield re.getHeartbeatsHeader();st&&Z.append("x-firebase-client",st)}const je={method:"POST",headers:Z,body:JSON.stringify({installation:{sdkVersion:J,appId:I.appId}})},Xe=yield fe(()=>fetch(O,je));if(Xe.ok)return Te(yield Xe.json());throw yield we("Generate Auth Token",Xe)})).apply(this,arguments)}function Wt(I,{fid:D}){return`${xe(I)}/${D}/authTokens:generate`}function Yn(I){return vn.apply(this,arguments)}function vn(){return(vn=(0,N.Z)(function*(I,D=!1){let S;const O=yield rr(I.appConfig,re=>{if(!$t(re))throw $e.create("not-registered");const De=re.authToken;if(!D&&H(De))return re;if(1===De.requestStatus)return S=et(I,D),re;{if(!navigator.onLine)throw $e.create("app-offline");const je=K(re);return S=yt(I,je),je}});return S?yield S:O.authToken})).apply(this,arguments)}function et(I,D){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,N.Z)(function*(I,D){let S=yield tt(I.appConfig);for(;1===S.authToken.requestStatus;)yield Le(100),S=yield tt(I.appConfig);const O=S.authToken;return 0===O.requestStatus?Yn(I,D):O})).apply(this,arguments)}function tt(I){return rr(I,D=>{if(!$t(D))throw $e.create("not-registered");return function B(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function yt(I,D){return vt.apply(this,arguments)}function vt(){return(vt=(0,N.Z)(function*(I,D){try{const S=yield kt(I,D),O=Object.assign(Object.assign({},D),{authToken:S});return yield Je(I.appConfig,O),S}catch(S){if(!Ge(S)||401!==S.customData.serverCode&&404!==S.customData.serverCode){const O=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Je(I.appConfig,O)}else yield Vn(I.appConfig);throw S}})).apply(this,arguments)}function $t(I){return void 0!==I&&2===I.registrationStatus}function H(I){return 2===I.requestStatus&&!function U(I){const D=Date.now();return D<I.creationTime||I.creationTime+I.expiresIn<D+36e5}(I)}function K(I){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:D})}function L(){return(L=(0,N.Z)(function*(I){const D=I,{installationEntry:S,registrationPromise:O}=yield hn(D);return O?O.catch(console.error):Yn(D).catch(console.error),S.fid})).apply(this,arguments)}function ke(){return(ke=(0,N.Z)(function*(I,D=!1){const S=I;return yield rt(S),(yield Yn(S,D)).token})).apply(this,arguments)}function rt(I){return it.apply(this,arguments)}function it(){return(it=(0,N.Z)(function*(I){const{registrationPromise:D}=yield hn(I);D&&(yield D)})).apply(this,arguments)}function vs(I){return $e.create("missing-app-config-values",{valueName:I})}const zs="installations",_s=I=>{const D=I.getProvider("app").getImmediate(),S=function pn(I){if(!I||!I.options)throw vs("App Configuration");if(!I.name)throw vs("App Name");const D=["projectId","apiKey","appId"];for(const S of D)if(!I.options[S])throw vs(S);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(D);return{app:D,appConfig:S,heartbeatServiceProvider:(0,se._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},ws=I=>{const D=I.getProvider("app").getImmediate(),S=(0,se._getProvider)(D,zs).getImmediate();return{getId:()=>function M(I){return L.apply(this,arguments)}(S),getToken:Z=>function ee(I){return ke.apply(this,arguments)}(S,Z)}};(function Ga(){(0,se._registerComponent)(new me.wA(zs,_s,"PUBLIC")),(0,se._registerComponent)(new me.wA("installations-internal",ws,"PRIVATE"))})(),(0,se.registerVersion)(be,$),(0,se.registerVersion)(be,$,"esm2017");const Ni="@firebase/remote-config",Un=new ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Uu{constructor(D,S,O,Z){this.client=D,this.storage=S,this.storageCache=O,this.logger=Z}isCachedDataFresh(D,S){if(!S)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const O=Date.now()-S,Z=O<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${O}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${Z}.`),Z}fetch(D){var S=this;return(0,N.Z)(function*(){const[O,Z]=yield Promise.all([S.storage.getLastSuccessfulFetchTimestampMillis(),S.storage.getLastSuccessfulFetchResponse()]);if(Z&&S.isCachedDataFresh(D.cacheMaxAgeMillis,O))return Z;D.eTag=Z&&Z.eTag;const re=yield S.client.fetch(D),De=[S.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===re.status&&De.push(S.storage.setLastSuccessfulFetchResponse(re)),yield Promise.all(De),re})()}}function zo(I=navigator){return I.languages&&I.languages[0]||I.language}class Ds{constructor(D,S,O,Z,re,De){this.firebaseInstallations=D,this.sdkVersion=S,this.namespace=O,this.projectId=Z,this.apiKey=re,this.appId=De}fetch(D){var S=this;return(0,N.Z)(function*(){var O,Z,re;const[De,je]=yield Promise.all([S.firebaseInstallations.getId(),S.firebaseInstallations.getToken()]),st=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${S.projectId}/namespaces/${S.namespace}:fetch?key=${S.apiKey}`,Pt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},_t={sdk_version:S.sdkVersion,app_instance_id:De,app_instance_id_token:je,app_id:S.appId,language_code:zo()},bn={method:"POST",headers:Pt,body:JSON.stringify(_t)},wn=fetch(st,bn),fa=new Promise((gi,cs)=>{D.signal.addEventListener(()=>{const mi=new Error("The operation was aborted.");mi.name="AbortError",cs(mi)})});let Io;try{yield Promise.race([wn,fa]),Io=yield wn}catch(gi){let cs="fetch-client-network";throw"AbortError"===(null===(O=gi)||void 0===O?void 0:O.name)&&(cs="fetch-timeout"),Un.create(cs,{originalErrorMessage:null===(Z=gi)||void 0===Z?void 0:Z.message})}let us=Io.status;const dl=Io.headers.get("ETag")||void 0;let hl,ls;if(200===Io.status){let gi;try{gi=yield Io.json()}catch(cs){throw Un.create("fetch-client-parse",{originalErrorMessage:null===(re=cs)||void 0===re?void 0:re.message})}hl=gi.entries,ls=gi.state}if("INSTANCE_STATE_UNSPECIFIED"===ls?us=500:"NO_CHANGE"===ls?us=304:("NO_TEMPLATE"===ls||"EMPTY_CONFIG"===ls)&&(hl={}),304!==us&&200!==us)throw Un.create("fetch-status",{httpStatus:us});return{status:us,eTag:dl,config:hl}})()}}class Ri{constructor(D,S){this.client=D,this.storage=S}fetch(D){var S=this;return(0,N.Z)(function*(){const O=(yield S.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return S.attemptFetch(D,O)})()}attemptFetch(D,{throttleEndTimeMillis:S,backoffCount:O}){var Z=this;return(0,N.Z)(function*(){yield function qr(I,D){return new Promise((S,O)=>{const Z=Math.max(D-Date.now(),0),re=setTimeout(S,Z);I.addEventListener(()=>{clearTimeout(re),O(Un.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,S);try{const re=yield Z.client.fetch(D);return yield Z.storage.deleteThrottleMetadata(),re}catch(re){if(!function kf(I){if(!(I instanceof ae.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}(re))throw re;const De={throttleEndTimeMillis:Date.now()+(0,ae.$s)(O),backoffCount:O+1};return yield Z.storage.setThrottleMetadata(De),Z.attemptFetch(D,De)}})()}}class Pf{constructor(D,S,O,Z,re){this.app=D,this._client=S,this._storageCache=O,this._storage=Z,this._logger=re,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function qo(I,D){var S;const O=I.target.error||void 0;return Un.create(D,{originalErrorMessage:O&&(null===(S=O)||void 0===S?void 0:S.message)})}const Ks="app_namespace_store";class ju{constructor(D,S,O,Z=function Of(){return new Promise((I,D)=>{var S;try{const O=indexedDB.open("firebase_remote_config",1);O.onerror=Z=>{D(qo(Z,"storage-open"))},O.onsuccess=Z=>{I(Z.target.result)},O.onupgradeneeded=Z=>{0===Z.oldVersion&&Z.target.result.createObjectStore(Ks,{keyPath:"compositeKey"})}}catch(O){D(Un.create("storage-open",{originalErrorMessage:null===(S=O)||void 0===S?void 0:S.message}))}})}()){this.appId=D,this.appName=S,this.namespace=O,this.openDbPromise=Z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var S=this;return(0,N.Z)(function*(){const O=yield S.openDbPromise;return new Promise((Z,re)=>{var De;const Xe=O.transaction([Ks],"readonly").objectStore(Ks),st=S.createCompositeKey(D);try{const Pt=Xe.get(st);Pt.onerror=_t=>{re(qo(_t,"storage-get"))},Pt.onsuccess=_t=>{const bn=_t.target.result;Z(bn?bn.value:void 0)}}catch(Pt){re(Un.create("storage-get",{originalErrorMessage:null===(De=Pt)||void 0===De?void 0:De.message}))}})})()}set(D,S){var O=this;return(0,N.Z)(function*(){const Z=yield O.openDbPromise;return new Promise((re,De)=>{var je;const st=Z.transaction([Ks],"readwrite").objectStore(Ks),Pt=O.createCompositeKey(D);try{const _t=st.put({compositeKey:Pt,value:S});_t.onerror=bn=>{De(qo(bn,"storage-set"))},_t.onsuccess=()=>{re()}}catch(_t){De(Un.create("storage-set",{originalErrorMessage:null===(je=_t)||void 0===je?void 0:je.message}))}})})()}delete(D){var S=this;return(0,N.Z)(function*(){const O=yield S.openDbPromise;return new Promise((Z,re)=>{var De;const Xe=O.transaction([Ks],"readwrite").objectStore(Ks),st=S.createCompositeKey(D);try{const Pt=Xe.delete(st);Pt.onerror=_t=>{re(qo(_t,"storage-delete"))},Pt.onsuccess=()=>{Z()}}catch(Pt){re(Un.create("storage-delete",{originalErrorMessage:null===(De=Pt)||void 0===De?void 0:De.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Zs{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,N.Z)(function*(){const S=D.storage.getLastFetchStatus(),O=D.storage.getLastSuccessfulFetchTimestampMillis(),Z=D.storage.getActiveConfig(),re=yield S;re&&(D.lastFetchStatus=re);const De=yield O;De&&(D.lastSuccessfulFetchTimestampMillis=De);const je=yield Z;je&&(D.activeConfig=je)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function sm(){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,N.Z)(function*(){if(!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch{return!1}})).apply(this,arguments)}!function gc(){(0,se._registerComponent)(new me.wA("remote-config",function I(D,{instanceIdentifier:S}){const O=D.getProvider("app").getImmediate(),Z=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Un.create("registration-window");if(!(0,ae.hl)())throw Un.create("indexed-db-unavailable");const{projectId:re,apiKey:De,appId:je}=O.options;if(!re)throw Un.create("registration-project-id");if(!De)throw Un.create("registration-api-key");if(!je)throw Un.create("registration-app-id");const Xe=new ju(je,O.name,S=S||"firebase"),st=new Zs(Xe),Pt=new ve.Yd(Ni);Pt.logLevel=ve.in.ERROR;const _t=new Ds(Z,se.SDK_VERSION,S,re,De,je),bn=new Ri(_t,Xe),wn=new Uu(bn,Xe,st,Pt),fa=new Pf(O,wn,st,Xe,Pt);return function Qn(I){const D=(0,ae.m9)(I);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(fa),fa},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(Ni,"0.3.15"),(0,se.registerVersion)(Ni,"0.3.15","esm2017")}();const ar="/firebase-messaging-sw.js",Qs="/firebase-cloud-messaging-push-scope",Ji="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",$a="google.c.a.c_id",Hu="google.c.a.c_l",vc="google.c.a.ts",Xs="google.c.a.e";var Kr=(()=>{return(I=Kr||(Kr={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Kr;var I})();function Oi(I){const D=new Uint8Array(I);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Fr(I){const S=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),O=atob(S),Z=new Uint8Array(O.length);for(let re=0;re<O.length;++re)Z[re]=O.charCodeAt(re);return Z}const bs="fcm_token_details_db",Js="fcm_token_object_Store";function Ff(I){return Gu.apply(this,arguments)}function Gu(){return Gu=(0,N.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(re=>re.name).includes(bs))return null;let D=null;return(yield(0,de.X3)(bs,5,{upgrade:(O=(0,N.Z)(function*(Z,re,De,je){var Xe;if(re<2||!Z.objectStoreNames.contains(Js))return;const st=je.objectStore(Js),Pt=yield st.index("fcmSenderId").get(I);if(yield st.clear(),Pt)if(2===re){const _t=Pt;if(!_t.auth||!_t.p256dh||!_t.endpoint)return;D={token:_t.fcmToken,createTime:null!==(Xe=_t.createTime)&&void 0!==Xe?Xe:Date.now(),subscriptionOptions:{auth:_t.auth,p256dh:_t.p256dh,endpoint:_t.endpoint,swScope:_t.swScope,vapidKey:"string"==typeof _t.vapidKey?_t.vapidKey:Oi(_t.vapidKey)}}}else if(3===re){const _t=Pt;D={token:_t.fcmToken,createTime:_t.createTime,subscriptionOptions:{auth:Oi(_t.auth),p256dh:Oi(_t.p256dh),endpoint:_t.endpoint,swScope:_t.swScope,vapidKey:Oi(_t.vapidKey)}}}else if(4===re){const _t=Pt;D={token:_t.fcmToken,createTime:_t.createTime,subscriptionOptions:{auth:Oi(_t.auth),p256dh:Oi(_t.p256dh),endpoint:_t.endpoint,swScope:_t.swScope,vapidKey:Oi(_t.vapidKey)}}}}),function(re,De,je,Xe){return O.apply(this,arguments)})})).close(),yield(0,de.Lj)(bs),yield(0,de.Lj)("fcm_vapid_details_db"),yield(0,de.Lj)("undefined"),Dn(D)?D:null;var O}),Gu.apply(this,arguments)}function Dn(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:D}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const ni="firebase-messaging-store";let ir=null;function za(){return ir||(ir=(0,de.X3)("firebase-messaging-database",1,{upgrade:(I,D)=>{0===D&&I.createObjectStore(ni)}})),ir}function eo(I){return ci.apply(this,arguments)}function ci(){return(ci=(0,N.Z)(function*(I){const D=Zr(I),O=yield(yield za()).transaction(ni).objectStore(ni).get(D);if(O)return O;{const Z=yield Ff(I.appConfig.senderId);if(Z)return yield Xt(I,Z),Z}})).apply(this,arguments)}function Xt(I,D){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,N.Z)(function*(I,D){const S=Zr(I),Z=(yield za()).transaction(ni,"readwrite");return yield Z.objectStore(ni).put(D,S),yield Z.done,D})).apply(this,arguments)}function es(I){return $u.apply(this,arguments)}function $u(){return($u=(0,N.Z)(function*(I){const D=Zr(I),O=(yield za()).transaction(ni,"readwrite");yield O.objectStore(ni).delete(D),yield O.done})).apply(this,arguments)}function Zr({appConfig:I}){return I.appId}const xn=new ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function St(I,D){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,N.Z)(function*(I,D){var S;const O=yield Xo(I),Z=Ae(D),re={method:"POST",headers:O,body:JSON.stringify(Z)};let De;try{De=yield(yield fetch(As(I.appConfig),re)).json()}catch(je){throw xn.create("token-subscribe-failed",{errorInfo:null===(S=je)||void 0===S?void 0:S.toString()})}if(De.error)throw xn.create("token-subscribe-failed",{errorInfo:De.error.message});if(!De.token)throw xn.create("token-subscribe-no-token");return De.token})).apply(this,arguments)}function Vf(I,D){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,N.Z)(function*(I,D){var S;const O=yield Xo(I),Z=Ae(D.subscriptionOptions),re={method:"PATCH",headers:O,body:JSON.stringify(Z)};let De;try{De=yield(yield fetch(`${As(I.appConfig)}/${D.token}`,re)).json()}catch(je){throw xn.create("token-update-failed",{errorInfo:null===(S=je)||void 0===S?void 0:S.toString()})}if(De.error)throw xn.create("token-update-failed",{errorInfo:De.error.message});if(!De.token)throw xn.create("token-update-no-token");return De.token})).apply(this,arguments)}function _c(I,D){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,N.Z)(function*(I,D){var S;const Z={method:"DELETE",headers:yield Xo(I)};try{const De=yield(yield fetch(`${As(I.appConfig)}/${D}`,Z)).json();if(De.error)throw xn.create("token-unsubscribe-failed",{errorInfo:De.error.message})}catch(re){throw xn.create("token-unsubscribe-failed",{errorInfo:null===(S=re)||void 0===S?void 0:S.toString()})}})).apply(this,arguments)}function As({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Xo(I){return to.apply(this,arguments)}function to(){return(to=(0,N.Z)(function*({appConfig:I,installations:D}){const S=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${S}`})})).apply(this,arguments)}function Ae({p256dh:I,auth:D,endpoint:S,vapidKey:O}){const Z={web:{endpoint:S,auth:D,p256dh:I}};return O!==Ji&&(Z.web.applicationPubKey=O),Z}const Gt=6048e5;function Bf(I){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,N.Z)(function*(I){const D=yield Jd(I.swRegistration,I.vapidKey),S={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:D.endpoint,auth:Oi(D.getKey("auth")),p256dh:Oi(D.getKey("p256dh"))},O=yield eo(I.firebaseDependencies);if(O){if(Uf(O.subscriptionOptions,S))return Date.now()>=O.createTime+Gt?qa(I,{token:O.token,createTime:Date.now(),subscriptionOptions:S}):O.token;try{yield _c(I.firebaseDependencies,O.token)}catch(Z){console.warn(Z)}return Ka(I.firebaseDependencies,S)}return Ka(I.firebaseDependencies,S)})).apply(this,arguments)}function $n(I){return no.apply(this,arguments)}function no(){return(no=(0,N.Z)(function*(I){const D=yield eo(I.firebaseDependencies);D&&(yield _c(I.firebaseDependencies,D.token),yield es(I.firebaseDependencies));const S=yield I.swRegistration.pushManager.getSubscription();return!S||S.unsubscribe()})).apply(this,arguments)}function qa(I,D){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,N.Z)(function*(I,D){try{const S=yield Vf(I.firebaseDependencies,D),O=Object.assign(Object.assign({},D),{token:S,createTime:Date.now()});return yield Xt(I.firebaseDependencies,O),S}catch(S){throw yield $n(I),S}})).apply(this,arguments)}function Ka(I,D){return ro.apply(this,arguments)}function ro(){return(ro=(0,N.Z)(function*(I,D){const O={token:yield St(I,D),createTime:Date.now(),subscriptionOptions:D};return yield Xt(I,O),O.token})).apply(this,arguments)}function Jd(I,D){return ea.apply(this,arguments)}function ea(){return(ea=(0,N.Z)(function*(I,D){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Fr(D)})})).apply(this,arguments)}function Uf(I,D){return D.vapidKey===I.vapidKey&&D.endpoint===I.endpoint&&D.auth===I.auth&&D.p256dh===I.p256dh}function Ts(I){const D={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function zn(I,D){if(!D.notification)return;I.notification={};const S=D.notification.title;S&&(I.notification.title=S);const O=D.notification.body;O&&(I.notification.body=O);const Z=D.notification.image;Z&&(I.notification.image=Z);const re=D.notification.icon;re&&(I.notification.icon=re)}(D,I),function di(I,D){!D.data||(I.data=D.data)}(D,I),function ta(I,D){var S,O,Z,re,De;if(!(D.fcmOptions||null!==(S=D.notification)&&void 0!==S&&S.click_action))return;I.fcmOptions={};const je=null!==(Z=null===(O=D.fcmOptions)||void 0===O?void 0:O.link)&&void 0!==Z?Z:null===(re=D.notification)||void 0===re?void 0:re.click_action;je&&(I.fcmOptions.link=je);const Xe=null===(De=D.fcmOptions)||void 0===De?void 0:De.analytics_label;Xe&&(I.fcmOptions.analyticsLabel=Xe)}(D,I),D}function na(I){return"object"==typeof I&&!!I&&$a in I}function Fi(I,D){const S=[];for(let O=0;O<I.length;O++)S.push(I.charAt(O)),O<D.length&&S.push(D.charAt(O));return S.join("")}function zu(I){return xn.create("missing-app-config-values",{valueName:I})}Fi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Fi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Cc{constructor(D,S,O){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Z=function wc(I){if(!I||!I.options)throw zu("App Configuration Object");if(!I.name)throw zu("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:S}=I;for(const O of D)if(!S[O])throw zu(O);return{appName:I.name,projectId:S.projectId,apiKey:S.apiKey,appId:S.appId,senderId:S.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:Z,installations:S,analyticsProvider:O}}_delete(){return Promise.resolve()}}function eh(I){return io.apply(this,arguments)}function io(){return(io=(0,N.Z)(function*(I){var D;try{I.swRegistration=yield navigator.serviceWorker.register(ar,{scope:Qs}),I.swRegistration.update().catch(()=>{})}catch(S){throw xn.create("failed-service-worker-registration",{browserErrorMessage:null===(D=S)||void 0===D?void 0:D.message})}})).apply(this,arguments)}function qu(I,D){return ra.apply(this,arguments)}function ra(){return(ra=(0,N.Z)(function*(I,D){if(!D&&!I.swRegistration&&(yield eh(I)),D||!I.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw xn.create("invalid-sw-registration");I.swRegistration=D}})).apply(this,arguments)}function Ku(I,D){return ia.apply(this,arguments)}function ia(){return(ia=(0,N.Z)(function*(I,D){D?I.vapidKey=D:I.vapidKey||(I.vapidKey=Ji)})).apply(this,arguments)}function so(){return(so=(0,N.Z)(function*(I,D){if(!navigator)throw xn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw xn.create("permission-blocked");return yield Ku(I,D?.vapidKey),yield qu(I,D?.serviceWorkerRegistration),Bf(I)})).apply(this,arguments)}function th(I,D,S){return sa.apply(this,arguments)}function sa(){return(sa=(0,N.Z)(function*(I,D,S){const O=nh(D);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(O,{message_id:S[$a],message_name:S[Hu],message_time:S[vc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function nh(I){switch(I){case Kr.NOTIFICATION_CLICKED:return"notification_open";case Kr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ts(){return(ts=(0,N.Z)(function*(I,D){const S=D.data;if(!S.isFirebaseMessaging)return;I.onMessageHandler&&S.messageType===Kr.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Ts(S)):I.onMessageHandler.next(Ts(S)));const O=S.data;na(O)&&"1"===O[Xs]&&(yield th(I,S.messageType,O))})).apply(this,arguments)}const ns="@firebase/messaging",Cn=I=>{const D=new Cc(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",S=>function Ic(I,D){return ts.apply(this,arguments)}(D,S)),D},Li=I=>{const D=I.getProvider("messaging").getImmediate();return{getToken:O=>function Ec(I,D){return so.apply(this,arguments)}(D,O)}};function bc(){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,N.Z)(function*(){try{yield(0,ae.eu)()}catch{return!1}return typeof window<"u"&&(0,ae.hl)()&&(0,ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function _n(){(0,se._registerComponent)(new me.wA("messaging",Cn,"PUBLIC")),(0,se._registerComponent)(new me.wA("messaging-internal",Li,"PRIVATE")),(0,se.registerVersion)(ns,"0.11.0"),(0,se.registerVersion)(ns,"0.11.0","esm2017")}();const uo="analytics",Tc="firebase_id",Ju="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Sc="https://www.googletagmanager.com/gtag/js",Mn=new ve.Yd("@firebase/analytics");function Ya(I){return Promise.all(I.map(D=>D.catch(S=>S)))}function Qa(I,D){const S=document.createElement("script");S.src=`${Sc}?l=${I}&id=${D}`,S.async=!0,document.head.appendChild(S)}function ih(I,D,S,O,Z,re){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,N.Z)(function*(I,D,S,O,Z,re){const De=O[Z];try{if(De)yield D[De];else{const Xe=(yield Ya(S)).find(st=>st.measurementId===Z);Xe&&(yield D[Xe.appId])}}catch(je){Mn.error(je)}I("config",Z,re)})).apply(this,arguments)}function Vi(I,D,S,O,Z){return oa.apply(this,arguments)}function oa(){return(oa=(0,N.Z)(function*(I,D,S,O,Z){try{let re=[];if(Z&&Z.send_to){let De=Z.send_to;Array.isArray(De)||(De=[De]);const je=yield Ya(S);for(const Xe of De){const st=je.find(_t=>_t.measurementId===Xe),Pt=st&&D[st.appId];if(!Pt){re=[];break}re.push(Pt)}}0===re.length&&(re=Object.values(D)),yield Promise.all(re),I("event",O,Z||{})}catch(re){Mn.error(re)}})).apply(this,arguments)}function xc(I){const D=window.document.getElementsByTagName("script");for(const S of Object.values(D))if(S.src&&S.src.includes(Sc)&&S.src.includes(I))return S;return null}const qn=new ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ua=new class tl{constructor(D={},S=1e3){this.throttleMetadata=D,this.intervalMillis=S}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,S){this.throttleMetadata[D]=S}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function lo(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function ah(I){return kn.apply(this,arguments)}function kn(){return(kn=(0,N.Z)(function*(I){var D;const{appId:S,apiKey:O}=I,Z={method:"GET",headers:lo(O)},re=Ju.replace("{app-id}",S),De=yield fetch(re,Z);if(200!==De.status&&304!==De.status){let je="";try{const Xe=yield De.json();null!==(D=Xe.error)&&void 0!==D&&D.message&&(je=Xe.error.message)}catch{}throw qn.create("config-fetch-failed",{httpStatus:De.status,responseMessage:je})}return De.json()})).apply(this,arguments)}function Mc(I){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,N.Z)(function*(I,D=ua,S){const{appId:O,apiKey:Z,measurementId:re}=I.options;if(!O)throw qn.create("no-app-id");if(!Z){if(re)return{measurementId:re,appId:O};throw qn.create("no-api-key")}const De=D.getThrottleMetadata(O)||{backoffCount:0,throttleEndTimeMillis:Date.now()},je=new la;return setTimeout((0,N.Z)(function*(){je.abort()}),void 0!==S?S:6e4),kc({appId:O,apiKey:Z,measurementId:re},De,je,D)})).apply(this,arguments)}function kc(I,D,S){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,N.Z)(function*(I,{throttleEndTimeMillis:D,backoffCount:S},O,Z=ua){var re,De;const{appId:je,measurementId:Xe}=I;try{yield nl(O,D)}catch(st){if(Xe)return Mn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Xe} provided in the "measurementId" field in the local Firebase config. [${null===(re=st)||void 0===re?void 0:re.message}]`),{appId:je,measurementId:Xe};throw st}try{const st=yield ah(I);return Z.deleteThrottleMetadata(je),st}catch(st){const Pt=st;if(!eu(Pt)){if(Z.deleteThrottleMetadata(je),Xe)return Mn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Xe} provided in the "measurementId" field in the local Firebase config. [${Pt?.message}]`),{appId:je,measurementId:Xe};throw st}const _t=503===Number(null===(De=Pt?.customData)||void 0===De?void 0:De.httpStatus)?(0,ae.$s)(S,Z.intervalMillis,30):(0,ae.$s)(S,Z.intervalMillis),bn={throttleEndTimeMillis:Date.now()+_t,backoffCount:S+1};return Z.setThrottleMetadata(je,bn),Mn.debug(`Calling attemptFetch again in ${_t} millis`),kc(I,bn,O,Z)}})).apply(this,arguments)}function nl(I,D){return new Promise((S,O)=>{const Z=Math.max(D-Date.now(),0),re=setTimeout(S,Z);I.addEventListener(()=>{clearTimeout(re),O(qn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function eu(I){if(!(I instanceof ae.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}class la{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let Ss,ru;function co(){return(co=(0,N.Z)(function*(I,D,S,O,Z){if(Z&&Z.global)I("event",S,O);else{const re=yield D;I("event",S,Object.assign(Object.assign({},O),{send_to:re}))}})).apply(this,arguments)}function go(I){ru=I}function rl(I){Ss=I}function is(){return mo.apply(this,arguments)}function mo(){return(mo=(0,N.Z)(function*(){var I;if(!(0,ae.hl)())return Mn.warn(qn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ae.eu)()}catch(D){return Mn.warn(qn.create("indexeddb-unavailable",{errorInfo:null===(I=D)||void 0===I?void 0:I.toString()}).message),!1}return!0})).apply(this,arguments)}function yo(){return(yo=(0,N.Z)(function*(I,D,S,O,Z,re,De){var je;const Xe=Mc(I);Xe.then(wn=>{S[wn.measurementId]=wn.appId,I.options.measurementId&&wn.measurementId!==I.options.measurementId&&Mn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${wn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(wn=>Mn.error(wn)),D.push(Xe);const st=is().then(wn=>{if(wn)return O.getId()}),[Pt,_t]=yield Promise.all([Xe,st]);xc(re)||Qa(re,Pt.measurementId),ru&&(Z("consent","default",ru),go(void 0)),Z("js",new Date);const bn=null!==(je=De?.config)&&void 0!==je?je:{};return bn.origin="firebase",bn.update=!0,null!=_t&&(bn[Tc]=_t),Z("config",Pt.measurementId,bn),Ss&&(Z("set",Ss),rl(void 0)),Pt.measurementId})).apply(this,arguments)}class iu{constructor(D){this.app=D}_delete(){return delete vr[this.app.options.appId],Promise.resolve()}}let vr={},vo=[];const xs={};let wo,hi,_o="dataLayer",Pc=!1;function ch(I,D,S){!function jf(){const I=[];if((0,ae.ru)()&&I.push("This is a browser extension environment."),(0,ae.zI)()||I.push("Cookies are not available."),I.length>0){const D=I.map((O,Z)=>`(${Z+1}) ${O}`).join(" "),S=qn.create("invalid-analytics-context",{errorInfo:D});Mn.warn(S.message)}}();const O=I.options.appId;if(!O)throw qn.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw qn.create("no-api-key");Mn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=vr[O])throw qn.create("already-exists",{id:O});if(!Pc){!function Xa(I){let D=[];Array.isArray(window[I])?D=window[I]:window[I]=D}(_o);const{wrappedGtag:re,gtagCore:De}=function aa(I,D,S,O,Z){let re=function(...De){window[O].push(arguments)};return window[Z]&&"function"==typeof window[Z]&&(re=window[Z]),window[Z]=function el(I,D,S,O){function re(){return(re=(0,N.Z)(function*(De,je,Xe){try{"event"===De?yield Vi(I,D,S,je,Xe):"config"===De?yield ih(I,D,S,O,je,Xe):"consent"===De?I("consent","update",Xe):I("set",je)}catch(st){Mn.error(st)}})).apply(this,arguments)}return function Z(De,je,Xe){return re.apply(this,arguments)}}(re,I,D,S),{gtagCore:re,wrappedGtag:window[Z]}}(vr,vo,xs,_o,"gtag");hi=re,wo=De,Pc=!0}return vr[O]=function lh(I,D,S,O,Z,re,De){return yo.apply(this,arguments)}(I,vo,xs,D,wo,_o,S),new iu(I)}function am(){return dh.apply(this,arguments)}function dh(){return(dh=(0,N.Z)(function*(){if((0,ae.ru)()||!(0,ae.zI)()||!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch{return!1}})).apply(this,arguments)}const Co="@firebase/analytics";!function Xn(){(0,se._registerComponent)(new me.wA(uo,(D,{options:S})=>ch(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),S),"PUBLIC")),(0,se._registerComponent)(new me.wA("analytics-internal",function I(D){try{const S=D.getProvider(uo).getImmediate();return{logEvent:(O,Z,re)=>function _r(I,D,S,O){I=(0,ae.m9)(I),function ca(I,D,S,O,Z){return co.apply(this,arguments)}(hi,vr[I.app.options.appId],D,S,O).catch(Z=>Mn.error(Z))}(S,O,Z,re)}}catch(S){throw qn.create("interop-component-reg-failed",{reason:S})}},"PRIVATE")),(0,se.registerVersion)(Co,"0.8.4"),(0,se.registerVersion)(Co,"0.8.4","esm2017")}();var Sr=V(4408),Ms=V(7565);const sl=new class ks extends Ms.v{}(class en extends Sr.o{constructor(D,S){super(D,S),this.scheduler=D,this.work=S}schedule(D,S=0){return S>0?super.schedule(D,S):(this.delay=S,this.state=D,this.scheduler.flush(this),this)}execute(D,S){return S>0||this.closed?super.execute(D,S):this._execute(D,S)}requestAsyncId(D,S,O=0){return null!=O&&O>0||null==O&&this.delay>0?super.requestAsyncId(D,S,O):(D.flush(this),0)}});var ol=V(4986),ur=V(8306),au=V(576),lr=V(4482),Vr=V(5403),da=V(4671),Rc=V(9468),al=V(5363);const uu=new g.GfV("7.5.0"),lu="__angularfire_symbol__analyticsIsSupportedValue",ul="__angularfire_symbol__analyticsIsSupported",ge="__angularfire_symbol__remoteConfigIsSupportedValue",ii="__angularfire_symbol__remoteConfigIsSupported",ss="__angularfire_symbol__messagingIsSupportedValue",xr="__angularfire_symbol__messagingIsSupported";function os(I,D,S){if(D){if(1===D.length)return D[0];const re=D.filter(De=>De.app===S);if(1===re.length)return re[0]}return S.container.getProvider(I).getImmediate({optional:!0})}globalThis[ul]||(globalThis[ul]=am().then(I=>globalThis[lu]=I).catch(()=>globalThis[lu]=!1)),globalThis[xr]||(globalThis[xr]=bc().then(I=>globalThis[ss]=I).catch(()=>globalThis[ss]=!1)),globalThis[ii]||(globalThis[ii]=sm().then(I=>globalThis[ge]=I).catch(()=>globalThis[ge]=!1));const Et=(I,D)=>{const S=D?[D]:(0,j.C6)(),O=[];return S.forEach(Z=>{Z.container.getProvider(I).instances.forEach(De=>{O.includes(De)||O.push(De)})}),O};function si(){}class ha{constructor(D,S=sl){this.zone=D,this.delegate=S}now(){return this.delegate.now()}schedule(D,S,O){const Z=this.zone;return this.delegate.schedule(function(De){Z.runGuarded(()=>{D.apply(this,[De])})},S,O)}}class Ns{constructor(D){this.zone=D,this.task=null}call(D,S){const O=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",si,{},si,si)),S.pipe(function ji(I,D,S){const O=(0,au.m)(I)||D||S?{next:I,error:D,complete:S}:I;return O?(0,lr.e)((Z,re)=>{var De;null===(De=O.subscribe)||void 0===De||De.call(O);let je=!0;Z.subscribe((0,Vr.x)(re,Xe=>{var st;null===(st=O.next)||void 0===st||st.call(O,Xe),re.next(Xe)},()=>{var Xe;je=!1,null===(Xe=O.complete)||void 0===Xe||Xe.call(O),re.complete()},Xe=>{var st;je=!1,null===(st=O.error)||void 0===st||st.call(O,Xe),re.error(Xe)},()=>{var Xe,st;je&&(null===(Xe=O.unsubscribe)||void 0===Xe||Xe.call(O)),null===(st=O.finalize)||void 0===st||st.call(O)}))}):da.y}({next:O,complete:O,error:O})).subscribe(D).add(O)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Eo=(()=>{class I{constructor(S){this.ngZone=S,this.outsideAngular=S.runOutsideAngular(()=>new ha(Zone.current)),this.insideAngular=S.run(()=>new ha(Zone.current,ol.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(S){return new(S||I)(g.LFG(g.R0b))},I.\u0275prov=g.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function wr(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function hh(I){return wr().ngZone.runOutsideAngular(()=>I())}function cn(I){return wr().ngZone.run(()=>I())}function Ps(I){return wr(),function En(I){return function(S){return(S=S.lift(new Ns(I.ngZone))).pipe((0,Rc.R)(I.outsideAngular),(0,al.Q)(I.insideAngular))}}(wr())(I)}const as=(I,D)=>function(){const O=arguments;return D&&setTimeout(()=>{"scheduled"===D.state&&D.invoke()},10),cn(()=>I.apply(void 0,O))},fh=(I,D)=>function(){let S;const O=arguments;for(let re=0;re<arguments.length;re++)"function"==typeof O[re]&&(D&&(S||(S=cn(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",si,{},si,si)))),O[re]=as(O[re],S));const Z=hh(()=>I.apply(this,O));if(!D){if(Z instanceof ur.y){const re=wr();return Z.pipe((0,Rc.R)(re.outsideAngular),(0,al.Q)(re.insideAngular))}return cn(()=>Z)}return Z instanceof ur.y?Z.pipe(Ps):Z instanceof Promise?cn(()=>new Promise((re,De)=>Z.then(je=>cn(()=>re(je)),je=>cn(()=>De(je))))):"function"==typeof Z&&S?function(){return setTimeout(()=>{S&&"scheduled"===S.state&&S.invoke()},10),Z.apply(this,arguments)}:cn(()=>Z)}},8247:(mt,Me,V)=>{V.d(Me,{$:()=>As,A:()=>G,B:()=>Oe,G:()=>ws,H:()=>Rr,J:()=>Ri,L:()=>H,M:()=>Wa,N:()=>yc,P:()=>ol,Q:()=>$a,R:()=>um,T:()=>Hu,U:()=>Ji,V:()=>Kr,W:()=>Oi,X:()=>Ff,Y:()=>Ko,Z:()=>St,_:()=>Vf,a:()=>rs,a0:()=>Bf,a1:()=>$n,a2:()=>qa,a3:()=>Ka,a4:()=>Jd,a5:()=>Uf,a6:()=>zn,a7:()=>di,a8:()=>na,a9:()=>Fi,aA:()=>U,aB:()=>O,aC:()=>Ns,aD:()=>ha,aE:()=>ft,aI:()=>lo,aL:()=>Xs,aa:()=>eh,ab:()=>qu,ac:()=>Ku,af:()=>th,ag:()=>nh,ah:()=>Ic,ak:()=>ni,al:()=>Yu,an:()=>Sc,ao:()=>Ja,ap:()=>fe,aq:()=>Re,ar:()=>rt,as:()=>Ge,at:()=>pa,au:()=>bn,av:()=>At,aw:()=>xe,ax:()=>te,ay:()=>Xe,az:()=>Y,b:()=>qn,c:()=>uu,d:()=>ii,e:()=>ul,f:()=>hh,g:()=>as,h:()=>Cr,i:()=>mo,j:()=>D,k:()=>yi,l:()=>fi,m:()=>Kf,o:()=>de,r:()=>Sr,s:()=>ou,u:()=>sl});var g=V(5861),j=V(2090),N=V(9681),se=V(1877),ae=V(655),me=V(4859);const de={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},G={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Oe=function J(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Pe=function We(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ke=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),pe=new se.Yd("@firebase/auth");function $e(v,...f){pe.logLevel<=se.in.ERROR&&pe.error(`Auth (${N.SDK_VERSION}): ${v}`,...f)}function Ge(v,...f){throw Ze(v,...f)}function xe(v,...f){return Ze(v,...f)}function Te(v,f,p){const w=Object.assign(Object.assign({},Pe()),{[f]:p});return new j.LL("auth","Firebase",w).create(f,{appName:v.name})}function we(v,f,p){if(!(f instanceof p))throw p.name!==f.constructor.name&&Ge(v,"argument-error"),Te(v,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ze(v,...f){if("string"!=typeof v){const p=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(p,...w)}return Ke.create(v,...f)}function te(v,f,...p){if(!v)throw Ze(f,...p)}function ue(v){const f="INTERNAL ASSERTION FAILED: "+v;throw $e(f),new Error(f)}function fe(v,f){v||ue(f)}const q=new Map;function Y(v){fe(v instanceof Function,"Expected a class definition");let f=q.get(v);return f?(fe(f instanceof v,"Instance stored in cache mismatched with class"),f):(f=new v,q.set(v,f),f)}function Fe(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Le(){return"http:"===ct()||"https:"===ct()}function ct(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class ze{constructor(f,p){this.shortDelay=f,this.longDelay=p,fe(p>f,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function Qt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Le()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function nn(v,f){fe(v.emulator,"Emulator should always be set here");const{url:p}=v.emulator;return f?`${p}${f.startsWith("/")?f.slice(1):f}`:p}class dn{static initialize(f,p,w){this.fetchImpl=f,p&&(this.headersImpl=p),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ue("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ue("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ue("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Kt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Zt=new ze(3e4,6e4);function Bt(v,f){return v.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:v.tenantId}):f}function Nt(v,f,p,w){return mr.apply(this,arguments)}function mr(){return(mr=(0,g.Z)(function*(v,f,p,w,T={}){return Ti(v,T,(0,g.Z)(function*(){let P={},Q={};w&&("GET"===f?Q=w:P={body:JSON.stringify(w)});const Ee=(0,j.xO)(Object.assign({key:v.config.apiKey},Q)).slice(1),nt=yield v._getAdditionalHeaders();return nt["Content-Type"]="application/json",v.languageCode&&(nt["X-Firebase-Locale"]=v.languageCode),dn.fetch()(xi(v,v.config.apiHost,p,Ee),Object.assign({method:f,headers:nt,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function Ti(v,f,p){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,g.Z)(function*(v,f,p){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},Kt),f);try{const T=new br(v),P=yield Promise.race([p(),T.promise]);T.clearNetworkTimeout();const Q=yield P.json();if("needConfirmation"in Q)throw Ln(v,"account-exists-with-different-credential",Q);if(P.ok&&!("errorMessage"in Q))return Q;{const Ee=P.ok?Q.errorMessage:Q.error.message,[nt,lt]=Ee.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===nt)throw Ln(v,"credential-already-in-use",Q);if("EMAIL_EXISTS"===nt)throw Ln(v,"email-already-in-use",Q);if("USER_DISABLED"===nt)throw Ln(v,"user-disabled",Q);const Lt=w[nt]||nt.toLowerCase().replace(/[_\s]+/g,"-");if(lt)throw Te(v,Lt,lt);Ge(v,Lt)}}catch(T){if(T instanceof j.ZR)throw T;Ge(v,"network-request-failed")}})).apply(this,arguments)}function In(v,f,p,w){return Si.apply(this,arguments)}function Si(){return(Si=(0,g.Z)(function*(v,f,p,w,T={}){const P=yield Nt(v,f,p,w,T);return"mfaPendingCredential"in P&&Ge(v,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function xi(v,f,p,w){const T=`${f}${p}?${w}`;return v.config.emulator?nn(v.config,T):`${v.config.apiScheme}://${T}`}class br{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((p,w)=>{this.timer=setTimeout(()=>w(xe(this.auth,"network-request-failed")),Zt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ln(v,f,p){const w={appName:v.name};p.email&&(w.email=p.email),p.phoneNumber&&(w.phoneNumber=p.phoneNumber);const T=xe(v,f,w);return T.customData._tokenResponse=p,T}function Mi(){return(Mi=(0,g.Z)(function*(v,f){return Nt(v,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Je(v,f){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,g.Z)(function*(v,f){return Nt(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Vn(v,f){return ln.apply(this,arguments)}function ln(){return(ln=(0,g.Z)(function*(v,f){return Nt(v,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function rr(v){if(v)try{const f=new Date(Number(v));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function fn(){return(fn=(0,g.Z)(function*(v,f=!1){const p=(0,j.m9)(v),w=yield p.getIdToken(f),T=dt(w);te(T&&T.exp&&T.auth_time&&T.iat,p.auth,"internal-error");const P="object"==typeof T.firebase?T.firebase:void 0,Q=P?.sign_in_provider;return{claims:T,token:w,authTime:rr(un(T.auth_time)),issuedAtTime:rr(un(T.iat)),expirationTime:rr(un(T.exp)),signInProvider:Q||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function un(v){return 1e3*Number(v)}function dt(v){var f;const[p,w,T]=v.split(".");if(void 0===p||void 0===w||void 0===T)return $e("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,j.tV)(w);return P?JSON.parse(P):($e("Failed to decode base64 JWT payload"),null)}catch(P){return $e("Caught error parsing JWT payload as JSON",null===(f=P)||void 0===f?void 0:f.toString()),null}}function bt(v,f){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,g.Z)(function*(v,f,p=!1){if(p)return f;try{return yield f}catch(w){throw w instanceof j.ZR&&Gn(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}function Gn({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class yr{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var p;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const T=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(f=!1){var p=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,g.Z)(function*(){yield p.iteration()}),w)}iteration(){var f=this;return(0,g.Z)(function*(){var p;try{yield f.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(p=w)||void 0===p?void 0:p.code)&&f.schedule(!0))}f.schedule()})()}}class Ct{constructor(f,p){this.createdAt=f,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=rr(this.lastLoginAt),this.creationTime=rr(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ar(v){return kt.apply(this,arguments)}function kt(){return(kt=(0,g.Z)(function*(v){var f;const p=v.auth,w=yield v.getIdToken(),T=yield bt(v,Vn(p,{idToken:w}));te(T?.users.length,p,"internal-error");const P=T.users[0];v._notifyReloadListener(P);const Q=null!==(f=P.providerUserInfo)&&void 0!==f&&f.length?vn(P.providerUserInfo):[],Ee=Yn(v.providerData,Q),Lt=!!v.isAnonymous&&!(v.email&&P.passwordHash||Ee?.length),mn={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:Ee,metadata:new Ct(P.createdAt,P.lastLoginAt),isAnonymous:Lt};Object.assign(v,mn)})).apply(this,arguments)}function Wt(){return(Wt=(0,g.Z)(function*(v){const f=(0,j.m9)(v);yield Ar(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Yn(v,f){return[...v.filter(w=>!f.some(T=>T.providerId===w.providerId)),...f]}function vn(v){return v.map(f=>{var{providerId:p}=f,w=(0,ae._T)(f,["providerId"]);return{providerId:p,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function Ce(){return(Ce=(0,g.Z)(function*(v,f){const p=yield Ti(v,{},(0,g.Z)(function*(){const w=(0,j.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:T,apiKey:P}=v.config,Q=xi(v,T,"/v1/token",`key=${P}`),Ee=yield v._getAdditionalHeaders();return Ee["Content-Type"]="application/x-www-form-urlencoded",dn.fetch()(Q,{method:"POST",headers:Ee,body:w})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class tt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){te(f.idToken,"internal-error"),te(typeof f.idToken<"u","internal-error"),te(typeof f.refreshToken<"u","internal-error");const p="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function ht(v){const f=dt(v);return te(f,"internal-error"),te(typeof f.exp<"u","internal-error"),te(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,p)}getToken(f,p=!1){var w=this;return(0,g.Z)(function*(){return te(!w.accessToken||w.refreshToken,f,"user-token-expired"),p||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,p){var w=this;return(0,g.Z)(function*(){const{accessToken:T,refreshToken:P,expiresIn:Q}=yield function et(v,f){return Ce.apply(this,arguments)}(f,p);w.updateTokensAndExpiration(T,P,Number(Q))})()}updateTokensAndExpiration(f,p,w){this.refreshToken=p||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,p){const{refreshToken:w,accessToken:T,expirationTime:P}=p,Q=new tt;return w&&(te("string"==typeof w,"internal-error",{appName:f}),Q.refreshToken=w),T&&(te("string"==typeof T,"internal-error",{appName:f}),Q.accessToken=T),P&&(te("number"==typeof P,"internal-error",{appName:f}),Q.expirationTime=P),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new tt,this.toJSON())}_performRefresh(){return ue("not implemented")}}function yt(v,f){te("string"==typeof v||typeof v>"u","internal-error",{appName:f})}class vt{constructor(f){var{uid:p,auth:w,stsTokenManager:T}=f,P=(0,ae._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=w,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new Ct(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(f){var p=this;return(0,g.Z)(function*(){const w=yield bt(p,p.stsTokenManager.getToken(p.auth,f));return te(w,p.auth,"internal-error"),p.accessToken!==w&&(p.accessToken=w,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),w})()}getIdTokenResult(f){return function hn(v){return fn.apply(this,arguments)}(this,f)}reload(){return function Wr(v){return Wt.apply(this,arguments)}(this)}_assign(f){this!==f&&(te(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(p=>Object.assign({},p)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new vt(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,p=!1){var w=this;return(0,g.Z)(function*(){let T=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),T=!0),p&&(yield Ar(w)),yield w.auth._persistUserIfCurrent(w),T&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,g.Z)(function*(){const p=yield f.getIdToken();return yield bt(f,function ei(v,f){return Mi.apply(this,arguments)}(f.auth,{idToken:p})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,p){var w,T,P,Q,Ee,nt,lt,Lt;const mn=null!==(w=p.displayName)&&void 0!==w?w:void 0,Hi=null!==(T=p.email)&&void 0!==T?T:void 0,Do=null!==(P=p.phoneNumber)&&void 0!==P?P:void 0,ds=null!==(Q=p.photoURL)&&void 0!==Q?Q:void 0,vl=null!==(Ee=p.tenantId)&&void 0!==Ee?Ee:void 0,Uc=null!==(nt=p._redirectEventId)&&void 0!==nt?nt:void 0,jc=null!==(lt=p.createdAt)&&void 0!==lt?lt:void 0,_l=null!==(Lt=p.lastLoginAt)&&void 0!==Lt?Lt:void 0,{uid:ga,emailVerified:Yf,isAnonymous:ma,providerData:wl,stsTokenManager:Hc}=p;te(ga&&Hc,f,"internal-error");const bo=tt.fromJSON(this.name,Hc);te("string"==typeof ga,f,"internal-error"),yt(mn,f.name),yt(Hi,f.name),te("boolean"==typeof Yf,f,"internal-error"),te("boolean"==typeof ma,f,"internal-error"),yt(Do,f.name),yt(ds,f.name),yt(vl,f.name),yt(Uc,f.name),yt(jc,f.name),yt(_l,f.name);const Ch=new vt({uid:ga,auth:f,email:Hi,emailVerified:Yf,displayName:mn,isAnonymous:ma,photoURL:ds,phoneNumber:Do,tenantId:vl,stsTokenManager:bo,createdAt:jc,lastLoginAt:_l});return wl&&Array.isArray(wl)&&(Ch.providerData=wl.map(Rs=>Object.assign({},Rs))),Uc&&(Ch._redirectEventId=Uc),Ch}static _fromIdTokenResponse(f,p,w=!1){return(0,g.Z)(function*(){const T=new tt;T.updateFromServerResponse(p);const P=new vt({uid:p.localId,auth:f,stsTokenManager:T,isAnonymous:w});return yield Ar(P),P})()}}const H=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(p,w){var T=this;return(0,g.Z)(function*(){T.storage[p]=w})()}_get(p){var w=this;return(0,g.Z)(function*(){const T=w.storage[p];return void 0===T?null:T})()}_remove(p){var w=this;return(0,g.Z)(function*(){delete w.storage[p]})()}_addListener(p,w){}_removeListener(p,w){}}return v.type="NONE",v})();function U(v,f,p){return`firebase:${v}:${f}:${p}`}class K{constructor(f,p,w){this.persistence=f,this.auth=p,this.userKey=w;const{config:T,name:P}=this.auth;this.fullUserKey=U(this.userKey,T.apiKey,P),this.fullPersistenceKey=U("persistence",T.apiKey,P),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,g.Z)(function*(){const p=yield f.persistence._get(f.fullUserKey);return p?vt._fromJSON(f.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var p=this;return(0,g.Z)(function*(){if(p.persistence===f)return;const w=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=f,w?p.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,p,w="authUser"){return(0,g.Z)(function*(){if(!p.length)return new K(Y(H),f,w);const T=(yield Promise.all(p.map(function(){var lt=(0,g.Z)(function*(Lt){if(yield Lt._isAvailable())return Lt});return function(Lt){return lt.apply(this,arguments)}}()))).filter(lt=>lt);let P=T[0]||Y(H);const Q=U(w,f.config.apiKey,f.name);let Ee=null;for(const lt of p)try{const Lt=yield lt._get(Q);if(Lt){const mn=vt._fromJSON(f,Lt);lt!==P&&(Ee=mn),P=lt;break}}catch{}const nt=T.filter(lt=>lt._shouldAllowMigration);return P._shouldAllowMigration&&nt.length?(P=nt[0],Ee&&(yield P._set(Q,Ee.toJSON())),yield Promise.all(p.map(function(){var lt=(0,g.Z)(function*(Lt){if(Lt!==P)try{yield Lt._remove(Q)}catch{}});return function(Lt){return lt.apply(this,arguments)}}())),new K(P,f,w)):new K(P,f,w)})()}}function B(v){const f=v.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(ke(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(M(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(it(f))return"Blackberry";if(Ie(f))return"Webos";if(L(f))return"Safari";if((f.includes("chrome/")||ee(f))&&!f.includes("edge/"))return"Chrome";if(rt(f))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function M(v=(0,j.z$)()){return/firefox\//i.test(v)}function L(v=(0,j.z$)()){const f=v.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function ee(v=(0,j.z$)()){return/crios\//i.test(v)}function ke(v=(0,j.z$)()){return/iemobile/i.test(v)}function rt(v=(0,j.z$)()){return/android/i.test(v)}function it(v=(0,j.z$)()){return/blackberry/i.test(v)}function Ie(v=(0,j.z$)()){return/webos/i.test(v)}function Re(v=(0,j.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function At(v=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function sn(v=(0,j.z$)()){return Re(v)||rt(v)||Ie(v)||it(v)||/windows phone/i.test(v)||ke(v)}function pn(v,f=[]){let p;switch(v){case"Browser":p=B((0,j.z$)());break;case"Worker":p=`${B((0,j.z$)())}-${v}`;break;default:p=v}const w=f.length?f.join(","):"FirebaseCore-web";return`${p}/JsCore/${N.SDK_VERSION}/${w}`}class vs{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,p){const w=P=>new Promise((Q,Ee)=>{try{Q(f(P))}catch(nt){Ee(nt)}});w.onAbort=p,this.queue.push(w);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(f){var p=this;return(0,g.Z)(function*(){var w;if(p.auth.currentUser===f)return;const T=[];try{for(const P of p.queue)yield P(f),P.onAbort&&T.push(P.onAbort)}catch(P){T.reverse();for(const Q of T)try{Q()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=P)||void 0===w?void 0:w.message})}})()}}class zs{constructor(f,p,w){this.app=f,this.heartbeatServiceProvider=p,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _s(this),this.idTokenSubscription=new _s(this),this.beforeStateQueue=new vs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ke,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(f,p){var w=this;return p&&(this._popupRedirectResolver=Y(p)),this._initializationPromise=this.queue((0,g.Z)(function*(){var T,P;if(!w._deleted&&(w.persistenceManager=yield K.create(w,f),!w._deleted)){if(null!==(T=w._popupRedirectResolver)&&void 0!==T&&T._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(p),w.lastNotifiedUid=(null===(P=w.currentUser)||void 0===P?void 0:P.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,g.Z)(function*(){if(f._deleted)return;const p=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||p){if(f.currentUser&&p&&f.currentUser.uid===p.uid)return f._currentUser._assign(p),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(p,!0)}})()}initializeCurrentUser(f){var p=this;return(0,g.Z)(function*(){var w;const T=yield p.assertedPersistence.getCurrentUser();let P=T,Q=!1;if(f&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const Ee=null===(w=p.redirectUser)||void 0===w?void 0:w._redirectEventId,nt=P?._redirectEventId,lt=yield p.tryRedirectSignIn(f);(!Ee||Ee===nt)&&lt?.user&&(P=lt.user,Q=!0)}if(!P)return p.directlySetCurrentUser(null);if(!P._redirectEventId){if(Q)try{yield p.beforeStateQueue.runMiddleware(P)}catch(Ee){P=T,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(Ee))}return P?p.reloadAndSetCurrentUserOrClear(P):p.directlySetCurrentUser(null)}return te(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===P._redirectEventId?p.directlySetCurrentUser(P):p.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(f){var p=this;return(0,g.Z)(function*(){let w=null;try{w=yield p._popupRedirectResolver._completeRedirectFn(p,f,!0)}catch{yield p._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var p=this;return(0,g.Z)(function*(){var w;try{yield Ar(f)}catch(T){if("auth/network-request-failed"!==(null===(w=T)||void 0===w?void 0:w.code))return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Ft(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var f=this;return(0,g.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var p=this;return(0,g.Z)(function*(){const w=f?(0,j.m9)(f):null;return w&&te(w.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(w&&w._clone(p))})()}_updateCurrentUser(f,p=!1){var w=this;return(0,g.Z)(function*(){if(!w._deleted)return f&&te(w.tenantId===f.tenantId,w,"tenant-id-mismatch"),p||(yield w.beforeStateQueue.runMiddleware(f)),w.queue((0,g.Z)(function*(){yield w.directlySetCurrentUser(f),w.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,g.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var p=this;return this.queue((0,g.Z)(function*(){yield p.assertedPersistence.setPersistence(Y(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new j.LL("auth","Firebase",f())}onAuthStateChanged(f,p,w){return this.registerStateListener(this.authStateSubscription,f,p,w)}beforeAuthStateChanged(f,p){return this.beforeStateQueue.pushCallback(f,p)}onIdTokenChanged(f,p,w){return this.registerStateListener(this.idTokenSubscription,f,p,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,p){var w=this;return(0,g.Z)(function*(){const T=yield w.getOrInitRedirectPersistenceManager(p);return null===f?T.removeCurrentUser():T.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var p=this;return(0,g.Z)(function*(){if(!p.redirectPersistenceManager){const w=f&&Y(f)||p._popupRedirectResolver;te(w,p,"argument-error"),p.redirectPersistenceManager=yield K.create(p,[Y(w._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(f){var p=this;return(0,g.Z)(function*(){var w,T;return p._isInitialized&&(yield p.queue((0,g.Z)(function*(){}))),(null===(w=p._currentUser)||void 0===w?void 0:w._redirectEventId)===f?p._currentUser:(null===(T=p.redirectUser)||void 0===T?void 0:T._redirectEventId)===f?p.redirectUser:null})()}_persistUserIfCurrent(f){var p=this;return(0,g.Z)(function*(){if(f===p.currentUser)return p.queue((0,g.Z)(function*(){return p.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(p=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,p,w,T){if(this._deleted)return()=>{};const P="function"==typeof p?p:p.next.bind(p),Q=this._isInitialized?Promise.resolve():this._initializationPromise;return te(Q,this,"internal-error"),Q.then(()=>P(this.currentUser)),"function"==typeof p?f.addObserver(p,w,T):f.addObserver(p)}directlySetCurrentUser(f){var p=this;return(0,g.Z)(function*(){p.currentUser&&p.currentUser!==f&&p._currentUser._stopProactiveRefresh(),f&&p.isProactiveRefreshEnabled&&f._startProactiveRefresh(),p.currentUser=f,f?yield p.assertedPersistence.setCurrentUser(f):yield p.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=pn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,g.Z)(function*(){var p;const w={"X-Client-Version":f.clientVersion};f.app.options.appId&&(w["X-Firebase-gmpid"]=f.app.options.appId);const T=yield null===(p=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return T&&(w["X-Firebase-Client"]=T),w})()}}function ft(v){return(0,j.m9)(v)}class _s{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,j.ne)(p=>this.observer=p)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ws(v,f,p){const w=ft(v);te(w._canInitEmulator,w,"emulator-config-failed"),te(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const T=!!p?.disableWarnings,P=Ga(f),{host:Q,port:Ee}=function Ni(v){const f=Ga(v),p=/(\/\/)?([^?#/]+)/.exec(v.substr(f.length));if(!p)return{host:"",port:null};const w=p[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(w);if(T){const P=T[1];return{host:P,port:Bn(w.substr(P.length+1))}}{const[P,Q]=w.split(":");return{host:P,port:Bn(Q)}}}(f);w.config.emulator={url:`${P}//${Q}${null===Ee?"":`:${Ee}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:Q,port:Ee,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function Cs(){function v(){const f=document.createElement("p"),p=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function Ga(v){const f=v.indexOf(":");return f<0?"":v.substr(0,f+1)}function Bn(v){if(!v)return null;const f=Number(v);return isNaN(f)?null:f}class Rr{constructor(f,p){this.providerId=f,this.signInMethod=p}toJSON(){return ue("not implemented")}_getIdTokenResponse(f){return ue("not implemented")}_linkToIdToken(f,p){return ue("not implemented")}_getReauthenticationResolver(f){return ue("not implemented")}}function $r(v,f){return Un.apply(this,arguments)}function Un(){return(Un=(0,g.Z)(function*(v,f){return Nt(v,"POST","/v1/accounts:resetPassword",Bt(v,f))})).apply(this,arguments)}function Lu(v,f){return on.apply(this,arguments)}function on(){return(on=(0,g.Z)(function*(v,f){return Nt(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Zd(v,f){return Go.apply(this,arguments)}function Go(){return(Go=(0,g.Z)(function*(v,f){return Nt(v,"POST","/v1/accounts:update",Bt(v,f))})).apply(this,arguments)}function Es(){return(Es=(0,g.Z)(function*(v,f){return In(v,"POST","/v1/accounts:signInWithPassword",Bt(v,f))})).apply(this,arguments)}function Xi(v,f){return Is.apply(this,arguments)}function Is(){return(Is=(0,g.Z)(function*(v,f){return Nt(v,"POST","/v1/accounts:sendOobCode",Bt(v,f))})).apply(this,arguments)}function Pi(v,f){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,g.Z)(function*(v,f){return Xi(v,f)})).apply(this,arguments)}function Yd(v,f){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,g.Z)(function*(v,f){return Xi(v,f)})).apply(this,arguments)}function zr(v,f){return qs.apply(this,arguments)}function qs(){return(qs=(0,g.Z)(function*(v,f){return Xi(v,f)})).apply(this,arguments)}function Vu(v,f){return $o.apply(this,arguments)}function $o(){return($o=(0,g.Z)(function*(v,f){return Xi(v,f)})).apply(this,arguments)}function Bu(){return(Bu=(0,g.Z)(function*(v,f){return In(v,"POST","/v1/accounts:signInWithEmailLink",Bt(v,f))})).apply(this,arguments)}function Uu(){return(Uu=(0,g.Z)(function*(v,f){return In(v,"POST","/v1/accounts:signInWithEmailLink",Bt(v,f))})).apply(this,arguments)}class zo extends Rr{constructor(f,p,w,T=null){super("password",w),this._email=f,this._password=p,this._tenantId=T}static _fromEmailAndPassword(f,p){return new zo(f,p,"password")}static _fromEmailAndCode(f,p,w=null){return new zo(f,p,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(f){var p=this;return(0,g.Z)(function*(){switch(p.signInMethod){case"password":return function Wo(v,f){return Es.apply(this,arguments)}(f,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function Or(v,f){return Bu.apply(this,arguments)}(f,{email:p._email,oobCode:p._password});default:Ge(f,"internal-error")}})()}_linkToIdToken(f,p){var w=this;return(0,g.Z)(function*(){switch(w.signInMethod){case"password":return Lu(f,{idToken:p,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Mf(v,f){return Uu.apply(this,arguments)}(f,{idToken:p,email:w._email,oobCode:w._password});default:Ge(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Ds(v,f){return qr.apply(this,arguments)}function qr(){return(qr=(0,g.Z)(function*(v,f){return In(v,"POST","/v1/accounts:signInWithIdp",Bt(v,f))})).apply(this,arguments)}class Ri extends Rr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const p=new Ri(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(p.idToken=f.idToken),f.accessToken&&(p.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(p.nonce=f.nonce),f.pendingToken&&(p.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(p.accessToken=f.oauthToken,p.secret=f.oauthTokenSecret):Ge("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:T}=p,P=(0,ae._T)(p,["providerId","signInMethod"]);if(!w||!T)return null;const Q=new Ri(w,T);return Q.idToken=P.idToken||void 0,Q.accessToken=P.accessToken||void 0,Q.secret=P.secret,Q.nonce=P.nonce,Q.pendingToken=P.pendingToken||null,Q}_getIdTokenResponse(f){return Ds(f,this.buildRequest())}_linkToIdToken(f,p){const w=this.buildRequest();return w.idToken=p,Ds(f,w)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,Ds(f,p)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),f.postBody=(0,j.xO)(p)}return f}}function Nf(v,f){return fc.apply(this,arguments)}function fc(){return(fc=(0,g.Z)(function*(v,f){return Nt(v,"POST","/v1/accounts:sendVerificationCode",Bt(v,f))})).apply(this,arguments)}function qo(){return(qo=(0,g.Z)(function*(v,f){return In(v,"POST","/v1/accounts:signInWithPhoneNumber",Bt(v,f))})).apply(this,arguments)}function pc(){return(pc=(0,g.Z)(function*(v,f){const p=yield In(v,"POST","/v1/accounts:signInWithPhoneNumber",Bt(v,f));if(p.temporaryProof)throw Ln(v,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Rf={USER_NOT_FOUND:"user-not-found"};function ju(){return(ju=(0,g.Z)(function*(v,f){return In(v,"POST","/v1/accounts:signInWithPhoneNumber",Bt(v,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Rf)})).apply(this,arguments)}class Zs extends Rr{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,p){return new Zs({verificationId:f,verificationCode:p})}static _fromTokenResponse(f,p){return new Zs({phoneNumber:f,temporaryProof:p})}_getIdTokenResponse(f){return function Pf(v,f){return qo.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,p){return function Ks(v,f){return pc.apply(this,arguments)}(f,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Of(v,f){return ju.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:p,verificationId:w,verificationCode:T}=this.params;return f&&p?{temporaryProof:f,phoneNumber:p}:{sessionInfo:w,code:T}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:p,verificationCode:w,phoneNumber:T,temporaryProof:P}=f;return w||p||T||P?new Zs({verificationId:p,verificationCode:w,phoneNumber:T,temporaryProof:P}):null}}class Ys{constructor(f){var p,w,T,P,Q,Ee;const nt=(0,j.zd)((0,j.pd)(f)),lt=null!==(p=nt.apiKey)&&void 0!==p?p:null,Lt=null!==(w=nt.oobCode)&&void 0!==w?w:null,mn=function gc(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=nt.mode)&&void 0!==T?T:null);te(lt&&Lt&&mn,"argument-error"),this.apiKey=lt,this.operation=mn,this.code=Lt,this.continueUrl=null!==(P=nt.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(Q=nt.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(Ee=nt.tenantId)&&void 0!==Ee?Ee:null}static parseLink(f){const p=function mc(v){const f=(0,j.zd)((0,j.pd)(v)).link,p=f?(0,j.zd)((0,j.pd)(f)).deep_link_id:null,w=(0,j.zd)((0,j.pd)(v)).deep_link_id;return(w?(0,j.zd)((0,j.pd)(w)).link:null)||w||p||f||v}(f);try{return new Ys(p)}catch{return null}}}let Wa=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(p,w){return zo._fromEmailAndPassword(p,w)}static credentialWithLink(p,w){const T=Ys.parseLink(w);return te(T,"argument-error"),zo._fromEmailAndCode(p,T.code,T.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class ar{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Qs extends ar{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Ji extends Qs{static credentialFromJSON(f){const p="string"==typeof f?JSON.parse(f):f;return te("providerId"in p&&"signInMethod"in p,"argument-error"),Ri._fromParams(p)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return te(f.idToken||f.accessToken,"argument-error"),Ri._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Ji.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Ji.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:p,oauthAccessToken:w,oauthTokenSecret:T,pendingToken:P,nonce:Q,providerId:Ee}=f;if(!w&&!T&&!p&&!P||!Ee)return null;try{return new Ji(Ee)._credential({idToken:p,accessToken:w,nonce:Q,pendingToken:P})}catch{return null}}}let yc=(()=>{class v extends Qs{constructor(){super("facebook.com")}static credential(p){return Ri._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return v.credential(p.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),$a=(()=>{class v extends Qs{constructor(){super("google.com"),this.addScope("profile")}static credential(p,w){return Ri._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:w})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:w,oauthAccessToken:T}=p;if(!w&&!T)return null;try{return v.credential(w,T)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Hu=(()=>{class v extends Qs{constructor(){super("github.com")}static credential(p){return Ri._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return v.credential(p.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Xs extends Rr{constructor(f,p){super(f,f),this.pendingToken=p}_getIdTokenResponse(f){return Ds(f,this.buildRequest())}_linkToIdToken(f,p){const w=this.buildRequest();return w.idToken=p,Ds(f,w)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,Ds(f,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:T,pendingToken:P}=p;return w&&T&&P&&w===T?new Xs(w,P):null}static _create(f,p){return new Xs(f,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Kr extends ar{constructor(f){te(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Kr.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Kr.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const p=Xs.fromJSON(f);return te(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:p,providerId:w}=f;if(!p||!w)return null;try{return Xs._create(w,p)}catch{return null}}}let Oi=(()=>{class v extends Qs{constructor(){super("twitter.com")}static credential(p,w){return Ri._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:w})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:w,oauthTokenSecret:T}=p;if(!w||!T)return null;try{return v.credential(w,T)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Fr(v,f){return bs.apply(this,arguments)}function bs(){return(bs=(0,g.Z)(function*(v,f){return In(v,"POST","/v1/accounts:signUp",Bt(v,f))})).apply(this,arguments)}class ti{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,p,w,T=!1){return(0,g.Z)(function*(){const P=yield vt._fromIdTokenResponse(f,w,T),Q=Js(w);return new ti({user:P,providerId:Q,_tokenResponse:w,operationType:p})})()}static _forOperation(f,p,w){return(0,g.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const T=Js(w);return new ti({user:f,providerId:T,_tokenResponse:w,operationType:p})})()}}function Js(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Ff(v){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,g.Z)(function*(v){var f;const p=ft(v);if(yield p._initializationPromise,null!==(f=p.currentUser)&&void 0!==f&&f.isAnonymous)return new ti({user:p.currentUser,providerId:null,operationType:"signIn"});const w=yield Fr(p,{returnSecureToken:!0}),T=yield ti._fromIdTokenResponse(p,"signIn",w,!0);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class Dn extends j.ZR{constructor(f,p,w,T){var P;super(p.code,p.message),this.operationType=w,this.user=T,Object.setPrototypeOf(this,Dn.prototype),this.customData={appName:f.name,tenantId:null!==(P=f.tenantId)&&void 0!==P?P:void 0,_serverResponse:p.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,p,w,T){return new Dn(f,p,w,T)}}function Xd(v,f,p,w){return("reauthenticate"===f?p._getReauthenticationResolver(v):p._getIdTokenResponse(v)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Dn._fromErrorAndOperation(v,P,f,w):P})}function Lf(v){return new Set(v.map(({providerId:f})=>f).filter(f=>!!f))}function ni(v,f){return ir.apply(this,arguments)}function ir(){return(ir=(0,g.Z)(function*(v,f){const p=(0,j.m9)(v);yield ci(!0,p,f);const{providerUserInfo:w}=yield Je(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[f]}),T=Lf(w||[]);return p.providerData=p.providerData.filter(P=>T.has(P.providerId)),T.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function za(v,f){return eo.apply(this,arguments)}function eo(){return(eo=(0,g.Z)(function*(v,f,p=!1){const w=yield bt(v,f._linkToIdToken(v.auth,yield v.getIdToken()),p);return ti._forOperation(v,"link",w)})).apply(this,arguments)}function ci(v,f,p){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,g.Z)(function*(v,f,p){yield Ar(f);const T=!1===v?"provider-already-linked":"no-such-provider";te(Lf(f.providerData).has(p)===v,f.auth,T)})).apply(this,arguments)}function Wu(v,f){return es.apply(this,arguments)}function es(){return(es=(0,g.Z)(function*(v,f,p=!1){var w;const{auth:T}=v,P="reauthenticate";try{const Q=yield bt(v,Xd(T,P,f,v),p);te(Q.idToken,T,"internal-error");const Ee=dt(Q.idToken);te(Ee,T,"internal-error");const{sub:nt}=Ee;return te(v.uid===nt,T,"user-mismatch"),ti._forOperation(v,P,Q)}catch(Q){throw"auth/user-not-found"===(null===(w=Q)||void 0===w?void 0:w.code)&&Ge(T,"user-mismatch"),Q}})).apply(this,arguments)}function $u(v,f){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,g.Z)(function*(v,f,p=!1){const w="signIn",T=yield Xd(v,w,f),P=yield ti._fromIdTokenResponse(v,w,T);return p||(yield v._updateCurrentUser(P.user)),P})).apply(this,arguments)}function Ko(v,f){return xn.apply(this,arguments)}function xn(){return(xn=(0,g.Z)(function*(v,f){return $u(ft(v),f)})).apply(this,arguments)}function St(v,f){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,g.Z)(function*(v,f){const p=(0,j.m9)(v);return yield ci(!1,p,f.providerId),za(p,f)})).apply(this,arguments)}function Vf(v,f){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,g.Z)(function*(v,f){return Wu((0,j.m9)(v),f)})).apply(this,arguments)}function _c(v,f){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,g.Z)(function*(v,f){return In(v,"POST","/v1/accounts:signInWithCustomToken",Bt(v,f))})).apply(this,arguments)}function As(v,f){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,g.Z)(function*(v,f){const p=ft(v),w=yield _c(p,{token:f,returnSecureToken:!0}),T=yield ti._fromIdTokenResponse(p,"signIn",w);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class to{constructor(f,p){this.factorId=f,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(f,p){return"phoneInfo"in p?Ae._fromServerResponse(f,p):Ge(f,"internal-error")}}class Ae extends to{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,p){return new Ae(p)}}function Gt(v,f,p){var w;te((null===(w=p.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),te(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),f.continueUrl=p.url,f.dynamicLinkDomain=p.dynamicLinkDomain,f.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(te(p.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),f.iOSBundleId=p.iOS.bundleId),p.android&&(te(p.android.packageName.length>0,v,"missing-android-pkg-name"),f.androidInstallApp=p.android.installApp,f.androidMinimumVersionCode=p.android.minimumVersion,f.androidPackageName=p.android.packageName)}function Bf(v,f,p){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,g.Z)(function*(v,f,p){const w=(0,j.m9)(v),T={requestType:"PASSWORD_RESET",email:f};p&&Gt(w,T,p),yield Yd(w,T)})).apply(this,arguments)}function $n(v,f,p){return no.apply(this,arguments)}function no(){return(no=(0,g.Z)(function*(v,f,p){yield $r((0,j.m9)(v),{oobCode:f,newPassword:p})})).apply(this,arguments)}function qa(v,f){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,g.Z)(function*(v,f){yield Zd((0,j.m9)(v),{oobCode:f})})).apply(this,arguments)}function Ka(v,f){return ro.apply(this,arguments)}function ro(){return(ro=(0,g.Z)(function*(v,f){const p=(0,j.m9)(v),w=yield $r(p,{oobCode:f}),T=w.requestType;switch(te(T,p,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(w.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(w.mfaInfo,p,"internal-error");default:te(w.email,p,"internal-error")}let P=null;return w.mfaInfo&&(P=to._fromServerResponse(ft(p),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:P},operation:T}})).apply(this,arguments)}function Jd(v,f){return ea.apply(this,arguments)}function ea(){return(ea=(0,g.Z)(function*(v,f){const{data:p}=yield Ka((0,j.m9)(v),f);return p.email})).apply(this,arguments)}function Uf(v,f,p){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,g.Z)(function*(v,f,p){const w=ft(v),T=yield Fr(w,{returnSecureToken:!0,email:f,password:p}),P=yield ti._fromIdTokenResponse(w,"signIn",T);return yield w._updateCurrentUser(P.user),P})).apply(this,arguments)}function zn(v,f,p){return Ko((0,j.m9)(v),Wa.credential(f,p))}function di(v,f,p){return ta.apply(this,arguments)}function ta(){return(ta=(0,g.Z)(function*(v,f,p){const w=(0,j.m9)(v),T={requestType:"EMAIL_SIGNIN",email:f};te(p.handleCodeInApp,w,"argument-error"),p&&Gt(w,T,p),yield zr(w,T)})).apply(this,arguments)}function na(v,f){return"EMAIL_SIGNIN"===Ys.parseLink(f)?.operation}function Fi(v,f,p){return wc.apply(this,arguments)}function wc(){return(wc=(0,g.Z)(function*(v,f,p){const w=(0,j.m9)(v),T=Wa.credentialWithLink(f,p||Fe());return te(T._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Ko(w,T)})).apply(this,arguments)}function zu(v,f){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,g.Z)(function*(v,f){return Nt(v,"POST","/v1/accounts:createAuthUri",Bt(v,f))})).apply(this,arguments)}function eh(v,f){return io.apply(this,arguments)}function io(){return(io=(0,g.Z)(function*(v,f){const w={identifier:f,continueUri:Le()?Fe():"http://localhost"},{signinMethods:T}=yield zu((0,j.m9)(v),w);return T||[]})).apply(this,arguments)}function qu(v,f){return ra.apply(this,arguments)}function ra(){return(ra=(0,g.Z)(function*(v,f){const p=(0,j.m9)(v),T={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};f&&Gt(p.auth,T,f);const{email:P}=yield Pi(p.auth,T);P!==v.email&&(yield v.reload())})).apply(this,arguments)}function Ku(v,f,p){return ia.apply(this,arguments)}function ia(){return(ia=(0,g.Z)(function*(v,f,p){const w=(0,j.m9)(v),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:f};p&&Gt(w.auth,P,p);const{email:Q}=yield Vu(w.auth,P);Q!==v.email&&(yield v.reload())})).apply(this,arguments)}function Ec(v,f){return so.apply(this,arguments)}function so(){return(so=(0,g.Z)(function*(v,f){return Nt(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function th(v,f){return sa.apply(this,arguments)}function sa(){return(sa=(0,g.Z)(function*(v,{displayName:f,photoURL:p}){if(void 0===f&&void 0===p)return;const w=(0,j.m9)(v),P={idToken:yield w.getIdToken(),displayName:f,photoUrl:p,returnSecureToken:!0},Q=yield bt(w,Ec(w.auth,P));w.displayName=Q.displayName||null,w.photoURL=Q.photoUrl||null;const Ee=w.providerData.find(({providerId:nt})=>"password"===nt);Ee&&(Ee.displayName=w.displayName,Ee.photoURL=w.photoURL),yield w._updateTokensIfNecessary(Q)})).apply(this,arguments)}function nh(v,f){return ts((0,j.m9)(v),f,null)}function Ic(v,f){return ts((0,j.m9)(v),null,f)}function ts(v,f,p){return ns.apply(this,arguments)}function ns(){return(ns=(0,g.Z)(function*(v,f,p){const{auth:w}=v,P={idToken:yield v.getIdToken(),returnSecureToken:!0};f&&(P.email=f),p&&(P.password=p);const Q=yield bt(v,Lu(w,P));yield v._updateTokensIfNecessary(Q,!0)})).apply(this,arguments)}class Cn{constructor(f,p,w={}){this.isNewUser=f,this.providerId=p,this.profile=w}}class Li extends Cn{constructor(f,p,w,T){super(f,p,w),this.username=T}}class _n extends Cn{constructor(f,p){super(f,"facebook.com",p)}}class bc extends Li{constructor(f,p){super(f,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class Zu extends Cn{constructor(f,p){super(f,"google.com",p)}}class rh extends Li{constructor(f,p,w){super(f,"twitter.com",p,w)}}function Yu(v){const{user:f,_tokenResponse:p}=v;return f.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Dc(v){var f,p;if(!v)return null;const{providerId:w}=v,T=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},P=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&v?.idToken){const Q=null===(p=null===(f=dt(v.idToken))||void 0===f?void 0:f.firebase)||void 0===p?void 0:p.sign_in_provider;if(Q)return new Cn(P,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!w)return null;switch(w){case"facebook.com":return new _n(P,T);case"github.com":return new bc(P,T);case"google.com":return new Zu(P,T);case"twitter.com":return new rh(P,T,v.screenName||null);case"custom":case"anonymous":return new Cn(P,null);default:return new Cn(P,w,T)}}(p)}class Yr{constructor(f,p,w){this.type=f,this.credential=p,this.auth=w}static _fromIdtoken(f,p){return new Yr("enroll",f,p)}static _fromMfaPendingCredential(f){return new Yr("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var p,w;if(f?.multiFactorSession){if(null!==(p=f.multiFactorSession)&&void 0!==p&&p.pendingCredential)return Yr._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(w=f.multiFactorSession)&&void 0!==w&&w.idToken)return Yr._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Ju{constructor(f,p,w){this.session=f,this.hints=p,this.signInResolver=w}static _fromError(f,p){const w=ft(f),T=p.customData._serverResponse,P=(T.mfaInfo||[]).map(Ee=>to._fromServerResponse(w,Ee));te(T.mfaPendingCredential,w,"internal-error");const Q=Yr._fromMfaPendingCredential(T.mfaPendingCredential);return new Ju(Q,P,function(){var Ee=(0,g.Z)(function*(nt){const lt=yield nt._process(w,Q);delete T.mfaInfo,delete T.mfaPendingCredential;const Lt=Object.assign(Object.assign({},T),{idToken:lt.idToken,refreshToken:lt.refreshToken});switch(p.operationType){case"signIn":const mn=yield ti._fromIdTokenResponse(w,p.operationType,Lt);return yield w._updateCurrentUser(mn.user),mn;case"reauthenticate":return te(p.user,w,"internal-error"),ti._forOperation(p.user,p.operationType,Lt);default:Ge(w,"internal-error")}});return function(nt){return Ee.apply(this,arguments)}}())}resolveSignIn(f){var p=this;return(0,g.Z)(function*(){return p.signInResolver(f)})()}}function Sc(v,f){var p;const w=(0,j.m9)(v),T=f;return te(f.customData.operationType,w,"argument-error"),te(null===(p=T.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,w,"argument-error"),Ju._fromError(w,T)}function Mn(v,f){return Nt(v,"POST","/v2/accounts/mfaEnrollment:start",Bt(v,f))}class Xa{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(w=>to._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new Xa(f)}getSession(){var f=this;return(0,g.Z)(function*(){return Yr._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,p){var w=this;return(0,g.Z)(function*(){const T=f,P=yield w.getSession(),Q=yield bt(w.user,T._process(w.user.auth,P,p));return yield w.user._updateTokensIfNecessary(Q),w.user.reload()})()}unenroll(f){var p=this;return(0,g.Z)(function*(){var w;const T="string"==typeof f?f:f.uid,P=yield p.user.getIdToken(),Q=yield bt(p.user,function Qa(v,f){return Nt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Bt(v,f))}(p.user.auth,{idToken:P,mfaEnrollmentId:T}));p.enrolledFactors=p.enrolledFactors.filter(({uid:Ee})=>Ee!==T),yield p.user._updateTokensIfNecessary(Q);try{yield p.user.reload()}catch(Ee){if("auth/user-token-expired"!==(null===(w=Ee)||void 0===w?void 0:w.code))throw Ee}})()}}const ih=new WeakMap;function Ja(v){const f=(0,j.m9)(v);return ih.has(f)||ih.set(f,Xa._fromUser(f)),ih.get(f)}const Vi="__sak";class oa{constructor(f,p){this.storageRetriever=f,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(Vi,"1"),this.storage.removeItem(Vi),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,p){return this.storage.setItem(f,JSON.stringify(p)),Promise.resolve()}_get(f){const p=this.storage.getItem(f);return Promise.resolve(p?JSON.parse(p):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const qn=(()=>{class v extends oa{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,w)=>this.onStorageEvent(p,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function el(){const v=(0,j.z$)();return L(v)||Re(v)}()&&function ki(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=sn(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const w of Object.keys(this.listeners)){const T=this.storage.getItem(w),P=this.localCache[w];T!==P&&p(w,P,T)}}onStorageEvent(p,w=!1){if(!p.key)return void this.forAllChangedKeys((Ee,nt,lt)=>{this.notifyListeners(Ee,lt)});const T=p.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ee=this.storage.getItem(T);if(p.newValue!==Ee)null!==p.newValue?this.storage.setItem(T,p.newValue):this.storage.removeItem(T);else if(this.localCache[T]===p.newValue&&!w)return}const P=()=>{const Ee=this.storage.getItem(T);!w&&this.localCache[T]===Ee||this.notifyListeners(T,Ee)},Q=this.storage.getItem(T);!function xt(){return(0,j.w1)()&&10===document.documentMode}()||Q===p.newValue||p.newValue===p.oldValue?P():setTimeout(P,10)}notifyListeners(p,w){this.localCache[p]=w;const T=this.listeners[p];if(T)for(const P of Array.from(T))P(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,w,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:w,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(w)}_removeListener(p,w){this.listeners[p]&&(this.listeners[p].delete(w),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,w){var T=()=>super._set,P=this;return(0,g.Z)(function*(){yield T().call(P,p,w),P.localCache[p]=JSON.stringify(w)})()}_get(p){var w=()=>super._get,T=this;return(0,g.Z)(function*(){const P=yield w().call(T,p);return T.localCache[p]=JSON.stringify(P),P})()}_remove(p){var w=()=>super._remove,T=this;return(0,g.Z)(function*(){yield w().call(T,p),delete T.localCache[p]})()}}return v.type="LOCAL",v})(),rs=(()=>{class v extends oa{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,w){}_removeListener(p,w){}}return v.type="SESSION",v})();let ua=(()=>{class v{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const w=this.receivers.find(P=>P.isListeningto(p));if(w)return w;const T=new v(p);return this.receivers.push(T),T}isListeningto(p){return this.eventTarget===p}handleEvent(p){var w=this;return(0,g.Z)(function*(){const T=p,{eventId:P,eventType:Q,data:Ee}=T.data,nt=w.handlersMap[Q];if(!nt?.size)return;T.ports[0].postMessage({status:"ack",eventId:P,eventType:Q});const lt=Array.from(nt).map(function(){var mn=(0,g.Z)(function*(Hi){return Hi(T.origin,Ee)});return function(Hi){return mn.apply(this,arguments)}}()),Lt=yield function tl(v){return Promise.all(v.map(function(){var f=(0,g.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(w){return{fulfilled:!1,reason:w}}});return function(p){return f.apply(this,arguments)}}()))}(lt);T.ports[0].postMessage({status:"done",eventId:P,eventType:Q,response:Lt})})()}_subscribe(p,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(w)}_unsubscribe(p,w){this.handlersMap[p]&&w&&this.handlersMap[p].delete(w),(!w||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function lo(v="",f=10){let p="";for(let w=0;w<f;w++)p+=Math.floor(10*Math.random());return v+p}class ah{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,p,w=50){var T=this;return(0,g.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let Q,Ee;return new Promise((nt,lt)=>{const Lt=lo("",20);P.port1.start();const mn=setTimeout(()=>{lt(new Error("unsupported_event"))},w);Ee={messageChannel:P,onMessage(Hi){const Do=Hi;if(Do.data.eventId===Lt)switch(Do.data.status){case"ack":clearTimeout(mn),Q=setTimeout(()=>{lt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Q),nt(Do.data.response);break;default:clearTimeout(mn),clearTimeout(Q),lt(new Error("invalid_response"))}}},T.handlers.add(Ee),P.port1.addEventListener("message",Ee.onMessage),T.target.postMessage({eventType:f,eventId:Lt,data:p},[P.port2])}).finally(()=>{Ee&&T.removeMessageHandler(Ee)})})()}}function kn(){return window}function Lr(){return typeof kn().WorkerGlobalScope<"u"&&"function"==typeof kn().importScripts}function Bi(){return(Bi=(0,g.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const la="firebaseLocalStorageDb",ca="firebaseLocalStorage",co="fbase_key";class ho{constructor(f){this.request=f}toPromise(){return new Promise((f,p)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function fo(v,f){return v.transaction([ca],f?"readwrite":"readonly").objectStore(ca)}function tu(){const v=indexedDB.open(la,1);return new Promise((f,p)=>{v.addEventListener("error",()=>{p(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(ca,{keyPath:co})}catch(T){p(T)}}),v.addEventListener("success",(0,g.Z)(function*(){const w=v.result;w.objectStoreNames.contains(ca)?f(w):(w.close(),yield function Nc(){const v=indexedDB.deleteDatabase(la);return new ho(v).toPromise()}(),f(yield tu()))}))})}function nu(v,f,p){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,g.Z)(function*(v,f,p){const w=fo(v,!0).put({[co]:f,value:p});return new ho(w).toPromise()})).apply(this,arguments)}function po(){return(po=(0,g.Z)(function*(v,f){const p=fo(v,!1).get(f),w=yield new ho(p).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function ru(v,f){const p=fo(v,!0).delete(f);return new ho(p).toPromise()}const mo=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,g.Z)(function*(){return p.db||(p.db=yield tu()),p.db})()}_withRetries(p){var w=this;return(0,g.Z)(function*(){let T=0;for(;;)try{const P=yield w._openDb();return yield p(P)}catch(P){if(T++>3)throw P;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,g.Z)(function*(){return Lr()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,g.Z)(function*(){p.receiver=ua._getInstance(function eu(){return Lr()?self:null}()),p.receiver._subscribe("keyChanged",function(){var w=(0,g.Z)(function*(T,P){return{keyProcessed:(yield p._poll()).includes(P.key)}});return function(T,P){return w.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var w=(0,g.Z)(function*(T,P){return["keyChanged"]});return function(T,P){return w.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,g.Z)(function*(){var w,T;if(p.activeServiceWorker=yield function kc(){return Bi.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new ah(p.activeServiceWorker);const P=yield p.sender._send("ping",{},800);!P||(null===(w=P[0])||void 0===w?void 0:w.fulfilled)&&(null===(T=P[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var w=this;return(0,g.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function nl(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:p},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const p=yield tu();return yield nu(p,Vi,"1"),yield ru(p,Vi),!0}catch{}return!1})()}_withPendingWrite(p){var w=this;return(0,g.Z)(function*(){w.pendingWrites++;try{yield p()}finally{w.pendingWrites--}})()}_set(p,w){var T=this;return(0,g.Z)(function*(){return T._withPendingWrite((0,g.Z)(function*(){return yield T._withRetries(P=>nu(P,p,w)),T.localCache[p]=w,T.notifyServiceWorker(p)}))})()}_get(p){var w=this;return(0,g.Z)(function*(){const T=yield w._withRetries(P=>function uh(v,f){return po.apply(this,arguments)}(P,p));return w.localCache[p]=T,T})()}_remove(p){var w=this;return(0,g.Z)(function*(){return w._withPendingWrite((0,g.Z)(function*(){return yield w._withRetries(T=>ru(T,p)),delete w.localCache[p],w.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,g.Z)(function*(){const w=yield p._withRetries(Q=>{const Ee=fo(Q,!1).getAll();return new ho(Ee).toPromise()});if(!w)return[];if(0!==p.pendingWrites)return[];const T=[],P=new Set;for(const{fbase_key:Q,value:Ee}of w)P.add(Q),JSON.stringify(p.localCache[Q])!==JSON.stringify(Ee)&&(p.notifyListeners(Q,Ee),T.push(Q));for(const Q of Object.keys(p.localCache))p.localCache[Q]&&!P.has(Q)&&(p.notifyListeners(Q,null),T.push(Q));return T})()}notifyListeners(p,w){this.localCache[p]=w;const T=this.listeners[p];if(T)for(const P of Array.from(T))P(w)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(w)}_removeListener(p,w){this.listeners[p]&&(this.listeners[p].delete(w),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function lh(v,f){return Nt(v,"POST","/v2/accounts/mfaSignIn:start",Bt(v,f))}function vr(){return(vr=(0,g.Z)(function*(v){return(yield Nt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function xs(v){return new Promise((f,p)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=f,w.onerror=T=>{const P=xe("internal-error");P.customData=T,p(P)},w.type="text/javascript",w.charset="UTF-8",function vo(){var v,f;return null!==(f=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==f?f:document}().appendChild(w)})}function _o(v){return`__${v}${Math.floor(1e6*Math.random())}`}const hi=1e12;class Pc{constructor(f){this.auth=f,this.counter=hi,this._widgets=new Map}render(f,p){const w=this.counter;return this._widgets.set(w,new gn(f,this.auth.name,p||{})),this.counter++,w}reset(f){var p;const w=f||hi;null===(p=this._widgets.get(w))||void 0===p||p.delete(),this._widgets.delete(w)}getResponse(f){var p;return(null===(p=this._widgets.get(f||hi))||void 0===p?void 0:p.getResponse())||""}execute(f){var p=this;return(0,g.Z)(function*(){var w;return null===(w=p._widgets.get(f||hi))||void 0===w||w.execute(),""})()}}class gn{constructor(f,p,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof f?document.getElementById(f):f;te(T,"argument-error",{appName:p}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function jf(v){const f=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<v;w++)f.push(p.charAt(Math.floor(Math.random()*p.length)));return f.join("")}(50);const{callback:f,"expired-callback":p}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ch=_o("rcb"),D_=new ze(3e4,6e4);class am{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=kn().grecaptcha)||void 0===f||!f.render)}load(f,p=""){return te(function dh(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(p),f,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(kn().grecaptcha):new Promise((w,T)=>{const P=kn().setTimeout(()=>{T(xe(f,"network-request-failed"))},D_.get());kn()[ch]=()=>{kn().clearTimeout(P),delete kn()[ch];const Ee=kn().grecaptcha;if(!Ee)return void T(xe(f,"internal-error"));const nt=Ee.render;Ee.render=(lt,Lt)=>{const mn=nt(lt,Lt);return this.counter++,mn},this.hostLanguage=p,w(Ee)},xs(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:ch,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(P),T(xe(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var p;return!(null===(p=kn().grecaptcha)||void 0===p||!p.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class b_{load(f){return(0,g.Z)(function*(){return new Pc(f)})()}clearedOneInstance(){}}const su="recaptcha",A_={theme:"light",type:"image"};class um{constructor(f,p=Object.assign({},A_),w){this.parameters=p,this.type=su,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ft(w),this.isInvisible="invisible"===this.parameters.size,te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof f?document.getElementById(f):f;te(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new b_:new am,this.validateStartingState()}verify(){var f=this;return(0,g.Z)(function*(){f.assertNotDestroyed();const p=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(p)||new Promise(P=>{const Q=Ee=>{!Ee||(f.tokenChangeListeners.delete(Q),P(Ee))};f.tokenChangeListeners.add(Q),f.isInvisible&&w.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return p=>{if(this.tokenChangeListeners.forEach(w=>w(p)),"function"==typeof f)f(p);else if("string"==typeof f){const w=kn()[f];"function"==typeof w&&w(p)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,g.Z)(function*(){if(yield f.init(),!f.widgetId){let p=f.container;if(!f.isInvisible){const w=document.createElement("div");p.appendChild(w),p=w}f.widgetId=f.getAssertedRecaptcha().render(p,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,g.Z)(function*(){te(Le()&&!Lr(),f.auth,"internal-error"),yield function sr(){let v=null;return new Promise(f=>{"complete"!==document.readyState?(v=()=>f(),window.addEventListener("load",v)):f()}).catch(f=>{throw v&&window.removeEventListener("load",v),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const p=yield function iu(v){return vr.apply(this,arguments)}(f.auth);te(p,f.auth,"internal-error"),f.parameters.sitekey=p})()}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class _r{constructor(f,p){this.verificationId=f,this.onConfirmation=p}confirm(f){const p=Zs._fromVerification(this.verificationId,f);return this.onConfirmation(p)}}function ou(v,f,p){return Co.apply(this,arguments)}function Co(){return(Co=(0,g.Z)(function*(v,f,p){const w=ft(v),T=yield Ms(w,f,(0,j.m9)(p));return new _r(T,P=>Ko(w,P))})).apply(this,arguments)}function fi(v,f,p){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,g.Z)(function*(v,f,p){const w=(0,j.m9)(v);yield ci(!1,w,"phone");const T=yield Ms(w.auth,f,(0,j.m9)(p));return new _r(T,P=>St(w,P))})).apply(this,arguments)}function Sr(v,f,p){return en.apply(this,arguments)}function en(){return(en=(0,g.Z)(function*(v,f,p){const w=(0,j.m9)(v),T=yield Ms(w.auth,f,(0,j.m9)(p));return new _r(T,P=>Vf(w,P))})).apply(this,arguments)}function Ms(v,f,p){return ks.apply(this,arguments)}function ks(){return(ks=(0,g.Z)(function*(v,f,p){var w;const T=yield p.verify();try{let P;if(te("string"==typeof T,v,"argument-error"),te(p.type===su,v,"argument-error"),P="string"==typeof f?{phoneNumber:f}:f,"session"in P){const Q=P.session;if("phoneNumber"in P)return te("enroll"===Q.type,v,"internal-error"),(yield Mn(v,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{te("signin"===Q.type,v,"internal-error");const Ee=(null===(w=P.multiFactorHint)||void 0===w?void 0:w.uid)||P.multiFactorUid;return te(Ee,v,"missing-multi-factor-info"),(yield lh(v,{mfaPendingCredential:Q.credential,mfaEnrollmentId:Ee,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield Nf(v,{phoneNumber:P.phoneNumber,recaptchaToken:T});return Q}}finally{p._reset()}})).apply(this,arguments)}function sl(v,f){return pi.apply(this,arguments)}function pi(){return(pi=(0,g.Z)(function*(v,f){yield za((0,j.m9)(v),f)})).apply(this,arguments)}let ol=(()=>{class v{constructor(p){this.providerId=v.PROVIDER_ID,this.auth=ft(p)}verifyPhoneNumber(p,w){return Ms(this.auth,p,(0,j.m9)(w))}static credential(p,w){return Zs._fromVerification(p,w)}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:w,temporaryProof:T}=p;return w&&T?Zs._fromTokenResponse(w,T):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function ur(v,f){return f?Y(f):(te(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class au extends Rr{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Ds(f,this._buildIdpRequest())}_linkToIdToken(f,p){return Ds(f,this._buildIdpRequest(p))}_getReauthenticationResolver(f){return Ds(f,this._buildIdpRequest())}_buildIdpRequest(f){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(p.idToken=f),p}}function lr(v){return $u(v.auth,new au(v),v.bypassAuthState)}function Vr(v){const{auth:f,user:p}=v;return te(p,f,"internal-error"),Wu(p,new au(v),v.bypassAuthState)}function da(v){return ji.apply(this,arguments)}function ji(){return(ji=(0,g.Z)(function*(v){const{auth:f,user:p}=v;return te(p,f,"internal-error"),za(p,new au(v),v.bypassAuthState)})).apply(this,arguments)}class Rc{constructor(f,p,w,T,P=!1){this.auth=f,this.resolver=w,this.user=T,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var f=this;return new Promise(function(){var p=(0,g.Z)(function*(w,T){f.pendingPromise={resolve:w,reject:T};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(P){f.reject(P)}});return function(w,T){return p.apply(this,arguments)}}())}onAuthEvent(f){var p=this;return(0,g.Z)(function*(){const{urlResponse:w,sessionId:T,postBody:P,tenantId:Q,error:Ee,type:nt}=f;if(Ee)return void p.reject(Ee);const lt={auth:p.auth,requestUri:w,sessionId:T,tenantId:Q||void 0,postBody:P||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(nt)(lt))}catch(Lt){p.reject(Lt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return lr;case"linkViaPopup":case"linkViaRedirect":return da;case"reauthViaPopup":case"reauthViaRedirect":return Vr;default:Ge(this.auth,"internal-error")}}resolve(f){fe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){fe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const al=new ze(2e3,1e4);function uu(v,f,p){return lu.apply(this,arguments)}function lu(){return(lu=(0,g.Z)(function*(v,f,p){const w=ft(v);we(v,f,ar);const T=ur(w,p);return new xr(w,"signInViaPopup",f,T).executeNotNull()})).apply(this,arguments)}function ul(v,f,p){return ge.apply(this,arguments)}function ge(){return(ge=(0,g.Z)(function*(v,f,p){const w=(0,j.m9)(v);we(w.auth,f,ar);const T=ur(w.auth,p);return new xr(w.auth,"reauthViaPopup",f,T,w).executeNotNull()})).apply(this,arguments)}function ii(v,f,p){return ss.apply(this,arguments)}function ss(){return(ss=(0,g.Z)(function*(v,f,p){const w=(0,j.m9)(v);we(w.auth,f,ar);const T=ur(w.auth,p);return new xr(w.auth,"linkViaPopup",f,T,w).executeNotNull()})).apply(this,arguments)}let xr=(()=>{class v extends Rc{constructor(p,w,T,P,Q){super(p,w,P,Q),this.provider=T,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var p=this;return(0,g.Z)(function*(){const w=yield p.execute();return te(w,p.auth,"internal-error"),w})()}onExecution(){var p=this;return(0,g.Z)(function*(){fe(1===p.filter.length,"Popup operations only handle one event");const w=lo();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],w),p.authWindow.associatedEvent=w,p.resolver._originValidation(p.auth).catch(T=>{p.reject(T)}),p.resolver._isIframeWebStorageSupported(p.auth,T=>{T||p.reject(xe(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(xe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const p=()=>{var w,T;this.pollId=null!==(T=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(xe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,al.get())};p()}}return v.currentPopupAction=null,v})();const ll=new Map;class Qr extends Rc{constructor(f,p,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,p=this;return(0,g.Z)(function*(){let w=ll.get(p.auth._key());if(!w){try{const P=(yield function ot(v,f){return os.apply(this,arguments)}(p.resolver,p.auth))?yield f().call(p):null;w=()=>Promise.resolve(P)}catch(T){w=()=>Promise.reject(T)}ll.set(p.auth._key(),w)}return p.bypassAuthState||ll.set(p.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var p=()=>super.onAuthEvent,w=this;return(0,g.Z)(function*(){if("signInViaRedirect"===f.type)return p().call(w,f);if("unknown"!==f.type){if(f.eventId){const T=yield w.auth._redirectUserForId(f.eventId);if(T)return w.user=T,p().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function os(){return(os=(0,g.Z)(function*(v,f){const p=wr(f),w=Eo(v);if(!(yield w._isAvailable()))return!1;const T="true"===(yield w._get(p));return yield w._remove(p),T})).apply(this,arguments)}function Et(v,f){return si.apply(this,arguments)}function si(){return(si=(0,g.Z)(function*(v,f){return Eo(v)._set(wr(f),"true")})).apply(this,arguments)}function ha(){ll.clear()}function Ns(v,f){ll.set(v._key(),f)}function Eo(v){return Y(v._redirectPersistence)}function wr(v){return U("pendingRedirect",v.config.apiKey,v.name)}function hh(v,f,p){return function cn(v,f,p){return cl.apply(this,arguments)}(v,f,p)}function cl(){return(cl=(0,g.Z)(function*(v,f,p){const w=ft(v);we(v,f,ar);const T=ur(w,p);return yield Et(T,w),T._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function Cr(v,f,p){return function Ps(v,f,p){return En.apply(this,arguments)}(v,f,p)}function En(){return(En=(0,g.Z)(function*(v,f,p){const w=(0,j.m9)(v);we(w.auth,f,ar);const T=ur(w.auth,p);yield Et(T,w.auth);const P=yield re(w);return T._openRedirect(w.auth,f,"reauthViaRedirect",P)})).apply(this,arguments)}function as(v,f,p){return function fh(v,f,p){return I.apply(this,arguments)}(v,f,p)}function I(){return(I=(0,g.Z)(function*(v,f,p){const w=(0,j.m9)(v);we(w.auth,f,ar);const T=ur(w.auth,p);yield ci(!1,w,f.providerId),yield Et(T,w.auth);const P=yield re(w);return T._openRedirect(w.auth,f,"linkViaRedirect",P)})).apply(this,arguments)}function D(v,f){return S.apply(this,arguments)}function S(){return(S=(0,g.Z)(function*(v,f){return yield ft(v)._initializationPromise,O(v,f,!1)})).apply(this,arguments)}function O(v,f){return Z.apply(this,arguments)}function Z(){return(Z=(0,g.Z)(function*(v,f,p=!1){const w=ft(v),T=ur(w,f),Q=yield new Qr(w,T,p).execute();return Q&&!p&&(delete Q.user._redirectEventId,yield w._persistUserIfCurrent(Q.user),yield w._setRedirectUser(null,f)),Q})).apply(this,arguments)}function re(v){return De.apply(this,arguments)}function De(){return(De=(0,g.Z)(function*(v){const f=lo(`${v.uid}:::`);return v._redirectEventId=f,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),f})).apply(this,arguments)}class Xe{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let p=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(p=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function _t(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Pt(v);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=f,p=!0)),p}sendToConsumer(f,p){var w;if(f.error&&!Pt(f)){const T=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";p.onError(xe(this.auth,T))}else p.onAuthEvent(f)}isEventForConsumer(f,p){const w=null===p.eventId||!!f.eventId&&f.eventId===p.eventId;return p.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(st(f))}saveEventToCache(f){this.cachedEventUids.add(st(f)),this.lastProcessedEventTime=Date.now()}}function st(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(f=>f).join("-")}function Pt({type:v,error:f}){return"unknown"===v&&"auth/no-auth-event"===f?.code}function bn(v){return wn.apply(this,arguments)}function wn(){return(wn=(0,g.Z)(function*(v,f={}){return Nt(v,"GET","/v1/projects",f)})).apply(this,arguments)}const fa=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Io=/^https?/;function dl(){return(dl=(0,g.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:f}=yield bn(v);for(const p of f)try{if(hl(p))return}catch{}Ge(v,"unauthorized-domain")})).apply(this,arguments)}function hl(v){const f=Fe(),{protocol:p,hostname:w}=new URL(f);if(v.startsWith("chrome-extension://")){const Q=new URL(v);return""===Q.hostname&&""===w?"chrome-extension:"===p&&v.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===p&&Q.hostname===w}if(!Io.test(p))return!1;if(fa.test(v))return w===v;const T=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(w)}const ls=new ze(3e4,6e4);function gi(){const v=kn().___jsl;if(v?.H)for(const f of Object.keys(v.H))if(v.H[f].r=v.H[f].r||[],v.H[f].L=v.H[f].L||[],v.H[f].r=[...v.H[f].L],v.CP)for(let p=0;p<v.CP.length;p++)v.CP[p]=null}let mi=null;function Hf(v){return mi=mi||function cs(v){return new Promise((f,p)=>{var w,T,P;function Q(){gi(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{gi(),p(xe(v,"network-request-failed"))},timeout:ls.get()})}if(null!==(T=null===(w=kn().gapi)||void 0===w?void 0:w.iframes)&&void 0!==T&&T.Iframe)f(gapi.iframes.getContext());else{if(null===(P=kn().gapi)||void 0===P||!P.load){const Ee=_o("iframefcb");return kn()[Ee]=()=>{gapi.load?Q():p(xe(v,"network-request-failed"))},xs(`https://apis.google.com/js/api.js?onload=${Ee}`).catch(nt=>p(nt))}Q()}}).catch(f=>{throw mi=null,f})}(v),mi}const lm=new ze(5e3,15e3),Gf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Fc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dm(v){const f=v.config;te(f.authDomain,v,"auth-domain-config-required");const p=f.emulator?nn(f,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,w={apiKey:f.apiKey,appName:v.name,v:N.SDK_VERSION},T=Fc.get(v.config.apiHost);T&&(w.eid=T);const P=v._getFrameworks();return P.length&&(w.fw=P.join(",")),`${p}?${(0,j.xO)(w).slice(1)}`}function pl(){return pl=(0,g.Z)(function*(v){const f=yield Hf(v),p=kn().gapi;return te(p,v,"internal-error"),f.open({where:document.body,url:dm(v),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gf,dontclear:!0},w=>new Promise(function(){var T=(0,g.Z)(function*(P,Q){yield w.restyle({setHideOnLeave:!1});const Ee=xe(v,"network-request-failed"),nt=kn().setTimeout(()=>{Q(Ee)},lm.get());function lt(){kn().clearTimeout(nt),P(w)}w.ping(lt).then(lt,()=>{Q(Ee)})});return function(P,Q){return T.apply(this,arguments)}}()))}),pl.apply(this,arguments)}const T_={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Wf{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pa(v,f,p,w,T,P){te(v.config.authDomain,v,"auth-domain-config-required"),te(v.config.apiKey,v,"invalid-api-key");const Q={apiKey:v.config.apiKey,appName:v.name,authType:p,redirectUrl:w,v:N.SDK_VERSION,eventId:T};if(f instanceof ar){f.setDefaultLanguage(v.languageCode),Q.providerId=f.providerId||"",(0,j.xb)(f.getCustomParameters())||(Q.customParameters=JSON.stringify(f.getCustomParameters()));for(const[nt,lt]of Object.entries(P||{}))Q[nt]=lt}if(f instanceof Qs){const nt=f.getScopes().filter(lt=>""!==lt);nt.length>0&&(Q.scopes=nt.join(","))}v.tenantId&&(Q.tid=v.tenantId);const Ee=Q;for(const nt of Object.keys(Ee))void 0===Ee[nt]&&delete Ee[nt];return`${function yh({config:v}){return v.emulator?nn(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,j.xO)(Ee).slice(1)}`}const ml="webStorageSupport",yi=class zf{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rs,this._completeRedirectFn=O,this._overrideRedirectResult=Ns}_openPopup(f,p,w,T){var P=this;return(0,g.Z)(function*(){var Q;fe(null===(Q=P.eventManagers[f._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const Ee=pa(f,p,w,Fe(),T);return function gh(v,f,p,w=500,T=600){const P=Math.max((window.screen.availHeight-T)/2,0).toString(),Q=Math.max((window.screen.availWidth-w)/2,0).toString();let Ee="";const nt=Object.assign(Object.assign({},T_),{width:w.toString(),height:T.toString(),top:P,left:Q}),lt=(0,j.z$)().toLowerCase();p&&(Ee=ee(lt)?"_blank":p),M(lt)&&(f=f||"http://localhost",nt.scrollbars="yes");const Lt=Object.entries(nt).reduce((Hi,[Do,ds])=>`${Hi}${Do}=${ds},`,"");if(function rn(v=(0,j.z$)()){var f;return Re(v)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(lt)&&"_self"!==Ee)return function $f(v,f){const p=document.createElement("a");p.href=v,p.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(w)}(f||"",Ee),new Wf(null);const mn=window.open(f||"",Ee,Lt);te(mn,v,"popup-blocked");try{mn.focus()}catch{}return new Wf(mn)}(f,Ee,lo())})()}_openRedirect(f,p,w,T){var P=this;return(0,g.Z)(function*(){return yield P._originValidation(f),function Mc(v){kn().location.href=v}(pa(f,p,w,Fe(),T)),new Promise(()=>{})})()}_initialize(f){const p=f._key();if(this.eventManagers[p]){const{manager:T,promise:P}=this.eventManagers[p];return T?Promise.resolve(T):(fe(P,"If manager is not set, promise should be"),P)}const w=this.initAndGetManager(f);return this.eventManagers[p]={promise:w},w.catch(()=>{delete this.eventManagers[p]}),w}initAndGetManager(f){var p=this;return(0,g.Z)(function*(){const w=yield function fl(v){return pl.apply(this,arguments)}(f),T=new Xe(f);return w.register("authEvent",P=>(te(P?.authEvent,f,"invalid-auth-event"),{status:T.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[f._key()]={manager:T},p.iframes[f._key()]=w,T})()}_isIframeWebStorageSupported(f,p){this.iframes[f._key()].send(ml,{type:ml},T=>{var P;const Q=null===(P=T?.[0])||void 0===P?void 0:P[ml];void 0!==Q&&p(!!Q),Ge(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function us(v){return dl.apply(this,arguments)}(f)),this.originValidationPromises[p]}get _shouldInitProactively(){return sn()||L()||Re()}};class yl extends class qf{constructor(f){this.factorId=f}_process(f,p,w){switch(p.type){case"enroll":return this._finalizeEnroll(f,p.credential,w);case"signin":return this._finalizeSignIn(f,p.credential);default:return ue("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new yl(f)}_finalizeEnroll(f,p,w){return function Ya(v,f){return Nt(v,"POST","/v2/accounts/mfaEnrollment:finalize",Bt(v,f))}(f,{idToken:p,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,p){return function yo(v,f){return Nt(v,"POST","/v2/accounts/mfaSignIn:finalize",Bt(v,f))}(f,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Kf=(()=>{class v{constructor(){}static assertion(p){return yl._fromCredential(p)}}return v.FACTOR_ID="phone",v})();var vh="@firebase/auth",cu="0.20.11";class _h{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var p=this;return(0,g.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const p=this.auth.onIdTokenChanged(w=>{var T;f((null===(T=w)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,p),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const p=this.internalListeners.get(f);!p||(this.internalListeners.delete(f),p(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,j.Pz)("authIdTokenMaxAge"),function cr(v){(0,N._registerComponent)(new me.wA("auth",(f,{options:p})=>{const w=f.getProvider("app").getImmediate(),T=f.getProvider("heartbeat"),{apiKey:P,authDomain:Q}=w.options;return((Ee,nt)=>{te(P&&!P.includes(":"),"invalid-api-key",{appName:Ee.name}),te(!Q?.includes(":"),"argument-error",{appName:Ee.name});const lt={apiKey:P,authDomain:Q,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pn(v)},Lt=new zs(Ee,nt,lt);return function ie(v,f){const p=f?.persistence||[],w=(Array.isArray(p)?p:[p]).map(Y);f?.errorMap&&v._updateErrorMap(f.errorMap),v._initializeWithPersistence(w,f?.popupRedirectResolver)}(Lt,p),Lt})(w,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,p,w)=>{f.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new me.wA("auth-internal",f=>{const p=ft(f.getProvider("auth").getImmediate());return new _h(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(vh,cu,function wh(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,N.registerVersion)(vh,cu,"esm2017")}("Browser")},2090:(mt,Me,V)=>{V.d(Me,{$s:()=>tt,BH:()=>Ft,G6:()=>we,L:()=>de,LL:()=>Kt,P0:()=>Le,Pz:()=>Qt,Sg:()=>ze,UG:()=>Pe,US:()=>me,ZB:()=>G,ZR:()=>dn,aH:()=>ct,b$:()=>pe,eu:()=>te,hl:()=>Ze,jU:()=>Ke,m9:()=>$t,ne:()=>fn,pd:()=>ys,r3:()=>br,ru:()=>ye,tV:()=>be,uI:()=>Oe,vZ:()=>Je,w1:()=>Ge,xO:()=>ln,xb:()=>ei,z$:()=>We,zI:()=>ue,zd:()=>rr});const se=function(H){const U=[];let K=0;for(let B=0;B<H.length;B++){let M=H.charCodeAt(B);M<128?U[K++]=M:M<2048?(U[K++]=M>>6|192,U[K++]=63&M|128):55296==(64512&M)&&B+1<H.length&&56320==(64512&H.charCodeAt(B+1))?(M=65536+((1023&M)<<10)+(1023&H.charCodeAt(++B)),U[K++]=M>>18|240,U[K++]=M>>12&63|128,U[K++]=M>>6&63|128,U[K++]=63&M|128):(U[K++]=M>>12|224,U[K++]=M>>6&63|128,U[K++]=63&M|128)}return U},me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,U){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=U?this.byteToCharMapWebSafe_:this.byteToCharMap_,B=[];for(let M=0;M<H.length;M+=3){const L=H[M],ee=M+1<H.length,ke=ee?H[M+1]:0,rt=M+2<H.length,it=rt?H[M+2]:0;let At=(15&ke)<<2|it>>6,rn=63&it;rt||(rn=64,ee||(At=64)),B.push(K[L>>2],K[(3&L)<<4|ke>>4],K[At],K[rn])}return B.join("")},encodeString(H,U){return this.HAS_NATIVE_SUPPORT&&!U?btoa(H):this.encodeByteArray(se(H),U)},decodeString(H,U){return this.HAS_NATIVE_SUPPORT&&!U?atob(H):function(H){const U=[];let K=0,B=0;for(;K<H.length;){const M=H[K++];if(M<128)U[B++]=String.fromCharCode(M);else if(M>191&&M<224){const L=H[K++];U[B++]=String.fromCharCode((31&M)<<6|63&L)}else if(M>239&&M<365){const rt=((7&M)<<18|(63&H[K++])<<12|(63&H[K++])<<6|63&H[K++])-65536;U[B++]=String.fromCharCode(55296+(rt>>10)),U[B++]=String.fromCharCode(56320+(1023&rt))}else{const L=H[K++],ee=H[K++];U[B++]=String.fromCharCode((15&M)<<12|(63&L)<<6|63&ee)}}return U.join("")}(this.decodeStringToByteArray(H,U))},decodeStringToByteArray(H,U){this.init_();const K=U?this.charToByteMapWebSafe_:this.charToByteMap_,B=[];for(let M=0;M<H.length;){const L=K[H.charAt(M++)],ke=M<H.length?K[H.charAt(M)]:0;++M;const it=M<H.length?K[H.charAt(M)]:64;++M;const Re=M<H.length?K[H.charAt(M)]:64;if(++M,null==L||null==ke||null==it||null==Re)throw Error();B.push(L<<2|ke>>4),64!==it&&(B.push(ke<<4&240|it>>2),64!==Re&&B.push(it<<6&192|Re))}return B},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}},de=function(H){return function(H){const U=se(H);return me.encodeByteArray(U,!0)}(H).replace(/\./g,"")},be=function(H){try{return me.decodeString(H,!0)}catch(U){console.error("base64Decode failed: ",U)}return null};function G(H,U){if(!(U instanceof Object))return U;switch(U.constructor){case Date:return new Date(U.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return U}for(const K in U)!U.hasOwnProperty(K)||!J(K)||(H[K]=G(H[K],U[K]));return H}function J(H){return"__proto__"!==H}function We(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Oe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function Pe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ke(){return"object"==typeof self&&self.self===self}function ye(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function pe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ge(){const H=We();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function we(){return!Pe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ze(){return"object"==typeof indexedDB}function te(){return new Promise((H,U)=>{try{let K=!0;const B="validate-browser-context-for-indexeddb-analytics-module",M=self.indexedDB.open(B);M.onsuccess=()=>{M.result.close(),K||self.indexedDB.deleteDatabase(B),H(!0)},M.onupgradeneeded=()=>{K=!1},M.onerror=()=>{var L;U((null===(L=M.error)||void 0===L?void 0:L.message)||"")}}catch(K){U(K)}})}function ue(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ie=()=>{try{return function fe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const H=process.env.__FIREBASE_DEFAULTS__;return H?JSON.parse(H):void 0})()||(()=>{if(typeof document>"u")return;let H;try{H=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const U=H&&be(H[1]);return U&&JSON.parse(U)})()}catch(H){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${H}`)}},Le=H=>{const U=(H=>{var U,K;return null===(K=null===(U=ie())||void 0===U?void 0:U.emulatorHosts)||void 0===K?void 0:K[H]})(H);if(!U)return;const K=U.lastIndexOf(":");if(K<=0||K+1===U.length)throw new Error(`Invalid host ${U} with no separate hostname and port!`);const B=parseInt(U.substring(K+1),10);return"["===U[0]?[U.substring(1,K-1),B]:[U.substring(0,K),B]},ct=()=>{var H;return null===(H=ie())||void 0===H?void 0:H.config},Qt=H=>{var U;return null===(U=ie())||void 0===U?void 0:U[`_${H}`]};class Ft{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((U,K)=>{this.resolve=U,this.reject=K})}wrapCallback(U){return(K,B)=>{K?this.reject(K):this.resolve(B),"function"==typeof U&&(this.promise.catch(()=>{}),1===U.length?U(K):U(K,B))}}}function ze(H,U){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const B=U||"demo-project",M=H.iat||0,L=H.sub||H.user_id;if(!L)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ee=Object.assign({iss:`https://securetoken.google.com/${B}`,aud:B,iat:M,exp:M+3600,auth_time:M,sub:L,user_id:L,firebase:{sign_in_provider:"custom",identities:{}}},H);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(ee)),""].join(".")}class dn extends Error{constructor(U,K,B){super(K),this.code=U,this.customData=B,this.name="FirebaseError",Object.setPrototypeOf(this,dn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kt.prototype.create)}}class Kt{constructor(U,K,B){this.service=U,this.serviceName=K,this.errors=B}create(U,...K){const B=K[0]||{},M=`${this.service}/${U}`,L=this.errors[U],ee=L?function Zt(H,U){return H.replace(Bt,(K,B)=>{const M=U[B];return null!=M?String(M):`<${B}?>`})}(L,B):"Error";return new dn(M,`${this.serviceName}: ${ee} (${M}).`,B)}}const Bt=/\{\$([^}]+)}/g;function br(H,U){return Object.prototype.hasOwnProperty.call(H,U)}function ei(H){for(const U in H)if(Object.prototype.hasOwnProperty.call(H,U))return!1;return!0}function Je(H,U){if(H===U)return!0;const K=Object.keys(H),B=Object.keys(U);for(const M of K){if(!B.includes(M))return!1;const L=H[M],ee=U[M];if(Hn(L)&&Hn(ee)){if(!Je(L,ee))return!1}else if(L!==ee)return!1}for(const M of B)if(!K.includes(M))return!1;return!0}function Hn(H){return null!==H&&"object"==typeof H}function ln(H){const U=[];for(const[K,B]of Object.entries(H))Array.isArray(B)?B.forEach(M=>{U.push(encodeURIComponent(K)+"="+encodeURIComponent(M))}):U.push(encodeURIComponent(K)+"="+encodeURIComponent(B));return U.length?"&"+U.join("&"):""}function rr(H){const U={};return H.replace(/^\?/,"").split("&").forEach(B=>{if(B){const[M,L]=B.split("=");U[decodeURIComponent(M)]=decodeURIComponent(L)}}),U}function ys(H){const U=H.indexOf("?");if(!U)return"";const K=H.indexOf("#",U);return H.substring(U,K>0?K:void 0)}function fn(H,U){const K=new un(H,U);return K.subscribe.bind(K)}class un{constructor(U,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{U(this)}).catch(B=>{this.error(B)})}next(U){this.forEachObserver(K=>{K.next(U)})}error(U){this.forEachObserver(K=>{K.error(U)}),this.close(U)}complete(){this.forEachObserver(U=>{U.complete()}),this.close()}subscribe(U,K,B){let M;if(void 0===U&&void 0===K&&void 0===B)throw new Error("Missing Observer.");M=function ht(H,U){if("object"!=typeof H||null===H)return!1;for(const K of U)if(K in H&&"function"==typeof H[K])return!0;return!1}(U,["next","error","complete"])?U:{next:U,error:K,complete:B},void 0===M.next&&(M.next=bt),void 0===M.error&&(M.error=bt),void 0===M.complete&&(M.complete=bt);const L=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?M.error(this.finalError):M.complete()}catch{}}),this.observers.push(M),L}unsubscribeOne(U){void 0===this.observers||void 0===this.observers[U]||(delete this.observers[U],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(U){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,U)}sendOne(U,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[U])try{K(this.observers[U])}catch(B){typeof console<"u"&&console.error&&console.error(B)}})}close(U){this.finalized||(this.finalized=!0,void 0!==U&&(this.finalError=U),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bt(){}function tt(H,U=1e3,K=2){const B=U*Math.pow(K,H),M=Math.round(.5*B*(Math.random()-.5)*2);return Math.min(144e5,B+M)}function $t(H){return H&&H._delegate?H._delegate:H}},9697:(mt,Me,V)=>{var g=V(4650);let j=null;function N(){return j}const ve=new g.OlP("DocumentToken");var q=(()=>((q=q||{})[q.Format=0]="Format",q[q.Standalone=1]="Standalone",q))(),Y=(()=>((Y=Y||{})[Y.Narrow=0]="Narrow",Y[Y.Abbreviated=1]="Abbreviated",Y[Y.Wide=2]="Wide",Y[Y.Short=3]="Short",Y))(),le=(()=>((le=le||{})[le.Short=0]="Short",le[le.Medium=1]="Medium",le[le.Long=2]="Long",le[le.Full=3]="Full",le))(),ie=(()=>((ie=ie||{})[ie.Decimal=0]="Decimal",ie[ie.Group=1]="Group",ie[ie.List=2]="List",ie[ie.PercentSign=3]="PercentSign",ie[ie.PlusSign=4]="PlusSign",ie[ie.MinusSign=5]="MinusSign",ie[ie.Exponential=6]="Exponential",ie[ie.SuperscriptingExponent=7]="SuperscriptingExponent",ie[ie.PerMille=8]="PerMille",ie[ie.Infinity=9]="Infinity",ie[ie.NaN=10]="NaN",ie[ie.TimeSeparator=11]="TimeSeparator",ie[ie.CurrencyDecimal=12]="CurrencyDecimal",ie[ie.CurrencyGroup=13]="CurrencyGroup",ie))();function Kt(n,e){return Je((0,g.cg1)(n)[g.wAp.DateFormat],e)}function Zt(n,e){return Je((0,g.cg1)(n)[g.wAp.TimeFormat],e)}function Bt(n,e){return Je((0,g.cg1)(n)[g.wAp.DateTimeFormat],e)}function Nt(n,e){const t=(0,g.cg1)(n),r=t[g.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===ie.CurrencyDecimal)return t[g.wAp.NumberSymbols][ie.Decimal];if(e===ie.CurrencyGroup)return t[g.wAp.NumberSymbols][ie.Group]}return r}function br(n){if(!n[g.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[g.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Je(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function Hn(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const ys=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,hn={},fn=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var un=(()=>((un=un||{})[un.Short=0]="Short",un[un.ShortGMT=1]="ShortGMT",un[un.Long=2]="Long",un[un.Extended=3]="Extended",un))(),dt=(()=>((dt=dt||{})[dt.FullYear=0]="FullYear",dt[dt.Month=1]="Month",dt[dt.Date=2]="Date",dt[dt.Hours=3]="Hours",dt[dt.Minutes=4]="Minutes",dt[dt.Seconds=5]="Seconds",dt[dt.FractionalSeconds=6]="FractionalSeconds",dt[dt.Day=7]="Day",dt))(),ht=(()=>((ht=ht||{})[ht.DayPeriods=0]="DayPeriods",ht[ht.Days=1]="Days",ht[ht.Months=2]="Months",ht[ht.Eras=3]="Eras",ht))();function bt(n,e,t,r){let a=function L(n){if(ke(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[a,l=1,d=1]=n.split("-").map(y=>+y);return Pr(a,l-1,d)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(ys))return function ee(n){const e=new Date(0);let t=0,r=0;const a=n[8]?e.setUTCFullYear:e.setFullYear,l=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),a.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const d=Number(n[4]||0)-t,y=Number(n[5]||0)-r,E=Number(n[6]||0),b=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return l.call(e,d,y,E,b),e}(r)}const e=new Date(n);if(!ke(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Gn(t,e)||e;let y,d=[];for(;e;){if(y=fn.exec(e),!y){d.push(e);break}{d=d.concat(y.slice(1));const x=d.pop();if(!x)break;e=x}}let E=a.getTimezoneOffset();r&&(E=K(r,E),a=function M(n,e,t){const r=t?-1:1,a=n.getTimezoneOffset();return function B(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(K(e,a)-a))}(a,r,!0));let b="";return d.forEach(x=>{const R=function U(n){if(H[n])return H[n];let e;switch(n){case"G":case"GG":case"GGG":e=Wt(ht.Eras,Y.Abbreviated);break;case"GGGG":e=Wt(ht.Eras,Y.Wide);break;case"GGGGG":e=Wt(ht.Eras,Y.Narrow);break;case"y":e=kt(dt.FullYear,1,0,!1,!0);break;case"yy":e=kt(dt.FullYear,2,0,!0,!0);break;case"yyy":e=kt(dt.FullYear,3,0,!1,!0);break;case"yyyy":e=kt(dt.FullYear,4,0,!1,!0);break;case"Y":e=$t(1);break;case"YY":e=$t(2,!0);break;case"YYY":e=$t(3);break;case"YYYY":e=$t(4);break;case"M":case"L":e=kt(dt.Month,1,1);break;case"MM":case"LL":e=kt(dt.Month,2,1);break;case"MMM":e=Wt(ht.Months,Y.Abbreviated);break;case"MMMM":e=Wt(ht.Months,Y.Wide);break;case"MMMMM":e=Wt(ht.Months,Y.Narrow);break;case"LLL":e=Wt(ht.Months,Y.Abbreviated,q.Standalone);break;case"LLLL":e=Wt(ht.Months,Y.Wide,q.Standalone);break;case"LLLLL":e=Wt(ht.Months,Y.Narrow,q.Standalone);break;case"w":e=vt(1);break;case"ww":e=vt(2);break;case"W":e=vt(1,!0);break;case"d":e=kt(dt.Date,1);break;case"dd":e=kt(dt.Date,2);break;case"c":case"cc":e=kt(dt.Day,1);break;case"ccc":e=Wt(ht.Days,Y.Abbreviated,q.Standalone);break;case"cccc":e=Wt(ht.Days,Y.Wide,q.Standalone);break;case"ccccc":e=Wt(ht.Days,Y.Narrow,q.Standalone);break;case"cccccc":e=Wt(ht.Days,Y.Short,q.Standalone);break;case"E":case"EE":case"EEE":e=Wt(ht.Days,Y.Abbreviated);break;case"EEEE":e=Wt(ht.Days,Y.Wide);break;case"EEEEE":e=Wt(ht.Days,Y.Narrow);break;case"EEEEEE":e=Wt(ht.Days,Y.Short);break;case"a":case"aa":case"aaa":e=Wt(ht.DayPeriods,Y.Abbreviated);break;case"aaaa":e=Wt(ht.DayPeriods,Y.Wide);break;case"aaaaa":e=Wt(ht.DayPeriods,Y.Narrow);break;case"b":case"bb":case"bbb":e=Wt(ht.DayPeriods,Y.Abbreviated,q.Standalone,!0);break;case"bbbb":e=Wt(ht.DayPeriods,Y.Wide,q.Standalone,!0);break;case"bbbbb":e=Wt(ht.DayPeriods,Y.Narrow,q.Standalone,!0);break;case"B":case"BB":case"BBB":e=Wt(ht.DayPeriods,Y.Abbreviated,q.Format,!0);break;case"BBBB":e=Wt(ht.DayPeriods,Y.Wide,q.Format,!0);break;case"BBBBB":e=Wt(ht.DayPeriods,Y.Narrow,q.Format,!0);break;case"h":e=kt(dt.Hours,1,-12);break;case"hh":e=kt(dt.Hours,2,-12);break;case"H":e=kt(dt.Hours,1);break;case"HH":e=kt(dt.Hours,2);break;case"m":e=kt(dt.Minutes,1);break;case"mm":e=kt(dt.Minutes,2);break;case"s":e=kt(dt.Seconds,1);break;case"ss":e=kt(dt.Seconds,2);break;case"S":e=kt(dt.FractionalSeconds,1);break;case"SS":e=kt(dt.FractionalSeconds,2);break;case"SSS":e=kt(dt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=vn(un.Short);break;case"ZZZZZ":e=vn(un.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=vn(un.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=vn(un.Long);break;default:return null}return H[n]=e,e}(x);b+=R?R(a,t,E):"''"===x?"'":x.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),b}function Pr(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Gn(n,e){const t=function Le(n){return(0,g.cg1)(n)[g.wAp.LocaleId]}(n);if(hn[t]=hn[t]||{},hn[t][e])return hn[t][e];let r="";switch(e){case"shortDate":r=Kt(n,le.Short);break;case"mediumDate":r=Kt(n,le.Medium);break;case"longDate":r=Kt(n,le.Long);break;case"fullDate":r=Kt(n,le.Full);break;case"shortTime":r=Zt(n,le.Short);break;case"mediumTime":r=Zt(n,le.Medium);break;case"longTime":r=Zt(n,le.Long);break;case"fullTime":r=Zt(n,le.Full);break;case"short":const a=Gn(n,"shortTime"),l=Gn(n,"shortDate");r=yr(Bt(n,le.Short),[a,l]);break;case"medium":const d=Gn(n,"mediumTime"),y=Gn(n,"mediumDate");r=yr(Bt(n,le.Medium),[d,y]);break;case"long":const E=Gn(n,"longTime"),b=Gn(n,"longDate");r=yr(Bt(n,le.Long),[E,b]);break;case"full":const x=Gn(n,"fullTime"),R=Gn(n,"fullDate");r=yr(Bt(n,le.Full),[x,R])}return r&&(hn[t][e]=r),r}function yr(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Ct(n,e,t="-",r,a){let l="";(n<0||a&&n<=0)&&(a?n=1-n:(n=-n,l=t));let d=String(n);for(;d.length<e;)d="0"+d;return r&&(d=d.slice(d.length-e)),l+d}function kt(n,e,t=0,r=!1,a=!1){return function(l,d){let y=function Wr(n,e){switch(n){case dt.FullYear:return e.getFullYear();case dt.Month:return e.getMonth();case dt.Date:return e.getDate();case dt.Hours:return e.getHours();case dt.Minutes:return e.getMinutes();case dt.Seconds:return e.getSeconds();case dt.FractionalSeconds:return e.getMilliseconds();case dt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,l);if((t>0||y>-t)&&(y+=t),n===dt.Hours)0===y&&-12===t&&(y=12);else if(n===dt.FractionalSeconds)return function Ar(n,e){return Ct(n,3).substring(0,e)}(y,e);const E=Nt(d,ie.MinusSign);return Ct(y,e,E,r,a)}}function Wt(n,e,t=q.Format,r=!1){return function(a,l){return function Yn(n,e,t,r,a,l){switch(t){case ht.Months:return function Ft(n,e,t){const r=(0,g.cg1)(n),l=Je([r[g.wAp.MonthsFormat],r[g.wAp.MonthsStandalone]],e);return Je(l,t)}(e,a,r)[n.getMonth()];case ht.Days:return function Qt(n,e,t){const r=(0,g.cg1)(n),l=Je([r[g.wAp.DaysFormat],r[g.wAp.DaysStandalone]],e);return Je(l,t)}(e,a,r)[n.getDay()];case ht.DayPeriods:const d=n.getHours(),y=n.getMinutes();if(l){const b=function Ln(n){const e=(0,g.cg1)(n);return br(e),(e[g.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?Hn(r):[Hn(r[0]),Hn(r[1])])}(e),x=function ei(n,e,t){const r=(0,g.cg1)(n);br(r);const l=Je([r[g.wAp.ExtraData][0],r[g.wAp.ExtraData][1]],e)||[];return Je(l,t)||[]}(e,a,r),R=b.findIndex(z=>{if(Array.isArray(z)){const[X,he]=z,Ue=d>=X.hours&&y>=X.minutes,He=d<he.hours||d===he.hours&&y<he.minutes;if(X.hours<he.hours){if(Ue&&He)return!0}else if(Ue||He)return!0}else if(z.hours===d&&z.minutes===y)return!0;return!1});if(-1!==R)return x[R]}return function ct(n,e,t){const r=(0,g.cg1)(n),l=Je([r[g.wAp.DayPeriodsFormat],r[g.wAp.DayPeriodsStandalone]],e);return Je(l,t)}(e,a,r)[d<12?0:1];case ht.Eras:return function ze(n,e){return Je((0,g.cg1)(n)[g.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(a,l,n,e,t,r)}}function vn(n){return function(e,t,r){const a=-1*r,l=Nt(t,ie.MinusSign),d=a>0?Math.floor(a/60):Math.ceil(a/60);switch(n){case un.Short:return(a>=0?"+":"")+Ct(d,2,l)+Ct(Math.abs(a%60),2,l);case un.ShortGMT:return"GMT"+(a>=0?"+":"")+Ct(d,1,l);case un.Long:return"GMT"+(a>=0?"+":"")+Ct(d,2,l)+":"+Ct(Math.abs(a%60),2,l);case un.Extended:return 0===r?"Z":(a>=0?"+":"")+Ct(d,2,l)+":"+Ct(Math.abs(a%60),2,l);default:throw new Error(`Unknown zone width "${n}"`)}}}function yt(n){return Pr(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function vt(n,e=!1){return function(t,r){let a;if(e){const l=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,d=t.getDate();a=1+Math.floor((d+l)/7)}else{const l=yt(t),d=function tt(n){const e=Pr(n,0,1).getDay();return Pr(n,0,1+(e<=4?4:11)-e)}(l.getFullYear()),y=l.getTime()-d.getTime();a=1+Math.round(y/6048e5)}return Ct(a,n,Nt(r,ie.MinusSign))}}function $t(n,e=!1){return function(t,r){return Ct(yt(t).getFullYear(),n,Nt(r,ie.MinusSign),e)}}const H={};function K(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function ke(n){return n instanceof Date&&!isNaN(n.valueOf())}class Es{constructor(e,t,r,a){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=a}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Xi=(()=>{class n{constructor(t,r,a){this._viewContainer=t,this._template=r,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((a,l,d)=>{if(null==a.previousIndex)r.createEmbeddedView(this._template,new Es(a.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===l?void 0:l);else if(null!==l){const y=r.get(l);r.move(y,d),Is(y,a)}});for(let a=0,l=r.length;a<l;a++){const y=r.get(a).context;y.index=a,y.count=l,y.ngForOf=this._ngForOf}t.forEachIdentityChange(a=>{Is(r.get(a.currentIndex),a)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Is(n,e){n.context.$implicit=e.item}const Of=new g.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let ju=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",a,l){if(null==t||""===t||t!=t)return null;try{return bt(t,r,l||this.locale,a??this.defaultTimezone??void 0)}catch(d){throw function qr(n,e){return new g.vHH(2100,!1)}()}}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.soG,16),g.Y36(Of,24))},n.\u0275pipe=g.Yjl({name:"date",type:n,pure:!0,standalone:!0}),n})(),Qd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function Js(n){return"server"===n}class ts extends class Ic extends class me{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ae(n){j||(j=n)}(new ts)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Dc(){return ns=ns||document.querySelector("base"),ns?ns.getAttribute("href"):null}();return null==t?null:function Li(n){Cn=Cn||document.createElement("a"),Cn.setAttribute("href",n);const e=Cn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ns=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Lu(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[a,l]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(a.trim()===e)return decodeURIComponent(l)}return null}(document.cookie,e)}}let Cn,ns=null;const _n=new g.OlP("TRANSITION_ID"),Zu=[{provide:g.ip1,useFactory:function bc(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=N(),a=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<a.length;l++)r.remove(a[l])})}},deps:[_n,ve,g.zs3],multi:!0}];let Yu=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Qu=new g.OlP("EventManagerPlugins");let Xu=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(a=>a.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,a){return this._findPluginFor(r).addEventListener(t,r,a)}addGlobalEventListener(t,r,a){return this._findPluginFor(r).addGlobalEventListener(t,r,a)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const a=this._plugins;for(let l=0;l<a.length;l++){const d=a[l];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Qu),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Za{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const a=N().getGlobalEventTarget(this._doc,e);if(!a)throw new Error(`Unsupported event target ${a} for event ${t}`);return this.addEventListener(a,t,r)}}let oo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),r.add(a))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),ao=(()=>{class n extends oo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,a){t.forEach(l=>{const d=this._doc.createElement("style");d.textContent=l,a.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ac),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,a)=>{this._addStylesToHost(t,a,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ac))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ve))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function Ac(n){N().remove(n)}const uo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Tc=/%COMP%/g;function Qa(n,e,t){for(let r=0;r<e.length;r++){let a=e[r];Array.isArray(a)?Qa(n,a,t):(a=a.replace(Tc,n),t.push(a))}return t}function Xa(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ja=(()=>{class n{constructor(t,r,a){this.eventManager=t,this.sharedStylesHost=r,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new Vi(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let a=this.rendererByCompId.get(r.id);return a||(a=new xc(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,a)),a.applyToHost(t),a}case 1:case g.ifc.ShadowDom:return new sh(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const a=Qa(r.id,r.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Xu),g.LFG(ao),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Vi{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(uo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(aa(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(aa(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,a){if(a){t=a+":"+t;const l=uo[a];l?e.setAttributeNS(l,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const a=uo[r];a?e.removeAttributeNS(a,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,a){a&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,a&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Xa(r)):this.eventManager.addEventListener(e,t,Xa(r))}}function aa(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class xc extends Vi{constructor(e,t,r,a){super(e),this.component=r;const l=Qa(a+"-"+r.id,r.styles,[]);t.addStyles(l),this.contentAttr=function Mn(n){return"_ngcontent-%COMP%".replace(Tc,n)}(a+"-"+r.id),this.hostAttr=function Ya(n){return"_nghost-%COMP%".replace(Tc,n)}(a+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class sh extends Vi{constructor(e,t,r,a){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Qa(a.id,a.styles,[]);for(let d=0;d<l.length;d++){const y=document.createElement("style");y.textContent=l[d],this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let qn=(()=>{class n extends Za{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,a){return t.addEventListener(r,a,!1),()=>this.removeEventListener(t,r,a)}removeEventListener(t,r,a){return t.removeEventListener(r,a)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ve))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const oh=["alt","control","meta","shift"],rs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},tl={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ua=(()=>{class n extends Za{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,a){const l=n.parseEventName(r),d=n.eventCallback(l.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,l.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),a=r.shift();if(0===r.length||"keydown"!==a&&"keyup"!==a)return null;const l=n._normalizeKey(r.pop());let d="",y=r.indexOf("code");if(y>-1&&(r.splice(y,1),d="code."),oh.forEach(b=>{const x=r.indexOf(b);x>-1&&(r.splice(x,1),d+=b+".")}),d+=l,0!=r.length||0===l.length)return null;const E={};return E.domEventName=a,E.fullKey=d,E}static matchEventFullKeyCode(t,r){let a=rs[t.key]||t.key,l="";return r.indexOf("code.")>-1&&(a=t.code,l="code."),!(null==a||!a)&&(a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),oh.forEach(d=>{d!==a&&(0,tl[d])(t)&&(l+=d+".")}),l+=a,l===r)}static eventCallback(t,r,a){return l=>{n.matchEventFullKeyCode(l,t)&&a.runGuarded(()=>r(l))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ve))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const la=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function kc(){ts.makeCurrent()},multi:!0},{provide:ve,useFactory:function nl(){return(0,g.RDi)(document),document},deps:[]}]),Ss=new g.OlP(""),ca=[{provide:g.rWj,useClass:class rh{addToWindow(e){g.dqk.getAngularTestability=(r,a=!0)=>{const l=e.findTestabilityInTree(r,a);if(null==l)throw new Error("Could not find testability for element.");return l},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const a=g.dqk.getAllAngularTestabilities();let l=a.length,d=!1;const y=function(E){d=d||E,l--,0==l&&r(d)};a.forEach(function(E){E.whenStable(y)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:g.lri,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]}],co=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function Bi(){return new g.qLn},deps:[]},{provide:Qu,useClass:qn,multi:!0,deps:[ve,g.R0b,g.Lbi]},{provide:Qu,useClass:ua,multi:!0,deps:[ve]},{provide:Ja,useClass:Ja,deps:[Xu,ao,g.AFp]},{provide:g.FYo,useExisting:Ja},{provide:oo,useExisting:ao},{provide:ao,useClass:ao,deps:[ve]},{provide:Xu,useClass:Xu,deps:[Qu,g.R0b]},{provide:class eo{},useClass:Yu,deps:[]},[]];let ho=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:_n,useExisting:g.AFp},Zu]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ss,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[...co,...ca],imports:[Qd,g.hGG]}),n})();typeof window<"u"&&window;var _r=V(2011),ou=V(4986),Co=V(8306),fi=V(8996),Xn=V(7669);function Sr(...n){const e=(0,Xn.yG)(n);return(0,fi.D)(n,e)}var en=V(2680),Ms=V(6131);function sl(...n){return function ks(){return(0,Ms.J)(1)}()((0,fi.D)(n,(0,Xn.yG)(n)))}var pi=V(4482);function ol(...n){const e=(0,Xn.yG)(n);return(0,pi.e)((t,r)=>{(e?sl(n,t,e):sl(n,t)).subscribe(r)})}var ur=V(5403);function au(){return(0,pi.e)((n,e)=>{let t,r=!1;n.subscribe((0,ur.x)(e,a=>{const l=t;t=a,r&&e.next([l,a]),r=!0}))})}var lr=V(4004);function Vr(n,e,t,r,a){return(l,d)=>{let y=t,E=e,b=0;l.subscribe((0,ur.x)(d,x=>{const R=b++;E=y?n(E,x,R):(y=!0,x),r&&d.next(E)},a&&(()=>{y&&d.next(E),d.complete()})))}}function da(n,e){return(0,pi.e)(Vr(n,e,arguments.length>=2,!0))}var ji=V(4671);function al(n,e){return n===e}function uu(n,e){return(0,pi.e)((t,r)=>{let a=0;t.subscribe((0,ur.x)(r,l=>n.call(e,l,a++)&&r.next(l)))})}V(5881);var ot,ul=V(3942),ge=V(5861),ii=V(9681),ss=V(4859),xr=V(1877),Ut=V(2090),ll=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qr={},os=os||{},Et=ll||self;function si(){}function ha(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ns(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var wr="closure_uid_"+(1e9*Math.random()>>>0),hh=0;function cn(n,e,t){return n.call.apply(n.bind,arguments)}function cl(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,r),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function Cr(n,e,t){return(Cr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?cn:cl).apply(null,arguments)}function Ps(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function En(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,a,l){for(var d=Array(arguments.length-2),y=2;y<arguments.length;y++)d[y-2]=arguments[y];return e.prototype[a].apply(r,d)}}function as(){this.s=this.s,this.o=this.o}as.prototype.s=!1,as.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Eo(n){Object.prototype.hasOwnProperty.call(n,wr)&&n[wr]||(n[wr]=++hh)}(this)},as.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const I=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function D(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function S(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(ha(r)){const a=n.length||0,l=r.length||0;n.length=a+l;for(let d=0;d<l;d++)n[a+d]=r[d]}else n.push(r)}}function O(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var Z=function(){if(!Et.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Et.addEventListener("test",si,e),Et.removeEventListener("test",si,e)}catch{}return n}();function re(n){return/^[\s\xa0]*$/.test(n)}var De=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function je(n,e){return n<e?-1:n>e?1:0}function Xe(){var n=Et.navigator;return n&&(n=n.userAgent)?n:""}function st(n){return-1!=Xe().indexOf(n)}function Pt(n){return Pt[" "](n),n}Pt[" "]=si;var ls,n,bn=st("Opera"),wn=st("Trident")||st("MSIE"),fa=st("Edge"),Io=fa||wn,us=st("Gecko")&&!(-1!=Xe().toLowerCase().indexOf("webkit")&&!st("Edge"))&&!(st("Trident")||st("MSIE"))&&!st("Edge"),dl=-1!=Xe().toLowerCase().indexOf("webkit")&&!st("Edge");function hl(){var n=Et.document;return n?n.documentMode:void 0}e:{var gi="",cs=(n=Xe(),us?/rv:([^\);]+)(\)|;)/.exec(n):fa?/Edge\/([\d\.]+)/.exec(n):wn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):dl?/WebKit\/(\S+)/.exec(n):bn?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(cs&&(gi=cs?cs[1]:""),wn){var mi=hl();if(null!=mi&&mi>parseFloat(gi)){ls=String(mi);break e}}ls=gi}var Hf={};var Gf=Et.document&&wn&&(hl()||parseInt(ls,10))||void 0;function Fc(n,e){if(O.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(us){e:{try{Pt(e.nodeName);var a=!0;break e}catch{}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:dm[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Fc.X.h.call(this)}}En(Fc,O);var dm={2:"touch",3:"pen",4:"mouse"};Fc.prototype.h=function(){Fc.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var fl="closure_listenable_"+(1e6*Math.random()|0),pl=0;function T_(n,e,t,r,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=a,this.key=++pl,this.ba=this.ea=!1}function ph(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function gl(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function hm(n){const e={};for(const t in n)e[t]=n[t];return e}const fm="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Wf(n,e){let t,r;for(let a=1;a<arguments.length;a++){for(t in r=arguments[a],r)n[t]=r[t];for(let l=0;l<fm.length;l++)t=fm[l],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function gh(n){this.src=n,this.g={},this.h=0}function $f(n,e){var t=e.type;if(t in n.g){var l,r=n.g[t],a=I(r,e);(l=0<=a)&&Array.prototype.splice.call(r,a,1),l&&(ph(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function mh(n,e,t,r){for(var a=0;a<n.length;++a){var l=n[a];if(!l.ba&&l.listener==e&&l.capture==!!t&&l.ha==r)return a}return-1}gh.prototype.add=function(n,e,t,r,a){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var d=mh(n,e,r,a);return-1<d?(e=n[d],t||(e.ea=!1)):((e=new T_(e,this.src,l,!!r,a)).ea=t,n.push(e)),e};var Lc="closure_lm_"+(1e6*Math.random()|0),pa={};function yh(n,e,t,r,a){if(r&&r.once)return yi(n,e,t,r,a);if(Array.isArray(e)){for(var l=0;l<e.length;l++)yh(n,e[l],t,r,a);return null}return t=wh(t),n&&n[fl]?n.N(e,t,Ns(r)?!!r.capture:!!r,a):ml(n,e,t,!1,r,a)}function ml(n,e,t,r,a,l){if(!e)throw Error("Invalid event type");var d=Ns(a)?!!a.capture:!!a,y=cu(n);if(y||(n[Lc]=y=new gh(n)),(t=y.add(e,t,r,d,l)).proxy)return t;if(r=function zf(){const e=vh;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Z||(a=d),void 0===a&&(a=!1),n.addEventListener(e.toString(),r,a);else if(n.attachEvent)n.attachEvent(Kf(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function yi(n,e,t,r,a){if(Array.isArray(e)){for(var l=0;l<e.length;l++)yi(n,e[l],t,r,a);return null}return t=wh(t),n&&n[fl]?n.O(e,t,Ns(r)?!!r.capture:!!r,a):ml(n,e,t,!0,r,a)}function qf(n,e,t,r,a){if(Array.isArray(e))for(var l=0;l<e.length;l++)qf(n,e[l],t,r,a);else r=Ns(r)?!!r.capture:!!r,t=wh(t),n&&n[fl]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=mh(l=n.g[e],t,r,a))&&(ph(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=cu(n))&&(e=n.g[e.toString()],n=-1,e&&(n=mh(e,t,r,a)),(t=-1<n?e[n]:null)&&yl(t))}function yl(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[fl])$f(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Kf(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=cu(e))?($f(t,n),0==t.h&&(t.src=null,e[Lc]=null)):ph(n)}}}function Kf(n){return n in pa?pa[n]:pa[n]="on"+n}function vh(n,e){if(n.ba)n=!0;else{e=new Fc(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&yl(n),n=t.call(r,e)}return n}function cu(n){return(n=n[Lc])instanceof gh?n:null}var _h="__closure_events_fn_"+(1e9*Math.random()>>>0);function wh(n){return"function"==typeof n?n:(n[_h]||(n[_h]=function(e){return n.handleEvent(e)}),n[_h])}function cr(){as.call(this),this.i=new gh(this),this.P=this,this.I=null}function dr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new O(e,n);else if(e instanceof O)e.target=e.target||n;else{var a=e;Wf(e=new O(r,n),a)}if(a=!0,t)for(var l=t.length-1;0<=l;l--){var d=e.g=t[l];a=Vc(d,r,!0,e)&&a}if(a=Vc(d=e.g=n,r,!0,e)&&a,a=Vc(d,r,!1,e)&&a,t)for(l=0;l<t.length;l++)a=Vc(d=e.g=t[l],r,!1,e)&&a}function Vc(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,l=0;l<e.length;++l){var d=e[l];if(d&&!d.ba&&d.capture==t){var y=d.listener,E=d.ha||d.src;d.ea&&$f(n.i,d),a=!1!==y.call(E,r)&&a}}return a&&!r.defaultPrevented}En(cr,as),cr.prototype[fl]=!0,cr.prototype.removeEventListener=function(n,e,t,r){qf(this,n,e,t,r)},cr.prototype.M=function(){if(cr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)ph(t[r]);delete n.g[e],n.h--}}this.I=null},cr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},cr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Bc=Et.JSON.stringify;function Br(){var n=Ee;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var T,v=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new f,n=>n.reset());class f{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function p(n){Et.setTimeout(()=>{throw n},0)}function w(n,e){T||function P(){var n=Et.Promise.resolve(void 0);T=function(){n.then(nt)}}(),Q||(T(),Q=!0),Ee.add(n,e)}var Q=!1,Ee=new class Zf{constructor(){this.h=this.g=null}add(e,t){const r=v.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function nt(){for(var n;n=Br();){try{n.h.call(n.g)}catch(t){p(t)}var e=v;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Q=!1}function lt(n,e){cr.call(this),this.h=n||1,this.g=e||Et,this.j=Cr(this.lb,this),this.l=Date.now()}function Lt(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function mn(n,e,t){if("function"==typeof n)t&&(n=Cr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Cr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Et.setTimeout(n,e||0)}function Hi(n){n.g=mn(()=>{n.g=null,n.i&&(n.i=!1,Hi(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}En(lt,cr),(ot=lt.prototype).ca=!1,ot.R=null,ot.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),dr(this,"tick"),this.ca&&(Lt(this),this.start()))}},ot.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ot.M=function(){lt.X.M.call(this),Lt(this),delete this.g};class Do extends as{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Hi(this)}M(){super.M(),this.g&&(Et.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ds(n){as.call(this),this.h=n,this.g={}}En(ds,as);var vl=[];function Uc(n,e,t,r){Array.isArray(t)||(t&&(vl[0]=t.toString()),t=vl);for(var a=0;a<t.length;a++){var l=yh(e,t[a],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function jc(n){gl(n.g,function(e,t){this.g.hasOwnProperty(t)&&yl(e)},n),n.g={}}function _l(){this.g=!0}function ma(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Hc(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var a=r[1];if(Array.isArray(a)&&!(1>a.length)){var l=a[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var d=1;d<a.length;d++)a[d]=""}}}return Bc(t)}catch{return e}}(n,t)+(r?" "+r:"")})}ds.prototype.M=function(){ds.X.M.call(this),jc(this)},ds.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},_l.prototype.Aa=function(){this.g=!1},_l.prototype.info=function(){};var bo={},Ch=null;function Rs(){return Ch=Ch||new cr}function Qf(n){O.call(this,bo.Pa,n)}function Gc(n){const e=Rs();dr(e,new Qf(e))}function S_(n,e){O.call(this,bo.STAT_EVENT,n),this.stat=e}function Ur(n){const e=Rs();dr(e,new S_(e,n))}function x_(n,e){O.call(this,bo.Qa,n),this.size=e}function Eh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Et.setTimeout(function(){n()},e)}bo.Pa="serverreachability",En(Qf,O),bo.STAT_EVENT="statevent",En(S_,O),bo.Qa="timingevent",En(x_,O);var Xf={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},M_={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function pm(){}function gm(){}pm.prototype.h=null;var mm,Cl={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Jf(){O.call(this,"d")}function Ih(){O.call(this,"c")}function ep(){}function Wc(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new ds(this),this.O=El,this.T=new lt(n=Io?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new ym}function ym(){this.i=null,this.g="",this.h=!1}En(Jf,O),En(Ih,O),En(ep,pm),ep.prototype.g=function(){return new XMLHttpRequest},ep.prototype.i=function(){return{}},mm=new ep;var El=45e3,tp={},Dh={};function vm(n,e,t){n.K=1,n.v=Dl(To(e)),n.s=t,n.P=!0,KC(n,null)}function KC(n,e){n.F=Date.now(),$c(n),n.A=To(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),Dm(t.i,"t",r),n.C=0,t=n.l.H,n.h=new ym,n.g=Om(n.l,t?e:null,!n.s),0<n.N&&(n.L=new Do(Cr(n.La,n,n.g),n.N)),Uc(n.S,n.g,"readystatechange",n.ib),e=n.H?hm(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Gc(),function ga(n,e,t,r,a,l){n.info(function(){if(n.g)if(l)for(var d="",y=l.split("&"),E=0;E<y.length;E++){var b=y[E].split("=");if(1<b.length){var x=b[0];b=b[1];var R=x.split("_");d=2<=R.length&&"type"==R[1]?d+(x+"=")+b+"&":d+(x+"=redacted&")}}else d=null;else d=l;return"XMLHTTP REQ ("+r+") [attempt "+a+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.U,n.s)}function bh(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function N_(n,e,t){let a,r=!0;for(;!n.I&&n.C<t.length;){if(a=P_(n,t),a==Dh){4==e&&(n.o=4,Ur(14),r=!1),ma(n.j,n.m,null,"[Incomplete Response]");break}if(a==tp){n.o=4,Ur(15),ma(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}ma(n.j,n.m,a,null),Kc(n,a)}bh(n)&&a!=Dh&&a!=tp&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ur(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Pm(e),e.K=!0,Ur(11))):(ma(n.j,n.m,t,"[Invalid Chunked Response]"),Ao(n),qc(n))}function P_(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Dh:(t=Number(e.substring(t,r)),isNaN(t)?tp:(r+=1)+t>e.length?Dh:(e=e.substr(r,t),n.C=r+t,e))}function $c(n){n.V=Date.now()+n.O,_m(n,n.O)}function _m(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Eh(Cr(n.gb,n),e)}function zc(n){n.B&&(Et.clearTimeout(n.B),n.B=null)}function qc(n){0==n.l.G||n.I||K_(n.l,n)}function Ao(n){zc(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Lt(n.T),jc(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Kc(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||So(t.h,n)))if(!n.J&&So(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var a=r;if(0==a[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;fp(t),cp(t)}Nm(t),Ur(18)}}else t.Ba=a[1],0<t.Ba-t.T&&37500>a[2]&&t.L&&0==t.A&&!t.v&&(t.v=Eh(Cr(t.cb,t),6e3));if(1>=B_(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Qc(t,11)}else if((n.J||t.g==n)&&fp(t),!re(e))for(a=t.Fa.g.parse(e),e=0;e<a.length;e++){let b=a[e];if(t.T=b[0],b=b[1],2==t.G)if("c"==b[0]){t.I=b[1],t.ka=b[2];const x=b[3];null!=x&&(t.ma=x,t.j.info("VER="+t.ma));const R=b[4];null!=R&&(t.Ca=R,t.j.info("SVER="+t.Ca));const z=b[5];null!=z&&"number"==typeof z&&0<z&&(t.J=r=1.5*z,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const X=n.g;if(X){const he=X.g?X.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(he){var l=r.h;l.g||-1==he.indexOf("spdy")&&-1==he.indexOf("quic")&&-1==he.indexOf("h2")||(l.j=l.l,l.g=new Set,l.h&&(Tl(l,l.h),l.h=null))}if(r.D){const Ue=X.g?X.g.getResponseHeader("X-HTTP-Session-Id"):null;Ue&&(r.za=Ue,An(r.F,r.D,Ue))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var d=n;if((r=t).sa=Rm(r,r.H?r.ka:null,r.V),d.J){U_(r.h,d);var y=d,E=r.J;E&&y.setTimeout(E),y.B&&(zc(y),$c(y)),r.g=d}else km(r);0<t.i.length&&hp(t)}else"stop"!=b[0]&&"close"!=b[0]||Qc(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?Qc(t,7):Yc(t):"noop"!=b[0]&&t.l&&t.l.wa(b),t.A=0)}Gc()}catch{}}function np(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(ha(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function wm(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(ha(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function R_(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(ha(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),a=r.length,l=0;l<a;l++)e.call(void 0,r[l],t&&t[l],n)}(ot=Wc.prototype).setTimeout=function(n){this.O=n},ot.ib=function(n){n=n.target;const e=this.L;e&&3==xo(n)?e.l():this.La(n)},ot.La=function(n){try{if(n==this.g)e:{const x=xo(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>x)&&(3!=x||Io||this.g&&(this.h.h||this.g.fa()||W_(this.g)))){this.I||4!=x||7==e||Gc(),zc(this);var t=this.g.aa();this.Y=t;t:if(bh(this)){var r=W_(this.g);n="";var a=r.length,l=4==xo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ao(this),qc(this);var d="";break t}this.h.i=new Et.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:l&&e==a-1});r.splice(0,a),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.fa();if(this.i=200==t,function Yf(n,e,t,r,a,l,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+l+" "+d})}(this.j,this.u,this.A,this.m,this.U,x,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var y,E=this.g;if((y=E.g?E.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!re(y)){var b=y;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Ur(12),Ao(this),qc(this);break e}ma(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Kc(this,t)}this.P?(N_(this,x,d),Io&&this.i&&3==x&&(Uc(this.S,this.T,"tick",this.hb),this.T.start())):(ma(this.j,this.m,d,null),Kc(this,d)),4==x&&Ao(this),this.i&&!this.I&&(4==x?K_(this.l,this):(this.i=!1,$c(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Ur(12)):(this.o=0,Ur(13)),Ao(this),qc(this)}}}catch{}},ot.hb=function(){if(this.g){var n=xo(this.g),e=this.g.fa();this.C<e.length&&(zc(this),N_(this,n,e),this.i&&4!=n&&$c(this))}},ot.cancel=function(){this.I=!0,Ao(this)},ot.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function wl(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Gc(),Ur(17)),Ao(this),this.o=2,qc(this)):_m(this,this.V-n)};var rp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Il(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Il){this.h=void 0!==e?e:n.h,ip(this,n.j),this.s=n.s,this.g=n.g,sp(this,n.m),this.l=n.l,e=n.i;var t=new Zc;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Cm(this,t),this.o=n.o}else n&&(t=String(n).match(rp))?(this.h=!!e,ip(this,t[1]||"",!0),this.s=bl(t[2]||""),this.g=bl(t[3]||"",!0),sp(this,t[4]),this.l=bl(t[5]||"",!0),Cm(this,t[6]||"",!0),this.o=bl(t[7]||"")):(this.h=!!e,this.i=new Zc(null,this.h))}function To(n){return new Il(n)}function ip(n,e,t){n.j=t?bl(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function sp(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Cm(n,e,t){e instanceof Zc?(n.i=e,function F_(n,e){e&&!n.j&&(Fs(n),n.i=null,n.g.forEach(function(t,r){var a=r.toLowerCase();r!=a&&(op(this,r),Dm(this,a,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Os(e,Em)),n.i=new Zc(e,n.h))}function An(n,e,t){n.i.set(e,t)}function Dl(n){return An(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function bl(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Os(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,ZC),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function ZC(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Il.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Os(e,O_,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Os(e,O_,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Os(t,"/"==t.charAt(0)?YC:ub,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Os(t,QC)),n.join("")};var O_=/[#\/\?@]/g,ub=/[#\?:]/g,YC=/[#\?]/g,Em=/[#\?@]/g,QC=/#/g;function Zc(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Fs(n){n.g||(n.g=new Map,n.h=0,n.i&&function Ah(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),a=null;if(0<=r){var l=n[t].substring(0,r);a=n[t].substring(r+1)}else l=n[t];e(l,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function op(n,e){Fs(n),e=Al(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Im(n,e){return Fs(n),e=Al(n,e),n.g.has(e)}function Dm(n,e,t){op(n,e),0<t.length&&(n.i=null,n.g.set(Al(n,e),D(t)),n.h+=t.length)}function Al(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function L_(n){this.l=n||JC,n=Et.PerformanceNavigationTiming?0<(n=Et.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Et.g&&Et.g.Ga&&Et.g.Ga()&&Et.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ot=Zc.prototype).add=function(n,e){Fs(this),this.i=null,n=Al(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ot.forEach=function(n,e){Fs(this),this.g.forEach(function(t,r){t.forEach(function(a){n.call(e,a,r,this)},this)},this)},ot.oa=function(){Fs(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const a=n[r];for(let l=0;l<a.length;l++)t.push(e[r])}return t},ot.W=function(n){Fs(this);let e=[];if("string"==typeof n)Im(this,n)&&(e=e.concat(this.g.get(Al(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ot.set=function(n,e){return Fs(this),this.i=null,Im(this,n=Al(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ot.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},ot.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const l=encodeURIComponent(String(r)),d=this.W(r);for(r=0;r<d.length;r++){var a=l;""!==d[r]&&(a+="="+encodeURIComponent(String(d[r]))),n.push(a)}}return this.i=n.join("&")};var JC=10;function V_(n){return!!n.h||!!n.g&&n.g.size>=n.j}function B_(n){return n.h?1:n.g?n.g.size:0}function So(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Tl(n,e){n.g?n.g.add(e):n.h=e}function U_(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function eE(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return D(n.i)}function j_(){}function lb(){this.g=new j_}function cb(n,e,t){const r=t||"";try{np(n,function(a,l){let d=a;Ns(a)&&(d=Bc(a)),e.push(r+l+"="+encodeURIComponent(d))})}catch(a){throw e.push(r+"type="+encodeURIComponent("_badmap")),a}}function Th(n,e,t,r,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(r)}catch{}}function Sh(n){this.l=n.ac||null,this.j=n.jb||!1}function ap(n,e){cr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=bm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}L_.prototype.cancel=function(){if(this.i=eE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},j_.prototype.stringify=function(n){return Et.JSON.stringify(n,void 0)},j_.prototype.parse=function(n){return Et.JSON.parse(n,void 0)},En(Sh,pm),Sh.prototype.g=function(){return new ap(this.l,this.j)},Sh.prototype.i=function(n){return function(){return n}}({}),En(ap,cr);var bm=0;function H_(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Sl(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Gi(n)}function Gi(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ot=ap.prototype).open=function(n,e){if(this.readyState!=bm)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Gi(this)},ot.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Et).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ot.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Sl(this)),this.readyState=bm},ot.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Gi(this)),this.g&&(this.readyState=3,Gi(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Et.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;H_(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},ot.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Sl(this):Gi(this),3==this.readyState&&H_(this)}},ot.Va=function(n){this.g&&(this.response=this.responseText=n,Sl(this))},ot.Ua=function(n){this.g&&(this.response=n,Sl(this))},ot.ga=function(){this.g&&Sl(this)},ot.setRequestHeader=function(n,e){this.v.append(n,e)},ot.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ot.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(ap.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var xh=Et.JSON.parse;function Kn(n){cr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Am,this.K=this.L=!1}En(Kn,cr);var Am="",G_=/^https?$/i,hb=["POST","PUT"];function tE(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,up(n),Tm(n)}function up(n){n.D||(n.D=!0,dr(n,"complete"),dr(n,"error"))}function lp(n){if(n.h&&typeof os<"u"&&(!n.C[1]||4!=xo(n)||2!=n.aa()))if(n.v&&4==xo(n))mn(n.Ha,0,n);else if(dr(n,"readystatechange"),4==xo(n)){n.h=!1;try{const y=n.aa();e:switch(y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===y){var a=String(n.H).match(rp)[1]||null;if(!a&&Et.self&&Et.self.location){var l=Et.self.location.protocol;a=l.substr(0,l.length-1)}r=!G_.test(a?a.toLowerCase():"")}t=r}if(t)dr(n,"complete"),dr(n,"success");else{n.m=6;try{var d=2<xo(n)?n.g.statusText:""}catch{d=""}n.j=d+" ["+n.aa()+"]",up(n)}}finally{Tm(n)}}}function Tm(n,e){if(n.g){nE(n);const t=n.g,r=n.C[0]?si:null;n.g=null,n.C=null,e||dr(n,"ready");try{t.onreadystatechange=r}catch{}}}function nE(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Et.clearTimeout(n.A),n.A=null)}function xo(n){return n.g?n.g.readyState:0}function W_(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Am:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function $_(n){let e="";return gl(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Sm(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=$_(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):An(n,e,t))}function Mh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function xm(n){this.Ca=0,this.i=[],this.j=new _l,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Mh("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Mh("baseRetryDelayMs",5e3,n),this.bb=Mh("retryDelaySeedMs",1e4,n),this.$a=Mh("forwardChannelMaxRetries",2,n),this.ta=Mh("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new L_(n&&n.concurrentRequestLimit),this.Fa=new lb,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Yc(n){if(dp(n),3==n.G){var e=n.U++,t=To(n.F);An(t,"SID",n.I),An(t,"RID",e),An(t,"TYPE","terminate"),kh(n,t),(e=new Wc(n,n.j,e,void 0)).K=2,e.v=Dl(To(t)),t=!1,Et.navigator&&Et.navigator.sendBeacon&&(t=Et.navigator.sendBeacon(e.v.toString(),"")),!t&&Et.Image&&((new Image).src=e.v,t=!0),t||(e.g=Om(e.l,null),e.g.da(e.v)),e.F=Date.now(),$c(e)}Xc(n)}function cp(n){n.g&&(Pm(n),n.g.cancel(),n.g=null)}function dp(n){cp(n),n.u&&(Et.clearTimeout(n.u),n.u=null),fp(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Et.clearTimeout(n.m),n.m=null)}function hp(n){V_(n.h)||n.m||(n.m=!0,w(n.Ja,n),n.C=0)}function z_(n,e){var t;t=e?e.m:n.U++;const r=To(n.F);An(r,"SID",n.I),An(r,"RID",t),An(r,"AID",n.T),kh(n,r),n.o&&n.s&&Sm(r,n.o,n.s),t=new Wc(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Mm(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Tl(n.h,t),vm(t,r,e)}function kh(n,e){n.ia&&gl(n.ia,function(t,r){An(e,r,t)}),n.l&&np({},function(t,r){An(e,r,t)})}function Mm(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Cr(n.l.Ra,n.l,n):null;e:{var a=n.i;let l=-1;for(;;){const d=["count="+t];-1==l?0<t?(l=a[0].h,d.push("ofs="+l)):l=0:d.push("ofs="+l);let y=!0;for(let E=0;E<t;E++){let b=a[E].h;const x=a[E].g;if(b-=l,0>b)l=Math.max(0,a[E].h-100),y=!1;else try{cb(x,d,"req"+b+"_")}catch{r&&r(x)}}if(y){r=d.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function km(n){n.g||n.u||(n.Z=1,w(n.Ia,n),n.A=0)}function Nm(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Eh(Cr(n.Ia,n),rE(n,n.A)),n.A++,0))}function Pm(n){null!=n.B&&(Et.clearTimeout(n.B),n.B=null)}function q_(n){n.g=new Wc(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=To(n.sa);An(e,"RID","rpc"),An(e,"SID",n.I),An(e,"CI",n.L?"0":"1"),An(e,"AID",n.T),An(e,"TYPE","xmlhttp"),kh(n,e),n.o&&n.s&&Sm(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Dl(To(e)),t.s=null,t.P=!0,KC(t,n)}function fp(n){null!=n.v&&(Et.clearTimeout(n.v),n.v=null)}function K_(n,e){var t=null;if(n.g==e){fp(n),Pm(n),n.g=null;var r=2}else{if(!So(n.h,e))return;t=e.D,U_(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var a=n.C;dr(r=Rs(),new x_(r,t)),hp(n)}else km(n);else if(3==(a=e.o)||0==a&&0<n.pa||!(1==r&&function hr(n,e){return!(B_(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Eh(Cr(n.Ja,n,e),rE(n,n.C)),n.C++,0)))}(n,e)||2==r&&Nm(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),a){case 1:Qc(n,5);break;case 4:Qc(n,10);break;case 3:Qc(n,6);break;default:Qc(n,2)}}function rE(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Qc(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Cr(n.kb,n);t||(t=new Il("//www.google.com/images/cleardot.gif"),Et.location&&"http"==Et.location.protocol||ip(t,"https"),Dl(t)),function db(n,e){const t=new _l;if(Et.Image){const r=new Image;r.onload=Ps(Th,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Ps(Th,t,r,"TestLoadImage: error",!1,e),r.onabort=Ps(Th,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ps(Th,t,r,"TestLoadImage: timeout",!1,e),Et.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ur(2);n.G=0,n.l&&n.l.va(e),Xc(n),dp(n)}function Xc(n){if(n.G=0,n.la=[],n.l){const e=eE(n.h);(0!=e.length||0!=n.i.length)&&(S(n.la,e),S(n.la,n.i),n.h.i.length=0,D(n.i),n.i.length=0),n.l.ua()}}function Rm(n,e,t){var r=t instanceof Il?To(t):new Il(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),sp(r,r.m);else{var a=Et.location;r=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var l=new Il(null,void 0);r&&ip(l,r),e&&(l.g=e),a&&sp(l,a),t&&(l.l=t),r=l}return e=n.za,(t=n.D)&&e&&An(r,t,e),An(r,"VER",n.ma),kh(n,r),r}function Om(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Kn(t&&n.Da&&!n.ra?new Sh({jb:!0}):n.ra)).Ka(n.H),e}function Fm(){}function Nh(){if(wn&&!(10<=Number(Gf)))throw Error("Environmental error: no available transport.")}function Wi(n,e){cr.call(this),this.g=new xm(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!re(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!re(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new du(this)}function Lm(n){Jf.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Vm(){Ih.call(this),this.status=1}function du(n){this.g=n}(ot=Kn.prototype).Ka=function(n){this.L=n},ot.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():mm.g(),this.C=function k_(n){return n.h||(n.h=n.i())}(this.u?this.u:mm),this.g.onreadystatechange=Cr(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void tE(this,l)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var a in r)t.set(a,r[a]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const l of r.keys())t.set(l,r.get(l))}r=Array.from(t.keys()).find(l=>"content-type"==l.toLowerCase()),a=Et.FormData&&n instanceof Et.FormData,!(0<=I(hb,e))||r||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[l,d]of t)this.g.setRequestHeader(l,d);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{nE(this),0<this.B&&((this.K=function fb(n){return wn&&function lm(){return function _t(n){var e=Hf;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=De(String(ls)).split("."),t=De("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var a=e[d]||"",l=t[d]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==a[0].length&&0==l[0].length)break;n=je(0==a[1].length?0:parseInt(a[1],10),0==l[1].length?0:parseInt(l[1],10))||je(0==a[2].length,0==l[2].length)||je(a[2],l[2]),a=a[3],l=l[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Cr(this.qa,this)):this.A=mn(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){tE(this,l)}},ot.qa=function(){typeof os<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,dr(this,"timeout"),this.abort(8))},ot.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,dr(this,"complete"),dr(this,"abort"),Tm(this))},ot.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Tm(this,!0)),Kn.X.M.call(this)},ot.Ha=function(){this.s||(this.F||this.v||this.l?lp(this):this.fb())},ot.fb=function(){lp(this)},ot.aa=function(){try{return 2<xo(this)?this.g.status:-1}catch{return-1}},ot.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},ot.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),xh(e)}},ot.Ea=function(){return this.m},ot.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ot=xm.prototype).ma=8,ot.G=1,ot.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const a=new Wc(this,this.j,n,void 0);let l=this.s;if(this.S&&(l?(l=hm(l),Wf(l,this.S)):l=this.S),null!==this.o||this.N||(a.H=l,l=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Mm(this,a,e),An(t=To(this.F),"RID",n),An(t,"CVER",22),this.D&&An(t,"X-HTTP-Session-Id",this.D),kh(this,t),l&&(this.N?e="headers="+encodeURIComponent(String($_(l)))+"&"+e:this.o&&Sm(t,this.o,l)),Tl(this.h,a),this.Ya&&An(t,"TYPE","init"),this.O?(An(t,"$req",e),An(t,"SID","null"),a.Z=!0,vm(a,t,null)):vm(a,t,e),this.G=2}}else 3==this.G&&(n?z_(this,n):0==this.i.length||V_(this.h)||z_(this))},ot.Ia=function(){if(this.u=null,q_(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Eh(Cr(this.eb,this),n)}},ot.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ur(10),cp(this),q_(this))},ot.cb=function(){null!=this.v&&(this.v=null,cp(this),Nm(this),Ur(19))},ot.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Ur(2)):(this.j.info("Failed to ping google.com"),Ur(1))},(ot=Fm.prototype).xa=function(){},ot.wa=function(){},ot.va=function(){},ot.ua=function(){},ot.Ra=function(){},Nh.prototype.g=function(n,e){return new Wi(n,e)},En(Wi,cr),Wi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Ur(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Rm(n,null,n.V),hp(n)},Wi.prototype.close=function(){Yc(this.g)},Wi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Bc(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&hp(e)},Wi.prototype.M=function(){this.g.l=null,delete this.j,Yc(this.g),delete this.g,Wi.X.M.call(this)},En(Lm,Jf),En(Vm,Ih),En(du,Fm),du.prototype.xa=function(){dr(this.g,"a")},du.prototype.wa=function(n){dr(this.g,new Lm(n))},du.prototype.va=function(n){dr(this.g,new Vm)},du.prototype.ua=function(){dr(this.g,"b")},Nh.prototype.createWebChannel=Nh.prototype.g,Wi.prototype.send=Wi.prototype.u,Wi.prototype.open=Wi.prototype.m,Wi.prototype.close=Wi.prototype.close,Xf.NO_ERROR=0,Xf.TIMEOUT=8,Xf.HTTP_ERROR=6,M_.COMPLETE="complete",gm.EventType=Cl,Cl.OPEN="a",Cl.CLOSE="b",Cl.ERROR="c",Cl.MESSAGE="d",cr.prototype.listen=cr.prototype.N,Kn.prototype.listenOnce=Kn.prototype.O,Kn.prototype.getLastError=Kn.prototype.Oa,Kn.prototype.getLastErrorCode=Kn.prototype.Ea,Kn.prototype.getStatus=Kn.prototype.aa,Kn.prototype.getResponseJson=Kn.prototype.Sa,Kn.prototype.getResponseText=Kn.prototype.fa,Kn.prototype.send=Kn.prototype.da,Kn.prototype.setWithCredentials=Kn.prototype.Ka;var pb=Qr.createWebChannelTransport=function(){return new Nh},iE=Qr.getStatEventTarget=function(){return Rs()},Ph=Qr.ErrorCode=Xf,Z_=Qr.EventType=M_,Y_=Qr.Event=bo,hu=Qr.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},sE=Qr.FetchXmlHttpFactory=Sh,Jc=Qr.WebChannel=gm,pp=Qr.XhrIo=Kn;const Q_="@firebase/firestore";class fr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fr.UNAUTHENTICATED=new fr(null),fr.GOOGLE_CREDENTIALS=new fr("google-credentials-uid"),fr.FIRST_PARTY=new fr("first-party-uid"),fr.MOCK_USER=new fr("mock-user");let ya="9.14.0";const $i=new xr.Yd("@firebase/firestore");function gp(){return $i.logLevel}function Ve(n,...e){if($i.logLevel<=xr.in.DEBUG){const t=e.map(pu);$i.debug(`Firestore (${ya}): ${n}`,...t)}}function or(n,...e){if($i.logLevel<=xr.in.ERROR){const t=e.map(pu);$i.error(`Firestore (${ya}): ${n}`,...t)}}function fu(n,...e){if($i.logLevel<=xr.in.WARN){const t=e.map(pu);$i.warn(`Firestore (${ya}): ${n}`,...t)}}function pu(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function at(n="Unexpected state"){const e=`FIRESTORE (${ya}) INTERNAL ASSERTION FAILED: `+n;throw or(e),new Error(e)}function Tt(n,e){n||at()}function Qe(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends Ut.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class pr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class X_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class J_{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(fr.UNAUTHENTICATED))}shutdown(){}}class gb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class aE{constructor(e){this.t=e,this.currentUser=fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let a=this.i;const l=b=>this.i!==a?(a=this.i,t(b)):Promise.resolve();let d=new pr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new pr,e.enqueueRetryable(()=>l(this.currentUser))};const y=()=>{const b=d;e.enqueueRetryable((0,ge.Z)(function*(){yield b.promise,yield l(r.currentUser)}))},E=b=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),y()};this.t.onInit(b=>E(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?E(b):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new pr)}},0),y()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tt("string"==typeof r.accessToken),new X_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Tt(null===e||"string"==typeof e),new fr(e)}}class mp{constructor(e,t,r,a){this.h=e,this.l=t,this.m=r,this.g=a,this.type="FirstParty",this.user=fr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Tt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class uE{constructor(e,t,r,a){this.h=e,this.l=t,this.m=r,this.g=a}getToken(){return Promise.resolve(new mp(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(fr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Rh{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=l=>{null!=l.error&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.A;return this.A=l.token,Ve("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const a=l=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.T.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.T.getImmediate({optional:!0});l?a(l):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Tt("string"==typeof t.token),this.A=t.token,new xl(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function yb(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Um{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const a=yb(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%e.length))}return r}}function Rt(n,e){return n<e?-1:n>e?1:0}function ed(n,e,t){return n.length===e.length&&n.every((r,a)=>t(r,e[a]))}function e0(n){return n+"\0"}class Nn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Nn.fromMillis(Date.now())}static fromDate(e){return Nn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Nn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Rt(this.nanoseconds,e.nanoseconds):Rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class It{constructor(e){this.timestamp=e}static fromTimestamp(e){return new It(e)}static min(){return new It(new Nn(0,0))}static max(){return new It(new Nn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ml{constructor(e,t,r){void 0===t?t=0:t>e.length&&at(),void 0===r?r=e.length-t:r>e.length-t&&at(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Ml.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ml?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=e.get(a),d=t.get(a);if(l<d)return-1;if(l>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jt extends Ml{construct(e,t,r){return new Jt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(a=>a.length>0))}return new Jt(t)}static emptyPath(){return new Jt([])}}const lE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jn extends Ml{construct(e,t,r){return new jn(e,t,r)}static isValidIdentifier(e){return lE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new jn(["__name__"])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(0===r.length)throw new Ne(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;a<e.length;){const y=e[a];if("\\"===y){if(a+1===e.length)throw new Ne(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[a+1];if("\\"!==E&&"."!==E&&"`"!==E)throw new Ne(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=E,a+=2}else"`"===y?(d=!d,a++):"."!==y||d?(r+=y,a++):(l(),a++)}if(l(),d)throw new Ne(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jn(t)}static emptyPath(){return new jn([])}}class qe{constructor(e){this.path=e}static fromPath(e){return new qe(Jt.fromString(e))}static fromName(e){return new qe(Jt.fromString(e).popFirst(5))}static empty(){return new qe(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new Jt(e.slice()))}}class yp{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function jm(n){return n.fields.find(e=>2===e.kind)}function kl(n){return n.fields.filter(e=>2!==e.kind)}yp.UNKNOWN_ID=-1;class vp{constructor(e,t){this.fieldPath=e,this.kind=t}}class Oh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Oh(0,zi.min())}}function Nl(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=It.fromTimestamp(1e9===r?new Nn(t+1,0):new Nn(t,r));return new zi(a,qe.empty(),e)}function Mo(n){return new zi(n.readTime,n.key,-1)}class zi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new zi(It.min(),qe.empty(),-1)}static max(){return new zi(It.max(),qe.empty(),-1)}}function Hm(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=qe.comparator(n.documentKey,e.documentKey),0!==t?t:Rt(n.largestBatchId,e.largestBatchId))}const hE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function va(n){return t0.apply(this,arguments)}function t0(){return t0=(0,ge.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==hE)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}),t0.apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&at(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let a=0,l=0,d=!1;e.forEach(y=>{++a,y.next(()=>{++l,d&&l===a&&t()},E=>r(E))}),d=!0,l===a&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(a=>a?oe.resolve(a):r());return t}static forEach(e,t){const r=[];return e.forEach((a,l)=>{r.push(t.call(this,a,l))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,a)=>{const l=e.length,d=new Array(l);let y=0;for(let E=0;E<l;E++){const b=E;t(e[b]).next(x=>{d[b]=x,++y,y===l&&r(d)},x=>a(x))}})}static doWhile(e,t){return new oe((r,a)=>{const l=()=>{!0===e()?t().next(()=>{l()},a):r()};l()})}}class Gm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new pr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new td(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const a=_p(r.target.error);this.P.reject(new td(e,a))}}static open(e,t,r,a){try{return new Gm(t,e.transaction(a,r))}catch(l){throw new td(t,l)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new gE(t)}}class hs{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===hs.D((0,Ut.z$)())&&or("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),jr(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Ut.hl)())return!1;if(hs.N())return!0;const e=(0,Ut.z$)(),t=hs.D(e),r=0<t&&t<10,a=hs.k(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,ge.Z)(function*(){return t.db||(Ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,a)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=d=>{r(d.target.result)},l.onblocked=()=>{a(new td(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=d=>{const y=d.target.error;a("VersionError"===y.name?new Ne(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===y.name?new Ne(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+y):new td(e,y))},l.onupgradeneeded=d=>{Ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.S.$(d.target.result,l.transaction,d.oldVersion,t.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,a){var l=this;return(0,ge.Z)(function*(){const d="readonly"===t;let y=0;for(;;){++y;try{l.db=yield l.F(e);const E=Gm.open(l.db,e,d?"readonly":"readwrite",r),b=a(E).next(x=>(E.V(),x)).catch(x=>(E.abort(x),oe.reject(x))).toPromise();return b.catch(()=>{}),yield E.v,b}catch(E){const b=E,x="FirebaseError"!==b.name&&y<3;if(Ve("SimpleDb","Transaction failed with error:",b.message,"Retrying:",x),l.close(),!x)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class pE{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return jr(this.U.delete())}}class td extends Ne{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function gu(n){return"IndexedDbTransactionError"===n.name}class gE{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),jr(r)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),jr(this.store.add(e))}get(e){return jr(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),jr(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),jr(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const a=this.cursor(r),l=[];return this.H(a,(d,y)=>{l.push(y)}).next(()=>l)}{const a=this.store.getAll(r.range);return new oe((l,d)=>{a.onerror=y=>{d(y.target.error)},a.onsuccess=y=>{l(y.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new oe((a,l)=>{r.onerror=d=>{l(d.target.error)},r.onsuccess=d=>{a(d.target.result)}})}Y(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const a=this.cursor(r);return this.H(a,(l,d,y)=>y.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.H(a,t)}tt(e){const t=this.cursor({});return new oe((r,a)=>{t.onerror=l=>{const d=_p(l.target.error);a(d)},t.onsuccess=l=>{const d=l.target.result;d?e(d.primaryKey,d.value).next(y=>{y?d.continue():r()}):r()}})}H(e,t){const r=[];return new oe((a,l)=>{e.onerror=d=>{l(d.target.error)},e.onsuccess=d=>{const y=d.target.result;if(!y)return void a();const E=new pE(y),b=t(y.primaryKey,y.value,E);if(b instanceof oe){const x=b.catch(R=>(E.done(),oe.reject(R)));r.push(x)}E.isDone?a():null===E.G?y.continue():y.continue(E.G)}}).next(()=>oe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function jr(n){return new oe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const a=_p(r.target.error);t(a)}})}let n0=!1;function _p(n){const e=hs.D((0,Ut.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return n0||(n0=!0,setTimeout(()=>{throw r},0)),r}}return n}class mE{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ve("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ge.Z)(function*(){t.task=null;try{Ve("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){gu(r)?Ve("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield va(r)}yield t.nt(6e4)}))}}class yE{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ge.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let a=t,l=!0;return oe.doWhile(()=>!0===l&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return Ve("IndexBackiller",`Processing collection: ${d}`),this.rt(e,d,a).next(y=>{a-=y,r.add(d)});l=!1})).next(()=>t-a)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next(l=>{const d=l.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.ot(a,l)).next(y=>(Ve("IndexBackiller",`Updating offset: ${y}`),this.localStore.indexManager.updateCollectionGroup(e,t,y))).next(()=>d.size)}))}ot(e,t){let r=e;return t.changes.forEach((a,l)=>{const d=Mo(l);Hm(d,r)>0&&(r=d)}),new zi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class vi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function r0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function mu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function s0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}vi.at=-1;class Jn{constructor(e,t){this.comparator=e,this.root=t||pt.EMPTY}insert(e,t){return new Jn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,pt.BLACK,null,null))}remove(e){return new Jn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(0===a)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wp(this.root,e,this.comparator,!1)}getReverseIterator(){return new wp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wp(this.root,e,this.comparator,!0)}}class wp{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pt{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??pt.RED,this.left=a??pt.EMPTY,this.right=l??pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new pt(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):0===l?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return pt.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw at();const e=this.left.check();if(e!==this.right.check())throw at();return e+(this.isRed()?0:1)}}pt.EMPTY=null,pt.RED=!0,pt.BLACK=!1,pt.EMPTY=new class{constructor(){this.size=0}get key(){throw at()}get value(){throw at()}get color(){throw at()}get left(){throw at()}get right(){throw at()}copy(n,e,t,r,a){return this}insert(n,e,t){return new pt(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class yn{constructor(e){this.comparator=e,this.data=new Jn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Wm(this.data.getIterator())}getIteratorFrom(e){return new Wm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof yn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(0!==this.comparator(a,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new yn(this.comparator);return t.data=e,t}}class Wm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Pl(n){return n.hasNext()?n.getNext():void 0}class qi{constructor(e){this.fields=e,e.sort(jn.comparator)}static empty(){return new qi([])}unionWith(e){let t=new yn(jn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new qi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ed(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class gr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new gr(t)}static fromUint8Array(e){const t=function(r){let a="";for(let l=0;l<r.length;++l)a+=String.fromCharCode(r[l]);return a}(e);return new gr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gr.EMPTY_BYTE_STRING=new gr("");const _E=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _a(n){if(Tt(!!n),"string"==typeof n){let e=0;const t=_E.exec(n);if(Tt(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:er(n.seconds),nanos:er(n.nanos)}}function er(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Rl(n){return"string"==typeof n?gr.fromBase64String(n):gr.fromUint8Array(n)}function o0(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function $m(n){const e=n.mapValue.fields.__previous_value__;return o0(e)?$m(e):e}function nd(n){const e=_a(n.mapValue.fields.__local_write_time__.timestampValue);return new Nn(e.seconds,e.nanos)}class Ol{constructor(e,t,r,a,l,d,y,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=y,this.useFetchStreams=E}}class yu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new yu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof yu&&e.projectId===this.projectId&&e.database===this.database}}function Fl(n){return null==n}function Ll(n){return 0===n&&1/n==-1/0}function a0(n){return"number"==typeof n&&Number.isInteger(n)&&!Ll(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Vl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},zm={nullValue:"NULL_VALUE"};function rd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?o0(n)?4:c0(n)?9007199254740991:10:at()}function ko(n,e){if(n===e)return!0;const t=rd(n);if(t!==rd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return nd(n).isEqual(nd(e));case 3:return function(r,a){if("string"==typeof r.timestampValue&&"string"==typeof a.timestampValue&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const l=_a(r.timestampValue),d=_a(a.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,Rl(n.bytesValue).isEqual(Rl(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,a){return er(r.geoPointValue.latitude)===er(a.geoPointValue.latitude)&&er(r.geoPointValue.longitude)===er(a.geoPointValue.longitude)}(n,e);case 2:return function(r,a){if("integerValue"in r&&"integerValue"in a)return er(r.integerValue)===er(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const l=er(r.doubleValue),d=er(a.doubleValue);return l===d?Ll(l)===Ll(d):isNaN(l)&&isNaN(d)}return!1}(n,e);case 9:return ed(n.arrayValue.values||[],e.arrayValue.values||[],ko);case 10:return function(r,a){const l=r.mapValue.fields||{},d=a.mapValue.fields||{};if(r0(l)!==r0(d))return!1;for(const y in l)if(l.hasOwnProperty(y)&&(void 0===d[y]||!ko(l[y],d[y])))return!1;return!0}(n,e);default:return at()}var a}function id(n,e){return void 0!==(n.values||[]).find(t=>ko(t,e))}function Bl(n,e){if(n===e)return 0;const t=rd(n),r=rd(e);if(t!==r)return Rt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Rt(n.booleanValue,e.booleanValue);case 2:return function(a,l){const d=er(a.integerValue||a.doubleValue),y=er(l.integerValue||l.doubleValue);return d<y?-1:d>y?1:d===y?0:isNaN(d)?isNaN(y)?0:-1:1}(n,e);case 3:return u0(n.timestampValue,e.timestampValue);case 4:return u0(nd(n),nd(e));case 5:return Rt(n.stringValue,e.stringValue);case 6:return function(a,l){const d=Rl(a),y=Rl(l);return d.compareTo(y)}(n.bytesValue,e.bytesValue);case 7:return function(a,l){const d=a.split("/"),y=l.split("/");for(let E=0;E<d.length&&E<y.length;E++){const b=Rt(d[E],y[E]);if(0!==b)return b}return Rt(d.length,y.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,l){const d=Rt(er(a.latitude),er(l.latitude));return 0!==d?d:Rt(er(a.longitude),er(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,l){const d=a.values||[],y=l.values||[];for(let E=0;E<d.length&&E<y.length;++E){const b=Bl(d[E],y[E]);if(b)return b}return Rt(d.length,y.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,l){if(a===Vl.mapValue&&l===Vl.mapValue)return 0;if(a===Vl.mapValue)return 1;if(l===Vl.mapValue)return-1;const d=a.fields||{},y=Object.keys(d),E=l.fields||{},b=Object.keys(E);y.sort(),b.sort();for(let x=0;x<y.length&&x<b.length;++x){const R=Rt(y[x],b[x]);if(0!==R)return R;const z=Bl(d[y[x]],E[b[x]]);if(0!==z)return z}return Rt(y.length,b.length)}(n.mapValue,e.mapValue);default:throw at()}}function u0(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Rt(n,e);const t=_a(n),r=_a(e),a=Rt(t.seconds,r.seconds);return 0!==a?a:Rt(t.nanos,r.nanos)}function Ls(n){return qm(n)}function qm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const a=_a(r);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Rl(n.bytesValue).toBase64():"referenceValue"in n?qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let a="[",l=!0;for(const d of r.values||[])l?l=!1:a+=",",a+=qm(d);return a+"]"}(n.arrayValue):"mapValue"in n?function(r){const a=Object.keys(r.fields||{}).sort();let l="{",d=!0;for(const y of a)d?d=!1:l+=",",l+=`${y}:${qm(r.fields[y])}`;return l+"}"}(n.mapValue):at();var e}function vu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function sd(n){return!!n&&"integerValue"in n}function Fh(n){return!!n&&"arrayValue"in n}function Km(n){return!!n&&"nullValue"in n}function l0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Cp(n){return!!n&&"mapValue"in n}function Lh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return mu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Lh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Lh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function c0(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function wE(n){return"nullValue"in n?zm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?vu(yu.empty(),qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:at()}function d0(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?vu(yu.empty(),qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Vl:at()}function h0(n,e){const t=Bl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Zm(n,e){const t=Bl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Mr{constructor(e){this.value=e}static empty(){return new Mr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Cp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lh(t)}setAll(e){let t=jn.emptyPath(),r={},a=[];e.forEach((d,y)=>{if(!t.isImmediateParentOf(y)){const E=this.getFieldsMap(t);this.applyChanges(E,r,a),r={},a=[],t=y.popLast()}d?r[y.lastSegment()]=Lh(d):a.push(y.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());Cp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ko(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];Cp(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){mu(t,(a,l)=>e[a]=l);for(const a of r)delete e[a]}clone(){return new Mr(Lh(this.value))}}function Ep(n){const e=[];return mu(n.fields,(t,r)=>{const a=new jn([t]);if(Cp(r)){const l=Ep(r.mapValue).fields;if(0===l.length)e.push(a);else for(const d of l)e.push(a.child(d))}else e.push(a)}),new qi(e)}class Pn{constructor(e,t,r,a,l,d){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.data=l,this.documentState=d}static newInvalidDocument(e){return new Pn(e,0,It.min(),It.min(),Mr.empty(),0)}static newFoundDocument(e,t,r){return new Pn(e,1,t,It.min(),r,0)}static newNoDocument(e,t){return new Pn(e,2,t,It.min(),Mr.empty(),0)}static newUnknownDocument(e,t){return new Pn(e,3,t,It.min(),Mr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=It.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ym{constructor(e,t=null,r=[],a=[],l=null,d=null,y=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=d,this.endAt=y,this.ht=null}}function f0(n,e=null,t=[],r=[],a=null,l=null,d=null){return new Ym(n,e,t,r,a,l,d)}function od(n){const e=Qe(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(a=r).field.canonicalString()+a.op.toString()+Ls(a.value);var a}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(a=r).field.canonicalString()+a.dir;var a}).join(","),Fl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ls(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ls(r)).join(",")),e.ht=t}return e.ht}function Vh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let a=0;a<n.orderBy.length;a++)if(!ny(n.orderBy[a],e.orderBy[a]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let a=0;a<n.filters.length;a++)if((t=n.filters[a]).op!==(r=e.filters[a]).op||!t.field.isEqual(r.field)||!ko(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Dp(n.startAt,e.startAt)&&Dp(n.endAt,e.endAt)}function Bh(n){return qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Ul(n,e){return n.filters.filter(t=>t instanceof Hr&&t.field.isEqual(e))}function fs(n,e,t){let r=zm,a=!0;for(const l of Ul(n,e)){let d=zm,y=!0;switch(l.op){case"<":case"<=":d=wE(l.value);break;case"==":case"in":case">=":d=l.value;break;case">":d=l.value,y=!1;break;case"!=":case"not-in":d=zm}h0({value:r,inclusive:a},{value:d,inclusive:y})<0&&(r=d,a=y)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const d=t.position[l];h0({value:r,inclusive:a},{value:d,inclusive:t.inclusive})<0&&(r=d,a=t.inclusive);break}return{value:r,inclusive:a}}function Qm(n,e,t){let r=Vl,a=!0;for(const l of Ul(n,e)){let d=Vl,y=!0;switch(l.op){case">=":case">":d=d0(l.value),y=!1;break;case"==":case"in":case"<=":d=l.value;break;case"<":d=l.value,y=!1;break;case"!=":case"not-in":d=Vl}Zm({value:r,inclusive:a},{value:d,inclusive:y})>0&&(r=d,a=y)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const d=t.position[l];Zm({value:r,inclusive:a},{value:d,inclusive:t.inclusive})>0&&(r=d,a=t.inclusive);break}return{value:r,inclusive:a}}class Hr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new Xm(e,t,r):"array-contains"===t?new ty(e,r):"in"===t?new vb(e,r):"not-in"===t?new p0(e,r):"array-contains-any"===t?new _b(e,r):new Hr(e,t,r)}static lt(e,t,r){return"in"===t?new wa(e,r):new Jm(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Bl(t,this.value)):null!==t&&rd(this.value)===rd(t)&&this.ft(Bl(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return at()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Xm extends Hr{constructor(e,t,r){super(e,t,r),this.key=qe.fromName(r.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.ft(t)}}class wa extends Hr{constructor(e,t){super(e,"in",t),this.keys=ey(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Jm extends Hr{constructor(e,t){super(e,"not-in",t),this.keys=ey(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ey(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>qe.fromName(r.referenceValue))}class ty extends Hr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Fh(t)&&id(t.arrayValue,this.value)}}class vb extends Hr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&id(this.value.arrayValue,t)}}class p0 extends Hr{constructor(e,t){super(e,"not-in",t)}matches(e){if(id(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!id(this.value.arrayValue,t)}}class _b extends Hr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Fh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>id(this.value.arrayValue,r))}}class Vs{constructor(e,t){this.position=e,this.inclusive=t}}class Ca{constructor(e,t="asc"){this.field=e,this.dir=t}}function ny(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Ip(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const l=e[a],d=n.position[a];if(r=l.field.isKeyField()?qe.comparator(qe.fromName(d.referenceValue),t.key):Bl(d,t.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return r}function Dp(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ko(n.position[t],e.position[t]))return!1;return!0}class _u{constructor(e,t=null,r=[],a=[],l=null,d="F",y=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=d,this.startAt=y,this.endAt=E,this._t=null,this.wt=null}}function g0(n,e,t,r,a,l,d,y){return new _u(n,e,t,r,a,l,d,y)}function ud(n){return new _u(n)}function m0(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function ry(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function bp(n){for(const e of n.filters)if(e.dt())return e.field;return null}function y0(n){return null!==n.collectionGroup}function ld(n){const e=Qe(n);if(null===e._t){e._t=[];const t=bp(e),r=ry(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Ca(t)),e._t.push(new Ca(jn.keyField(),"asc"));else{let a=!1;for(const l of e.explicitOrderBy)e._t.push(l),l.field.isKeyField()&&(a=!0);if(!a){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Ca(jn.keyField(),l))}}}return e._t}function _i(n){const e=Qe(n);if(!e.wt)if("F"===e.limitType)e.wt=f0(e.path,e.collectionGroup,ld(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of ld(e))t.push(new Ca(l.field,"desc"===l.dir?"asc":"desc"));const r=e.endAt?new Vs(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new Vs(e.startAt.position,e.startAt.inclusive):null;e.wt=f0(e.path,e.collectionGroup,t,e.filters,e.limit,r,a)}return e.wt}function Uh(n,e,t){return new _u(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function cd(n,e){return Vh(_i(n),_i(e))&&n.limitType===e.limitType}function v0(n){return`${od(_i(n))}|lt:${n.limitType}`}function jh(n){return`Query(target=${function ad(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Ls(r.value)}`;var r}).join(", ")}]`),Fl(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Ls(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Ls(t)).join(",")),`Target(${e})`}(_i(n))}; limitType=${n.limitType})`}function _0(n,e){return e.isFoundDocument()&&function(t,r){const a=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):qe.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(n,e)&&function(t,r){for(const a of t.explicitOrderBy)if(!a.field.isKeyField()&&null===r.data.field(a.field))return!1;return!0}(n,e)&&function(t,r){for(const a of t.filters)if(!a.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(a,l,d){const y=Ip(a,l,d);return a.inclusive?y<=0:y<0}(t.startAt,ld(t),r)||t.endAt&&!function(a,l,d){const y=Ip(a,l,d);return a.inclusive?y>=0:y>0}(t.endAt,ld(t),r)));var t,r}function CE(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function EE(n){return(e,t)=>{let r=!1;for(const a of ld(n)){const l=wb(a,e,t);if(0!==l)return l;r=r||a.field.isKeyField()}return 0}}function wb(n,e,t){const r=n.field.isKeyField()?qe.comparator(e.key,t.key):function(a,l,d){const y=l.data.field(a),E=d.data.field(a);return null!==y&&null!==E?Bl(y,E):at()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return at()}}function IE(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ll(e)?"-0":e}}function DE(n){return{integerValue:""+n}}function bE(n,e){return a0(e)?DE(e):IE(n,e)}class iy{constructor(){this._=void 0}}function Cb(n,e,t){return n instanceof wu?function(r,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&(l.fields.__previous_value__=a),{mapValue:l}}(t,e):n instanceof jl?sy(n,e):n instanceof Ia?oy(n,e):function(r,a){const l=Ea(r,a),d=w0(l)+w0(r.yt);return sd(l)&&sd(r.yt)?DE(d):IE(r.It,d)}(n,e)}function Eb(n,e,t){return n instanceof jl?sy(n,e):n instanceof Ia?oy(n,e):t}function Ea(n,e){return n instanceof Cu?sd(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class wu extends iy{}class jl extends iy{constructor(e){super(),this.elements=e}}function sy(n,e){const t=Da(e);for(const r of n.elements)t.some(a=>ko(a,r))||t.push(r);return{arrayValue:{values:t}}}class Ia extends iy{constructor(e){super(),this.elements=e}}function oy(n,e){let t=Da(e);for(const r of n.elements)t=t.filter(a=>!ko(a,r));return{arrayValue:{values:t}}}class Cu extends iy{constructor(e,t){super(),this.It=e,this.yt=t}}function w0(n){return er(n.integerValue||n.doubleValue)}function Da(n){return Fh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class dd{constructor(e,t){this.field=e,this.transform=t}}class TE{constructor(e,t){this.version=e,this.transformResults=t}}class Rn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Rn}static exists(e){return new Rn(void 0,e)}static updateTime(e){return new Rn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ap(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Tp{}function Hh(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Gl(n.key,Rn.none()):new ba(n.key,n.data,Rn.none());{const t=n.data,r=Mr.empty();let a=new yn(jn.comparator);for(let l of e.fields)if(!a.has(l)){let d=t.field(l);null===d&&l.length>1&&(l=l.popLast(),d=t.field(l)),null===d?r.delete(l):r.set(l,d),a=a.add(l)}return new No(n.key,r,new qi(a.toArray()),Rn.none())}}function hd(n,e,t){n instanceof ba?function(r,a,l){const d=r.value.clone(),y=xp(r.fieldTransforms,a,l.transformResults);d.setAll(y),a.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(n,e,t):n instanceof No?function(r,a,l){if(!Ap(r.precondition,a))return void a.convertToUnknownDocument(l.version);const d=xp(r.fieldTransforms,a,l.transformResults),y=a.data;y.setAll(ay(r)),y.setAll(d),a.convertToFoundDocument(l.version,y).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Hl(n,e,t,r){return n instanceof ba?function(a,l,d,y){if(!Ap(a.precondition,l))return d;const E=a.value.clone(),b=Mp(a.fieldTransforms,y,l);return E.setAll(b),l.convertToFoundDocument(l.version,E).setHasLocalMutations(),null}(n,e,t,r):n instanceof No?function(a,l,d,y){if(!Ap(a.precondition,l))return d;const E=Mp(a.fieldTransforms,y,l),b=l.data;return b.setAll(ay(a)),b.setAll(E),l.convertToFoundDocument(l.version,b).setHasLocalMutations(),null===d?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(x=>x.field))}(n,e,t,r):(d=t,Ap(n.precondition,l=e)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):d);var l,d}function fd(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),l=Ea(r.transform,a||null);null!=l&&(null===t&&(t=Mr.empty()),t.set(r.field,l))}return t||null}function Sp(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ed(t,r,(a,l)=>function AE(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof jl&&r instanceof jl||t instanceof Ia&&r instanceof Ia?ed(t.elements,r.elements,ko):t instanceof Cu&&r instanceof Cu?ko(t.yt,r.yt):t instanceof wu&&r instanceof wu);var t,r}(a,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class ba extends Tp{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class No extends Tp{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function ay(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function xp(n,e,t){const r=new Map;Tt(n.length===t.length);for(let a=0;a<t.length;a++){const l=n[a],d=l.transform,y=e.data.field(l.field);r.set(l.field,Eb(d,y,t[a]))}return r}function Mp(n,e,t){const r=new Map;for(const a of n){const l=a.transform,d=t.data.field(a.field);r.set(a.field,Cb(l,d,e))}return r}class Gl extends Tp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Gh extends Tp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class SE{constructor(e){this.count=e}}var Er,tn;function uy(n){switch(n){default:return at();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function C0(n){if(void 0===n)return or("GRPC error has no .code"),ce.UNKNOWN;switch(n){case Er.OK:return ce.OK;case Er.CANCELLED:return ce.CANCELLED;case Er.UNKNOWN:return ce.UNKNOWN;case Er.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Er.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Er.INTERNAL:return ce.INTERNAL;case Er.UNAVAILABLE:return ce.UNAVAILABLE;case Er.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Er.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Er.NOT_FOUND:return ce.NOT_FOUND;case Er.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Er.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Er.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Er.ABORTED:return ce.ABORTED;case Er.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Er.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Er.DATA_LOSS:return ce.DATA_LOSS;default:return at()}}(tn=Er||(Er={}))[tn.OK=0]="OK",tn[tn.CANCELLED=1]="CANCELLED",tn[tn.UNKNOWN=2]="UNKNOWN",tn[tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tn[tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tn[tn.NOT_FOUND=5]="NOT_FOUND",tn[tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",tn[tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",tn[tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",tn[tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tn[tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tn[tn.ABORTED=10]="ABORTED",tn[tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",tn[tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",tn[tn.INTERNAL=13]="INTERNAL",tn[tn.UNAVAILABLE=14]="UNAVAILABLE",tn[tn.DATA_LOSS=15]="DATA_LOSS";class Aa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[a,l]of r)if(this.equalsFn(a,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(void 0===a)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return 1===r.length?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){mu(this.inner,(t,r)=>{for(const[a,l]of r)e(a,l)})}isEmpty(){return s0(this.inner)}size(){return this.innerSize}}const E0=new Jn(qe.comparator);function wi(){return E0}const Ci=new Jn(qe.comparator);function pd(...n){let e=Ci;for(const t of n)e=e.insert(t.key,t);return e}function I0(n){let e=Ci;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ta(){return Wl()}function D0(){return Wl()}function Wl(){return new Aa(n=>n.toString(),(n,e)=>n.isEqual(e))}const b0=new Jn(qe.comparator),xE=new yn(qe.comparator);function jt(...n){let e=xE;for(const t of n)e=e.add(t);return e}const ME=new yn(Rt);function Wh(){return ME}class $h{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,gd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new $h(It.min(),a,Wh(),wi(),jt())}}class gd{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new gd(r,t,jt(),jt(),jt())}}class kp{constructor(e,t,r,a){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=a}}class A0{constructor(e,t){this.targetId=e,this.At=t}}class ly{constructor(e,t,r=gr.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class cy{constructor(){this.Rt=0,this.bt=Np(),this.Pt=gr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=jt(),t=jt(),r=jt();return this.bt.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:at()}}),new gd(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=Np()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class kE{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=wi(),this.qt=Bs(),this.Kt=new yn(Rt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:at()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,a)=>{this.Ht(a)&&t(a)})}Yt(e){const t=e.targetId,r=e.At.count,a=this.Xt(t);if(a){const l=a.target;if(Bh(l))if(0===r){const d=new qe(l.path);this.jt(t,d,Pn.newNoDocument(d,It.min()))}else Tt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((l,d)=>{const y=this.Xt(d);if(y){if(l.current&&Bh(y.target)){const E=new qe(y.target.path);null!==this.Ut.get(E)||this.ee(d,E)||this.jt(d,E,Pn.newNoDocument(E,e))}l.Dt&&(t.set(d,l.xt()),l.Nt())}});let r=jt();this.qt.forEach((l,d)=>{let y=!0;d.forEachWhile(E=>{const b=this.Xt(E);return!b||2===b.purpose||(y=!1,!1)}),y&&(r=r.add(l))}),this.Ut.forEach((l,d)=>d.setReadTime(e));const a=new $h(e,t,this.Kt,this.Ut,r);return this.Ut=wi(),this.qt=Bs(),this.Kt=new yn(Rt),a}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const a=this.zt(e);this.ee(e,t)?a.kt(t,1):a.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new cy,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new yn(Rt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new cy),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function Bs(){return new Jn(qe.comparator)}function Np(){return new Jn(qe.comparator)}const NE={asc:"ASCENDING",desc:"DESCENDING"},PE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Ib{constructor(e,t){this.databaseId=e,this.gt=t}}function md(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function T0(n,e){return n.gt?e.toBase64():e.toUint8Array()}function RE(n,e){return md(n,e.toTimestamp())}function kr(n){return Tt(!!n),It.fromTimestamp(function(e){const t=_a(e);return new Nn(t.seconds,t.nanos)}(n))}function zh(n,e){return(t=n,new Jt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function S0(n){const e=Jt.fromString(n);return Tt(UE(e)),e}function qh(n,e){return zh(n.databaseId,e.path)}function Ki(n,e){const t=S0(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new qe(Rp(t))}function Kh(n,e){return zh(n.databaseId,e)}function Zh(n){const e=S0(n);return 4===e.length?Jt.emptyPath():Rp(e)}function Pp(n){return new Jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Rp(n){return Tt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function OE(n,e,t){return{name:qh(n,e),fields:t.value.mapValue.fields}}function dy(n,e,t){const r=Ki(n,e.name),a=kr(e.updateTime),l=new Mr({mapValue:{fields:e.fields}}),d=Pn.newFoundDocument(r,a,l);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function yd(n,e){let t;if(e instanceof ba)t={update:OE(n,e.key,e.value)};else if(e instanceof Gl)t={delete:qh(n,e.key)};else if(e instanceof No)t={update:OE(n,e.key,e.data),updateMask:BE(e.fieldMask)};else{if(!(e instanceof Gh))return at();t={verify:qh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,l){const d=l.transform;if(d instanceof wu)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof jl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ia)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Cu)return{fieldPath:l.field.canonicalString(),increment:d.yt};throw at()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:RE(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:at()),t;var a}function Yh(n,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?Rn.updateTime(kr(a.updateTime)):void 0!==a.exists?Rn.exists(a.exists):Rn.none():Rn.none(),r=e.updateTransforms?e.updateTransforms.map(a=>function(l,d){let y=null;"setToServerValue"in d?(Tt("REQUEST_TIME"===d.setToServerValue),y=new wu):"appendMissingElements"in d?y=new jl(d.appendMissingElements.values||[]):"removeAllFromArray"in d?y=new Ia(d.removeAllFromArray.values||[]):"increment"in d?y=new Cu(l,d.increment):at();const E=jn.fromServerFormat(d.fieldPath);return new dd(E,y)}(n,a)):[];var a;if(e.update){const a=Ki(n,e.update.name),l=new Mr({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new qi((e.updateMask.fieldPaths||[]).map(b=>jn.fromServerFormat(b)));return new No(a,l,d,t,r)}return new ba(a,l,t,r)}if(e.delete){const a=Ki(n,e.delete);return new Gl(a,t)}if(e.verify){const a=Ki(n,e.verify);return new Gh(a,t)}return at()}function Qh(n,e){return{documents:[Kh(n,e.path)]}}function vd(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Kh(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Kh(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const a=function(E){if(0===E.length)return;const b=E.map(x=>function(R){if("=="===R.op){if(l0(R.value))return{unaryFilter:{field:wd(R.field),op:"IS_NAN"}};if(Km(R.value))return{unaryFilter:{field:wd(R.field),op:"IS_NULL"}}}else if("!="===R.op){if(l0(R.value))return{unaryFilter:{field:wd(R.field),op:"IS_NOT_NAN"}};if(Km(R.value))return{unaryFilter:{field:wd(R.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wd(R.field),op:LE(R.op),value:R.value}}}(x));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);a&&(t.structuredQuery.where=a);const l=function(E){if(0!==E.length)return E.map(b=>{return{field:wd((x=b).field),direction:k0(x.dir)};var x})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const d=(b=e.limit,n.gt||Fl(b)?b:{value:b});var b,y,E;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(y=e.startAt).inclusive,values:y.position}),e.endAt&&(t.structuredQuery.endAt={before:!(E=e.endAt).inclusive,values:E.position}),t}function _d(n){let e=Zh(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){Tt(1===r);const x=t.from[0];x.allDescendants?a=x.collectionId:e=e.child(x.collectionId)}let l=[];t.where&&(l=Op(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(x=>{return new Ca(Po((R=x).field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction));var R}));let y=null;t.limit&&(y=function(x){let R;return R="object"==typeof x?x.value:x,Fl(R)?null:R}(t.limit));let E=null;var x;t.startAt&&(E=new Vs((x=t.startAt).values||[],!!x.before));let b=null;return t.endAt&&(b=function(x){return new Vs(x.values||[],!x.before)}(t.endAt)),g0(e,a,d,l,y,"F",E,b)}function Op(n){return n?void 0!==n.unaryFilter?[Db(n)]:void 0!==n.fieldFilter?[VE(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Op(e)).reduce((e,t)=>e.concat(t)):at():[]}function k0(n){return NE[n]}function LE(n){return PE[n]}function wd(n){return{fieldPath:n.canonicalString()}}function Po(n){return jn.fromServerFormat(n.fieldPath)}function VE(n){return Hr.create(Po(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return at()}}(n.fieldFilter.op),n.fieldFilter.value)}function Db(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Po(n.unaryFilter.field);return Hr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Po(n.unaryFilter.field);return Hr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Po(n.unaryFilter.field);return Hr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Po(n.unaryFilter.field);return Hr.create(a,"!=",{nullValue:"NULL_VALUE"});default:return at()}}function BE(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function UE(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function oi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=N0(e)),e=jE(n.get(t),e);return N0(e)}function jE(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const l=n.charAt(a);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function N0(n){return n+"\x01\x01"}function Us(n){const e=n.length;if(Tt(e>=2),2===e)return Tt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Jt.emptyPath();const t=e-2,r=[];let a="";for(let l=0;l<e;){const d=n.indexOf("\x01",l);switch((d<0||d>t)&&at(),n.charAt(d+1)){case"\x01":const y=n.substring(l,d);let E;0===a.length?E=y:(a+=y,E=a,a=""),r.push(E);break;case"\x10":a+=n.substring(l,d),a+="\0";break;case"\x11":a+=n.substring(l,d+1);break;default:at()}l=d+2}return new Jt(r)}const Fp=["userId","batchId"];function Lp(n,e){return[n,oi(e)]}function Vp(n,e,t){return[n,oi(e),t]}const HE={},GE=["prefixPath","collectionGroup","readTime","documentId"],WE=["prefixPath","collectionGroup","documentId"],$E=["collectionGroup","readTime","prefixPath","documentId"],zE=["canonicalId","targetId"],qE=["targetId","path"],Bp=["path","targetId"],$l=["collectionId","parent"],bb=["indexId","uid"],Xh=["uid","sequenceNumber"],KE=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ZE=["indexId","uid","orderedDocumentKey"],hy=["userId","collectionPath","documentId"],YE=["userId","collectionPath","largestBatchId"],Ro=["userId","collectionGroup","largestBatchId"],Cd=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Xr=[...Cd,"documentOverlays"],Eu=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Jh=Eu,ps=[...Jh,"indexConfiguration","indexState","indexEntries"];class ef extends fE{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Zn(n,e){const t=Qe(n);return hs.M(t.ie,e)}class Iu{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&hd(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Hl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Hl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=D0();return this.mutations.forEach(a=>{const l=e.get(a.key),d=l.overlayedDocument;let y=this.applyToLocalView(d,l.mutatedFields);y=t.has(a.key)?null:y;const E=Hh(d,y);null!==E&&r.set(a.key,E),d.isValidDocument()||d.convertToNoDocument(It.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),jt())}isEqual(e){return this.batchId===e.batchId&&ed(this.mutations,e.mutations,(t,r)=>Sp(t,r))&&ed(this.baseMutations,e.baseMutations,(t,r)=>Sp(t,r))}}class Du{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){Tt(e.mutations.length===r.length);let a=b0;const l=e.mutations;for(let d=0;d<l.length;d++)a=a.insert(l[d].key,r[d].version);return new Du(e,t,r,a)}}class bu{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Zi{constructor(e,t,r,a,l=It.min(),d=It.min(),y=gr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=y}withSequenceNumber(e){return new Zi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Zi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Zi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class zl{constructor(e){this.re=e}}function ql(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:xa(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:qh(a=n.re,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:md(a,l.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Au(e.version)};else{if(!e.isUnknownDocument())return at();r.unknownDocument={path:t.path.toArray(),version:Au(e.version)}}var a,l;return r}function xa(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Au(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Tu(n){const e=new Nn(n.seconds,n.nanoseconds);return It.fromTimestamp(e)}function Su(n,e){const t=(e.baseMutations||[]).map(l=>Yh(n.re,l));for(let l=0;l<e.mutations.length-1;++l){const d=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(d.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const r=e.mutations.map(l=>Yh(n.re,l)),a=Nn.fromMillis(e.localWriteTimeMs);return new Iu(e.batchId,a,t,r)}function Id(n){const e=Tu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Tu(n.lastLimboFreeSnapshotVersion):It.min();let r;var a;return void 0!==n.query.documents?(Tt(1===(a=n.query).documents.length),r=_i(ud(Zh(a.documents[0])))):r=_i(_d(n.query)),new Zi(r,n.targetId,0,n.lastListenSequenceNumber,e,t,gr.fromBase64String(n.resumeToken))}function fy(n,e){const t=Au(e.snapshotVersion),r=Au(e.lastLimboFreeSnapshotVersion);let a;a=Bh(e.target)?Qh(n.re,e.target):vd(n.re,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:od(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function Up(n){const e=_d({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Uh(e,e.limit,"L"):e}function jp(n,e){return new bu(e.largestBatchId,Yh(n.re,e.overlayMutation))}function py(n,e){const t=e.path.lastSegment();return[n,oi(e.path.popLast()),t]}function gy(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Au(r.readTime),documentKey:oi(r.documentKey.path),largestBatchId:r.largestBatchId}}class QE{getBundleMetadata(e,t){return P0(e).get(t).next(r=>{if(r)return{id:(a=r).bundleId,createTime:Tu(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return P0(e).put({bundleId:(r=t).id,createTime:Au(kr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return my(e).get(t).next(r=>{if(r)return{name:(a=r).name,query:Up(a.bundledQuery),readTime:Tu(a.readTime)};var a})}saveNamedQuery(e,t){return my(e).put({name:(r=t).name,readTime:Au(kr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function P0(n){return Zn(n,"bundles")}function my(n){return Zn(n,"namedQueries")}class Hp{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new Hp(e,t.uid||"")}getOverlay(e,t){return tf(e).get(py(this.userId,t)).next(r=>r?jp(this.It,r):null)}getOverlays(e,t){const r=Ta();return oe.forEach(t,a=>this.getOverlay(e,a).next(l=>{null!==l&&r.set(a,l)})).next(()=>r)}saveOverlays(e,t,r){const a=[];return r.forEach((l,d)=>{const y=new bu(t,d);a.push(this.ue(e,y))}),oe.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach(d=>a.add(oi(d.getCollectionPath())));const l=[];return a.forEach(d=>{const y=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);l.push(tf(e).Y("collectionPathOverlayIndex",y))}),oe.waitFor(l)}getOverlaysForCollection(e,t,r){const a=Ta(),l=oi(t),d=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return tf(e).W("collectionPathOverlayIndex",d).next(y=>{for(const E of y){const b=jp(this.It,E);a.set(b.getKey(),b)}return a})}getOverlaysForCollectionGroup(e,t,r,a){const l=Ta();let d;const y=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return tf(e).Z({index:"collectionGroupOverlayIndex",range:y},(E,b,x)=>{const R=jp(this.It,b);l.size()<a||R.largestBatchId===d?(l.set(R.getKey(),R),d=R.largestBatchId):x.done()}).next(()=>l)}ue(e,t){return tf(e).put(function(r,a,l){const[d,y,E]=py(a,l.mutation.key);return{userId:a,collectionPath:y,documentId:E,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:yd(r.re,l.mutation)}}(this.It,this.userId,t))}}function tf(n){return Zn(n,"documentOverlays")}class Ma{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(er(e.integerValue));else if("doubleValue"in e){const r=er(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Ll(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Rl(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?c0(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):at()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const a of Object.keys(r))this._e(a,t),this.ae(r[a],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const a of r)this.ae(a,t)}ge(e,t){this.le(t,37),qe.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function yy(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function R0(n){const e=64-function(t){let r=0;for(let a=0;a<8;++a){const l=yy(255&t[a]);if(r+=l,8!==l)break}return r}(n);return Math.ceil(e/8)}Ma.Te=new Ma;class Gp{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const a=t.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const a=t.codePointAt(0);this.Pe(240|a>>>18),this.Pe(128|63&a>>>12),this.Pe(128|63&a>>>6),this.Pe(128|63&a)}}this.ve()}De(e){const t=this.Ce(e),r=R0(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Ne(e){const t=this.Ce(e),r=R0(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class Wp{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class vy{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class nf{constructor(){this.Be=new Gp,this.Le=new Wp(this.Be),this.Ue=new vy(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class ka{constructor(e,t,r,a){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=a}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ka(this.indexId,this.documentKey,this.arrayValue,r)}}function Na(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=_y(n.arrayValue,e.arrayValue),0!==t?t:(t=_y(n.directionalValue,e.directionalValue),0!==t?t:qe.comparator(n.documentKey,e.documentKey)))}function _y(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class XE{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=jm(e);if(void 0!==t&&!this.ze(t))return!1;const r=kl(e);let a=0,l=0;for(;a<r.length&&this.ze(r[a]);++a);if(a===r.length)return!0;if(void 0!==this.je){const d=r[a];if(!this.He(this.je,d)||!this.Je(this.Ge[l++],d))return!1;++a}for(;a<r.length;++a){const d=r[a];if(l>=this.Ge.length||!this.Je(this.Ge[l++],d))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class wy{constructor(){this.Ye=new $p}addToCollectionParentIndex(e,t){return this.Ye.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(zi.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(zi.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class $p{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new yn(Jt.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new yn(Jt.comparator)).toArray()}}const rf=new Uint8Array(0);class Cy{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new $p,this.Ze=new Aa(r=>od(r),(r,a)=>Vh(r,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const l={collectionId:r,parent:oi(a)};return Ey(e).put(l)}return oe.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[e0(t),""],!1,!0);return Ey(e).W(a).next(l=>{for(const d of l){if(d.collectionId!==t)break;r.push(Us(d.parent))}return r})}addFieldIndex(e,t){const r=of(e),a={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(y=>[y.fieldPath.canonicalString(),y.kind])};var d;delete a.indexId;const l=r.add(a);if(t.indexState){const d=Dd(e);return l.next(y=>{d.put(gy(y,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const r=of(e),a=Dd(e),l=sf(e);return r.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=sf(e);let a=!0;const l=new Map;return oe.forEach(this.tn(t),d=>this.en(e,d).next(y=>{a&&(a=!!y),l.set(d,y)})).next(()=>{if(a){let d=jt();const y=[];return oe.forEach(l,(E,b)=>{var x;Ve("IndexedDbIndexManager",`Using index ${x=E,`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(Ht=>`${Ht.fieldPath}:${Ht.kind}`).join(",")}`} to execute ${od(t)}`);const R=function(Ht,Vt){const Ot=jm(Vt);if(void 0===Ot)return null;for(const qt of Ul(Ht,Ot.fieldPath))switch(qt.op){case"array-contains-any":return qt.value.arrayValue.values||[];case"array-contains":return[qt.value]}return null}(b,E),z=function(Ht,Vt){const Ot=new Map;for(const qt of kl(Vt))for(const Nr of Ul(Ht,qt.fieldPath))switch(Nr.op){case"==":case"in":Ot.set(qt.fieldPath.canonicalString(),Nr.value);break;case"not-in":case"!=":return Ot.set(qt.fieldPath.canonicalString(),Nr.value),Array.from(Ot.values())}return null}(b,E),X=function(Ht,Vt){const Ot=[];let qt=!0;for(const Nr of kl(Vt)){const im=0===Nr.kind?fs(Ht,Nr.fieldPath,Ht.startAt):Qm(Ht,Nr.fieldPath,Ht.startAt);Ot.push(im.value),qt&&(qt=im.inclusive)}return new Vs(Ot,qt)}(b,E),he=function(Ht,Vt){const Ot=[];let qt=!0;for(const Nr of kl(Vt)){const im=0===Nr.kind?Qm(Ht,Nr.fieldPath,Ht.endAt):fs(Ht,Nr.fieldPath,Ht.endAt);Ot.push(im.value),qt&&(qt=im.inclusive)}return new Vs(Ot,qt)}(b,E),Ue=this.nn(E,b,X),He=this.nn(E,b,he),Mt=this.sn(E,b,z),zt=this.rn(E.indexId,R,Ue,X.inclusive,He,he.inclusive,Mt);return oe.forEach(zt,Ht=>r.J(Ht,t.limit).next(Vt=>{Vt.forEach(Ot=>{const qt=qe.fromSegments(Ot.documentKey);d.has(qt)||(d=d.add(qt),y.push(qt))})}))}).next(()=>y)}return oe.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,a,l,d,y){const E=(null!=t?t.length:1)*Math.max(r.length,l.length),b=E/(null!=t?t.length:1),x=[];for(let R=0;R<E;++R){const z=t?this.on(t[R/b]):rf,X=this.un(e,z,r[R%b],a),he=this.cn(e,z,l[R%b],d),Ue=y.map(He=>this.un(e,z,He,!0));x.push(...this.createRange(X,he,Ue))}return x}un(e,t,r,a){const l=new ka(e,qe.empty(),t,r);return a?l:l.Ke()}cn(e,t,r,a){const l=new ka(e,qe.empty(),t,r);return a?l.Ke():l}en(e,t){const r=new XE(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(l=>{let d=null;for(const y of l)r.We(y)&&(!d||y.fields.length>d.fields.length)&&(d=y);return d})}getIndexType(e,t){let r=2;return oe.forEach(this.tn(t),a=>this.en(e,a).next(l=>{l?0!==r&&l.fields.length<function(d){let y=new yn(jn.comparator),E=!1;for(const b of d.filters){const x=b;x.field.isKeyField()||("array-contains"===x.op||"array-contains-any"===x.op?E=!0:y=y.add(x.field))}for(const b of d.orderBy)b.field.isKeyField()||(y=y.add(b.field));return y.size+(E?1:0)}(a)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new nf;for(const a of kl(e)){const l=t.data.field(a.fieldPath);if(null==l)return null;const d=r.qe(a.kind);Ma.Te.ce(l,d)}return r.$e()}on(e){const t=new nf;return Ma.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new nf;return Ma.Te.ce(vu(this.databaseId,t),r.qe(function(a){const l=kl(a);return 0===l.length?0:l[l.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let a=[];a.push(new nf);let l=0;for(const d of kl(e)){const y=r[l++];for(const E of a)if(this.ln(t,d.fieldPath)&&Fh(y))a=this.fn(a,d,y);else{const b=E.qe(d.kind);Ma.Te.ce(y,b)}}return this.dn(a)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const a=[...e],l=[];for(const d of r.arrayValue.values||[])for(const y of a){const E=new nf;E.seed(y.$e()),Ma.Te.ce(d,E.qe(t.kind)),l.push(E)}return l}ln(e,t){return!!e.filters.find(r=>r instanceof Hr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=of(e),a=Dd(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(l=>{const d=[];return oe.forEach(l,y=>a.get([y.indexId,this.uid]).next(E=>{d.push(function(b,x){const R=x?new Oh(x.sequenceNumber,new zi(Tu(x.readTime),new qe(Us(x.documentKey)),x.largestBatchId)):Oh.empty(),z=b.fields.map(([X,he])=>new vp(jn.fromServerFormat(X),he));return new yp(b.indexId,b.collectionGroup,z,R)}(y,E))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==l?l:Rt(r.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const a=of(e),l=Dd(e);return this._n(e).next(d=>a.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(y=>oe.forEach(y,E=>l.put(gy(E.indexId,this.user,d,r)))))}updateIndexEntries(e,t){const r=new Map;return oe.forEach(t,(a,l)=>{const d=r.get(a.collectionGroup);return(d?oe.resolve(d):this.getFieldIndexes(e,a.collectionGroup)).next(y=>(r.set(a.collectionGroup,y),oe.forEach(y,E=>this.wn(e,a,E).next(b=>{const x=this.mn(l,E);return b.isEqual(x)?oe.resolve():this.gn(e,l,E,b,x)}))))})}yn(e,t,r,a){return sf(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,a){return sf(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const a=sf(e);let l=new yn(Na);return a.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(d,y)=>{l=l.add(new ka(r.indexId,t,y.arrayValue,y.directionalValue))}).next(()=>l)}mn(e,t){let r=new yn(Na);const a=this.an(t,e);if(null==a)return r;const l=jm(t);if(null!=l){const d=e.data.field(l.fieldPath);if(Fh(d))for(const y of d.arrayValue.values||[])r=r.add(new ka(t.indexId,e.key,this.on(y),a))}else r=r.add(new ka(t.indexId,e.key,rf,a));return r}gn(e,t,r,a,l){Ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(y,E,b,x,R){const z=y.getIterator(),X=E.getIterator();let he=Pl(z),Ue=Pl(X);for(;he||Ue;){let He=!1,Mt=!1;if(he&&Ue){const zt=b(he,Ue);zt<0?Mt=!0:zt>0&&(He=!0)}else null!=he?Mt=!0:He=!0;He?(x(Ue),Ue=Pl(X)):Mt?(R(he),he=Pl(z)):(he=Pl(z),Ue=Pl(X))}}(a,l,Na,y=>{d.push(this.yn(e,t,r,y))},y=>{d.push(this.pn(e,t,r,y))}),oe.waitFor(d)}_n(e){let t=1;return Dd(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,a,l)=>{l.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,y)=>Na(d,y)).filter((d,y,E)=>!y||0!==Na(d,E[y-1]));const a=[];a.push(e);for(const d of r){const y=Na(d,e),E=Na(d,t);if(0===y)a[0]=e.Ke();else if(y>0&&E<0)a.push(d),a.push(d.Ke());else if(E>0)break}a.push(t);const l=[];for(let d=0;d<a.length;d+=2)l.push(IDBKeyRange.bound([a[d].indexId,this.uid,a[d].arrayValue,a[d].directionalValue,rf,[]],[a[d+1].indexId,this.uid,a[d+1].arrayValue,a[d+1].directionalValue,rf,[]]));return l}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Iy)}getMinOffset(e,t){return oe.mapArray(this.tn(t),r=>this.en(e,r).next(a=>a||at())).next(Iy)}}function Ey(n){return Zn(n,"collectionParents")}function sf(n){return Zn(n,"indexEntries")}function of(n){return Zn(n,"indexConfiguration")}function Dd(n){return Zn(n,"indexState")}function Iy(n){Tt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const a=n[r].indexState.offset;Hm(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new zi(e.readTime,e.documentKey,t)}const O0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ei{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ei(e,Ei.DEFAULT_COLLECTION_PERCENTILE,Ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function F0(n,e,t){const r=n.store("mutations"),a=n.store("documentMutations"),l=[],d=IDBKeyRange.only(t.batchId);let y=0;const E=r.Z({range:d},(x,R,z)=>(y++,z.delete()));l.push(E.next(()=>{Tt(1===y)}));const b=[];for(const x of t.mutations){const R=Vp(e,x.key.path,t.batchId);l.push(a.delete(R)),b.push(x.key)}return oe.waitFor(l).next(()=>b)}function zp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw at();e=n.noDocument}return JSON.stringify(e).length}Ei.DEFAULT_COLLECTION_PERCENTILE=10,Ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ei.DEFAULT=new Ei(41943040,Ei.DEFAULT_COLLECTION_PERCENTILE,Ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ei.DISABLED=new Ei(-1,0,0);class af{constructor(e,t,r,a){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=a,this.In={}}static oe(e,t,r,a){Tt(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new af(l,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Pa(e).Z({index:"userMutationsIndex",range:r},(a,l,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,a){const l=Kl(e),d=Pa(e);return d.add({}).next(y=>{Tt("number"==typeof y);const E=new Iu(y,t,r,a),b=function(z,X,he){const Ue=he.baseMutations.map(Mt=>yd(z.re,Mt)),He=he.mutations.map(Mt=>yd(z.re,Mt));return{userId:X,batchId:he.batchId,localWriteTimeMs:he.localWriteTime.toMillis(),baseMutations:Ue,mutations:He}}(this.It,this.userId,E),x=[];let R=new yn((z,X)=>Rt(z.canonicalString(),X.canonicalString()));for(const z of a){const X=Vp(this.userId,z.key.path,y);R=R.add(z.key.path.popLast()),x.push(d.put(b)),x.push(l.put(X,HE))}return R.forEach(z=>{x.push(this.indexManager.addToCollectionParentIndex(e,z))}),e.addOnCommittedListener(()=>{this.In[y]=E.keys()}),oe.waitFor(x).next(()=>E)})}lookupMutationBatch(e,t){return Pa(e).get(t).next(r=>r?(Tt(r.userId===this.userId),Su(this.It,r)):null)}Tn(e,t){return this.In[t]?oe.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const a=r.keys();return this.In[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return Pa(e).Z({index:"userMutationsIndex",range:a},(d,y,E)=>{y.userId===this.userId&&(Tt(y.batchId>=r),l=Su(this.It,y)),E.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Pa(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(a,l,d)=>{r=l.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Pa(e).W("userMutationsIndex",t).next(r=>r.map(a=>Su(this.It,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Lp(this.userId,t.path),a=IDBKeyRange.lowerBound(r),l=[];return Kl(e).Z({range:a},(d,y,E)=>{const[b,x,R]=d,z=Us(x);if(b===this.userId&&t.path.isEqual(z))return Pa(e).get(R).next(X=>{if(!X)throw at();Tt(X.userId===this.userId),l.push(Su(this.It,X))});E.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new yn(Rt);const a=[];return t.forEach(l=>{const d=Lp(this.userId,l.path),y=IDBKeyRange.lowerBound(d),E=Kl(e).Z({range:y},(b,x,R)=>{const[z,X,he]=b,Ue=Us(X);z===this.userId&&l.path.isEqual(Ue)?r=r.add(he):R.done()});a.push(E)}),oe.waitFor(a).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,l=Lp(this.userId,r),d=IDBKeyRange.lowerBound(l);let y=new yn(Rt);return Kl(e).Z({range:d},(E,b,x)=>{const[R,z,X]=E,he=Us(z);R===this.userId&&r.isPrefixOf(he)?he.length===a&&(y=y.add(X)):x.done()}).next(()=>this.En(e,y))}En(e,t){const r=[],a=[];return t.forEach(l=>{a.push(Pa(e).get(l).next(d=>{if(null===d)throw at();Tt(d.userId===this.userId),r.push(Su(this.It,d))}))}),oe.waitFor(a).next(()=>r)}removeMutationBatch(e,t){return F0(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),oe.forEach(r,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return oe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),a=[];return Kl(e).Z({range:r},(l,d,y)=>{if(l[0]===this.userId){const E=Us(l[1]);a.push(E)}else y.done()}).next(()=>{Tt(0===a.length)})})}containsKey(e,t){return qp(e,this.userId,t)}Rn(e){return Dy(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function qp(n,e,t){const r=Lp(e,t.path),a=r[1],l=IDBKeyRange.lowerBound(r);let d=!1;return Kl(n).Z({range:l,X:!0},(y,E,b)=>{const[x,R,z]=y;x===e&&R===a&&(d=!0),b.done()}).next(()=>d)}function Pa(n){return Zn(n,"mutations")}function Kl(n){return Zn(n,"documentMutations")}function Dy(n){return Zn(n,"mutationQueues")}class xu{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new xu(0)}static vn(){return new xu(-1)}}class L0{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new xu(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>It.fromTimestamp(new Nn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Sn(e,a)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Zl(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Tt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let a=0;const l=[];return Zl(e).Z((d,y)=>{const E=Id(y);E.sequenceNumber<=t&&null===r.get(E.targetId)&&(a++,l.push(this.removeTargetData(e,E)))}).next(()=>oe.waitFor(l)).next(()=>a)}forEachTarget(e,t){return Zl(e).Z((r,a)=>{const l=Id(a);t(l)})}Vn(e){return by(e).get("targetGlobalKey").next(t=>(Tt(null!==t),t))}Sn(e,t){return by(e).put("targetGlobalKey",t)}Dn(e,t){return Zl(e).put(fy(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=od(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Zl(e).Z({range:a,index:"queryTargetsIndex"},(d,y,E)=>{const b=Id(y);Vh(t,b.target)&&(l=b,E.done())}).next(()=>l)}addMatchingKeys(e,t,r){const a=[],l=Ra(e);return t.forEach(d=>{const y=oi(d.path);a.push(l.put({targetId:r,path:y})),a.push(this.referenceDelegate.addReference(e,r,d))}),oe.waitFor(a)}removeMatchingKeys(e,t,r){const a=Ra(e);return oe.forEach(t,l=>{const d=oi(l.path);return oe.waitFor([a.delete([r,d]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=Ra(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=Ra(e);let l=jt();return a.Z({range:r,X:!0},(d,y,E)=>{const b=Us(d[1]),x=new qe(b);l=l.add(x)}).next(()=>l)}containsKey(e,t){const r=oi(t.path),a=IDBKeyRange.bound([r],[e0(r)],!1,!0);let l=0;return Ra(e).Z({index:"documentTargetsIndex",X:!0,range:a},([d,y],E,b)=>{0!==d&&(l++,b.done())}).next(()=>l>0)}se(e,t){return Zl(e).get(t).next(r=>r?Id(r):null)}}function Zl(n){return Zn(n,"targets")}function by(n){return Zn(n,"targetGlobal")}function Ra(n){return Zn(n,"targetDocuments")}function JE([n,e],[t,r]){const a=Rt(n,t);return 0===a?Rt(e,r):a}class eI{constructor(e){this.xn=e,this.buffer=new yn(JE),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();JE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class tI{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Ve("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ge.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){gu(r)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield va(r)}yield t.Fn(3e5)}))}}class V0{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return oe.resolve(vi.at);const r=new eI(t);return this.$n.forEachTarget(e,a=>r.On(a.sequenceNumber)).next(()=>this.$n.Ln(e,a=>r.On(a))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(O0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),O0):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,a,l,d,y,E,b;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),a=this.params.maximumSequenceNumbersToCollect):a=R,d=Date.now(),this.nthSequenceNumber(e,a))).next(R=>(r=R,y=Date.now(),this.removeTargets(e,r,t))).next(R=>(l=R,E=Date.now(),this.removeOrphanedDocuments(e,r))).next(R=>(b=Date.now(),gp()<=xr.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-x}ms\n\tDetermined least recently used ${a} in `+(y-d)+`ms\n\tRemoved ${l} targets in `+(E-y)+`ms\n\tRemoved ${R} documents in `+(b-E)+`ms\nTotal Duration: ${b-x}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:R})))}}class nI{constructor(e,t){this.db=e,this.garbageCollector=new V0(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,a)=>t(a))}addReference(e,t,r){return tr(e,r)}removeReference(e,t,r){return tr(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return tr(e,t)}Gn(e,t){return function(r,a){let l=!1;return Dy(r).tt(d=>qp(r,d,a).next(y=>(y&&(l=!0),oe.resolve(!y)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Kn(e,(d,y)=>{if(y<=t){const E=this.Gn(e,d).next(b=>{if(!b)return l++,r.getEntry(e,d).next(()=>(r.removeEntry(d,It.min()),Ra(e).delete([0,oi(d.path)])))});a.push(E)}}).next(()=>oe.waitFor(a)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return tr(e,t)}Kn(e,t){const r=Ra(e);let a,l=vi.at;return r.Z({index:"documentTargetsIndex"},([d,y],{path:E,sequenceNumber:b})=>{0===d?(l!==vi.at&&t(new qe(Us(a)),l),l=b,a=E):l=vi.at}).next(()=>{l!==vi.at&&t(new qe(Us(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function tr(n,e){return Ra(n).put((r=n.currentSequenceNumber,{targetId:0,path:oi(e.path),sequenceNumber:r}));var r}class Ay{constructor(){this.changes=new Aa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class rI{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Mu(e).put(r)}removeEntry(e,t,r){return Mu(e).delete(function(a,l){const d=a.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],xa(l),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Pn.newInvalidDocument(t);return Mu(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(bd(t))},(a,l)=>{r=this.jn(t,l)}).next(()=>r)}Wn(e,t){let r={size:0,document:Pn.newInvalidDocument(t)};return Mu(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(bd(t))},(a,l)=>{r={document:this.jn(t,l),size:zp(l)}}).next(()=>r)}getEntries(e,t){let r=wi();return this.zn(e,t,(a,l)=>{const d=this.jn(a,l);r=r.insert(a,d)}).next(()=>r)}Hn(e,t){let r=wi(),a=new Jn(qe.comparator);return this.zn(e,t,(l,d)=>{const y=this.jn(l,d);r=r.insert(l,y),a=a.insert(l,zp(d))}).next(()=>({documents:r,Jn:a}))}zn(e,t,r){if(t.isEmpty())return oe.resolve();let a=new yn(H0);t.forEach(E=>a=a.add(E));const l=IDBKeyRange.bound(bd(a.first()),bd(a.last())),d=a.getIterator();let y=d.getNext();return Mu(e).Z({index:"documentKeyIndex",range:l},(E,b,x)=>{const R=qe.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;y&&H0(y,R)<0;)r(y,null),y=d.getNext();y&&y.isEqual(R)&&(r(y,b),y=d.hasNext()?d.getNext():null),y?x.j(bd(y)):x.done()}).next(()=>{for(;y;)r(y,null),y=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const a=[t.popLast().toArray(),t.lastSegment(),xa(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Mu(e).W(IDBKeyRange.bound(a,l,!0)).next(d=>{let y=wi();for(const E of d){const b=this.jn(qe.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);y=y.insert(b.key,b)}return y})}getAllFromCollectionGroup(e,t,r,a){let l=wi();const d=Yl(t,r),y=Yl(t,zi.max());return Mu(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,y,!0)},(E,b,x)=>{const R=this.jn(qe.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);l=l.insert(R.key,R),l.size===a&&x.done()}).next(()=>l)}newChangeBuffer(e){return new U0(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return j0(e).get("remoteDocumentGlobalKey").next(t=>(Tt(!!t),t))}Qn(e,t){return j0(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function Ed(n,e){let t;if(e.document)t=dy(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=qe.fromSegments(e.noDocument.path),a=Tu(e.noDocument.readTime);t=Pn.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return at();{const r=qe.fromSegments(e.unknownDocument.path),a=Tu(e.unknownDocument.version);t=Pn.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime(function(r){const a=new Nn(r[0],r[1]);return It.fromTimestamp(a)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(It.min()))return r}return Pn.newInvalidDocument(e)}}function B0(n){return new rI(n)}class U0 extends Ay{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Aa(r=>r.toString(),(r,a)=>r.isEqual(a))}applyChanges(e){const t=[];let r=0,a=new yn((l,d)=>Rt(l.canonicalString(),d.canonicalString()));return this.changes.forEach((l,d)=>{const y=this.Xn.get(l);if(t.push(this.Yn.removeEntry(e,l,y.readTime)),d.isValidDocument()){const E=ql(this.Yn.It,d);a=a.add(l.path.popLast()),r+=zp(E)-y.size,t.push(this.Yn.addEntry(e,l,E))}else if(r-=y.size,this.trackRemovals){const E=ql(this.Yn.It,d.convertToNoDocument(It.min()));t.push(this.Yn.addEntry(e,l,E))}}),a.forEach(l=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.Yn.updateMetadata(e,r)),oe.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:a})=>(a.forEach((l,d)=>{this.Xn.set(l,{size:d,readTime:r.get(l).readTime})}),r))}}function j0(n){return Zn(n,"remoteDocumentGlobal")}function Mu(n){return Zn(n,"remoteDocumentsV14")}function bd(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Yl(n,e){const t=e.documentKey.path.toArray();return[n,xa(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function H0(n,e){const t=n.path.toArray(),r=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(a=Rt(t[l],r[l]),a)return a;return a=Rt(t.length,r.length),a||(a=Rt(t[t.length-2],r[r.length-2]),a||Rt(t[t.length-1],r[r.length-1]))}class iI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Ty{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(r=a,this.getBaseDocument(e,t,r))).next(a=>(null!==r&&Hl(r.mutation,a,qi.empty(),Nn.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,jt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=jt()){const a=Ta();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,r).next(l=>{let d=pd();return l.forEach((y,E)=>{d=d.insert(y,E.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=Ta();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,jt()))}populateOverlays(e,t,r){const a=[];return r.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((d,y)=>{t.set(d,y)})})}computeViews(e,t,r,a){let l=wi();const d=Wl(),y=Wl();return t.forEach((E,b)=>{const x=r.get(b.key);a.has(b.key)&&(void 0===x||x.mutation instanceof No)?l=l.insert(b.key,b):void 0!==x&&(d.set(b.key,x.mutation.getFieldMask()),Hl(x.mutation,b,x.mutation.getFieldMask(),Nn.now()))}),this.recalculateAndSaveOverlays(e,l).next(E=>(E.forEach((b,x)=>d.set(b,x)),t.forEach((b,x)=>{var R;return y.set(b,new iI(x,null!==(R=d.get(b))&&void 0!==R?R:null))}),y))}recalculateAndSaveOverlays(e,t){const r=Wl();let a=new Jn((d,y)=>d-y),l=jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const y of d)y.keys().forEach(E=>{const b=t.get(E);if(null===b)return;let x=r.get(E)||qi.empty();x=y.applyToLocalView(b,x),r.set(E,x);const R=(a.get(y.batchId)||jt()).add(E);a=a.insert(y.batchId,R)})}).next(()=>{const d=[],y=a.getReverseIterator();for(;y.hasNext();){const E=y.getNext(),b=E.key,x=E.value,R=D0();x.forEach(z=>{if(!l.has(z)){const X=Hh(t.get(z),r.get(z));null!==X&&R.set(z,X),l=l.add(z)}}),d.push(this.documentOverlayCache.saveOverlays(e,b,R))}return oe.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return qe.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):y0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var a}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next(l=>{const d=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):oe.resolve(Ta());let y=-1,E=l;return d.next(b=>oe.forEach(b,(x,R)=>(y<R.largestBatchId&&(y=R.largestBatchId),l.get(x)?oe.resolve():this.getBaseDocument(e,x,R).next(z=>{E=E.insert(x,z)}))).next(()=>this.populateOverlays(e,b,l)).next(()=>this.computeViews(e,E,b,jt())).next(x=>({batchId:y,changes:I0(x)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qe(t)).next(r=>{let a=pd();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const a=t.collectionGroup;let l=pd();return this.indexManager.getCollectionParents(e,a).next(d=>oe.forEach(d,y=>{const E=(b=t,x=y.child(a),new _u(x,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,x;return this.getDocumentsMatchingCollectionQuery(e,E,r).next(b=>{b.forEach((x,R)=>{l=l.insert(x,R)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r){let a;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(l=>(a=l,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(l=>{l.forEach((y,E)=>{const b=E.getKey();null===a.get(b)&&(a=a.insert(b,Pn.newInvalidDocument(b)))});let d=pd();return a.forEach((y,E)=>{const b=l.get(y);void 0!==b&&Hl(b.mutation,E,qi.empty(),Nn.now()),_0(t,E)&&(d=d.insert(y,E))}),d})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):oe.resolve(Pn.newInvalidDocument(t))}}class sI{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return oe.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:kr(r.createTime)}),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:Up(r.bundledQuery),readTime:kr(r.readTime)}),oe.resolve();var r}}class G0{constructor(){this.overlays=new Jn(qe.comparator),this.es=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ta();return oe.forEach(t,a=>this.getOverlay(e,a).next(l=>{null!==l&&r.set(a,l)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((a,l)=>{this.ue(e,t,l)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.es.get(r);return void 0!==a&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.es.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const a=Ta(),l=t.length+1,d=new qe(t.child("")),y=this.overlays.getIteratorFrom(d);for(;y.hasNext();){const E=y.getNext().value,b=E.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===l&&E.largestBatchId>r&&a.set(E.getKey(),E)}return oe.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new Jn((b,x)=>b-x);const d=this.overlays.getIterator();for(;d.hasNext();){const b=d.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let x=l.get(b.largestBatchId);null===x&&(x=Ta(),l=l.insert(b.largestBatchId,x)),x.set(b.getKey(),b)}}const y=Ta(),E=l.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach((b,x)=>y.set(b,x)),!(y.size()>=a)););return oe.resolve(y)}ue(e,t,r){const a=this.overlays.get(r.key);if(null!==a){const d=this.es.get(a.largestBatchId).delete(r.key);this.es.set(a.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new bu(t,r));let l=this.es.get(t);void 0===l&&(l=jt(),this.es.set(t,l)),this.es.set(t,l.add(r.key))}}class W0{constructor(){this.ns=new yn(Ir.ss),this.rs=new yn(Ir.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Ir(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Ir(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new qe(new Jt([])),r=new Ir(t,e),a=new Ir(t,e+1),l=[];return this.rs.forEachInRange([r,a],d=>{this.cs(d),l.push(d.key)}),l}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new qe(new Jt([])),r=new Ir(t,e),a=new Ir(t,e+1);let l=jt();return this.rs.forEachInRange([r,a],d=>{l=l.add(d.key)}),l}containsKey(e){const t=new Ir(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ir{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return qe.comparator(e.key,t.key)||Rt(e._s,t._s)}static os(e,t){return Rt(e._s,t._s)||qe.comparator(e.key,t.key)}}class Sy{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new yn(Ir.ss)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,a){const l=this.ws;this.ws++;const d=new Iu(l,t,r,a);this.mutationQueue.push(d);for(const y of a)this.gs=this.gs.add(new Ir(y.key,l)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return oe.resolve(d)}lookupMutationBatch(e,t){return oe.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.ps(t+1),l=a<0?0:a;return oe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ir(t,0),a=new Ir(t,Number.POSITIVE_INFINITY),l=[];return this.gs.forEachInRange([r,a],d=>{const y=this.ys(d._s);l.push(y)}),oe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new yn(Rt);return t.forEach(a=>{const l=new Ir(a,0),d=new Ir(a,Number.POSITIVE_INFINITY);this.gs.forEachInRange([l,d],y=>{r=r.add(y._s)})}),oe.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;qe.isDocumentKey(l)||(l=l.child(""));const d=new Ir(new qe(l),0);let y=new yn(Rt);return this.gs.forEachWhile(E=>{const b=E.key.path;return!!r.isPrefixOf(b)&&(b.length===a&&(y=y.add(E._s)),!0)},d),oe.resolve(this.Is(y))}Is(e){const t=[];return e.forEach(r=>{const a=this.ys(r);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){Tt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return oe.forEach(t.mutations,a=>{const l=new Ir(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Ir(t,0),a=this.gs.firstAfterOrEqual(r);return oe.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return oe.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Oo{constructor(e){this.Es=e,this.docs=new Jn(qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,d=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():Pn.newInvalidDocument(t))}getEntries(e,t){let r=wi();return t.forEach(a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():Pn.newInvalidDocument(a))}),oe.resolve(r)}getAllFromCollection(e,t,r){let a=wi();const l=new qe(t.child("")),d=this.docs.getIteratorFrom(l);for(;d.hasNext();){const{key:y,value:{document:E}}=d.getNext();if(!t.isPrefixOf(y.path))break;y.path.length>t.length+1||Hm(Mo(E),r)<=0||(a=a.insert(E.key,E.mutableCopy()))}return oe.resolve(a)}getAllFromCollectionGroup(e,t,r,a){at()}As(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new oI(this)}getSize(e){return oe.resolve(this.size)}}class oI extends Ay{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?t.push(this.Yn.addEntry(e,a)):this.Yn.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class aI{constructor(e){this.persistence=e,this.Rs=new Aa(t=>od(t),Vh),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.bs=0,this.Ps=new W0,this.targetCount=0,this.vs=xu.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,a)=>t(a)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),oe.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new xu(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Dn(t),oe.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.Rs.forEach((d,y)=>{y.sequenceNumber<=t&&null===r.get(y.targetId)&&(this.Rs.delete(d),l.push(this.removeMatchingKeysForTargetId(e,y.targetId)),a++)}),oe.waitFor(l).next(()=>a)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(d=>{l.push(a.markPotentiallyOrphaned(e,d))}),oe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.Ps.containsKey(t))}}class js{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new vi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new aI(this),this.indexManager=new wy,this.remoteDocumentCache=new Oo(r=>this.referenceDelegate.xs(r)),this.It=new zl(t),this.Ns=new sI(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new G0,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new Sy(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ve("MemoryPersistence","Starting transaction:",e);const a=new Hs(this.Ss.next());return this.referenceDelegate.ks(),r(a).next(l=>this.referenceDelegate.Os(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ms(e,t){return oe.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class Hs extends fE{constructor(e){super(),this.currentSequenceNumber=e}}class Ii{constructor(e){this.persistence=e,this.Fs=new W0,this.$s=null}static Bs(e){return new Ii(e)}get Ls(){if(this.$s)return this.$s;throw at()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(a=>this.Ls.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.Ls.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Ls,r=>{const a=qe.fromPath(r);return this.Us(e,a).next(l=>{l||t.removeEntry(a,It.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return oe.or([()=>oe.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class $0{constructor(e){this.It=e}$(e,t,r,a){const l=new Gm("createOrUpgrade",t);var y;r<1&&a>=1&&(e.createObjectStore("owner"),(y=e).createObjectStore("mutationQueues",{keyPath:"userId"}),y.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Fp,{unique:!0}),y.createObjectStore("documentMutations"),xy(e),function(y){y.createObjectStore("remoteDocuments")}(e));let d=oe.resolve();return r<3&&a>=3&&(0!==r&&(function(y){y.deleteObjectStore("targetDocuments"),y.deleteObjectStore("targets"),y.deleteObjectStore("targetGlobal")}(e),xy(e)),d=d.next(()=>function(y){const E=y.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:It.min().toTimestamp(),targetCount:0};return E.put("targetGlobalKey",b)}(l))),r<4&&a>=4&&(0!==r&&(d=d.next(()=>function(y,E){return E.store("mutations").W().next(b=>{y.deleteObjectStore("mutations"),y.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Fp,{unique:!0});const x=E.store("mutations"),R=b.map(z=>x.put(z));return oe.waitFor(R)})}(e,l))),d=d.next(()=>{!function(y){y.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&a>=5&&(d=d.next(()=>this.qs(l))),r<6&&a>=6&&(d=d.next(()=>(function(y){y.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(l)))),r<7&&a>=7&&(d=d.next(()=>this.Gs(l))),r<8&&a>=8&&(d=d.next(()=>this.Qs(e,l))),r<9&&a>=9&&(d=d.next(()=>{!function(y){y.objectStoreNames.contains("remoteDocumentChanges")&&y.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&a>=10&&(d=d.next(()=>this.js(l))),r<11&&a>=11&&(d=d.next(()=>{(function(y){y.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(y){y.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&a>=12&&(d=d.next(()=>{!function(y){const E=y.createObjectStore("documentOverlays",{keyPath:hy});E.createIndex("collectionPathOverlayIndex",YE,{unique:!1}),E.createIndex("collectionGroupOverlayIndex",Ro,{unique:!1})}(e)})),r<13&&a>=13&&(d=d.next(()=>function(y){const E=y.createObjectStore("remoteDocumentsV14",{keyPath:GE});E.createIndex("documentKeyIndex",WE),E.createIndex("collectionGroupIndex",$E)}(e)).next(()=>this.Ws(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&a>=14&&(d=d.next(()=>this.zs(e,l))),r<15&&a>=15&&(d=d.next(()=>function(y){y.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),y.createObjectStore("indexState",{keyPath:bb}).createIndex("sequenceNumberIndex",Xh,{unique:!1}),y.createObjectStore("indexEntries",{keyPath:KE}).createIndex("documentKeyIndex",ZE,{unique:!1})}(e))),d}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,a)=>{t+=zp(a)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(a=>oe.forEach(a,l=>{const d=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",d).next(y=>oe.forEach(y,E=>{Tt(E.userId===l.userId);const b=Su(this.It,E);return F0(e,l.userId,b).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const l=[];return r.Z((d,y)=>{const E=new Jt(d),b=[0,oi(E)];l.push(t.get(b).next(x=>x?oe.resolve():t.put({targetId:0,path:oi(E),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>oe.waitFor(l))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:$l});const r=t.store("collectionParents"),a=new $p,l=d=>{if(a.add(d)){const y=d.lastSegment(),E=d.popLast();return r.put({collectionId:y,parent:oi(E)})}};return t.store("remoteDocuments").Z({X:!0},(d,y)=>{const E=new Jt(d);return l(E.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([d,y,E],b)=>{const x=Us(y);return l(x.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,a)=>{const l=Id(a),d=fy(this.It,l);return t.put(d)})}Ws(e,t){const r=t.store("remoteDocuments"),a=[];return r.Z((l,d)=>{const y=t.store("remoteDocumentsV14"),E=(b=d,b.document?new qe(Jt.fromString(b.document.name).popFirst(5)):b.noDocument?qe.fromSegments(b.noDocument.path):b.unknownDocument?qe.fromSegments(b.unknownDocument.path):at()).path.toArray();var b;const x={prefixPath:E.slice(0,E.length-2),collectionGroup:E[E.length-2],documentId:E[E.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};a.push(y.put(x))}).next(()=>oe.waitFor(a))}zs(e,t){const r=t.store("mutations"),a=B0(this.It),l=new js(Ii.Bs,this.It.re);return r.W().next(d=>{const y=new Map;return d.forEach(E=>{var b;let x=null!==(b=y.get(E.userId))&&void 0!==b?b:jt();Su(this.It,E).keys().forEach(R=>x=x.add(R)),y.set(E.userId,x)}),oe.forEach(y,(E,b)=>{const x=new fr(b),R=Hp.oe(this.It,x),z=l.getIndexManager(x),X=af.oe(x,this.It,z,l.referenceDelegate);return new Ty(a,X,R,z).recalculateAndSaveOverlaysForDocumentKeys(new ef(t,vi.at),E).next()})})}}function xy(n){n.createObjectStore("targetDocuments",{keyPath:qE}).createIndex("documentTargetsIndex",Bp,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",zE,{unique:!0}),n.createObjectStore("targetGlobal")}const My="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ky{constructor(e,t,r,a,l,d,y,E,b,x,R=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=l,this.window=d,this.document=y,this.Js=b,this.Ys=x,this.Xs=R,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=z=>Promise.resolve(),!ky.C())throw new Ne(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new nI(this,a),this.ii=t+"main",this.It=new zl(E),this.ri=new hs(this.ii,this.Xs,new $0(this.It)),this.Cs=new L0(this.referenceDelegate,this.It),this.remoteDocumentCache=B0(this.It),this.Ns=new QE,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===x&&or("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(ce.FAILED_PRECONDITION,My);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new vi(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,ge.Z)(function*(a){if(t.started)return e(a)});return function(a){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ge.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ge.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Kp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(gu(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return uf(e).get("owner").next(t=>oe.resolve(this.mi(t)))}gi(e){return Kp(e).delete(this.clientId)}yi(){var e=this;return(0,ge.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const a=Zn(r,"clientMetadata");return a.W().next(l=>{const d=e.Ii(l,18e5),y=l.filter(E=>-1===d.indexOf(E));return oe.forEach(y,E=>a.delete(E.clientId)).next(()=>y)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?oe.resolve(!0):uf(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ne(ce.FAILED_PRECONDITION,My);return!1}}return!(!this.networkEnabled||!this.inForeground)||Kp(e).W().next(r=>void 0===this.Ii(r,5e3).find(a=>{if(this.clientId!==a.clientId){const d=!this.inForeground&&a.inForeground,y=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||d&&y)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ge.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new ef(t,vi.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Kp(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return af.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Cy(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Hp.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ve("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",l=15===(d=this.Xs)?ps:14===d?Jh:13===d?Eu:12===d?Xr:11===d?Cd:void at();var d;let y;return this.ri.runTransaction(e,a,l,E=>(y=new ef(E,this.Ss?this.Ss.next():vi.at),"readwrite-primary"===t?this.fi(y).next(b=>!!b||this.di(y)).next(b=>{if(!b)throw or(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ne(ce.FAILED_PRECONDITION,hE);return r(y)}).next(b=>this.wi(y).next(()=>b)):this.Vi(y).next(()=>r(y)))).then(E=>(y.raiseOnCommittedEvent(),E))}Vi(e){return uf(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(ce.FAILED_PRECONDITION,My)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return uf(e).put("owner",t)}static C(){return hs.C()}_i(e){const t=uf(e);return t.get("owner").next(r=>this.mi(r)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):oe.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(or(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Ut.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return or("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){or("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function uf(n){return Zn(n,"owner")}function Kp(n){return Zn(n,"clientMetadata")}function lf(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Ql{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=a}static Ci(e,t){let r=jt(),a=jt();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Ql(e,t.fromCache,r,a)}}class z0{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,a){return this.ki(e,t).next(l=>l||this.Oi(e,t,a,r)).next(l=>l||this.Mi(e,t))}ki(e,t){if(m0(t))return oe.resolve(null);let r=_i(t);return this.indexManager.getIndexType(e,r).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=Uh(t,null,"F"),r=_i(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const d=jt(...l);return this.Ni.getDocuments(e,d).next(y=>this.indexManager.getMinOffset(e,r).next(E=>{const b=this.Fi(t,y);return this.$i(t,b,d,E.readTime)?this.ki(e,Uh(t,null,"F")):this.Bi(e,b,t,E)}))})))}Oi(e,t,r,a){return m0(t)||a.isEqual(It.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(l=>{const d=this.Fi(t,l);return this.$i(t,d,r,a)?this.Mi(e,t):(gp()<=xr.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),jh(t)),this.Bi(e,d,t,Nl(a,-1)))})}Fi(e,t){let r=new yn(EE(e));return t.forEach((a,l)=>{_0(e,l)&&(r=r.add(l))}),r}$i(e,t,r,a){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const l="F"===e.limitType?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Mi(e,t){return gp()<=xr.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",jh(t)),this.Ni.getDocumentsMatchingQuery(e,t,zi.min())}Bi(e,t,r,a){return this.Ni.getDocumentsMatchingQuery(e,r,a).next(l=>(t.forEach(d=>{l=l.insert(d.key,d)}),l))}}class q0{constructor(e,t,r,a){this.persistence=e,this.Li=t,this.It=a,this.Ui=new Jn(Rt),this.qi=new Aa(l=>od(l),Vh),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ty(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function K0(n,e,t,r){return new q0(n,e,t,r)}function Ny(n,e){return Zp.apply(this,arguments)}function Zp(){return Zp=(0,ge.Z)(function*(n,e){const t=Qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next(l=>(a=l,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(l=>{const d=[],y=[];let E=jt();for(const b of a){d.push(b.batchId);for(const x of b.mutations)E=E.add(x.key)}for(const b of l){y.push(b.batchId);for(const x of b.mutations)E=E.add(x.key)}return t.localDocuments.getDocuments(r,E).next(b=>({ji:b,removedBatchIds:d,addedBatchIds:y}))})})}),Zp.apply(this,arguments)}function Yp(n,e){const t=Qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=e.batch.keys(),l=t.Gi.newChangeBuffer({trackRemovals:!0});return function(d,y,E,b){const x=E.batch,R=x.keys();let z=oe.resolve();return R.forEach(X=>{z=z.next(()=>b.getEntry(y,X)).next(he=>{const Ue=E.docVersions.get(X);Tt(null!==Ue),he.version.compareTo(Ue)<0&&(x.applyToRemoteDocument(he,E),he.isValidDocument()&&(he.setReadTime(E.commitVersion),b.addEntry(he)))})}),z.next(()=>d.mutationQueue.removeMutationBatch(y,x))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let y=jt();for(let E=0;E<d.mutationResults.length;++E)d.mutationResults[E].transformResults.length>0&&(y=y.add(d.batch.mutations[E].key));return y}(e))).next(()=>t.localDocuments.getDocuments(r,a))})}function Z0(n){const e=Qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function Y0(n,e){const t=Qe(n),r=e.snapshotVersion;let a=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const d=t.Gi.newChangeBuffer({trackRemovals:!0});a=t.Ui;const y=[];e.targetChanges.forEach((x,R)=>{const z=a.get(R);if(!z)return;y.push(t.Cs.removeMatchingKeys(l,x.removedDocuments,R).next(()=>t.Cs.addMatchingKeys(l,x.addedDocuments,R)));let X=z.withSequenceNumber(l.currentSequenceNumber);var he,Ue,He;e.targetMismatches.has(R)?X=X.withResumeToken(gr.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):x.resumeToken.approximateByteSize()>0&&(X=X.withResumeToken(x.resumeToken,r)),a=a.insert(R,X),Ue=X,He=x,(0===(he=z).resumeToken.approximateByteSize()||Ue.snapshotVersion.toMicroseconds()-he.snapshotVersion.toMicroseconds()>=3e8||He.addedDocuments.size+He.modifiedDocuments.size+He.removedDocuments.size>0)&&y.push(t.Cs.updateTargetData(l,X))});let E=wi(),b=jt();if(e.documentUpdates.forEach(x=>{e.resolvedLimboDocuments.has(x)&&y.push(t.persistence.referenceDelegate.updateLimboDocument(l,x))}),y.push(Py(l,d,e.documentUpdates).next(x=>{E=x.Wi,b=x.zi})),!r.isEqual(It.min())){const x=t.Cs.getLastRemoteSnapshotVersion(l).next(R=>t.Cs.setTargetsMetadata(l,l.currentSequenceNumber,r));y.push(x)}return oe.waitFor(y).next(()=>d.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,E,b)).next(()=>E)}).then(l=>(t.Ui=a,l))}function Py(n,e,t){let r=jt(),a=jt();return t.forEach(l=>r=r.add(l)),e.getEntries(n,r).next(l=>{let d=wi();return t.forEach((y,E)=>{const b=l.get(y);E.isFoundDocument()!==b.isFoundDocument()&&(a=a.add(y)),E.isNoDocument()&&E.version.isEqual(It.min())?(e.removeEntry(y,E.readTime),d=d.insert(y,E)):!b.isValidDocument()||E.version.compareTo(b.version)>0||0===E.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(E),d=d.insert(y,E)):Ve("LocalStore","Ignoring outdated watch update for ",y,". Current version:",b.version," Watch version:",E.version)}),{Wi:d,zi:a}})}function Ry(n,e){const t=Qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Oa(n,e){const t=Qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return t.Cs.getTargetData(r,e).next(l=>l?(a=l,oe.resolve(a)):t.Cs.allocateTargetId(r).next(d=>(a=new Zi(e,d,0,r.currentSequenceNumber),t.Cs.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=t.Ui.get(r.targetId);return(null===a||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Xl(n,e,t){return Qp.apply(this,arguments)}function Qp(){return Qp=(0,ge.Z)(function*(n,e,t){const r=Qe(n),a=r.Ui.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",l,d=>r.persistence.referenceDelegate.removeTarget(d,a)))}catch(d){if(!gu(d))throw d;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ui=r.Ui.remove(e),r.qi.delete(a.target)}),Qp.apply(this,arguments)}function cf(n,e,t){const r=Qe(n);let a=It.min(),l=jt();return r.persistence.runTransaction("Execute query","readonly",d=>function(y,E,b){const x=Qe(y),R=x.qi.get(b);return void 0!==R?oe.resolve(x.Ui.get(R)):x.Cs.getTargetData(E,b)}(r,d,_i(e)).next(y=>{if(y)return a=y.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(d,y.targetId).next(E=>{l=E})}).next(()=>r.Li.getDocumentsMatchingQuery(d,e,t?a:It.min(),t?l:jt())).next(y=>(Ly(r,CE(e),y),{documents:y,Hi:l})))}function Oy(n,e){const t=Qe(n),r=Qe(t.Cs),a=t.Ui.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>r.se(l,e).next(d=>d?d.target:null))}function Fy(n,e){const t=Qe(n),r=t.Ki.get(e)||It.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Gi.getAllFromCollectionGroup(a,e,Nl(r,-1),Number.MAX_SAFE_INTEGER)).then(a=>(Ly(t,e,a),a))}function Ly(n,e,t){let r=n.Ki.get(e)||It.min();t.forEach((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),n.Ki.set(e,r)}function Xp(){return Xp=(0,ge.Z)(function*(n,e,t,r){const a=Qe(n);let l=jt(),d=wi();for(const b of t){const x=e.Ji(b.metadata.name);b.document&&(l=l.add(x));const R=e.Yi(b);R.setReadTime(e.Xi(b.metadata.readTime)),d=d.insert(x,R)}const y=a.Gi.newChangeBuffer({trackRemovals:!0}),E=yield Oa(a,(b=r,_i(ud(Jt.fromString(`__bundle__/docs/${b}`)))));var b;return a.persistence.runTransaction("Apply bundle documents","readwrite",b=>Py(b,y,d).next(x=>(y.apply(b),x)).next(x=>a.Cs.removeMatchingKeysForTargetId(b,E.targetId).next(()=>a.Cs.addMatchingKeys(b,l,E.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(b,x.Wi,x.zi)).next(()=>x.Wi)))}),Xp.apply(this,arguments)}function uI(n,e){return Vy.apply(this,arguments)}function Vy(){return Vy=(0,ge.Z)(function*(n,e,t=jt()){const r=yield Oa(n,_i(Up(e.bundledQuery))),a=Qe(n);return a.persistence.runTransaction("Save named query","readwrite",l=>{const d=kr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return a.Ns.saveNamedQuery(l,e);const y=r.withResumeToken(gr.EMPTY_BYTE_STRING,d);return a.Ui=a.Ui.insert(y.targetId,y),a.Cs.updateTargetData(l,y).next(()=>a.Cs.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>a.Cs.addMatchingKeys(l,t,r.targetId)).next(()=>a.Ns.saveNamedQuery(l,e))})}),Vy.apply(this,arguments)}function X0(n,e){return`firestore_clients_${n}_${e}`}function J0(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function By(n,e){return`firestore_targets_${n}_${e}`}class Jp{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static Zi(e,t,r){const a=JSON.parse(r);let l,d="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return d&&a.error&&(d="string"==typeof a.error.message&&"string"==typeof a.error.code,d&&(l=new Ne(a.error.code,a.error.message))),d?new Jp(e,t,a.state,l):(or("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class df{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let a,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(a=new Ne(r.error.code,r.error.message))),l?new df(e,r.state,a):(or("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class eg{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let a="object"==typeof r&&r.activeTargetIds instanceof Array,l=Wh();for(let d=0;a&&d<r.activeTargetIds.length;++d)a=a0(r.activeTargetIds[d]),l=l.add(r.activeTargetIds[d]);return a?new eg(e,l):(or("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Uy{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Uy(t.clientId,t.onlineState):(or("SharedClientState",`Failed to parse online state: ${e}`),null)}}class jy{constructor(){this.activeTargetIds=Wh()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Hy{constructor(e,t,r,a,l){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Jn(Rt),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.ar=X0(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new jy),this.lr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(y){return`firestore_bundle_loaded_v2_${y}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ge.Z)(function*(){const t=yield e.syncEngine.vi();for(const a of t){if(a===e.sr)continue;const l=e.getItem(X0(e.persistenceKey,a));if(l){const d=eg.Zi(a,l);d&&(e.ur=e.ur.insert(d.clientId,d))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const a=e.yr(r);a&&e.pr(a)}for(const a of e.cr)e.rr(a);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(By(this.persistenceKey,e));if(r){const a=df.Zi(e,r);a&&(t=a.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(By(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(a=>{this.Er(a)}),this.currentUser=e,r.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void or("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ge.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const a=t.vr(r.key);return t.Vr(a,null)}{const a=t.Sr(r.key,r.newValue);if(a)return t.Vr(a.clientId,a)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const a=t.Dr(r.key,r.newValue);if(a)return t.Cr(a)}}else if(t._r.test(r.key)){if(null!==r.newValue){const a=t.Nr(r.key,r.newValue);if(a)return t.kr(a)}}else if(r.key===t.wr){if(null!==r.newValue){const a=t.yr(r.newValue);if(a)return t.pr(a)}}else if(r.key===t.hr){const a=function(l){let d=vi.at;if(null!=l)try{const y=JSON.parse(l);Tt("number"==typeof y),d=y}catch(y){or("SharedClientState","Failed to read sequence number from WebStorage",y)}return d}(r.newValue);a!==vi.at&&t.sequenceNumberHandler(a)}else if(r.key===t.mr){const a=t.Or(r.newValue);yield Promise.all(a.map(l=>t.syncEngine.Mr(l)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const a=new Jp(this.currentUser,e,t,r),l=J0(this.persistenceKey,this.currentUser,e);this.setItem(l,a.tr())}Er(e){const t=J0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const a=By(this.persistenceKey,e),l=new df(e,t,r);this.setItem(a,l.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return eg.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),a=Number(r[1]);return Jp.Zi(new fr(void 0!==r[2]?r[2]:null),a,t)}Nr(e,t){const r=this._r.exec(e),a=Number(r[1]);return df.Zi(a,t)}yr(e){return Uy.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ge.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),a=this.Ir(this.ur),l=this.Ir(r),d=[],y=[];return l.forEach(E=>{a.has(E)||d.push(E)}),a.forEach(E=>{l.has(E)||y.push(E)}),this.syncEngine.Br(d,y).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Wh();return e.forEach((r,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class ew{constructor(){this.Lr=new jy,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new jy,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class lI{qr(e){}shutdown(){}}class tw{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const cI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dI{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class hI extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,a,l){const d=this.ho(e,t);Ve("RestConnection","Sending: ",d,r);const y={};return this.lo(y,a,l),this.fo(e,d,y,r).then(E=>(Ve("RestConnection","Received: ",E),E),E=>{throw fu("RestConnection",`${e} failed with error: `,E,"url: ",d,"request:",r),E})}_o(e,t,r,a,l,d){return this.ao(e,t,r,a,l)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ya,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),r&&r.headers.forEach((a,l)=>e[l]=a)}ho(e,t){return`${this.oo}/v1/${t}:${cI[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,a){return new Promise((l,d)=>{const y=new pp;y.setWithCredentials(!0),y.listenOnce(Z_.COMPLETE,()=>{var b;try{switch(y.getLastErrorCode()){case Ph.NO_ERROR:const x=y.getResponseJson();Ve("Connection","XHR received:",JSON.stringify(x)),l(x);break;case Ph.TIMEOUT:Ve("Connection",'RPC "'+e+'" timed out'),d(new Ne(ce.DEADLINE_EXCEEDED,"Request time out"));break;case Ph.HTTP_ERROR:const R=y.getStatus();if(Ve("Connection",'RPC "'+e+'" failed with status:',R,"response text:",y.getResponseText()),R>0){let z=y.getResponseJson();Array.isArray(z)&&(z=z[0]);const X=null===(b=z)||void 0===b?void 0:b.error;if(X&&X.status&&X.message){const he=function(Ue){const He=Ue.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(He)>=0?He:ce.UNKNOWN}(X.status);d(new Ne(he,X.message))}else d(new Ne(ce.UNKNOWN,"Server responded with status "+y.getStatus()))}else d(new Ne(ce.UNAVAILABLE,"Connection failed."));break;default:at()}}finally{Ve("Connection",'RPC "'+e+'" completed.')}});const E=JSON.stringify(a);y.send(t,"POST",E,r,15)})}wo(e,t,r){const a=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=pb(),d=iE(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(y.xmlHttpFactory=new sE({})),this.lo(y.initMessageHeaders,t,r),y.encodeInitMessageHeaders=!0;const E=a.join("");Ve("Connection","Creating WebChannel: "+E,y);const b=l.createWebChannel(E,y);let x=!1,R=!1;const z=new dI({Hr:he=>{R?Ve("Connection","Not sending because WebChannel is closed:",he):(x||(Ve("Connection","Opening WebChannel transport."),b.open(),x=!0),Ve("Connection","WebChannel sending:",he),b.send(he))},Jr:()=>b.close()}),X=(he,Ue,He)=>{he.listen(Ue,Mt=>{try{He(Mt)}catch(zt){setTimeout(()=>{throw zt},0)}})};return X(b,Jc.EventType.OPEN,()=>{R||Ve("Connection","WebChannel transport opened.")}),X(b,Jc.EventType.CLOSE,()=>{R||(R=!0,Ve("Connection","WebChannel transport closed"),z.io())}),X(b,Jc.EventType.ERROR,he=>{R||(R=!0,fu("Connection","WebChannel transport errored:",he),z.io(new Ne(ce.UNAVAILABLE,"The operation could not be completed")))}),X(b,Jc.EventType.MESSAGE,he=>{var Ue;if(!R){const He=he.data[0];Tt(!!He);const Mt=He,zt=Mt.error||(null===(Ue=Mt[0])||void 0===Ue?void 0:Ue.error);if(zt){Ve("Connection","WebChannel received error:",zt);const Ht=zt.status;let Vt=function(qt){const Nr=Er[qt];if(void 0!==Nr)return C0(Nr)}(Ht),Ot=zt.message;void 0===Vt&&(Vt=ce.INTERNAL,Ot="Unknown error status: "+Ht+" with message "+zt.message),R=!0,z.io(new Ne(Vt,Ot)),b.close()}else Ve("Connection","WebChannel received:",He),z.ro(He)}}),X(d,Y_.STAT_EVENT,he=>{he.stat===hu.PROXY?Ve("Connection","Detected buffering proxy"):he.stat===hu.NOPROXY&&Ve("Connection","Detected no buffering proxy")}),setTimeout(()=>{z.so()},0),z}}function nw(){return typeof window<"u"?window:null}function hf(){return typeof document<"u"?document:null}function Ad(n){return new Ib(n,!0)}class tg{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=a,this.po=l,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),a=Math.max(0,t-r);a>0&&Ve("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,a,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Gy{constructor(e,t,r,a,l,d,y,E){this.Hs=e,this.vo=r,this.Vo=a,this.connection=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=y,this.listener=E,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new tg(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,ge.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,ge.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,ge.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(or(t.toString()),or("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.So===t&&this.Go(r,a)},r=>{e(()=>{const a=new Ne(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(a)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(a=>{r(()=>this.Qo(a))}),this.stream.onMessage(a=>{r(()=>this.onMessage(a))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,ge.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rw extends Gy{constructor(e,t,r,a,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,d),this.It=l}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function M0(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(E=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===E?1:"REMOVE"===E?2:"CURRENT"===E?3:"RESET"===E?4:at(),a=e.targetChange.targetIds||[],l=function(E,b){return E.gt?(Tt(void 0===b||"string"==typeof b),gr.fromBase64String(b||"")):(Tt(void 0===b||b instanceof Uint8Array),gr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,y=d&&function(E){const b=void 0===E.code?ce.UNKNOWN:C0(E.code);return new Ne(b,E.message||"")}(d);t=new ly(r,a,l,y||null)}else if("documentChange"in e){const r=e.documentChange,a=Ki(n,r.document.name),l=kr(r.document.updateTime),d=new Mr({mapValue:{fields:r.document.fields}}),y=Pn.newFoundDocument(a,l,d);t=new kp(r.targetIds||[],r.removedTargetIds||[],y.key,y)}else if("documentDelete"in e){const r=e.documentDelete,a=Ki(n,r.document),l=r.readTime?kr(r.readTime):It.min(),d=Pn.newNoDocument(a,l);t=new kp([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,a=Ki(n,r.document);t=new kp([],r.removedTargetIds||[],a,null)}else{if(!("filter"in e))return at();{const r=e.filter,l=new SE(r.count||0);t=new A0(r.targetId,l)}}var E;return t}(this.It,e),r=function(a){if(!("targetChange"in a))return It.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?It.min():l.readTime?kr(l.readTime):It.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Pp(this.It),t.addTarget=function(a,l){let d;const y=l.target;return d=Bh(y)?{documents:Qh(a,y)}:{query:vd(a,y)},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?d.resumeToken=T0(a,l.resumeToken):l.snapshotVersion.compareTo(It.min())>0&&(d.readTime=md(a,l.snapshotVersion.toTimestamp())),d}(this.It,e);const r=function FE(n,e){const t=function(r,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return at()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Pp(this.It),t.removeTarget=e,this.Bo(t)}}class iw extends Gy{constructor(e,t,r,a,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,d),this.It=l,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Sa(n,e){return n&&n.length>0?(Tt(void 0!==e),n.map(t=>function(r,a){let l=kr(r.updateTime?r.updateTime:a);return l.isEqual(It.min())&&(l=kr(a)),new TE(l,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=kr(e.commitTime);return this.listener.Zo(r,t)}return Tt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Pp(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>yd(this.It,r))};this.Bo(t)}}class sw extends class{}{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=a,this.nu=!1}su(){if(this.nu)throw new Ne(ce.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.ao(e,t,r,a,l)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ne(ce.UNKNOWN,a.toString())})}_o(e,t,r,a){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,d])=>this.connection._o(e,t,r,l,d,a)).catch(l=>{throw"FirebaseError"===l.name?(l.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ne(ce.UNKNOWN,l.toString())})}terminate(){this.nu=!0}}class aw{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(or(t),this.ou=!1):Ve("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class uw{constructor(e,t,r,a,l){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=l,this.mu.qr(y=>{r.enqueueAndForget((0,ge.Z)(function*(){var E;gt(d)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(E=(0,ge.Z)(function*(b){const x=Qe(b);x._u.add(4),yield Td(x),x.gu.set("Unknown"),x._u.delete(4),yield Gs(x)}),function(b){return E.apply(this,arguments)})(d))}))}),this.gu=new aw(r,a)}}function Gs(n){return Wy.apply(this,arguments)}function Wy(){return Wy=(0,ge.Z)(function*(n){if(gt(n))for(const e of n.wu)yield e(!0)}),Wy.apply(this,arguments)}function Td(n){return ku.apply(this,arguments)}function ku(){return ku=(0,ge.Z)(function*(n){for(const e of n.wu)yield e(!1)}),ku.apply(this,arguments)}function $y(n,e){const t=Qe(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),cw(t)?rg(t):Fo(t).ko()&&lw(t,e))}function Jl(n,e){const t=Qe(n),r=Fo(t);t.du.delete(e),r.ko()&&zy(t,e),0===t.du.size&&(r.ko()?r.Fo():gt(t)&&t.gu.set("Unknown"))}function lw(n,e){n.yu.Mt(e.targetId),Fo(n).zo(e)}function zy(n,e){n.yu.Mt(e),Fo(n).Ho(e)}function rg(n){n.yu=new kE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),Fo(n).start(),n.gu.uu()}function cw(n){return gt(n)&&!Fo(n).No()&&n.du.size>0}function gt(n){return 0===Qe(n)._u.size}function dw(n){n.yu=void 0}function fI(n){return qy.apply(this,arguments)}function qy(){return qy=(0,ge.Z)(function*(n){n.du.forEach((e,t)=>{lw(n,e)})}),qy.apply(this,arguments)}function Sd(n,e){return Ky.apply(this,arguments)}function Ky(){return Ky=(0,ge.Z)(function*(n,e){dw(n),cw(n)?(n.gu.hu(e),rg(n)):n.gu.set("Unknown")}),Ky.apply(this,arguments)}function ig(n,e,t){return xd.apply(this,arguments)}function xd(){return xd=(0,ge.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof ly&&2===e.state&&e.cause)try{yield(r=(0,ge.Z)(function*(a,l){const d=l.cause;for(const y of l.targetIds)a.du.has(y)&&(yield a.remoteSyncer.rejectListen(y,d),a.du.delete(y),a.yu.removeTarget(y))}),function(a,l){return r.apply(this,arguments)})(n,e)}catch(r){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield On(n,r)}else if(e instanceof kp?n.yu.Gt(e):e instanceof A0?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(It.min()))try{const r=yield Z0(n.localStore);t.compareTo(r)>=0&&(yield function(a,l){const d=a.yu.te(l);return d.targetChanges.forEach((y,E)=>{if(y.resumeToken.approximateByteSize()>0){const b=a.du.get(E);b&&a.du.set(E,b.withResumeToken(y.resumeToken,l))}}),d.targetMismatches.forEach(y=>{const E=a.du.get(y);if(!E)return;a.du.set(y,E.withResumeToken(gr.EMPTY_BYTE_STRING,E.snapshotVersion)),zy(a,y);const b=new Zi(E.target,y,1,E.sequenceNumber);lw(a,b)}),a.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Ve("RemoteStore","Failed to raise snapshot:",r),yield On(n,r)}var r}),xd.apply(this,arguments)}function On(n,e,t){return hw.apply(this,arguments)}function hw(){return hw=(0,ge.Z)(function*(n,e,t){if(!gu(e))throw e;n._u.add(1),yield Td(n),n.gu.set("Offline"),t||(t=()=>Z0(n.localStore)),n.asyncQueue.enqueueRetryable((0,ge.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield Gs(n)}))}),hw.apply(this,arguments)}function Zy(n,e){return e().catch(t=>On(n,t,e))}function ec(n){return Yy.apply(this,arguments)}function Yy(){return Yy=(0,ge.Z)(function*(n){const e=Qe(n),t=gs(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;fw(e);)try{const a=yield Ry(e.localStore,r);if(null===a){0===e.fu.length&&t.Fo();break}r=a.batchId,pw(e,a)}catch(a){yield On(e,a)}Qy(e)&&Xy(e)}),Yy.apply(this,arguments)}function fw(n){return gt(n)&&n.fu.length<10}function pw(n,e){n.fu.push(e);const t=gs(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function Qy(n){return gt(n)&&!gs(n).No()&&n.fu.length>0}function Xy(n){gs(n).start()}function pI(n){return Jy.apply(this,arguments)}function Jy(){return Jy=(0,ge.Z)(function*(n){gs(n).eu()}),Jy.apply(this,arguments)}function gI(n){return tc.apply(this,arguments)}function tc(){return tc=(0,ge.Z)(function*(n){const e=gs(n);for(const t of n.fu)e.Xo(t.mutations)}),tc.apply(this,arguments)}function mI(n,e,t){return ev.apply(this,arguments)}function ev(){return ev=(0,ge.Z)(function*(n,e,t){const r=n.fu.shift(),a=Du.from(r,e,t);yield Zy(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield ec(n)}),ev.apply(this,arguments)}function yI(n,e){return Md.apply(this,arguments)}function Md(){return Md=(0,ge.Z)(function*(n,e){var t;e&&gs(n).Yo&&(yield(t=(0,ge.Z)(function*(r,a){if(uy(l=a.code)&&l!==ce.ABORTED){const d=r.fu.shift();gs(r).Mo(),yield Zy(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,a)),yield ec(r)}var l}),function(r,a){return t.apply(this,arguments)})(n,e)),Qy(n)&&Xy(n)}),Md.apply(this,arguments)}function tv(n,e){return sg.apply(this,arguments)}function sg(){return sg=(0,ge.Z)(function*(n,e){const t=Qe(n);t.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const r=gt(t);t._u.add(3),yield Td(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Gs(t)}),sg.apply(this,arguments)}function og(n,e){return nv.apply(this,arguments)}function nv(){return nv=(0,ge.Z)(function*(n,e){const t=Qe(n);e?(t._u.delete(2),yield Gs(t)):e||(t._u.add(2),yield Td(t),t.gu.set("Unknown"))}),nv.apply(this,arguments)}function Fo(n){return n.pu||(n.pu=function(e,t,r){const a=Qe(e);return a.su(),new rw(t,a.connection,a.authCredentials,a.appCheckCredentials,a.It,r)}(n.datastore,n.asyncQueue,{Yr:fI.bind(null,n),Zr:Sd.bind(null,n),Wo:ig.bind(null,n)}),n.wu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.pu.Mo(),cw(n)?rg(n):n.gu.set("Unknown")):(yield n.pu.stop(),dw(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function gs(n){return n.Iu||(n.Iu=function(e,t,r){const a=Qe(e);return a.su(),new iw(t,a.connection,a.authCredentials,a.appCheckCredentials,a.It,r)}(n.datastore,n.asyncQueue,{Yr:pI.bind(null,n),Zr:yI.bind(null,n),tu:gI.bind(null,n),Zo:mI.bind(null,n)}),n.wu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.Iu.Mo(),yield ec(n)):(yield n.Iu.stop(),n.fu.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class rv{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,a,l){const d=Date.now()+r,y=new rv(e,t,d,a,l);return y.start(r),y}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kd(n,e){if(or("AsyncQueue",`${e}: ${n}`),gu(n))return new Ne(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class Nd{constructor(e){this.comparator=e?(t,r)=>e(t,r)||qe.comparator(t.key,r.key):(t,r)=>qe.comparator(t.key,r.key),this.keyedMap=pd(),this.sortedSet=new Jn(this.comparator)}static emptySet(e){return new Nd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Nd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Nd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class iv{constructor(){this.Tu=new Jn(qe.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):at():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class nc{constructor(e,t,r,a,l,d,y,E,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=y,this.excludesMetadataChanges=E,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,a,l){const d=[];return t.forEach(y=>{d.push({type:0,doc:y})}),new nc(e,t,Nd.emptySet(t),d,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class gw{constructor(){this.Au=void 0,this.listeners=[]}}class vI{constructor(){this.queries=new Aa(e=>v0(e),cd),this.onlineState="Unknown",this.Ru=new Set}}function ag(n,e){return sv.apply(this,arguments)}function sv(){return sv=(0,ge.Z)(function*(n,e){const t=Qe(n),r=e.query;let a=!1,l=t.queries.get(r);if(l||(a=!0,l=new gw),a)try{l.Au=yield t.onListen(r)}catch(d){const y=kd(d,`Initialization of query '${jh(e.query)}' failed`);return void e.onError(y)}t.queries.set(r,l),l.listeners.push(e),e.bu(t.onlineState),l.Au&&e.Pu(l.Au)&&yw(t)}),sv.apply(this,arguments)}function ov(n,e){return mw.apply(this,arguments)}function mw(){return mw=(0,ge.Z)(function*(n,e){const t=Qe(n),r=e.query;let a=!1;const l=t.queries.get(r);if(l){const d=l.listeners.indexOf(e);d>=0&&(l.listeners.splice(d,1),a=0===l.listeners.length)}if(a)return t.queries.delete(r),t.onUnlisten(r)}),mw.apply(this,arguments)}function Ab(n,e){const t=Qe(n);let r=!1;for(const a of e){const d=t.queries.get(a.query);if(d){for(const y of d.listeners)y.Pu(a)&&(r=!0);d.Au=a}}r&&yw(t)}function Tb(n,e,t){const r=Qe(n),a=r.queries.get(e);if(a)for(const l of a.listeners)l.onError(t);r.queries.delete(e)}function yw(n){n.Ru.forEach(e=>{e.next()})}class ug{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)3!==a.type&&r.push(a);e=new nc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=nc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class lg{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class vw{constructor(e){this.It=e}Ji(e){return Ki(this.It,e)}Yi(e){return e.metadata.exists?dy(this.It,e.document,!1):Pn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return kr(e)}}class _I{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=av(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=Jt.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new vw(this.It);for(const a of e)if(a.metadata.queries){const l=r.Ji(a.metadata.name);for(const d of a.metadata.queries){const y=(t.get(d)||jt()).add(l);t.set(d,y)}}return t}complete(){var e=this;return(0,ge.Z)(function*(){const t=yield function Q0(n,e,t,r){return Xp.apply(this,arguments)}(e.localStore,new vw(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const a of e.queries)yield uI(e.localStore,a,r.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function av(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Pd{constructor(e){this.key=e}}class _w{constructor(e){this.key=e}}class ww{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=jt(),this.mutatedKeys=jt(),this.Gu=EE(e),this.Qu=new Nd(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new iv,a=t?t.Qu:this.Qu;let l=t?t.mutatedKeys:this.mutatedKeys,d=a,y=!1;const E="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,b="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((x,R)=>{const z=a.get(x),X=_0(this.query,R)?R:null,he=!!z&&this.mutatedKeys.has(z.key),Ue=!!X&&(X.hasLocalMutations||this.mutatedKeys.has(X.key)&&X.hasCommittedMutations);let He=!1;z&&X?z.data.isEqual(X.data)?he!==Ue&&(r.track({type:3,doc:X}),He=!0):this.Hu(z,X)||(r.track({type:2,doc:X}),He=!0,(E&&this.Gu(X,E)>0||b&&this.Gu(X,b)<0)&&(y=!0)):!z&&X?(r.track({type:0,doc:X}),He=!0):z&&!X&&(r.track({type:1,doc:z}),He=!0,(E||b)&&(y=!0)),He&&(X?(d=d.add(X),l=Ue?l.add(x):l.delete(x)):(d=d.delete(x),l=l.delete(x)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const x="F"===this.query.limitType?d.last():d.first();d=d.delete(x.key),l=l.delete(x.key),r.track({type:1,doc:x})}return{Qu:d,zu:r,$i:y,mutatedKeys:l}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const a=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const l=e.zu.Eu();l.sort((b,x)=>function(R,z){const X=he=>{switch(he){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return at()}};return X(R)-X(z)}(b.type,x.type)||this.Gu(b.doc,x.doc)),this.Ju(r);const d=t?this.Yu():[],y=0===this.Ku.size&&this.current?1:0,E=y!==this.qu;return this.qu=y,0!==l.length||E?{snapshot:new nc(this.query,e.Qu,a,l,e.mutatedKeys,0===y,E,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:d}:{Xu:d}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new iv,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=jt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new _w(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new Pd(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=jt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return nc.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class wI{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class CI{constructor(e){this.key=e,this.nc=!1}}class EI{constructor(e,t,r,a,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.sc={},this.ic=new Aa(y=>v0(y),cd),this.rc=new Map,this.oc=new Set,this.uc=new Jn(qe.comparator),this.cc=new Map,this.ac=new W0,this.hc={},this.lc=new Map,this.fc=xu.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function Cw(n,e){return uv.apply(this,arguments)}function uv(){return uv=(0,ge.Z)(function*(n,e){const t=Dv(n);let r,a;const l=t.ic.get(e);if(l)r=l.targetId,t.sharedClientState.addLocalQueryTarget(r),a=l.view.ec();else{const d=yield Oa(t.localStore,_i(e));t.isPrimaryClient&&$y(t.remoteStore,d);const y=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,a=yield lv(t,e,r,"current"===y,d.resumeToken)}return a}),uv.apply(this,arguments)}function lv(n,e,t,r,a){return rc.apply(this,arguments)}function rc(){return rc=(0,ge.Z)(function*(n,e,t,r,a){n._c=(R,z,X)=>{return(he=(0,ge.Z)(function*(Ue,He,Mt,zt){let Ht=He.view.Wu(Mt);Ht.$i&&(Ht=yield cf(Ue.localStore,He.query,!1).then(({documents:qt})=>He.view.Wu(qt,Ht)));const Vt=zt&&zt.targetChanges.get(He.targetId),Ot=He.view.applyChanges(Ht,Ue.isPrimaryClient,Vt);return pv(Ue,He.targetId,Ot.Xu),Ot.snapshot}),function(Ue,He,Mt,zt){return he.apply(this,arguments)})(n,R,z,X);var he};const l=yield cf(n.localStore,e,!0),d=new ww(e,l.Hi),y=d.Wu(l.documents),E=gd.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,a),b=d.applyChanges(y,n.isPrimaryClient,E);pv(n,t,b.Xu);const x=new wI(e,t,d);return n.ic.set(e,x),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),b.snapshot}),rc.apply(this,arguments)}function II(n,e){return cg.apply(this,arguments)}function cg(){return cg=(0,ge.Z)(function*(n,e){const t=Qe(n),r=t.ic.get(e),a=t.rc.get(r.targetId);if(a.length>1)return t.rc.set(r.targetId,a.filter(l=>!cd(l,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Xl(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Jl(t.remoteStore,r.targetId),Rd(t,r.targetId)}).catch(va))):(Rd(t,r.targetId),yield Xl(t.localStore,r.targetId,!0))}),cg.apply(this,arguments)}function dg(){return dg=(0,ge.Z)(function*(n,e,t){const r=bv(n);try{const a=yield function(l,d){const y=Qe(l),E=Nn.now(),b=d.reduce((z,X)=>z.add(X.key),jt());let x,R;return y.persistence.runTransaction("Locally write mutations","readwrite",z=>{let X=wi(),he=jt();return y.Gi.getEntries(z,b).next(Ue=>{X=Ue,X.forEach((He,Mt)=>{Mt.isValidDocument()||(he=he.add(He))})}).next(()=>y.localDocuments.getOverlayedDocuments(z,X)).next(Ue=>{x=Ue;const He=[];for(const Mt of d){const zt=fd(Mt,x.get(Mt.key).overlayedDocument);null!=zt&&He.push(new No(Mt.key,zt,Ep(zt.value.mapValue),Rn.exists(!0)))}return y.mutationQueue.addMutationBatch(z,E,He,d)}).next(Ue=>{R=Ue;const He=Ue.applyToLocalDocumentSet(x,he);return y.documentOverlayCache.saveOverlays(z,Ue.batchId,He)})}).then(()=>({batchId:R.batchId,changes:I0(x)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),function(l,d,y){let E=l.hc[l.currentUser.toKey()];E||(E=new Jn(Rt)),E=E.insert(d,y),l.hc[l.currentUser.toKey()]=E}(r,a.batchId,t),yield Fa(r,a.changes),yield ec(r.remoteStore)}catch(a){const l=kd(a,"Failed to persist write");t.reject(l)}}),dg.apply(this,arguments)}function Ew(n,e){return hg.apply(this,arguments)}function hg(){return hg=(0,ge.Z)(function*(n,e){const t=Qe(n);try{const r=yield Y0(t.localStore,e);e.targetChanges.forEach((a,l)=>{const d=t.cc.get(l);d&&(Tt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?d.nc=!0:a.modifiedDocuments.size>0?Tt(d.nc):a.removedDocuments.size>0&&(Tt(d.nc),d.nc=!1))}),yield Fa(t,r,e)}catch(r){yield va(r)}}),hg.apply(this,arguments)}function Iw(n,e,t){const r=Qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const a=[];r.ic.forEach((l,d)=>{const y=d.view.bu(e);y.snapshot&&a.push(y.snapshot)}),function(l,d){const y=Qe(l);y.onlineState=d;let E=!1;y.queries.forEach((b,x)=>{for(const R of x.listeners)R.bu(d)&&(E=!0)}),E&&yw(y)}(r.eventManager,e),a.length&&r.sc.Wo(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function cv(n,e,t){return dv.apply(this,arguments)}function dv(){return dv=(0,ge.Z)(function*(n,e,t){const r=Qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.cc.get(e),l=a&&a.key;if(l){let d=new Jn(qe.comparator);d=d.insert(l,Pn.newNoDocument(l,It.min()));const y=jt().add(l),E=new $h(It.min(),new Map,new yn(Rt),d,y);yield Ew(r,E),r.uc=r.uc.remove(l),r.cc.delete(e),gv(r)}else yield Xl(r.localStore,e,!1).then(()=>Rd(r,e,t)).catch(va)}),dv.apply(this,arguments)}function Dw(n,e){return fg.apply(this,arguments)}function fg(){return fg=(0,ge.Z)(function*(n,e){const t=Qe(n),r=e.batch.batchId;try{const a=yield Yp(t.localStore,e);pg(t,r,null),fv(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Fa(t,a)}catch(a){yield va(a)}}),fg.apply(this,arguments)}function bI(n,e,t){return hv.apply(this,arguments)}function hv(){return hv=(0,ge.Z)(function*(n,e,t){const r=Qe(n);try{const a=yield function(l,d){const y=Qe(l);return y.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let b;return y.mutationQueue.lookupMutationBatch(E,d).next(x=>(Tt(null!==x),b=x.keys(),y.mutationQueue.removeMutationBatch(E,x))).next(()=>y.mutationQueue.performConsistencyCheck(E)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(E,b,d)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,b)).next(()=>y.localDocuments.getDocuments(E,b))})}(r.localStore,e);pg(r,e,t),fv(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Fa(r,a)}catch(a){yield va(a)}}),hv.apply(this,arguments)}function ff(){return ff=(0,ge.Z)(function*(n,e){const t=Qe(n);gt(t.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const d=Qe(l);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",y=>d.mutationQueue.getHighestUnacknowledgedBatchId(y))}(t.localStore);if(-1===r)return void e.resolve();const a=t.lc.get(r)||[];a.push(e),t.lc.set(r,a)}catch(r){const a=kd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),ff.apply(this,arguments)}function fv(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function pg(n,e,t){const r=Qe(n);let a=r.hc[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.hc[r.currentUser.toKey()]=a}}function Rd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||bw(n,r)})}function bw(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(Jl(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),gv(n))}function pv(n,e,t){for(const r of t)r instanceof Pd?(n.ac.addReference(r.key,e),TI(n,r)):r instanceof _w?(Ve("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||bw(n,r.key)):at()}function TI(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Ve("SyncEngine","New document in limbo: "+t),n.oc.add(r),gv(n))}function gv(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new qe(Jt.fromString(e)),r=n.fc.next();n.cc.set(r,new CI(t)),n.uc=n.uc.insert(t,r),$y(n.remoteStore,new Zi(_i(ud(t.path)),r,2,vi.at))}}function Fa(n,e,t){return mv.apply(this,arguments)}function mv(){return mv=(0,ge.Z)(function*(n,e,t){const r=Qe(n),a=[],l=[],d=[];var y;r.ic.isEmpty()||(r.ic.forEach((y,E)=>{d.push(r._c(E,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(E.targetId,b?.fromCache?"not-current":"current"),b){a.push(b);const x=Ql.Ci(E.targetId,b);l.push(x)}}))}),yield Promise.all(d),r.sc.Wo(a),yield(y=(0,ge.Z)(function*(E,b){const x=Qe(E);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>oe.forEach(b,z=>oe.forEach(z.Si,X=>x.persistence.referenceDelegate.addReference(R,z.targetId,X)).next(()=>oe.forEach(z.Di,X=>x.persistence.referenceDelegate.removeReference(R,z.targetId,X)))))}catch(R){if(!gu(R))throw R;Ve("LocalStore","Failed to update sequence numbers: "+R)}for(const R of b){const z=R.targetId;if(!R.fromCache){const X=x.Ui.get(z),Ue=X.withLastLimboFreeSnapshotVersion(X.snapshotVersion);x.Ui=x.Ui.insert(z,Ue)}}}),function(E,b){return y.apply(this,arguments)})(r.localStore,l))}),mv.apply(this,arguments)}function SI(n,e){return gg.apply(this,arguments)}function gg(){return gg=(0,ge.Z)(function*(n,e){const t=Qe(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const r=yield Ny(t.localStore,e);t.currentUser=e,(a=t).lc.forEach(d=>{d.forEach(y=>{y.reject(new Ne(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Fa(t,r.ji)}var a}),gg.apply(this,arguments)}function Aw(n,e){const t=Qe(n),r=t.cc.get(e);if(r&&r.nc)return jt().add(r.key);{let a=jt();const l=t.rc.get(e);if(!l)return a;for(const d of l){const y=t.ic.get(d);a=a.unionWith(y.view.ju)}return a}}function xI(n,e){return yv.apply(this,arguments)}function yv(){return yv=(0,ge.Z)(function*(n,e){const t=Qe(n),r=yield cf(t.localStore,e.query,!0),a=e.view.tc(r);return t.isPrimaryClient&&pv(t,e.targetId,a.Xu),a}),yv.apply(this,arguments)}function Tw(n,e){return vv.apply(this,arguments)}function vv(){return vv=(0,ge.Z)(function*(n,e){const t=Qe(n);return Fy(t.localStore,e).then(r=>Fa(t,r))}),vv.apply(this,arguments)}function MI(n,e,t,r){return _v.apply(this,arguments)}function _v(){return _v=(0,ge.Z)(function*(n,e,t,r){const a=Qe(n),l=yield function(d,y){const E=Qe(d),b=Qe(E.mutationQueue);return E.persistence.runTransaction("Lookup mutation documents","readonly",x=>b.Tn(x,y).next(R=>R?E.localDocuments.getDocuments(x,R):oe.resolve(null)))}(a.localStore,e);var y;null!==l?("pending"===t?yield ec(a.remoteStore):"acknowledged"===t||"rejected"===t?(pg(a,e,r||null),fv(a,e),y=e,Qe(Qe(a.localStore).mutationQueue).An(y)):at(),yield Fa(a,l)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)}),_v.apply(this,arguments)}function pf(){return pf=(0,ge.Z)(function*(n,e){const t=Qe(n);if(Dv(t),bv(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),a=yield Cv(t,r.toArray());t.dc=!0,yield og(t.remoteStore,!0);for(const l of a)$y(t.remoteStore,l)}else if(!1===e&&!1!==t.dc){const r=[];let a=Promise.resolve();t.rc.forEach((l,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):a=a.then(()=>(Rd(t,d),Xl(t.localStore,d,!0))),Jl(t.remoteStore,d)}),yield a,yield Cv(t,r),function(l){const d=Qe(l);d.cc.forEach((y,E)=>{Jl(d.remoteStore,E)}),d.ac.fs(),d.cc=new Map,d.uc=new Jn(qe.comparator)}(t),t.dc=!1,yield og(t.remoteStore,!1)}}),pf.apply(this,arguments)}function Cv(n,e,t){return gf.apply(this,arguments)}function gf(){return gf=(0,ge.Z)(function*(n,e,t){const r=Qe(n),a=[],l=[];for(const d of e){let y;const E=r.rc.get(d);if(E&&0!==E.length){y=yield Oa(r.localStore,_i(E[0]));for(const b of E){const x=r.ic.get(b),R=yield xI(r,x);R.snapshot&&l.push(R.snapshot)}}else{const b=yield Oy(r.localStore,d);y=yield Oa(r.localStore,b),yield lv(r,Sw(b),d,!1,y.resumeToken)}a.push(y)}return r.sc.Wo(l),a}),gf.apply(this,arguments)}function Sw(n){return g0(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function kI(n){const e=Qe(n);return Qe(Qe(e.localStore).persistence).vi()}function Ev(n,e,t,r){return Iv.apply(this,arguments)}function Iv(){return Iv=(0,ge.Z)(function*(n,e,t,r){const a=Qe(n);if(a.dc)return void Ve("SyncEngine","Ignoring unexpected query state notification.");const l=a.rc.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const d=yield Fy(a.localStore,CE(l[0])),y=$h.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,gr.EMPTY_BYTE_STRING);yield Fa(a,d,y);break}case"rejected":yield Xl(a.localStore,e,!0),Rd(a,e,r);break;default:at()}}),Iv.apply(this,arguments)}function xw(n,e,t){return Nu.apply(this,arguments)}function Nu(){return Nu=(0,ge.Z)(function*(n,e,t){const r=Dv(n);if(r.dc){for(const a of e){if(r.rc.has(a)){Ve("SyncEngine","Adding an already active target "+a);continue}const l=yield Oy(r.localStore,a),d=yield Oa(r.localStore,l);yield lv(r,Sw(l),d.targetId,!1,d.resumeToken),$y(r.remoteStore,d)}for(const a of t)r.rc.has(a)&&(yield Xl(r.localStore,a,!1).then(()=>{Jl(r.remoteStore,a),Rd(r,a)}).catch(va))}}),Nu.apply(this,arguments)}function Dv(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ew.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Aw.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cv.bind(null,e),e.sc.Wo=Ab.bind(null,e.eventManager),e.sc.wc=Tb.bind(null,e.eventManager),e}function bv(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Dw.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bI.bind(null,e),e}class Av{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ge.Z)(function*(){t.It=Ad(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return K0(this.persistence,new z0,e.initialUser,this.It)}yc(e){return new js(Ii.Bs,this.It)}gc(e){return new ew}terminate(){var e=this;return(0,ge.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class mg extends Av{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield bv(r.Ac.syncEngine),yield ec(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return K0(this.persistence,new z0,e.initialUser,this.It)}Tc(e,t){return new tI(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new yE(t,this.persistence);return new mE(e.asyncQueue,r)}yc(e){const t=lf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ei.withCacheSize(this.cacheSizeBytes):Ei.DEFAULT;return new ky(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,nw(),hf(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new ew}}class NI extends mg{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e);const a=r.Ac.syncEngine;r.sharedClientState instanceof Hy&&(r.sharedClientState.syncEngine={Fr:MI.bind(null,a),$r:Ev.bind(null,a),Br:xw.bind(null,a),vi:kI.bind(null,a),Mr:Tw.bind(null,a)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var l=(0,ge.Z)(function*(d){yield function wv(n,e){return pf.apply(this,arguments)}(r.Ac.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return l.apply(this,arguments)}}())})()}gc(e){const t=nw();if(!Hy.C(t))throw new Ne(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=lf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Hy(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class yg{initialize(e,t){var r=this;return(0,ge.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=a=>Iw(r.syncEngine,a,1),r.remoteStore.remoteSyncer.handleCredentialChange=SI.bind(null,r.syncEngine),yield og(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new vI}createDatastore(e){const t=Ad(e.databaseInfo.databaseId),r=new hI(e.databaseInfo);return new sw(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,a=e.asyncQueue,l=y=>Iw(this.syncEngine,y,0),d=tw.C()?new tw:new lI,new uw(t,r,a,l,d);var t,r,a,l,d}createSyncEngine(e,t){return function(r,a,l,d,y,E,b){const x=new EI(r,a,l,d,y,E);return b&&(x.dc=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ge.Z)(function*(t){const r=Qe(t);Ve("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Td(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Tv(n,e,t){if(!t)throw new Ne(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Mw(n,e,t,r){if(!0===e&&!0===r)throw new Ne(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function vg(n){if(!qe.isDocumentKey(n))throw new Ne(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Sv(n){if(qe.isDocumentKey(n))throw new Ne(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function mf(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":at()}function Yt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=mf(n);throw new Ne(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function xv(n,e){if(e<=0)throw new Ne(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const kw=new Map;class Nw{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Mw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yf{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ne(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nw(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new J_;switch(t.type){case"gapi":return new uE(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ne(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=kw.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),kw.delete(e),t.terminate())}(this),Promise.resolve()}}function Pw(n,e,t,r={}){var a;const l=(n=Yt(n,yf))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&fu("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,y;if("string"==typeof r.mockUserToken)d=r.mockUserToken,y=fr.MOCK_USER;else{d=(0,Ut.Sg)(r.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new Ne(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new fr(E)}n._authCredentials=new gb(new X_(d,y))}}class Tn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ws(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tn(this.firestore,e,this._key)}}class ai{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ai(this.firestore,e,this._query)}}class Ws extends ai{constructor(e,t,r){super(e,t,ud(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tn(this.firestore,null,new qe(e))}withConverter(e){return new Ws(this.firestore,e,this._path)}}function Rw(n,e,...t){if(n=(0,Ut.m9)(n),Tv("collection","path",e),n instanceof yf){const r=Jt.fromString(e,...t);return Sv(r),new Ws(n,null,r)}{if(!(n instanceof Tn||n instanceof Ws))throw new Ne(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return Sv(r),new Ws(n.firestore,null,r)}}function Mv(n,e,...t){if(n=(0,Ut.m9)(n),1===arguments.length&&(e=Um.R()),Tv("doc","path",e),n instanceof yf){const r=Jt.fromString(e,...t);return vg(r),new Tn(n,null,new qe(r))}{if(!(n instanceof Tn||n instanceof Ws))throw new Ne(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return vg(r),new Tn(n.firestore,n instanceof Ws?n.converter:null,new qe(r))}}function RI(n,e){return n=(0,Ut.m9)(n),e=(0,Ut.m9)(e),(n instanceof Tn||n instanceof Ws)&&(e instanceof Tn||e instanceof Ws)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function kv(n,e){return n=(0,Ut.m9)(n),e=(0,Ut.m9)(e),n instanceof ai&&e instanceof ai&&n.firestore===e.firestore&&cd(n._query,e._query)&&n.converter===e.converter}function Ow(n,e=10240){let t=0;return{read:()=>(0,ge.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ge.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class _g{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):or("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class OI{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new pr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,ge.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,ge.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),a=Number(r);isNaN(a)&&e.Dc(`length string (${r}) is not valid number`);const l=yield e.Cc(a);return new lg(JSON.parse(l),t.length+a)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,ge.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,ge.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class VI{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ge.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ne(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(a=(0,ge.Z)(function*(l,d){const y=Qe(l),E=Pp(y.It)+"/documents",b={documents:d.map(X=>qh(y.It,X))},x=yield y._o("BatchGetDocuments",E,b,d.length),R=new Map;x.forEach(X=>{const he=function x0(n,e){return"found"in e?function(t,r){Tt(!!r.found);const a=Ki(t,r.found.name),l=kr(r.found.updateTime),d=new Mr({mapValue:{fields:r.found.fields}});return Pn.newFoundDocument(a,l,d)}(n,e):"missing"in e?function(t,r){Tt(!!r.missing),Tt(!!r.readTime);const a=Ki(t,r.missing),l=kr(r.readTime);return Pn.newNoDocument(a,l)}(n,e):at()}(y.It,X);R.set(he.key.toString(),he)});const z=[];return d.forEach(X=>{const he=R.get(X.toString());Tt(!!he),z.push(he)}),z}),function(l,d){return a.apply(this,arguments)})(t.datastore,e);var a;return r.forEach(a=>t.recordVersion(a)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Gl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ge.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,a)=>{const l=qe.fromPath(a);e.mutations.push(new Gh(l,e.precondition(l)))}),yield(r=(0,ge.Z)(function*(a,l){const d=Qe(a),y=Pp(d.It)+"/documents",E={writes:l.map(b=>yd(d.It,b))};yield d.ao("Commit",y,E)}),function(a,l){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw at();t=It.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(It.min())?Rn.exists(!1):Rn.updateTime(t):Rn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(It.min()))throw new Ne(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Rn.updateTime(t)}return Rn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class BI{constructor(e,t,r,a,l){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=a,this.deferred=l,this.kc=r.maxAttempts,this.xo=new tg(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,ge.Z)(function*(){const t=new VI(e.datastore),r=e.Mc(t);r&&r.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(l=>{e.Fc(l)}))}).catch(a=>{e.Fc(a)})}))}Mc(e){try{const t=this.updateFunction(e);return!Fl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!uy(t)}return!1}}class UI{constructor(e,t,r,a){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=fr.UNAUTHENTICATED,this.clientId=Um.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,ge.Z)(function*(y){Ve("FirestoreClient","Received user=",y.uid),yield l.authCredentialListener(y),l.user=y});return function(y){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Ve("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,ge.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const a=kd(r,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function Fw(n,e){return Nv.apply(this,arguments)}function Nv(){return Nv=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,ge.Z)(function*(l){r.isEqual(l)||(yield Ny(e.localStore,l),r=l)});return function(l){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Nv.apply(this,arguments)}function Od(n,e){return wg.apply(this,arguments)}function wg(){return wg=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Cg(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(a=>tv(e.remoteStore,a)),n.setAppCheckTokenChangeListener((a,l)=>tv(e.remoteStore,l)),n.onlineComponents=e}),wg.apply(this,arguments)}function Cg(n){return Eg.apply(this,arguments)}function Eg(){return Eg=(0,ge.Z)(function*(n){return n.offlineComponents||(Ve("FirestoreClient","Using default OfflineComponentProvider"),yield Fw(n,new Av)),n.offlineComponents}),Eg.apply(this,arguments)}function vf(n){return Ig.apply(this,arguments)}function Ig(){return Ig=(0,ge.Z)(function*(n){return n.onlineComponents||(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield Od(n,new yg)),n.onlineComponents}),Ig.apply(this,arguments)}function Pv(n){return Cg(n).then(e=>e.persistence)}function Dg(n){return Cg(n).then(e=>e.localStore)}function Lw(n){return vf(n).then(e=>e.remoteStore)}function Rv(n){return vf(n).then(e=>e.syncEngine)}function Fd(n){return Fv.apply(this,arguments)}function Fv(){return Fv=(0,ge.Z)(function*(n){const e=yield vf(n),t=e.eventManager;return t.onListen=Cw.bind(null,e.syncEngine),t.onUnlisten=II.bind(null,e.syncEngine),t}),Fv.apply(this,arguments)}function bg(n,e,t={}){const r=new pr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(a,l,d,y,E){const b=new _g({next:R=>{l.enqueueAndForget(()=>ov(a,x));const z=R.docs.has(d);!z&&R.fromCache?E.reject(new Ne(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&R.fromCache&&y&&"server"===y.source?E.reject(new Ne(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(R)},error:R=>E.reject(R)}),x=new ug(ud(d.path),b,{includeMetadataChanges:!0,Nu:!0});return ag(a,x)}(yield Fd(n),n.asyncQueue,e,t,r)})),r.promise}function Vw(n,e,t={}){const r=new pr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(a,l,d,y,E){const b=new _g({next:R=>{l.enqueueAndForget(()=>ov(a,x)),R.fromCache&&"server"===y.source?E.reject(new Ne(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(R)},error:R=>E.reject(R)}),x=new ug(d,b,{includeMetadataChanges:!0,Nu:!0});return ag(a,x)}(yield Fd(n),n.asyncQueue,e,t,r)})),r.promise}class WI{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new tg(this,"async_queue_retry"),this.Wc=()=>{const t=hf();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=hf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=hf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new pr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,ge.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!gu(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,or("INTERNAL UNHANDLED ERROR: ",function(l){let d=l.message||"";return l.stack&&(d=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),d}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const a=rv.createAndSchedule(this,e,t,r,l=>this.Yc(l));return this.qc.push(a),a}zc(){this.Kc&&at()}verifyOperationInProgress(){}Xc(){var e=this;return(0,ge.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function Vv(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const a of["next","error","complete"])if(a in r&&"function"==typeof r[a])return!0;return!1}(n)}class Ag{constructor(){this._progressObserver={},this._taskCompletionResolver=new pr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Fn extends yf{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new WI,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Sg(this),this._firestoreClient.terminate()}}function Bw(n,e){const t="object"==typeof n?n:(0,ii.getApp)(),r="string"==typeof n?n:e||"(default)",a=(0,ii._getProvider)(t,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=(0,Ut.P0)("firestore");l&&Pw(a,...l)}return a}function nr(n){return n._firestoreClient||Sg(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Sg(n){var e;const t=n._freezeSettings(),r=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Ol(n._databaseId,l,n._persistenceKey,(y=t).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,y.useFetchStreams));var l,y;n._firestoreClient=new UI(n._authCredentials,n._appCheckCredentials,n._queue,r)}function jw(n,e,t){const r=new pr;return n.asyncQueue.enqueue((0,ge.Z)(function*(){try{yield Fw(n,t),yield Od(n,e),r.resolve()}catch(a){const l=a;if(!("FirebaseError"===(d=l).name?d.code===ce.FAILED_PRECONDITION||d.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw l;fu("Error enabling offline persistence. Falling back to persistence disabled: "+l),r.reject(l)}var d})).then(()=>r.promise)}function Ww(n){if(n._initialized||n._terminated)throw new Ne(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Vo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vo(gr.fromBase64String(e))}catch(t){throw new Ne(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Vo(gr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class La{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Va{constructor(e){this._methodName=e}}class xg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Rt(this._lat,e._lat)||Rt(this._long,e._long)}}const KI=/^__.*__$/;class ZI{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new No(e,this.data,this.fieldMask,t,this.fieldTransforms):new ba(e,this.data,t,this.fieldTransforms)}}class $w{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new No(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function zw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw at()}}class Cf{constructor(e,t,r,a,l,d){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=a,void 0===l&&this.na(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Cf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ia({path:r,oa:!1});return a.ua(e),a}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ia({path:r,oa:!1});return a.na(),a}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Rg(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(zw(this.sa)&&KI.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class qw{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||Ad(e)}da(e,t,r,a=!1){return new Cf({sa:e,methodName:t,fa:r,path:jn.emptyPath(),oa:!1,la:a},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function ic(n){const e=n._freezeSettings(),t=Ad(n._databaseId);return new qw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ef(n,e,t,r,a,l={}){const d=n.da(l.merge||l.mergeFields?2:0,e,t,a);Gv("Data must be an object, but it was:",d,r);const y=Zw(r,d);let E,b;if(l.merge)E=new qi(d.fieldMask),b=d.fieldTransforms;else if(l.mergeFields){const x=[];for(const R of l.mergeFields){const z=Ng(e,R,t);if(!d.contains(z))throw new Ne(ce.INVALID_ARGUMENT,`Field '${z}' is specified in your field mask but missing from your input data.`);Og(x,z)||x.push(z)}E=new qi(x),b=d.fieldTransforms.filter(R=>E.covers(R.field))}else E=null,b=d.fieldTransforms;return new ZI(new Mr(y),E,b)}class If extends Va{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof If}}function Jr(n,e,t){return new Cf({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class Pu extends Va{_toFieldTransform(e){return new dd(e.path,new wu)}isEqual(e){return e instanceof Pu}}class YI extends Va{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Jr(this,e,!0),r=this._a.map(l=>$s(l,t)),a=new jl(r);return new dd(e.path,a)}isEqual(e){return this===e}}class QI extends Va{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Jr(this,e,!0),r=this._a.map(l=>$s(l,t)),a=new Ia(r);return new dd(e.path,a)}isEqual(e){return this===e}}class Nb extends Va{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Cu(e.It,bE(e.It,this.wa));return new dd(e.path,t)}isEqual(e){return this===e}}function Kw(n,e,t,r){const a=n.da(1,e,t);Gv("Data must be an object, but it was:",a,r);const l=[],d=Mr.empty();mu(r,(E,b)=>{const x=Pg(e,E,t);b=(0,Ut.m9)(b);const R=a.ca(x);if(b instanceof If)l.push(x);else{const z=$s(b,R);null!=z&&(l.push(x),d.set(x,z))}});const y=new qi(l);return new $w(d,y,a.fieldTransforms)}function Mg(n,e,t,r,a,l){const d=n.da(1,e,t),y=[Ng(e,r,t)],E=[a];if(l.length%2!=0)throw new Ne(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let z=0;z<l.length;z+=2)y.push(Ng(e,l[z])),E.push(l[z+1]);const b=[],x=Mr.empty();for(let z=y.length-1;z>=0;--z)if(!Og(b,y[z])){const X=y[z];let he=E[z];he=(0,Ut.m9)(he);const Ue=d.ca(X);if(he instanceof If)b.push(X);else{const He=$s(he,Ue);null!=He&&(b.push(X),x.set(X,He))}}const R=new qi(b);return new $w(x,R,d.fieldTransforms)}function Hv(n,e,t,r=!1){return $s(t,n.da(r?4:3,e))}function $s(n,e){if(kg(n=(0,Ut.m9)(n)))return Gv("Unsupported field value:",e,n),Zw(n,e);if(n instanceof Va)return function(t,r){if(!zw(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(r);a&&r.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const a=[];let l=0;for(const d of t){let y=$s(d,r.aa(l));null==y&&(y={nullValue:"NULL_VALUE"}),a.push(y),l++}return{arrayValue:{values:a}}}(n,e)}return function(t,r){if(null===(t=(0,Ut.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return bE(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=Nn.fromDate(t);return{timestampValue:md(r.It,a)}}if(t instanceof Nn){const a=new Nn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:md(r.It,a)}}if(t instanceof xg)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Vo)return{bytesValue:T0(r.It,t._byteString)};if(t instanceof Tn){const a=r.databaseId,l=t.firestore._databaseId;if(!l.isEqual(a))throw r.ha(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:zh(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${mf(t)}`)}(n,e)}function Zw(n,e){const t={};return s0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mu(n,(r,a)=>{const l=$s(a,e.ra(r));null!=l&&(t[r]=l)}),{mapValue:{fields:t}}}function kg(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Nn||n instanceof xg||n instanceof Vo||n instanceof Tn||n instanceof Va)}function Gv(n,e,t){if(!kg(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=mf(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function Ng(n,e,t){if((e=(0,Ut.m9)(e))instanceof La)return e._internalPath;if("string"==typeof e)return Pg(n,e);throw Rg("Field path arguments must be of type string or ",n,!1,void 0,t)}const XI=new RegExp("[~\\*/\\[\\]]");function Pg(n,e,t){if(e.search(XI)>=0)throw Rg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new La(...e.split("."))._internalPath}catch{throw Rg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Rg(n,e,t,r,a){const l=r&&!r.isEmpty(),d=void 0!==a;let y=`Function ${e}() called with invalid data`;t&&(y+=" (via `toFirestore()`)"),y+=". ";let E="";return(l||d)&&(E+=" (found",l&&(E+=` in field ${r}`),d&&(E+=` in document ${a}`),E+=")"),new Ne(ce.INVALID_ARGUMENT,y+n+E)}function Og(n,e){return n.some(t=>t.isEqual(e))}class Ld{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Tn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Yw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(sc("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Yw extends Ld{data(){return super.data()}}function sc(n,e){return"string"==typeof e?Pg(n,e):e instanceof La?e._internalPath:e._delegate._internalPath}function Fg(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ne(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lg{}function Ba(n,...e){for(const t of e)n=t._apply(n);return n}class JI extends Lg{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=ic(e.firestore),r=function(a,l,d,y,E,b,x){let R;if(E.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Ne(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){qv(x,b);const X=[];for(const he of x)X.push(tC(y,a,he));R={arrayValue:{values:X}}}else R=tC(y,a,x)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||qv(x,b),R=Hv(d,"where",x,"in"===b||"not-in"===b);const z=Hr.create(E,b,R);return function(X,he){if(he.dt()){const He=bp(X);if(null!==He&&!He.isEqual(he.field))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${He.toString()}' and '${he.field.toString()}'`);const Mt=ry(X);null!==Mt&&Kv(0,he.field,Mt)}const Ue=function(He,Mt){for(const zt of He.filters)if(Mt.indexOf(zt.op)>=0)return zt.op;return null}(X,function(He){switch(He){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(he.op));if(null!==Ue)throw new Ne(ce.INVALID_ARGUMENT,Ue===he.op?`Invalid query. You cannot use more than one '${he.op.toString()}' filter.`:`Invalid query. You cannot use '${he.op.toString()}' filters with '${Ue.toString()}' filters.`)}(a,z),z}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new ai(e.firestore,e.converter,function(a,l){const d=a.filters.concat([l]);return new _u(a.path,a.collectionGroup,a.explicitOrderBy.slice(),d,a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}class Vd extends Lg{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,a,l){if(null!==r.startAt)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Ca(a,l);return function(y,E){if(null===ry(y)){const b=bp(y);null!==b&&Kv(0,b,E.field)}}(r,d),d}(e._query,this.ma,this.pa);return new ai(e.firestore,e.converter,function(r,a){const l=r.explicitOrderBy.concat([a]);return new _u(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Wv extends Lg{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new ai(e.firestore,e.converter,Uh(e._query,this.Ia,this.Ta))}}class Xw extends Lg{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=zv(e,this.type,this.Ea,this.Aa);return new ai(e.firestore,e.converter,(a=t,new _u((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,a,r.endAt)));var r,a}}class Jw extends Lg{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=zv(e,this.type,this.Ea,this.Aa);return new ai(e.firestore,e.converter,(a=t,new _u((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,a)));var r,a}}function zv(n,e,t,r){if(t[0]=(0,Ut.m9)(t[0]),t[0]instanceof Ld)return function(a,l,d,y,E){if(!y)throw new Ne(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const b=[];for(const x of ld(a))if(x.field.isKeyField())b.push(vu(l,y.key));else{const R=y.data.field(x.field);if(o0(R))throw new Ne(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===R){const z=x.field.canonicalString();throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${z}' (used as the orderBy) does not exist.`)}b.push(R)}return new Vs(b,E)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const a=ic(n.firestore);return function(l,d,y,E,b,x){const R=l.explicitOrderBy;if(b.length>R.length)throw new Ne(ce.INVALID_ARGUMENT,`Too many arguments provided to ${E}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const z=[];for(let X=0;X<b.length;X++){const he=b[X];if(R[X].field.isKeyField()){if("string"!=typeof he)throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${E}(), but got a ${typeof he}`);if(!y0(l)&&-1!==he.indexOf("/"))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${E}() must be a plain document ID, but '${he}' contains a slash.`);const Ue=l.path.child(Jt.fromString(he));if(!qe.isDocumentKey(Ue))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${E}() must result in a valid document path, but '${Ue}' is not because it contains an odd number of segments.`);const He=new qe(Ue);z.push(vu(d,He))}else{const Ue=Hv(y,E,he);z.push(Ue)}}return new Vs(z,x)}(n._query,n.firestore._databaseId,a,e,t,r)}}function tC(n,e,t){if("string"==typeof(t=(0,Ut.m9)(t))){if(""===t)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!y0(e)&&-1!==t.indexOf("/"))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Jt.fromString(t));if(!qe.isDocumentKey(r))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vu(n,new qe(r))}if(t instanceof Tn)return vu(n,t._key);throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mf(t)}.`)}function qv(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ne(ce.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Kv(n,e,t){if(!t.isEqual(e))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Zv{convertValue(e,t="none"){switch(rd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return er(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Rl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw at()}}convertObject(e,t){const r={};return mu(e.fields,(a,l)=>{r[a]=this.convertValue(l,t)}),r}convertGeoPoint(e){return new xg(er(e.latitude),er(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=$m(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(nd(e));default:return null}}convertTimestamp(e){const t=_a(e);return new Nn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Jt.fromString(e);Tt(UE(r));const a=new yu(r.get(1),r.get(3)),l=new qe(r.popFirst(5));return a.isEqual(t)||or(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function Vg(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class nC extends Zv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tn(this.firestore,null,t)}}class oc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bo extends Ld{constructor(e,t,r,a,l,d){super(e,t,r,a,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Bd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(sc("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Bd extends Bo{data(e={}){return super.data(e)}}class Ua{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new oc(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Bd(this._firestore,this._userDataWriter,r.key,r,new oc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,a){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new Bd(r._firestore,r._userDataWriter,d.doc.key,d.doc,new oc(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>a||3!==d.type).map(d=>{const y=new Bd(r._firestore,r._userDataWriter,d.doc.key,d.doc,new oc(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let E=-1,b=-1;return 0!==d.type&&(E=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),1!==d.type&&(l=l.add(d.doc),b=l.indexOf(d.doc.key)),{type:rC(d.type),doc:y,oldIndex:E,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function rC(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return at()}}function iC(n,e){return n instanceof Bo&&e instanceof Bo?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ua&&e instanceof Ua&&n._firestore===e._firestore&&kv(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class ac extends Zv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tn(this.firestore,null,t)}}function iD(n,e,t){n=Yt(n,Tn);const r=Yt(n.firestore,Fn),a=Vg(n.converter,e,t);return uc(r,[Ef(ic(r),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,Rn.none())])}function sD(n,e,t,...r){n=Yt(n,Tn);const a=Yt(n.firestore,Fn),l=ic(a);let d;return d="string"==typeof(e=(0,Ut.m9)(e))||e instanceof La?Mg(l,"updateDoc",n._key,e,t,r):Kw(l,"updateDoc",n._key,e),uc(a,[d.toMutation(n._key,Rn.exists(!0))])}function Df(n,...e){var t,r,a;n=(0,Ut.m9)(n);let l={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||Vv(e[d])||(l=e[d],d++);const y={includeMetadataChanges:l.includeMetadataChanges};if(Vv(e[d])){const R=e[d];e[d]=null===(t=R.next)||void 0===t?void 0:t.bind(R),e[d+1]=null===(r=R.error)||void 0===r?void 0:r.bind(R),e[d+2]=null===(a=R.complete)||void 0===a?void 0:a.bind(R)}let E,b,x;if(n instanceof Tn)b=Yt(n.firestore,Fn),x=ud(n._key.path),E={next:R=>{e[d]&&e[d](Ud(b,n,R))},error:e[d+1],complete:e[d+2]};else{const R=Yt(n,ai);b=Yt(R.firestore,Fn),x=R._query;const z=new ac(b);E={next:X=>{e[d]&&e[d](new Ua(b,z,R,X))},error:e[d+1],complete:e[d+2]},Fg(n._query)}return function(R,z,X,he){const Ue=new _g(he),He=new ug(z,Ue,X);return R.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return ag(yield Fd(R),He)})),()=>{Ue.bc(),R.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return ov(yield Fd(R),He)}))}}(nr(b),x,y,E)}function uc(n,e){return function(t,r){const a=new pr;return t.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function DI(n,e,t){return dg.apply(this,arguments)}(yield Rv(t),r,a)})),a.promise}(nr(n),e)}function Ud(n,e,t){const r=t.docs.get(e._key),a=new ac(n);return new Bo(n,a,e._key,r,new oc(t.hasPendingWrites,t.fromCache),e.converter)}const Hb={maxAttempts:5};class Bg{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ic(e)}set(e,t,r){this._verifyNotCommitted();const a=ja(e,this._firestore),l=Vg(a.converter,t,r),d=Ef(this._dataReader,"WriteBatch.set",a._key,l,null!==a.converter,r);return this._mutations.push(d.toMutation(a._key,Rn.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const l=ja(e,this._firestore);let d;return d="string"==typeof(t=(0,Ut.m9)(t))||t instanceof La?Mg(this._dataReader,"WriteBatch.update",l._key,t,r,a):Kw(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(d.toMutation(l._key,Rn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ja(e,this._firestore);return this._mutations=this._mutations.concat(new Gl(t._key,Rn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ja(n,e){if((n=(0,Ut.m9)(n)).firestore!==e)throw new Ne(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class uD extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ic(e)}get(e){const t=ja(e,this._firestore),r=new nC(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return at();const l=a[0];if(l.isFoundDocument())return new Ld(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new Ld(this._firestore,r,t._key,null,t.converter);throw at()})}set(e,t,r){const a=ja(e,this._firestore),l=Vg(a.converter,t,r),d=Ef(this._dataReader,"Transaction.set",a._key,l,null!==a.converter,r);return this._transaction.set(a._key,d),this}update(e,t,r,...a){const l=ja(e,this._firestore);let d;return d="string"==typeof(t=(0,Ut.m9)(t))||t instanceof La?Mg(this._dataReader,"Transaction.update",l._key,t,r,a):Kw(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,d),this}delete(e){const t=ja(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ja(e,this._firestore),r=new ac(this._firestore);return super.get(e).then(a=>new Bo(this._firestore,r,t._key,a._document,new oc(!1,!1),t.converter))}}function oC(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function aC(){if(typeof Uint8Array>"u")throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function fD(){if(!function vE(){return typeof atob<"u"}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){ya=ii.SDK_VERSION,(0,ii._registerComponent)(new ss.wA("firestore",(t,{instanceIdentifier:r,options:a})=>{const l=t.getProvider("app").getImmediate(),d=new Fn(new aE(t.getProvider("auth-internal")),new Rh(t.getProvider("app-check-internal")),function(y,E){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new Ne(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yu(y.options.projectId,E)}(l,r),l);return a=Object.assign({useFetchStreams:e},a),d._setSettings(a),d},"PUBLIC").setMultipleInstances(!0)),(0,ii.registerVersion)(Q_,"3.7.3",n),(0,ii.registerVersion)(Q_,"3.7.3","esm2017")}();class bf{constructor(e){this._delegate=e}static fromBase64String(e){return fD(),new bf(Vo.fromBase64String(e))}static fromUint8Array(e){return aC(),new bf(Vo.fromUint8Array(e))}toBase64(){return fD(),this._delegate.toBase64()}toUint8Array(){return aC(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function jg(n){return function uC(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Kb{enableIndexedDbPersistence(e,t){return function Uw(n,e){Ww(n=Yt(n,Fn));const t=nr(n),r=n._freezeSettings(),a=new yg;return jw(t,a,new mg(a,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function $I(n){Ww(n=Yt(n,Fn));const e=nr(n),t=n._freezeSettings(),r=new yg;return jw(e,r,new NI(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function kb(n){if(n._initialized&&!n._terminated)throw new Ne(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new pr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{yield(t=(0,ge.Z)(function*(r){if(!hs.C())return Promise.resolve();const a=r+"main";yield hs.delete(a)}),function(r){return t.apply(this,arguments)})(lf(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class ms{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof yu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&fu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){Pw(this._delegate,e,t,r)}enableNetwork(){return function Uv(n){return function jI(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield Pv(n),t=yield Lw(n);return e.setNetworkEnabled(!0),function(r){const a=Qe(r);return a._u.delete(0),Gs(a)}(t)}))}(nr(n=Yt(n,Fn)))}(this._delegate)}disableNetwork(){return function Hw(n){return function _f(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield Pv(n),t=yield Lw(n);return e.setNetworkEnabled(!1),(r=(0,ge.Z)(function*(a){const l=Qe(a);l._u.add(0),yield Td(l),l.gu.set("Offline")}),function(a){return r.apply(this,arguments)})(t);var r}))}(nr(n=Yt(n,Fn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Mw("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Bv(n){return function(e){const t=new pr;return e.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function AI(n,e){return ff.apply(this,arguments)}(yield Rv(e),t)})),t.promise}(nr(n=Yt(n,Fn)))}(this._delegate)}onSnapshotsInSync(e){return function jb(n,e){return function Lv(n,e){const t=new _g(e);return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield Fd(n),a=t,Qe(r).Ru.add(a),void a.next();var r,a})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield Fd(n),a=t,void Qe(r).Ru.delete(a);var r,a}))}}(nr(n=Yt(n,Fn)),Vv(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Gd(this,Rw(this._delegate,e))}catch(t){throw ui(t,"collection()","Firestore.collection()")}}doc(e){try{return new Di(this,Mv(this._delegate,e))}catch(t){throw ui(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new li(this,function PI(n,e){if(n=Yt(n,yf),Tv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ai(n,null,(t=e,new _u(Jt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ui(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function lD(n,e,t){n=Yt(n,Fn);const r=Object.assign(Object.assign({},Hb),t);return function(a){if(a.maxAttempts<1)throw new Ne(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(a,l,d){const y=new pr;return a.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){const E=yield function Ov(n){return vf(n).then(e=>e.datastore)}(a);new BI(a.asyncQueue,E,d,l,y).run()})),y.promise}(nr(n),a=>e(new uD(n,a)),r)}(this._delegate,t=>e(new lC(this,t)))}batch(){return nr(this._delegate),new Yi(new Bg(this._delegate,e=>uc(this._delegate,e)))}loadBundle(e){return function jv(n,e){const t=nr(n=Yt(n,Fn)),r=new Ag;return function wf(n,e,t,r){const a=function(l,d){let y;return y="string"==typeof l?(new TextEncoder).encode(l):l,E=function(E,b){if(E instanceof Uint8Array)return Ow(E,b);if(E instanceof ArrayBuffer)return Ow(new Uint8Array(E),b);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(y),new OI(E,d);var E}(t,Ad(e));n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){!function Sb(n,e,t){const r=Qe(n);var a;(a=(0,ge.Z)(function*(l,d,y){try{const E=yield d.getMetadata();if(yield function(z,X){const he=Qe(z),Ue=kr(X.createTime);return he.persistence.runTransaction("hasNewerBundle","readonly",He=>he.Ns.getBundleMetadata(He,X.id)).then(He=>!!He&&He.createTime.compareTo(Ue)>=0)}(l.localStore,E))return yield d.close(),y._completeWith({taskState:"Success",documentsLoaded:(z=E).totalDocuments,bytesLoaded:z.totalBytes,totalDocuments:z.totalDocuments,totalBytes:z.totalBytes}),Promise.resolve(new Set);y._updateProgress(av(E));const b=new _I(E,l.localStore,d.It);let x=yield d.mc();for(;x;){const z=yield b.Fu(x);z&&y._updateProgress(z),x=yield d.mc()}const R=yield b.complete();return yield Fa(l,R.Lu,void 0),yield function(z,X){const he=Qe(z);return he.persistence.runTransaction("Save bundle","readwrite",Ue=>he.Ns.saveBundleMetadata(Ue,X))}(l.localStore,E),y._completeWith(R.progress),Promise.resolve(R.Bu)}catch(E){return fu("SyncEngine",`Loading bundle failed with ${E}`),y._failWith(E),Promise.resolve(new Set)}var z}),function(l,d,y){return a.apply(this,arguments)})(r,e,t).then(a=>{r.sharedClientState.notifyBundleLoaded(a)})}(yield Rv(n),a,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function zI(n,e){return function GI(n,e){return n.asyncQueue.enqueue((0,ge.Z)(function*(){return function(t,r){const a=Qe(t);return a.persistence.runTransaction("Get named query","readonly",l=>a.Ns.getNamedQuery(l,r))}(yield Dg(n),e)}))}(nr(n=Yt(n,Fn)),e).then(t=>t?new ai(n,null,t.query):null)}(this._delegate,e).then(t=>t?new li(this,t):null)}}class Hg extends Zv{constructor(e){super(),this.firestore=e}convertBytes(e){return new bf(new Vo(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Di.forKey(t,this.firestore,null)}}class lC{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Hg(e)}get(e){const t=Ru(e);return this._delegate.get(t).then(r=>new jd(this._firestore,new Bo(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const a=Ru(e);return r?(oC("Transaction.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=Ru(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=Ru(e);return this._delegate.delete(t),this}}class Yi{constructor(e){this._delegate=e}set(e,t,r){const a=Ru(e);return r?(oC("WriteBatch.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=Ru(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=Ru(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class lc{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Bd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Hd(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=lc.INSTANCES;let a=r.get(e);a||(a=new WeakMap,r.set(e,a));let l=a.get(t);return l||(l=new lc(e,new Hg(e),t),a.set(t,l)),l}}lc.INSTANCES=new WeakMap;class Di{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Hg(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Di(t,new Tn(t._delegate,r,new qe(e)))}static forKey(e,t,r){return new Di(t,new Tn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Gd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Gd(this.firestore,Rw(this._delegate,e))}catch(t){throw ui(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ut.m9)(e))instanceof Tn&&RI(this._delegate,e)}set(e,t){t=oC("DocumentReference.set",t);try{return t?iD(this._delegate,e,t):iD(this._delegate,e)}catch(r){throw ui(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?sD(this._delegate,e):sD(this._delegate,e,t,...r)}catch(a){throw ui(a,"updateDoc()","DocumentReference.update()")}}delete(){return function Bb(n){return uc(Yt(n.firestore,Fn),[new Gl(n._key,Rn.none())])}(this._delegate)}onSnapshot(...e){const t=cC(e),r=Gg(e,a=>new jd(this.firestore,new Bo(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return Df(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function sC(n){n=Yt(n,Tn);const e=Yt(n.firestore,Fn),t=nr(e),r=new ac(e);return function HI(n,e){const t=new pr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(a,l,d){try{const y=yield function(E,b){const x=Qe(E);return x.persistence.runTransaction("read document","readonly",R=>x.localDocuments.getDocument(R,b))}(a,l);y.isFoundDocument()?d.resolve(y):y.isNoDocument()?d.resolve(null):d.reject(new Ne(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(y){const E=kd(y,`Failed to get document '${l} from cache`);d.reject(E)}}),function(a,l,d){return r.apply(this,arguments)})(yield Dg(n),e,t);var r})),t.promise}(t,n._key).then(a=>new Bo(e,r,n._key,a,new oc(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Ob(n){n=Yt(n,Tn);const e=Yt(n.firestore,Fn);return bg(nr(e),n._key,{source:"server"}).then(t=>Ud(e,n,t))}(this._delegate):function rD(n){n=Yt(n,Tn);const e=Yt(n.firestore,Fn);return bg(nr(e),n._key).then(t=>Ud(e,n,t))}(this._delegate),t.then(r=>new jd(this.firestore,new Bo(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Di(this.firestore,this._delegate.withConverter(e?lc.getInstance(this.firestore,e):null))}}function ui(n,e,t){return n.message=n.message.replace(e,t),n}function cC(n){for(const e of n)if("object"==typeof e&&!jg(e))return e;return{}}function Gg(n,e){var t,r;let a;return a=jg(n[0])?n[0]:jg(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{a.next&&a.next(e(l))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(r=a.complete)||void 0===r?void 0:r.bind(a)}}class jd{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Di(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return iC(this._delegate,e._delegate)}}class Hd extends jd{data(e){const t=this._delegate.data(e);return function oE(n,e){n||at()}(void 0!==t),t}}class li{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Hg(e)}where(e,t,r){try{return new li(this.firestore,Ba(this._delegate,function Qw(n,e,t){const r=e,a=sc("where",n);return new JI(a,r,t)}(e,t,r)))}catch(a){throw ui(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new li(this.firestore,Ba(this._delegate,function eD(n,e="asc"){const t=e,r=sc("orderBy",n);return new Vd(r,t)}(e,t)))}catch(r){throw ui(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new li(this.firestore,Ba(this._delegate,function $v(n){return xv("limit",n),new Wv("limit",n,"F")}(e)))}catch(t){throw ui(t,"limit()","Query.limit()")}}limitToLast(e){try{return new li(this.firestore,Ba(this._delegate,function Pb(n){return xv("limitToLast",n),new Wv("limitToLast",n,"L")}(e)))}catch(t){throw ui(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new li(this.firestore,Ba(this._delegate,function Rb(...n){return new Xw("startAt",n,!0)}(...e)))}catch(t){throw ui(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new li(this.firestore,Ba(this._delegate,function tD(...n){return new Xw("startAfter",n,!1)}(...e)))}catch(t){throw ui(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new li(this.firestore,Ba(this._delegate,function nD(...n){return new Jw("endBefore",n,!1)}(...e)))}catch(t){throw ui(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new li(this.firestore,Ba(this._delegate,function eC(...n){return new Jw("endAt",n,!0)}(...e)))}catch(t){throw ui(t,"endAt()","Query.endAt()")}}isEqual(e){return kv(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Lb(n){n=Yt(n,ai);const e=Yt(n.firestore,Fn),t=nr(e),r=new ac(e);return function Lo(n,e){const t=new pr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(a,l,d){try{const y=yield cf(a,l,!0),E=new ww(l,y.Hi),b=E.Wu(y.documents),x=E.applyChanges(b,!1);d.resolve(x.snapshot)}catch(y){const E=kd(y,`Failed to execute query '${l} against cache`);d.reject(E)}}),function(a,l,d){return r.apply(this,arguments)})(yield Dg(n),e,t);var r})),t.promise}(t,n._query).then(a=>new Ua(e,r,n,a))}(this._delegate):"server"===e?.source?function Vb(n){n=Yt(n,ai);const e=Yt(n.firestore,Fn),t=nr(e),r=new ac(e);return Vw(t,n._query,{source:"server"}).then(a=>new Ua(e,r,n,a))}(this._delegate):function Fb(n){n=Yt(n,ai);const e=Yt(n.firestore,Fn),t=nr(e),r=new ac(e);return Fg(n._query),Vw(t,n._query).then(a=>new Ua(e,r,n,a))}(this._delegate),t.then(r=>new Wg(this.firestore,new Ua(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=cC(e),r=Gg(e,a=>new Wg(this.firestore,new Ua(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return Df(this._delegate,t,r)}withConverter(e){return new li(this.firestore,this._delegate.withConverter(e?lc.getInstance(this.firestore,e):null))}}class dC{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Hd(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Wg{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new li(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Hd(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new dC(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Hd(this._firestore,r))})}isEqual(e){return iC(this._delegate,e._delegate)}}class Gd extends li{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Di(this.firestore,e):null}doc(e){try{return new Di(this.firestore,void 0===e?Mv(this._delegate):Mv(this._delegate,e))}catch(t){throw ui(t,"doc()","CollectionReference.doc()")}}add(e){return function Ub(n,e){const t=Yt(n.firestore,Fn),r=Mv(n),a=Vg(n.converter,e);return uc(t,[Ef(ic(n.firestore),"addDoc",r._key,a,null!==n.converter,{}).toMutation(r._key,Rn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Di(this.firestore,t))}isEqual(e){return RI(this._delegate,e._delegate)}withConverter(e){return new Gd(this.firestore,this._delegate.withConverter(e?lc.getInstance(this.firestore,e):null))}}function Ru(n){return Yt(n,Tn)}class Qv{constructor(...e){this._delegate=new La(...e)}static documentId(){return new Qv(jn.keyField().canonicalString())}isEqual(e){return(e=(0,Ut.m9)(e))instanceof La&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ha{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Wb(){return new Pu("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ha(e)}static delete(){const e=function Gb(){return new If("deleteField")}();return e._methodName="FieldValue.delete",new Ha(e)}static arrayUnion(...e){const t=function $b(...n){return new YI("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ha(t)}static arrayRemove(...e){const t=function cD(...n){return new QI("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ha(t)}static increment(e){const t=function Ug(n){return new Nb("increment",n)}(e);return t._methodName="FieldValue.increment",new Ha(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Ou={Firestore:ms,GeoPoint:xg,Timestamp:Nn,Blob:bf,Transaction:lC,WriteBatch:Yi,DocumentReference:Di,DocumentSnapshot:jd,Query:li,QueryDocumentSnapshot:Hd,QuerySnapshot:Wg,CollectionReference:Gd,FieldPath:Qv,FieldValue:Ha,setLogLevel:function Yv(n){!function Bm(n){$i.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function Xv(n){(function hC(n,e){n.INTERNAL.registerComponent(new ss.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(r,a)},"PUBLIC").setServiceProps(Object.assign({},Ou)))})(n,(e,t)=>new ms(e,t,new Kb)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(ul.Z);var Uo=V(7579),pD=V(6451),Jv=V(5363),fC=V(8421);function cc(n,e){return(0,pi.e)((t,r)=>{let a=null,l=0,d=!1;const y=()=>d&&!a&&r.complete();t.subscribe((0,ur.x)(r,E=>{a?.unsubscribe();let b=0;const x=l++;(0,fC.Xf)(n(E,x)).subscribe(a=(0,ur.x)(r,R=>r.next(e?e(E,R,x,b++):R),()=>{a=null,y()}))},()=>{d=!0,y()}))})}var gD=V(6063);class mD extends Uo.x{constructor(e=1/0,t=1/0,r=gD.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:a,_timestampProvider:l,_windowTime:d}=this;t||(r.push(e),!a&&r.push(l.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:a}=this,l=a.slice();for(let d=0;d<l.length&&!e.closed;d+=r?1:2)e.next(l[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:a}=this,l=(a?1:2)*e;if(e<1/0&&l<r.length&&r.splice(0,r.length-l),!a){const d=t.now();let y=0;for(let E=1;E<r.length&&r[E]<=d;E+=2)y=E;y&&r.splice(0,y+1)}}}var pC=V(3099);function yD(n,e,t){let r,a=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:a=!1,scheduler:t}=n):r=n??1/0,(0,pC.B)({connector:()=>new mD(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}const mC=(0,V(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var yC=V(515);function Zb(n){return n<=0?()=>yC.E:(0,pi.e)((e,t)=>{let r=0;e.subscribe((0,ur.x)(t,a=>{++r<=n&&(t.next(a),n<=r&&t.complete())}))})}function e_(n){return(0,pi.e)((e,t)=>{let r=!1;e.subscribe((0,ur.x)(t,a=>{r=!0,t.next(a)},()=>{r||t.next(n),t.complete()}))})}function vC(n=_C){return(0,pi.e)((e,t)=>{let r=!1;e.subscribe((0,ur.x)(t,a=>{r=!0,t.next(a)},()=>r?t.complete():t.error(n())))})}function _C(){return new mC}var CC=V(576);function t_(n,e){return(0,CC.m)(e)?cc(()=>n,e):cc(()=>n)}var Af=V(9468),jo=V(5867);class dc{constructor(e){return e}}class EC{constructor(){return(0,jo.C6)()}}const n_=new g.OlP("angularfire2._apps"),_D={provide:dc,useFactory:function IC(n){return n&&1===n.length?n[0]:new dc((0,jo.Mq)())},deps:[[new g.FiY,n_]]},Yb={provide:EC,deps:[[new g.FiY,n_]]};function Qb(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new dc(r)}}let DC=(()=>{class n{constructor(t){(0,jo.KN)("angularfire",en.q4.full,"core"),(0,jo.KN)("angularfire",en.q4.full,"app"),(0,jo.KN)("angular",g.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.Lbi))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[_D,Yb]}),n})();function wD(n,...e){return{ngModule:DC,providers:[{provide:n_,useFactory:Qb(n),multi:!0,deps:[g.R0b,g.zs3,en.HU,...e]}]}}const eA=(0,en.u3)(jo.ZF,!0),r_=new Map,Tf={activated:!1,tokenObservers:[]},CD={initialized:!1,enabled:!1};function Gr(n){return r_.get(n)||Object.assign({},Tf)}function Ho(){return CD}class qg{constructor(e,t,r,a,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=a,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=a,a>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ge.Z)(function*(){t.stop();try{t.pending=new Ut.BH,yield function tA(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Ut.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const bi=new Ut.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function u_(n){if(!Gr(n).activated)throw bi.create("use-before-activation",{appName:n.name})}function c_(n,e){return d_.apply(this,arguments)}function d_(){return d_=(0,ge.Z)(function*({url:n,body:e},t){var r,a;const l={"Content-Type":"application/json"},d=t.getImmediate({optional:!0});if(d){const X=yield d.getHeartbeatsHeader();X&&(l["X-Firebase-Client"]=X)}const y={method:"POST",body:JSON.stringify(e),headers:l};let E,b;try{E=yield fetch(n,y)}catch(X){throw bi.create("fetch-network-error",{originalErrorMessage:null===(r=X)||void 0===r?void 0:r.message})}if(200!==E.status)throw bi.create("fetch-status-error",{httpStatus:E.status});try{b=yield E.json()}catch(X){throw bi.create("fetch-parse-error",{originalErrorMessage:null===(a=X)||void 0===a?void 0:a.message})}const x=b.ttl.match(/^([\d.]+)(s)$/);if(!x||!x[2]||isNaN(Number(x[1])))throw bi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${b.ttl}`});const R=1e3*Number(x[1]),z=Date.now();return{token:b.token,expireTimeMillis:z+R,issuedAtTimeMillis:z}}),d_.apply(this,arguments)}function SC(n,e){const{projectId:t,appId:r,apiKey:a}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${a}`,body:{debug_token:e}}}const Wd="firebase-app-check-store";let h_=null;function f_(){return h_||(h_=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=a=>{n(a.target.result)},r.onerror=a=>{var l;e(bi.create("storage-open",{originalErrorMessage:null===(l=a.target.error)||void 0===l?void 0:l.message}))},r.onupgradeneeded=a=>{0===a.oldVersion&&a.target.result.createObjectStore(Wd,{keyPath:"compositeKey"})}}catch(r){e(bi.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),h_)}function g_(){return g_=(0,ge.Z)(function*(n,e){const r=(yield f_()).transaction(Wd,"readwrite"),l=r.objectStore(Wd).put({compositeKey:n,value:e});return new Promise((d,y)=>{l.onsuccess=E=>{d()},r.onerror=E=>{var b;y(bi.create("storage-set",{originalErrorMessage:null===(b=E.target.error)||void 0===b?void 0:b.message}))}})}),g_.apply(this,arguments)}const Yg=new xr.Yd("@firebase/app-check");function kC(n,e){return(0,Ut.hl)()?function bD(n,e){return function TD(n,e){return g_.apply(this,arguments)}(function SD(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Yg.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function MD(){return Ho().enabled}function kD(){return PC.apply(this,arguments)}function PC(){return PC=(0,ge.Z)(function*(){const n=Ho();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),PC.apply(this,arguments)}const oA={error:"UNKNOWN_ERROR"};function i(n){return Ut.US.encodeString(JSON.stringify(n),!1)}function s(n){return o.apply(this,arguments)}function o(){return o=(0,ge.Z)(function*(n,e=!1){const t=n.app;u_(t);const r=Gr(t);let l,a=r.token;if(a&&!C(a)&&(r.token=void 0,a=void 0),!a){const E=yield r.cachedTokenPromise;E&&(C(E)?a=E:yield kC(t,void 0))}if(!e&&a&&C(a))return{token:a.token};let y,d=!1;if(MD()){r.exchangeTokenPromise||(r.exchangeTokenPromise=c_(SC(t,yield kD()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),d=!0);const E=yield r.exchangeTokenPromise;return yield kC(t,E),r.token=E,{token:E.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),d=!0),a=yield Gr(t).exchangeTokenPromise}catch(E){"appCheck/throttled"===E.code?Yg.warn(E.message):Yg.error(E),l=E}return a?l?y=C(a)?{token:a.token,internalError:l}:A(l):(y={token:a.token},r.token=a,yield kC(t,a)):y=A(l),d&&_(t,y),y}),o.apply(this,arguments)}function c(n,e){const t=Gr(n),r=t.tokenObservers.filter(a=>a.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function h(n){const{app:e}=n,t=Gr(e);let r=t.tokenRefresher;r||(r=function m(n){const{app:e}=n;return new qg((0,ge.Z)(function*(){let r;if(r=Gr(e).token?yield s(n,!0):yield s(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Gr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function _(n,e){const t=Gr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function C(n){return n.expireTimeMillis-Date.now()>0}function A(n){return{token:i(oA),error:n}}class k{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Gr(this.app);for(const t of e)c(this.app,t.next);return Promise.resolve()}}const aA="app-check-internal";!function WT(){(0,ii._registerComponent)(new ss.wA("app-check",n=>function F(n,e){return new k(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(aA).initialize()})),(0,ii._registerComponent)(new ss.wA(aA,n=>function W(n){return{getToken:e=>s(n,e),addTokenListener:e=>function u(n,e,t,r){const{app:a}=n,l=Gr(a);if(l.tokenObservers=[...l.tokenObservers,{next:t,error:r,type:e}],l.token&&C(l.token)){const y=l.token;Promise.resolve().then(()=>{t({token:y.token}),h(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>h(n))}(n,"INTERNAL",e),removeTokenListener:e=>c(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ii.registerVersion)("@firebase/app-check","0.5.17")}();class OC{constructor(){return(0,en.vb)("app-check")}}typeof window<"u"&&window;var lA=V(127);const cA=new g.OlP("angularfire2.auth.use-emulator"),dA=new g.OlP("angularfire2.auth.settings"),hA=new g.OlP("angularfire2.auth.tenant-id"),fA=new g.OlP("angularfire2.auth.langugage-code"),pA=new g.OlP("angularfire2.auth.use-device-language"),gA=new g.OlP("angularfire.auth.persistence"),mA=(n,e,t,r,a,l,d,y)=>(0,_r.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const E=e.runOutsideAngular(()=>n.auth());if(t&&E.useEmulator(...t),r&&(E.tenantId=r),E.languageCode=a,l&&E.useDeviceLanguage(),d)for(const[b,x]of Object.entries(d))E.settings[b]=x;return y&&E.setPersistence(y),E},[t,r,a,l,d,y]);let yA=(()=>{class n{constructor(t,r,a,l,d,y,E,b,x,R,z,X){const he=new Uo.x,Ue=Sr(void 0).pipe((0,Jv.Q)(d.outsideAngular),cc(()=>l.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,5881)))),(0,lr.U)(()=>(0,_r.on)(t,l,r)),(0,lr.U)(He=>mA(He,l,y,b,x,R,E,z)),yD({bufferSize:1,refCount:!1}));if(Js(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Sr(null);else{Ue.pipe(function wC(n,e){const t=arguments.length>=2;return r=>r.pipe(n?uu((a,l)=>n(a,l,r)):ji.y,Zb(1),t?e_(e):vC(()=>new mC))}()).subscribe();const Mt=Ue.pipe(cc(Vt=>Vt.getRedirectResult().then(Ot=>Ot,()=>null)),en.iC,yD({bufferSize:1,refCount:!1})),zt=Ue.pipe(cc(Vt=>new Co.y(Ot=>({unsubscribe:l.runOutsideAngular(()=>Vt.onAuthStateChanged(qt=>Ot.next(qt),qt=>Ot.error(qt),()=>Ot.complete()))})))),Ht=Ue.pipe(cc(Vt=>new Co.y(Ot=>({unsubscribe:l.runOutsideAngular(()=>Vt.onIdTokenChanged(qt=>Ot.next(qt),qt=>Ot.error(qt),()=>Ot.complete()))}))));this.authState=Mt.pipe(t_(zt),(0,Af.R)(d.outsideAngular),(0,Jv.Q)(d.insideAngular)),this.user=Mt.pipe(t_(Ht),(0,Af.R)(d.outsideAngular),(0,Jv.Q)(d.insideAngular)),this.idToken=this.user.pipe(cc(Vt=>Vt?(0,fi.D)(Vt.getIdToken()):Sr(null))),this.idTokenResult=this.user.pipe(cc(Vt=>Vt?(0,fi.D)(Vt.getIdTokenResult()):Sr(null))),this.credential=(0,pD.T)(Mt,he,this.authState.pipe(uu(Vt=>!Vt))).pipe((0,lr.U)(Vt=>Vt?.user?Vt:null),(0,Af.R)(d.outsideAngular),(0,Jv.Q)(d.insideAngular))}return(0,_r.pX)(this,Ue,l,{spy:{apply:(He,Mt,zt)=>{(He.startsWith("signIn")||He.startsWith("createUser"))&&zt.then(Ht=>he.next(Ht))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(_r.Dh),g.LFG(_r.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(en.HU),g.LFG(cA,8),g.LFG(dA,8),g.LFG(hA,8),g.LFG(fA,8),g.LFG(pA,8),g.LFG(gA,8),g.LFG(OC,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function vA(n,e){return function YT(n,e=ou.z){return new Co.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function OD(n,e){return vA(n,e).pipe((0,lr.U)(t=>({payload:t,type:"query"})))}function FC(n,e){return OD(n,e).pipe(ol(void 0),au(),(0,lr.U)(([t,r])=>{const a=r.payload.docChanges(),l=a.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,y)=>{const E=a.find(x=>x.doc.ref.isEqual(d.ref)),b=t?.payload.docs.find(x=>x.ref.isEqual(d.ref));E&&JSON.stringify(E.doc.metadata)===JSON.stringify(d.metadata)||!E&&b&&JSON.stringify(b.metadata)===JSON.stringify(d.metadata)||l.push({type:"modified",payload:{oldIndex:y,newIndex:y,type:"modified",doc:d}})}),l}))}function _A(n,e,t){return FC(n,t).pipe(da((r,a)=>function XT(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function JT(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return FD(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return FD(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return FD(n,e.oldIndex,1)}return n}(n,r))}),n}(r,a.map(l=>l.payload),e),[]),function Rc(n,e=ji.y){return n=n??al,(0,pi.e)((t,r)=>{let a,l=!0;t.subscribe((0,ur.x)(r,d=>{const y=e(d);(l||!n(a,y))&&(l=!1,a=y,r.next(d))}))})}(),(0,lr.U)(r=>r.map(a=>({type:a.type,payload:a}))))}function FD(n,e,t,...r){const a=n.slice();return a.splice(e,t,...r),a}function wA(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class CA{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=FC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,lr.U)(r=>r.filter(a=>e.indexOf(a.type)>-1)))),t.pipe(ol(void 0),au(),uu(([r,a])=>a.length>0||!r),(0,lr.U)(([r,a])=>a),en.iC)}auditTrail(e){return this.stateChanges(e).pipe(da((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=wA(e);return _A(this.query,t,this.afs.schedulers.outsideAngular).pipe(en.iC)}valueChanges(e={}){return OD(this.query,this.afs.schedulers.outsideAngular).pipe((0,lr.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),en.iC)}get(e){return(0,fi.D)(this.query.get(e)).pipe(en.iC)}add(e){return this.ref.add(e)}doc(e){return new EA(this.ref.doc(e),this.afs)}}class EA{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:a,query:l}=bA(r,t);return new CA(a,l,this.afs)}snapshotChanges(){return function QT(n,e){return vA(n,e).pipe(ol(void 0),au(),(0,lr.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(en.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,lr.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,fi.D)(this.ref.get(e)).pipe(en.iC)}}class eS{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?FC(this.query,this.afs.schedulers.outsideAngular).pipe((0,lr.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),uu(t=>t.length>0),en.iC):FC(this.query,this.afs.schedulers.outsideAngular).pipe(en.iC)}auditTrail(e){return this.stateChanges(e).pipe(da((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=wA(e);return _A(this.query,t,this.afs.schedulers.outsideAngular).pipe(en.iC)}valueChanges(e={}){return OD(this.query,this.afs.schedulers.outsideAngular).pipe((0,lr.U)(r=>r.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),en.iC)}get(e){return(0,fi.D)(this.query.get(e)).pipe(en.iC)}}const IA=new g.OlP("angularfire2.enableFirestorePersistence"),DA=new g.OlP("angularfire2.firestore.persistenceSettings"),tS=new g.OlP("angularfire2.firestore.settings"),nS=new g.OlP("angularfire2.firestore.use-emulator");function bA(n,e=(t=>t)){return{query:e(n),ref:n}}let AA=(()=>{class n{constructor(t,r,a,l,d,y,E,b,x,R,z,X,he,Ue,He,Mt,zt){this.schedulers=E;const Ht=(0,_r.on)(t,y,r),Vt=x;R&&mA(Ht,y,z,he,Ue,He,X,Mt),[this.firestore,this.persistenceEnabled$]=(0,_r.cc)(`${Ht.name}.firestore`,"AngularFirestore",Ht.name,()=>{const Ot=y.runOutsideAngular(()=>Ht.firestore());if(l&&Ot.settings(l),Vt&&Ot.useEmulator(...Vt),a&&!Js(d)){const qt=()=>{try{return(0,fi.D)(Ot.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(Nr){return typeof console<"u"&&console.warn(Nr),Sr(!1)}};return[Ot,y.runOutsideAngular(qt)]}return[Ot,Sr(!1)]},[l,Vt,a])}collection(t,r){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:d}=bA(a,r),y=this.schedulers.ngZone.run(()=>l);return new CA(y,d,this)}collectionGroup(t,r){const a=r||(d=>d),l=this.firestore.collectionGroup(t);return new eS(a(l),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>r);return new EA(a,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(_r.Dh),g.LFG(_r.xv,8),g.LFG(IA,8),g.LFG(tS,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(en.HU),g.LFG(DA,8),g.LFG(nS,8),g.LFG(yA,8),g.LFG(cA,8),g.LFG(dA,8),g.LFG(hA,8),g.LFG(fA,8),g.LFG(pA,8),g.LFG(gA,8),g.LFG(OC,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),rS=(()=>{class n{constructor(){lA.Z.registerVersion("angularfire",en.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:IA,useValue:!0},{provide:DA,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[AA]}),n})();const{isArray:iS}=Array,{getPrototypeOf:sS,prototype:oS,keys:aS}=Object;const{isArray:cS}=Array;function fS(n,e){return n.reduce((t,r,a)=>(t[r]=e[a],t),{})}let TA=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=a=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n}),n})(),Sf=(()=>{class n extends TA{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const Fu=new g.OlP("NgValueAccessor"),mS={provide:Fu,useExisting:(0,g.Gpc)(()=>LC),multi:!0},vS=new g.OlP("CompositionEventMode");let LC=(()=>{class n extends TA{constructor(t,r,a){super(t,r),this._compositionMode=a,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function yS(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(vS,8))},n.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(l){return r._handleInput(l.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(l){return r._compositionEnd(l.target.value)})},features:[g._Bn([mS]),g.qOj]}),n})();const Ai=new g.OlP("NgValidators"),zd=new g.OlP("NgAsyncValidators");function VA(n){return null!=n}function BA(n){return(0,g.QGY)(n)?(0,fi.D)(n):n}function UA(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function jA(n,e){return e.map(t=>t(n))}function HA(n){return n.map(e=>function CS(n){return!n.validate}(e)?e:t=>e.validate(t))}function LD(n){return null!=n?function GA(n){if(!n)return null;const e=n.filter(VA);return 0==e.length?null:function(t){return UA(jA(t,e))}}(HA(n)):null}function WA(n){if(!n)return null;const e=n.filter(VA);return 0==e.length?null:function(t){return function pS(...n){const e=(0,Xn.jO)(n),{args:t,keys:r}=function uS(n){if(1===n.length){const e=n[0];if(iS(e))return{args:e,keys:null};if(function lS(n){return n&&"object"==typeof n&&sS(n)===oS}(e)){const t=aS(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n),a=new Co.y(l=>{const{length:d}=t;if(!d)return void l.complete();const y=new Array(d);let E=d,b=d;for(let x=0;x<d;x++){let R=!1;(0,fC.Xf)(t[x]).subscribe((0,ur.x)(l,z=>{R||(R=!0,b--),y[x]=z},()=>E--,void 0,()=>{(!E||!R)&&(b||l.next(r?fS(r,y):y),l.complete())}))}});return e?a.pipe(function hS(n){return(0,lr.U)(e=>function dS(n,e){return cS(e)?n(...e):n(e)}(n,e))}(e)):a}(jA(t,e).map(BA)).pipe((0,lr.U)(UA))}}function VD(n){return null!=n?WA(HA(n)):null}function $A(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function BD(n){return n?Array.isArray(n)?n:[n]:[]}function BC(n,e){return Array.isArray(n)?n.includes(e):n===e}function KA(n,e){const t=BD(e);return BD(n).forEach(a=>{BC(t,a)||t.push(a)}),t}function ZA(n,e){return BD(e).filter(t=>!BC(n,t))}class YA{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=LD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=VD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Qi extends YA{get formDirective(){return null}get path(){return null}}class qd extends YA{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let XA=(()=>{class n extends class QA{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(qd,2))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[g.qOj]}),n})();const w_="VALID",jC="INVALID",nm="PENDING",C_="DISABLED";function eT(n){return Array.isArray(n)?LD(n):n||null}function tT(n){return Array.isArray(n)?VD(n):n||null}function HC(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function E_(n,e){(function zD(n,e){const t=function zA(n){return n._rawValidators}(n);null!==e.validator?n.setValidators($A(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function qA(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators($A(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const a=()=>n.updateValueAndValidity();$C(e._rawValidators,a),$C(e._rawAsyncValidators,a)})(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function kS(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&sT(n,e)})}(n,e),function PS(n,e){const t=(r,a)=>{e.valueAccessor.writeValue(r),a&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function NS(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&sT(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function MS(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function $C(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function sT(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function lT(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function cT(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const jS={provide:qd,useExisting:(0,g.Gpc)(()=>YD)},pT=(()=>Promise.resolve())();let YD=(()=>{class n extends qd{constructor(t,r,a,l,d){super(),this._changeDetectorRef=d,this.control=new class extends class iT{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=eT(this._rawValidators),this._composedAsyncValidatorFn=tT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===w_}get invalid(){return this.status===jC}get pending(){return this.status==nm}get disabled(){return this.status===C_}get enabled(){return this.status!==C_}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=eT(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=tT(e)}addValidators(e){this.setValidators(KA(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(KA(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ZA(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ZA(e,this._rawAsyncValidators))}hasValidator(e){return BC(this._rawValidators,e)}hasAsyncValidator(e){return BC(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=nm,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=C_,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=w_,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===w_||this.status===nm)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?C_:w_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=nm,this._hasOwnPendingAsyncValidator=!0;const t=BA(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,a)=>r&&r._find(a),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?C_:this.errors?jC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(nm)?nm:this._anyControlsHaveStatus(jC)?jC:w_}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){HC(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}{constructor(e=null,t,r){super(function GD(n){return(HC(n)?n.validators:n)||null}(t),function WD(n,e){return(HC(e)?e.asyncValidators:n)||null}(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),HC(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=cT(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){lT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){lT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){cT(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},this._registered=!1,this.update=new g.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(a),this.valueAccessor=function KD(n,e){if(!e)return null;let t,r,a;return Array.isArray(e),e.forEach(l=>{l.constructor===LC?t=l:function FS(n){return Object.getPrototypeOf(n.constructor)===Sf}(l)?r=l:a=l}),a||r||t||null}(0,l)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function qD(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){E_(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){pT.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,a=0!==r&&(0,g.D6c)(r);pT.then(()=>{a&&!this.control.disabled?this.control.disable():!a&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function GC(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Qi,9),g.Y36(Ai,10),g.Y36(zd,10),g.Y36(Fu,10),g.Y36(g.sBO,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([jS]),g.qOj,g.TTD]}),n})(),mT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})(),hx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[mT]}),n})(),fx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[hx]}),n})();function gx(n,e){if(1&n&&(g.TgZ(0,"div")(1,"span",4),g._uU(2),g.ALo(3,"date"),g.qZA(),g.TgZ(4,"span"),g._uU(5),g.qZA()()),2&n){const t=e.$implicit;g.xp6(2),g.Oqu(g.xi3(3,2,t.timestamp.toDate(),"medium")),g.xp6(3),g.hij(" ",t.searchQuery,"")}}let mx=(()=>{class n{constructor(t){this.firestore=t,this.title="countryTrivia",this.name=localStorage.getItem("name"),this.searchQuery="",this.searchArray=[],this.getMessages().subscribe(r=>this.searchArray=r)}getMessages(){return this.firestore.collection("searchQueries",t=>t.orderBy("timestamp")).valueChanges()}sendQuery(){this.firestore.collection("searchQueries").add({name:this.name,searchQuery:this.name+": "+this.searchQuery,timestamp:new lA.Z.firestore.Timestamp(Date.now()/1e3,0)}),this.searchQuery=""}saveName(){localStorage.setItem("name",this.name)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(AA))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:16,vars:3,consts:[["type","text",3,"ngModel","ngModelChange"],["type","text","placeholder","Search","id","searchInput",3,"ngModel","keyup.enter","ngModelChange"],[3,"click"],[4,"ngFor","ngForOf"],["id","time"]],template:function(t,r){1&t&&(g.TgZ(0,"h1"),g._uU(1,"Country Trivia"),g.qZA(),g.TgZ(2,"header")(3,"span"),g._uU(4,"Name: "),g.qZA(),g.TgZ(5,"input",0),g.NdJ("ngModelChange",function(l){return r.name=l})("ngModelChange",function(){return r.saveName()}),g.qZA(),g._UZ(6,"br")(7,"br"),g.TgZ(8,"input",1),g.NdJ("keyup.enter",function(){return r.sendQuery()})("ngModelChange",function(l){return r.searchQuery=l}),g.qZA(),g._uU(9," \xa0 "),g.TgZ(10,"button",2),g.NdJ("click",function(){return r.sendQuery()}),g._uU(11,"Search"),g.qZA(),g._UZ(12,"br"),g.qZA(),g.TgZ(13,"div"),g._UZ(14,"hr"),g.YNc(15,gx,6,5,"div",3),g.qZA()),2&t&&(g.xp6(5),g.Q6J("ngModel",r.name),g.xp6(3),g.Q6J("ngModel",r.searchQuery),g.xp6(7),g.Q6J("ngForOf",r.searchArray))},dependencies:[Xi,LC,XA,YD,ju],styles:["header[_ngcontent-%COMP%]{position:sticky;top:0;padding:10px;width:25%;height:auto;background-color:#708090;color:#fff}#time[_ngcontent-%COMP%]{font-size:x-small;color:gray}#messageInput[_ngcontent-%COMP%]{width:500px;justify-content:center}"]}),n})();class Kd{constructor(e,t,r,a){this.r=e,this.g=t,this.b=r,this.a=a}}class rb{constructor(e,t,r,a){this.h=e,this.s=t,this.v=r,this.a=a}}class rm{constructor(e,t,r,a){this.h=e,this.s=t,this.l=r,this.a=a}}class qC{constructor(e,t,r,a,l=1){this.c=e,this.m=t,this.y=r,this.k=a,this.a=l}}let Px=(()=>{class n{constructor(){this.active=null}setActive(t){this.active&&this.active!==t&&"inline"!==this.active.cpDialogDisplay&&this.active.closeDialog(),this.active=t}hsva2hsla(t){const r=t.h,a=t.s,l=t.v,d=t.a;if(0===l)return new rm(r,0,0,d);if(0===a&&1===l)return new rm(r,1,1,d);{const y=l*(2-a)/2;return new rm(r,l*a/(1-Math.abs(2*y-1)),y,d)}}hsla2hsva(t){const r=Math.min(t.h,1),a=Math.min(t.s,1),l=Math.min(t.l,1),d=Math.min(t.a,1);if(0===l)return new rb(r,0,0,d);{const y=l+a*(1-Math.abs(2*l-1))/2;return new rb(r,2*(y-l)/y,y,d)}}hsvaToRgba(t){let r,a,l;const d=t.h,y=t.s,E=t.v,b=t.a,x=Math.floor(6*d),R=6*d-x,z=E*(1-y),X=E*(1-R*y),he=E*(1-(1-R)*y);switch(x%6){case 0:r=E,a=he,l=z;break;case 1:r=X,a=E,l=z;break;case 2:r=z,a=E,l=he;break;case 3:r=z,a=X,l=E;break;case 4:r=he,a=z,l=E;break;case 5:r=E,a=z,l=X;break;default:r=0,a=0,l=0}return new Kd(r,a,l,b)}cmykToRgb(t){return new Kd((1-t.c)*(1-t.k),(1-t.m)*(1-t.k),(1-t.y)*(1-t.k),t.a)}rgbaToCmyk(t){const r=1-Math.max(t.r,t.g,t.b);return 1===r?new qC(0,0,0,1,t.a):new qC((1-t.r-r)/(1-r),(1-t.g-r)/(1-r),(1-t.b-r)/(1-r),r,t.a)}rgbaToHsva(t){let r,a;const l=Math.min(t.r,1),d=Math.min(t.g,1),y=Math.min(t.b,1),E=Math.min(t.a,1),b=Math.max(l,d,y),x=Math.min(l,d,y),R=b,z=b-x;if(a=0===b?0:z/b,b===x)r=0;else{switch(b){case l:r=(d-y)/z+(d<y?6:0);break;case d:r=(y-l)/z+2;break;case y:r=(l-d)/z+4;break;default:r=0}r/=6}return new rb(r,a,R,E)}rgbaToHex(t,r){let a="#"+(16777216|t.r<<16|t.g<<8|t.b).toString(16).substr(1);return r&&(a+=(256|Math.round(255*t.a)).toString(16).substr(1)),a}normalizeCMYK(t){return new qC(t.c/100,t.m/100,t.y/100,t.k/100,t.a)}denormalizeCMYK(t){return new qC(Math.floor(100*t.c),Math.floor(100*t.m),Math.floor(100*t.y),Math.floor(100*t.k),t.a)}denormalizeRGBA(t){return new Kd(Math.round(255*t.r),Math.round(255*t.g),Math.round(255*t.b),t.a)}stringToHsva(t="",r=!1){let a=null;t=(t||"").toLowerCase();const l=[{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(d){return new Kd(parseInt(d[2],10)/255,parseInt(d[3],10)/255,parseInt(d[4],10)/255,isNaN(parseFloat(d[5]))?1:parseFloat(d[5]))}},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(d){return new rm(parseInt(d[2],10)/360,parseInt(d[3],10)/100,parseInt(d[4],10)/100,isNaN(parseFloat(d[5]))?1:parseFloat(d[5]))}}];l.push(r?{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,parse:function(d){return new Kd(parseInt(d[1],16)/255,parseInt(d[2],16)/255,parseInt(d[3],16)/255,parseInt(d[4]||"FF",16)/255)}}:{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:function(d){return new Kd(parseInt(d[1],16)/255,parseInt(d[2],16)/255,parseInt(d[3],16)/255,1)}}),l.push({re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:function(d){return new Kd(parseInt(d[1]+d[1],16)/255,parseInt(d[2]+d[2],16)/255,parseInt(d[3]+d[3],16)/255,1)}});for(const d in l)if(l.hasOwnProperty(d)){const y=l[d],E=y.re.exec(t),b=E&&y.parse(E);if(b)return b instanceof Kd?a=this.rgbaToHsva(b):b instanceof rm&&(a=this.hsla2hsva(b)),a}return a}outputFormat(t,r,a){switch("auto"===r&&(r=t.a<1?"rgba":"hex"),r){case"hsla":const l=this.hsva2hsla(t),d=new rm(Math.round(360*l.h),Math.round(100*l.s),Math.round(100*l.l),Math.round(100*l.a)/100);return t.a<1||"always"===a?"hsla("+d.h+","+d.s+"%,"+d.l+"%,"+d.a+")":"hsl("+d.h+","+d.s+"%,"+d.l+"%)";case"rgba":const y=this.denormalizeRGBA(this.hsvaToRgba(t));return t.a<1||"always"===a?"rgba("+y.r+","+y.g+","+y.b+","+Math.round(100*y.a)/100+")":"rgb("+y.r+","+y.g+","+y.b+")";default:const E="always"===a||"forced"===a;return this.rgbaToHex(this.denormalizeRGBA(this.hsvaToRgba(t)),E)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();typeof window<"u"&&window;let Rx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[Px],imports:[Qd]}),n})();const RT_firebase={projectId:"cs336-finalproject-1fd79",appId:"1:943195271889:web:ca9266957800b526038bf0",storageBucket:"cs336-finalproject-1fd79.appspot.com",locationId:"us-central",apiKey:"AIzaSyALf42FcdUiLWHJ1c_eKGneoRH4fJPAuaw",authDomain:"cs336-finalproject-1fd79.firebaseapp.com",messagingSenderId:"943195271889",measurementId:"G-QWN3LVTWC5"};V(8247);class FT{constructor(){return(0,en.vb)("auth")}}class ob{constructor(e){return e}}const LT="firestore",ab=new g.OlP("angularfire2.firestore-instances");function Ux(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new ob(r)}}const jx={provide:class Vx{constructor(){return(0,en.vb)(LT)}},deps:[[new g.FiY,ab]]},Hx={provide:ob,useFactory:function Bx(n,e){const t=(0,en.JM)(LT,n,e);return t&&new ob(t)},deps:[[new g.FiY,ab],dc]};let Gx=(()=>{class n{constructor(){(0,jo.KN)("angularfire",en.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[Hx,jx]}),n})();function Wx(n,...e){return{ngModule:Gx,providers:[{provide:ab,useFactory:Ux(n),multi:!0,deps:[g.R0b,g.zs3,en.HU,EC,[new g.FiY,FT],[new g.FiY,OC],...e]}]}}const $x=(0,en.u3)(Bw,!0),zx={projectId:"cs336-finalproject-1fd79",appId:"1:943195271889:web:ca9266957800b526038bf0",storageBucket:"cs336-finalproject-1fd79.appspot.com",apiKey:"AIzaSyALf42FcdUiLWHJ1c_eKGneoRH4fJPAuaw",authDomain:"cs336-finalproject-1fd79.firebaseapp.com",messagingSenderId:"943195271889",measurementId:"G-QWN3LVTWC5"};let qx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[mx]}),n.\u0275inj=g.cJS({imports:[ho,_r.hO.initializeApp(zx),rS,fx,Rx,wD(()=>eA(RT_firebase)),Wx(()=>$x())]}),n})();(0,g.G48)(),la().bootstrapModule(qx).catch(n=>console.error(n))},5867:(mt,Me,V)=>{V.d(Me,{C6:()=>g.getApps,KN:()=>g.registerVersion,Mq:()=>g.getApp,ZF:()=>g.initializeApp});var g=V(9681);(0,g.registerVersion)("firebase","9.14.0","app")},127:(mt,Me,V)=>{V.d(Me,{Z:()=>g.Z});var g=V(3942);g.Z.registerVersion("firebase","9.14.0","app-compat")},5881:(mt,Me,V)=>{V.r(Me);var g=V(5861),j=V(3942),N=V(8247),se=V(2090),ve=(V(9681),V(1877),V(4859));function de(){return window}function G(){return(G=(0,g.Z)(function*(B,M,L){var ee;const{BuildInfo:ke}=de();(0,N.ap)(M.sessionId,"AuthEvent did not contain a session ID");const rt=yield pe(M.sessionId),it={};return(0,N.aq)()?it.ibi=ke.packageName:(0,N.ar)()?it.apn=ke.packageName:(0,N.as)(B,"operation-not-supported-in-this-environment"),ke.displayName&&(it.appDisplayName=ke.displayName),it.sessionId=rt,(0,N.at)(B,L,M.type,void 0,null!==(ee=M.eventId)&&void 0!==ee?ee:void 0,it)})).apply(this,arguments)}function We(){return(We=(0,g.Z)(function*(B){const{BuildInfo:M}=de(),L={};(0,N.aq)()?L.iosBundleId=M.packageName:(0,N.ar)()?L.androidPackageName=M.packageName:(0,N.as)(B,"operation-not-supported-in-this-environment"),yield(0,N.au)(B,L)})).apply(this,arguments)}function Ke(){return(Ke=(0,g.Z)(function*(B,M,L){const{cordova:ee}=de();let ke=()=>{};try{yield new Promise((rt,it)=>{let Ie=null;function Re(){var xt;rt();const sn=null===(xt=ee.plugins.browsertab)||void 0===xt?void 0:xt.close;"function"==typeof sn&&sn(),"function"==typeof L?.close&&L.close()}function At(){Ie||(Ie=window.setTimeout(()=>{it((0,N.aw)(B,"redirect-cancelled-by-user"))},2e3))}function rn(){"visible"===document?.visibilityState&&At()}M.addPassiveListener(Re),document.addEventListener("resume",At,!1),(0,N.ar)()&&document.addEventListener("visibilitychange",rn,!1),ke=()=>{M.removePassiveListener(Re),document.removeEventListener("resume",At,!1),document.removeEventListener("visibilitychange",rn,!1),Ie&&window.clearTimeout(Ie)}})}finally{ke()}})).apply(this,arguments)}function pe(B){return $e.apply(this,arguments)}function $e(){return($e=(0,g.Z)(function*(B){const M=Ge(B),L=yield crypto.subtle.digest("SHA-256",M);return Array.from(new Uint8Array(L)).map(ke=>ke.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ge(B){if((0,N.ap)(/[0-9a-zA-Z]+/.test(B),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(B);const M=new ArrayBuffer(B.length),L=new Uint8Array(M);for(let ee=0;ee<B.length;ee++)L[ee]=B.charCodeAt(ee);return L}class Te extends N.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(M=>{this.resolveInialized=M})}addPassiveListener(M){this.passiveListeners.add(M)}removePassiveListener(M){this.passiveListeners.delete(M)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(M){return this.resolveInialized(),this.passiveListeners.forEach(L=>L(M)),super.onEvent(M)}initialized(){var M=this;return(0,g.Z)(function*(){yield M.initPromise})()}}function te(B){return ue.apply(this,arguments)}function ue(){return(ue=(0,g.Z)(function*(B){const M=yield Y()._get(le(B));return M&&(yield Y()._remove(le(B))),M})).apply(this,arguments)}function q(){const B=[],M="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let L=0;L<20;L++){const ee=Math.floor(Math.random()*M.length);B.push(M.charAt(ee))}return B.join("")}function Y(){return(0,N.az)(N.b)}function le(B){return(0,N.aA)("authEvent",B.config.apiKey,B.name)}function Le(B){if(!B?.includes("?"))return{};const[M,...L]=B.split("?");return(0,se.zd)(L.join("?"))}function ze(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.aw)("no-auth-event")}}function Bt(){var B;return(null===(B=self?.location)||void 0===B?void 0:B.protocol)||null}function mr(B=(0,se.z$)()){return!("file:"!==Bt()&&"ionic:"!==Bt()&&"capacitor:"!==Bt()||!B.toLowerCase().match(/iphone|ipad|ipod|android/))}function xi(){try{const B=self.localStorage,M=N.aI();if(B)return B.setItem(M,"1"),B.removeItem(M),!function Si(B=(0,se.z$)()){return function Dr(){return(0,se.w1)()&&11===document?.documentMode}()||function In(B=(0,se.z$)()){return/Edge\/\d+/.test(B)}(B)}()||(0,se.hl)()}catch{return br()&&(0,se.hl)()}return!1}function br(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ln(){return(function Nt(){return"http:"===Bt()||"https:"===Bt()}()||(0,se.ru)()||mr())&&!function Ti(){return(0,se.b$)()||(0,se.UG)()}()&&xi()&&!br()}function ei(){return mr()&&typeof document<"u"}function Je(){return(Je=(0,g.Z)(function*(){return!!ei()&&new Promise(B=>{const M=setTimeout(()=>{B(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(M),B(!0)})})})).apply(this,arguments)}const Vn={LOCAL:"local",NONE:"none",SESSION:"session"},ln=N.ax,rr="persistence";function hn(B){return fn.apply(this,arguments)}function fn(){return(fn=(0,g.Z)(function*(B){yield B._initializationPromise;const M=dt(),L=N.aA(rr,B.config.apiKey,B.name);M&&M.setItem(L,B._getPersistence())})).apply(this,arguments)}function dt(){var B;try{return(null===(B=function Hn(){return typeof window<"u"?window:null}())||void 0===B?void 0:B.sessionStorage)||null}catch{return null}}const ht=N.ax;class bt{constructor(){this.browserResolver=N.az(N.k),this.cordovaResolver=N.az(class Qt{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(M){var L=this;return(0,g.Z)(function*(){const ee=M._key();let ke=L.eventManagers.get(ee);return ke||(ke=new Te(M),L.eventManagers.set(ee,ke),L.attachCallbackListeners(M,ke)),ke})()}_openPopup(M){(0,N.as)(M,"operation-not-supported-in-this-environment")}_openRedirect(M,L,ee,ke){var rt=this;return(0,g.Z)(function*(){!function ye(B){var M,L,ee,ke,rt,it,Ie,Re,At,rn;const xt=de();(0,N.ax)("function"==typeof(null===(M=xt?.universalLinks)||void 0===M?void 0:M.subscribe),B,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.ax)(typeof(null===(L=xt?.BuildInfo)||void 0===L?void 0:L.packageName)<"u",B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.ax)("function"==typeof(null===(rt=null===(ke=null===(ee=xt?.cordova)||void 0===ee?void 0:ee.plugins)||void 0===ke?void 0:ke.browsertab)||void 0===rt?void 0:rt.openUrl),B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(Re=null===(Ie=null===(it=xt?.cordova)||void 0===it?void 0:it.plugins)||void 0===Ie?void 0:Ie.browsertab)||void 0===Re?void 0:Re.isAvailable),B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(rn=null===(At=xt?.cordova)||void 0===At?void 0:At.InAppBrowser)||void 0===rn?void 0:rn.open),B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(M);const it=yield rt._initialize(M);yield it.initialized(),it.resetRedirect(),(0,N.aD)(),yield rt._originValidation(M);const Ie=function we(B,M,L=null){return{type:M,eventId:L,urlResponse:null,sessionId:q(),postBody:null,tenantId:B.tenantId,error:(0,N.aw)(B,"no-auth-event")}}(M,ee,ke);yield function Ze(B,M){return Y()._set(le(B),M)}(M,Ie);const Re=yield function $(B,M,L){return G.apply(this,arguments)}(M,Ie,L),At=yield function Oe(B){const{cordova:M}=de();return new Promise(L=>{M.plugins.browsertab.isAvailable(ee=>{let ke=null;ee?M.plugins.browsertab.openUrl(B):ke=M.InAppBrowser.open(B,(0,N.av)()?"_blank":"_system","location=yes"),L(ke)})})}(Re);return function Pe(B,M,L){return Ke.apply(this,arguments)}(M,it,At)})()}_isIframeWebStorageSupported(M,L){throw new Error("Method not implemented.")}_originValidation(M){const L=M._key();return this.originValidationPromises[L]||(this.originValidationPromises[L]=function J(B){return We.apply(this,arguments)}(M)),this.originValidationPromises[L]}attachCallbackListeners(M,L){const{universalLinks:ee,handleOpenURL:ke,BuildInfo:rt}=de(),it=setTimeout((0,g.Z)(function*(){yield te(M),L.onEvent(ze())}),500),Ie=function(){var rn=(0,g.Z)(function*(xt){clearTimeout(it);const sn=yield te(M);let ki=null;sn&&xt?.url&&(ki=function fe(B,M){var L,ee;const ke=function Fe(B){const M=Le(B),L=M.link?decodeURIComponent(M.link):void 0,ee=Le(L).link,ke=M.deep_link_id?decodeURIComponent(M.deep_link_id):void 0;return Le(ke).link||ke||ee||L||B}(M);if(ke.includes("/__/auth/callback")){const rt=Le(ke),it=rt.firebaseError?function ie(B){try{return JSON.parse(B)}catch{return null}}(decodeURIComponent(rt.firebaseError)):null,Ie=null===(ee=null===(L=it?.code)||void 0===L?void 0:L.split("auth/"))||void 0===ee?void 0:ee[1],Re=Ie?(0,N.aw)(Ie):null;return Re?{type:B.type,eventId:B.eventId,tenantId:B.tenantId,error:Re,urlResponse:null,sessionId:null,postBody:null}:{type:B.type,eventId:B.eventId,tenantId:B.tenantId,sessionId:B.sessionId,urlResponse:ke,postBody:null}}return null}(sn,xt.url)),L.onEvent(ki||ze())});return function(sn){return rn.apply(this,arguments)}}();typeof ee<"u"&&"function"==typeof ee.subscribe&&ee.subscribe(null,Ie);const Re=ke,At=`${rt.packageName.toLowerCase()}://`;de().handleOpenURL=function(){var rn=(0,g.Z)(function*(xt){if(xt.toLowerCase().startsWith(At)&&Ie({url:xt}),"function"==typeof Re)try{Re(xt)}catch(sn){console.error(sn)}});return function(xt){return rn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(M){var L=this;return(0,g.Z)(function*(){return yield L.selectUnderlyingResolver(),L.assertedUnderlyingResolver._initialize(M)})()}_openPopup(M,L,ee,ke){var rt=this;return(0,g.Z)(function*(){return yield rt.selectUnderlyingResolver(),rt.assertedUnderlyingResolver._openPopup(M,L,ee,ke)})()}_openRedirect(M,L,ee,ke){var rt=this;return(0,g.Z)(function*(){return yield rt.selectUnderlyingResolver(),rt.assertedUnderlyingResolver._openRedirect(M,L,ee,ke)})()}_isIframeWebStorageSupported(M,L){this.assertedUnderlyingResolver._isIframeWebStorageSupported(M,L)}_originValidation(M){return this.assertedUnderlyingResolver._originValidation(M)}get _shouldInitProactively(){return ei()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ht(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var M=this;return(0,g.Z)(function*(){if(M.underlyingResolver)return;const L=yield function Mi(){return Je.apply(this,arguments)}();M.underlyingResolver=L?M.cordovaResolver:M.browserResolver})()}}function Pr(B){return B.unwrap()}function yr(B){return Ar(B)}function Ar(B){const{_tokenResponse:M}=B instanceof se.ZR?B.customData:B;if(!M)return null;if(!(B instanceof se.ZR)&&"temporaryProof"in M&&"phoneNumber"in M)return N.P.credentialFromResult(B);const L=M.providerId;if(!L||L===N.o.PASSWORD)return null;let ee;switch(L){case N.o.GOOGLE:ee=N.Q;break;case N.o.FACEBOOK:ee=N.N;break;case N.o.GITHUB:ee=N.T;break;case N.o.TWITTER:ee=N.W;break;default:const{oauthIdToken:ke,oauthAccessToken:rt,oauthTokenSecret:it,pendingToken:Ie,nonce:Re}=M;return rt||it||ke||Ie?Ie?L.startsWith("saml.")?N.aL._create(L,Ie):N.J._fromParams({providerId:L,signInMethod:L,pendingToken:Ie,idToken:ke,accessToken:rt}):new N.U(L).credential({idToken:ke,accessToken:rt,rawNonce:Re}):null}return B instanceof se.ZR?ee.credentialFromError(B):ee.credentialFromResult(B)}function kt(B,M){return M.catch(L=>{throw L instanceof se.ZR&&function Ct(B,M){var L,ee;const ke=null===(L=M.customData)||void 0===L?void 0:L._tokenResponse;if("auth/multi-factor-auth-required"===(null===(ee=M)||void 0===ee?void 0:ee.code))M.resolver=new Yn(B,N.an(B,M));else if(ke){const rt=Ar(M),it=M;rt&&(it.credential=rt,it.tenantId=ke.tenantId||void 0,it.email=ke.email||void 0,it.phoneNumber=ke.phoneNumber||void 0)}}(B,L),L}).then(L=>{const ke=L.user;return{operationType:L.operationType,credential:yr(L),additionalUserInfo:N.al(L),user:vn.getOrCreate(ke)}})}function Wr(B,M){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,g.Z)(function*(B,M){const L=yield M;return{verificationId:L.verificationId,confirm:ee=>kt(B,L.confirm(ee))}})).apply(this,arguments)}class Yn{constructor(M,L){this.resolver=L,this.auth=function Gn(B){return B.wrapped()}(M)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(M){return kt(Pr(this.auth),this.resolver.resolveSignIn(M))}}class vn{constructor(M){this._delegate=M,this.multiFactor=N.ao(M)}static getOrCreate(M){return vn.USER_MAP.has(M)||vn.USER_MAP.set(M,new vn(M)),vn.USER_MAP.get(M)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(M){return this._delegate.getIdTokenResult(M)}getIdToken(M){return this._delegate.getIdToken(M)}linkAndRetrieveDataWithCredential(M){return this.linkWithCredential(M)}linkWithCredential(M){var L=this;return(0,g.Z)(function*(){return kt(L.auth,N.Z(L._delegate,M))})()}linkWithPhoneNumber(M,L){var ee=this;return(0,g.Z)(function*(){return Wr(ee.auth,N.l(ee._delegate,M,L))})()}linkWithPopup(M){var L=this;return(0,g.Z)(function*(){return kt(L.auth,N.d(L._delegate,M,bt))})()}linkWithRedirect(M){var L=this;return(0,g.Z)(function*(){return yield hn(N.aE(L.auth)),N.g(L._delegate,M,bt)})()}reauthenticateAndRetrieveDataWithCredential(M){return this.reauthenticateWithCredential(M)}reauthenticateWithCredential(M){var L=this;return(0,g.Z)(function*(){return kt(L.auth,N._(L._delegate,M))})()}reauthenticateWithPhoneNumber(M,L){return Wr(this.auth,N.r(this._delegate,M,L))}reauthenticateWithPopup(M){return kt(this.auth,N.e(this._delegate,M,bt))}reauthenticateWithRedirect(M){var L=this;return(0,g.Z)(function*(){return yield hn(N.aE(L.auth)),N.h(L._delegate,M,bt)})()}sendEmailVerification(M){return N.ab(this._delegate,M)}unlink(M){var L=this;return(0,g.Z)(function*(){return yield N.ak(L._delegate,M),L})()}updateEmail(M){return N.ag(this._delegate,M)}updatePassword(M){return N.ah(this._delegate,M)}updatePhoneNumber(M){return N.u(this._delegate,M)}updateProfile(M){return N.af(this._delegate,M)}verifyBeforeUpdateEmail(M,L){return N.ac(this._delegate,M,L)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}vn.USER_MAP=new WeakMap;const et=N.ax;let Ce=(()=>{class B{constructor(L,ee){if(this.app=L,ee.isInitialized())return this._delegate=ee.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ke}=L.options;et(ke,"invalid-api-key",{appName:L.name}),et(ke,"invalid-api-key",{appName:L.name});const rt=typeof window<"u"?bt:void 0;this._delegate=ee.initialize({options:{persistence:yt(ke,L.name),popupRedirectResolver:rt}}),this._delegate._updateErrorMap(N.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?vn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(L){this._delegate.languageCode=L}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(L){this._delegate.tenantId=L}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(L,ee){N.G(this._delegate,L,ee)}applyActionCode(L){return N.a2(this._delegate,L)}checkActionCode(L){return N.a3(this._delegate,L)}confirmPasswordReset(L,ee){return N.a1(this._delegate,L,ee)}createUserWithEmailAndPassword(L,ee){var ke=this;return(0,g.Z)(function*(){return kt(ke._delegate,N.a5(ke._delegate,L,ee))})()}fetchProvidersForEmail(L){return this.fetchSignInMethodsForEmail(L)}fetchSignInMethodsForEmail(L){return N.aa(this._delegate,L)}isSignInWithEmailLink(L){return N.a8(this._delegate,L)}getRedirectResult(){var L=this;return(0,g.Z)(function*(){et(Ln(),L._delegate,"operation-not-supported-in-this-environment");const ee=yield N.j(L._delegate,bt);return ee?kt(L._delegate,Promise.resolve(ee)):{credential:null,user:null}})()}addFrameworkForLogging(L){!function nn(B,M){(0,N.aE)(B)._logFramework(M)}(this._delegate,L)}onAuthStateChanged(L,ee,ke){const{next:rt,error:it,complete:Ie}=tt(L,ee,ke);return this._delegate.onAuthStateChanged(rt,it,Ie)}onIdTokenChanged(L,ee,ke){const{next:rt,error:it,complete:Ie}=tt(L,ee,ke);return this._delegate.onIdTokenChanged(rt,it,Ie)}sendSignInLinkToEmail(L,ee){return N.a7(this._delegate,L,ee)}sendPasswordResetEmail(L,ee){return N.a0(this._delegate,L,ee||void 0)}setPersistence(L){var ee=this;return(0,g.Z)(function*(){let ke;switch(function ys(B,M){ln(Object.values(Vn).includes(M),B,"invalid-persistence-type"),(0,se.b$)()?ln(M!==Vn.SESSION,B,"unsupported-persistence-type"):(0,se.UG)()?ln(M===Vn.NONE,B,"unsupported-persistence-type"):br()?ln(M===Vn.NONE||M===Vn.LOCAL&&(0,se.hl)(),B,"unsupported-persistence-type"):ln(M===Vn.NONE||xi(),B,"unsupported-persistence-type")}(ee._delegate,L),L){case Vn.SESSION:ke=N.a;break;case Vn.LOCAL:ke=(yield N.az(N.i)._isAvailable())?N.i:N.b;break;case Vn.NONE:ke=N.L;break;default:return N.as("argument-error",{appName:ee._delegate.name})}return ee._delegate.setPersistence(ke)})()}signInAndRetrieveDataWithCredential(L){return this.signInWithCredential(L)}signInAnonymously(){return kt(this._delegate,N.X(this._delegate))}signInWithCredential(L){return kt(this._delegate,N.Y(this._delegate,L))}signInWithCustomToken(L){return kt(this._delegate,N.$(this._delegate,L))}signInWithEmailAndPassword(L,ee){return kt(this._delegate,N.a6(this._delegate,L,ee))}signInWithEmailLink(L,ee){return kt(this._delegate,N.a9(this._delegate,L,ee))}signInWithPhoneNumber(L,ee){return Wr(this._delegate,N.s(this._delegate,L,ee))}signInWithPopup(L){var ee=this;return(0,g.Z)(function*(){return et(Ln(),ee._delegate,"operation-not-supported-in-this-environment"),kt(ee._delegate,N.c(ee._delegate,L,bt))})()}signInWithRedirect(L){var ee=this;return(0,g.Z)(function*(){return et(Ln(),ee._delegate,"operation-not-supported-in-this-environment"),yield hn(ee._delegate),N.f(ee._delegate,L,bt)})()}updateCurrentUser(L){return this._delegate.updateCurrentUser(L)}verifyPasswordResetCode(L){return N.a4(this._delegate,L)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return B.Persistence=Vn,B})();function tt(B,M,L){let ee=B;"function"!=typeof B&&({next:ee,error:M,complete:L}=B);const ke=ee;return{next:it=>ke(it&&vn.getOrCreate(it)),error:M,complete:L}}function yt(B,M){const L=function un(B,M){const L=dt();if(!L)return[];const ee=N.aA(rr,B,M);switch(L.getItem(ee)){case Vn.NONE:return[N.L];case Vn.LOCAL:return[N.i,N.a];case Vn.SESSION:return[N.a];default:return[]}}(B,M);if(typeof self<"u"&&!L.includes(N.i)&&L.push(N.i),typeof window<"u")for(const ee of[N.b,N.a])L.includes(ee)||L.push(ee);return L.includes(N.L)||L.push(N.L),L}class vt{constructor(){this.providerId="phone",this._delegate=new N.P(Pr(j.Z.auth()))}static credential(M,L){return N.P.credential(M,L)}verifyPhoneNumber(M,L){return this._delegate.verifyPhoneNumber(M,L)}unwrap(){return this._delegate}}vt.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,vt.PROVIDER_ID=N.P.PROVIDER_ID;const $t=N.ax;class H{constructor(M,L,ee=j.Z.app()){var ke;$t(null===(ke=ee.options)||void 0===ke?void 0:ke.apiKey,"invalid-api-key",{appName:ee.name}),this._delegate=new N.R(M,L,ee.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function K(B){B.INTERNAL.registerComponent(new ve.wA("auth-compat",M=>{const L=M.getProvider("app-compat").getImmediate(),ee=M.getProvider("auth");return new Ce(L,ee)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.M,FacebookAuthProvider:N.N,GithubAuthProvider:N.T,GoogleAuthProvider:N.Q,OAuthProvider:N.U,SAMLAuthProvider:N.V,PhoneAuthProvider:vt,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:H,TwitterAuthProvider:N.W,Auth:Ce,AuthCredential:N.H,Error:se.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),B.registerVersion("@firebase/auth-compat","0.2.24")}(j.Z)},8306:(mt,Me,V)=>{V.d(Me,{y:()=>$});var g=V(2961),j=V(727),N=V(8822),se=V(4671);var ve=V(2416),de=V(576),be=V(2806);let $=(()=>{class Oe{constructor(Ke){Ke&&(this._subscribe=Ke)}lift(Ke){const ye=new Oe;return ye.source=this,ye.operator=Ke,ye}subscribe(Ke,ye,pe){const $e=function We(Oe){return Oe&&Oe instanceof g.Lv||function J(Oe){return Oe&&(0,de.m)(Oe.next)&&(0,de.m)(Oe.error)&&(0,de.m)(Oe.complete)}(Oe)&&(0,j.Nn)(Oe)}(Ke)?Ke:new g.Hp(Ke,ye,pe);return(0,be.x)(()=>{const{operator:Ge,source:xe}=this;$e.add(Ge?Ge.call($e,xe):xe?this._subscribe($e):this._trySubscribe($e))}),$e}_trySubscribe(Ke){try{return this._subscribe(Ke)}catch(ye){Ke.error(ye)}}forEach(Ke,ye){return new(ye=G(ye))((pe,$e)=>{const Ge=new g.Hp({next:xe=>{try{Ke(xe)}catch(Te){$e(Te),Ge.unsubscribe()}},error:$e,complete:pe});this.subscribe(Ge)})}_subscribe(Ke){var ye;return null===(ye=this.source)||void 0===ye?void 0:ye.subscribe(Ke)}[N.L](){return this}pipe(...Ke){return function me(Oe){return 0===Oe.length?se.y:1===Oe.length?Oe[0]:function(Ke){return Oe.reduce((ye,pe)=>pe(ye),Ke)}}(Ke)(this)}toPromise(Ke){return new(Ke=G(Ke))((ye,pe)=>{let $e;this.subscribe(Ge=>$e=Ge,Ge=>pe(Ge),()=>ye($e))})}}return Oe.create=Pe=>new Oe(Pe),Oe})();function G(Oe){var Pe;return null!==(Pe=Oe??ve.v.Promise)&&void 0!==Pe?Pe:Promise}},7579:(mt,Me,V)=>{V.d(Me,{x:()=>ve});var g=V(8306),j=V(727);const se=(0,V(3888).d)(be=>function(){be(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ae=V(8737),me=V(2806);let ve=(()=>{class be extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const J=new de(this,this);return J.operator=G,J}_throwIfClosed(){if(this.closed)throw new se}next(G){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(G)}})}error(G){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:J}=this;for(;J.length;)J.shift().error(G)}})}complete(){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:J,isStopped:We,observers:Oe}=this;return J||We?j.Lc:(this.currentObservers=null,Oe.push(G),new j.w0(()=>{this.currentObservers=null,(0,ae.P)(Oe,G)}))}_checkFinalizedStatuses(G){const{hasError:J,thrownError:We,isStopped:Oe}=this;J?G.error(We):Oe&&G.complete()}asObservable(){const G=new g.y;return G.source=this,G}}return be.create=($,G)=>new de($,G),be})();class de extends ve{constructor($,G){super(),this.destination=$,this.source=G}next($){var G,J;null===(J=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===J||J.call(G,$)}error($){var G,J;null===(J=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===J||J.call(G,$)}complete(){var $,G;null===(G=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===G||G.call($)}_subscribe($){var G,J;return null!==(J=null===(G=this.source)||void 0===G?void 0:G.subscribe($))&&void 0!==J?J:j.Lc}}},2961:(mt,Me,V)=>{V.d(Me,{Hp:()=>Ke,Lv:()=>J});var g=V(576),j=V(727),N=V(2416),se=V(7849);function ae(){}const me=be("C",void 0,void 0);function be(xe,Te,we){return{kind:xe,value:Te,error:we}}var $=V(3410),G=V(2806);class J extends j.w0{constructor(Te){super(),this.isStopped=!1,Te?(this.destination=Te,(0,j.Nn)(Te)&&Te.add(this)):this.destination=Ge}static create(Te,we,Ze){return new Ke(Te,we,Ze)}next(Te){this.isStopped?$e(function de(xe){return be("N",xe,void 0)}(Te),this):this._next(Te)}error(Te){this.isStopped?$e(function ve(xe){return be("E",void 0,xe)}(Te),this):(this.isStopped=!0,this._error(Te))}complete(){this.isStopped?$e(me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Te){this.destination.next(Te)}_error(Te){try{this.destination.error(Te)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const We=Function.prototype.bind;function Oe(xe,Te){return We.call(xe,Te)}class Pe{constructor(Te){this.partialObserver=Te}next(Te){const{partialObserver:we}=this;if(we.next)try{we.next(Te)}catch(Ze){ye(Ze)}}error(Te){const{partialObserver:we}=this;if(we.error)try{we.error(Te)}catch(Ze){ye(Ze)}else ye(Te)}complete(){const{partialObserver:Te}=this;if(Te.complete)try{Te.complete()}catch(we){ye(we)}}}class Ke extends J{constructor(Te,we,Ze){let te;if(super(),(0,g.m)(Te)||!Te)te={next:Te??void 0,error:we??void 0,complete:Ze??void 0};else{let ue;this&&N.v.useDeprecatedNextContext?(ue=Object.create(Te),ue.unsubscribe=()=>this.unsubscribe(),te={next:Te.next&&Oe(Te.next,ue),error:Te.error&&Oe(Te.error,ue),complete:Te.complete&&Oe(Te.complete,ue)}):te=Te}this.destination=new Pe(te)}}function ye(xe){N.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(xe):(0,se.h)(xe)}function $e(xe,Te){const{onStoppedNotification:we}=N.v;we&&$.z.setTimeout(()=>we(xe,Te))}const Ge={closed:!0,next:ae,error:function pe(xe){throw xe},complete:ae}},727:(mt,Me,V)=>{V.d(Me,{Lc:()=>me,w0:()=>ae,Nn:()=>ve});var g=V(576);const N=(0,V(3888).d)(be=>function(G){be(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((J,We)=>`${We+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var se=V(8737);class ae{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Oe of G)Oe.remove(this);else G.remove(this);const{initialTeardown:J}=this;if((0,g.m)(J))try{J()}catch(Oe){$=Oe instanceof N?Oe.errors:[Oe]}const{_finalizers:We}=this;if(We){this._finalizers=null;for(const Oe of We)try{de(Oe)}catch(Pe){$=$??[],Pe instanceof N?$=[...$,...Pe.errors]:$.push(Pe)}}if($)throw new N($)}}add($){var G;if($&&$!==this)if(this.closed)de($);else{if($ instanceof ae){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push($)}}_hasParent($){const{_parentage:G}=this;return G===$||Array.isArray(G)&&G.includes($)}_addParent($){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push($),G):G?[G,$]:$}_removeParent($){const{_parentage:G}=this;G===$?this._parentage=null:Array.isArray(G)&&(0,se.P)(G,$)}remove($){const{_finalizers:G}=this;G&&(0,se.P)(G,$),$ instanceof ae&&$._removeParent(this)}}ae.EMPTY=(()=>{const be=new ae;return be.closed=!0,be})();const me=ae.EMPTY;function ve(be){return be instanceof ae||be&&"closed"in be&&(0,g.m)(be.remove)&&(0,g.m)(be.add)&&(0,g.m)(be.unsubscribe)}function de(be){(0,g.m)(be)?be():be.unsubscribe()}},2416:(mt,Me,V)=>{V.d(Me,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(mt,Me,V)=>{V.d(Me,{E:()=>j});const j=new(V(8306).y)(ae=>ae.complete())},8996:(mt,Me,V)=>{V.d(Me,{D:()=>Te});var g=V(8421),j=V(5363),N=V(9468),me=V(8306),de=V(2202),be=V(576),$=V(9672);function J(we,Ze){if(!we)throw new Error("Iterable cannot be null");return new me.y(te=>{(0,$.f)(te,Ze,()=>{const ue=we[Symbol.asyncIterator]();(0,$.f)(te,Ze,()=>{ue.next().then(fe=>{fe.done?te.complete():te.next(fe.value)})},0,!0)})})}var We=V(3670),Oe=V(8239),Pe=V(1144),Ke=V(6495),ye=V(2206),pe=V(4532),$e=V(3260);function Te(we,Ze){return Ze?function xe(we,Ze){if(null!=we){if((0,We.c)(we))return function se(we,Ze){return(0,g.Xf)(we).pipe((0,N.R)(Ze),(0,j.Q)(Ze))}(we,Ze);if((0,Pe.z)(we))return function ve(we,Ze){return new me.y(te=>{let ue=0;return Ze.schedule(function(){ue===we.length?te.complete():(te.next(we[ue++]),te.closed||this.schedule())})})}(we,Ze);if((0,Oe.t)(we))return function ae(we,Ze){return(0,g.Xf)(we).pipe((0,N.R)(Ze),(0,j.Q)(Ze))}(we,Ze);if((0,ye.D)(we))return J(we,Ze);if((0,Ke.T)(we))return function G(we,Ze){return new me.y(te=>{let ue;return(0,$.f)(te,Ze,()=>{ue=we[de.h](),(0,$.f)(te,Ze,()=>{let fe,q;try{({value:fe,done:q}=ue.next())}catch(Y){return void te.error(Y)}q?te.complete():te.next(fe)},0,!0)}),()=>(0,be.m)(ue?.return)&&ue.return()})}(we,Ze);if((0,$e.L)(we))return function Ge(we,Ze){return J((0,$e.Q)(we),Ze)}(we,Ze)}throw(0,pe.z)(we)}(we,Ze):(0,g.Xf)(we)}},8421:(mt,Me,V)=>{V.d(Me,{Xf:()=>We});var g=V(655),j=V(1144),N=V(8239),se=V(8306),ae=V(3670),me=V(2206),ve=V(4532),de=V(6495),be=V(3260),$=V(576),G=V(7849),J=V(8822);function We(xe){if(xe instanceof se.y)return xe;if(null!=xe){if((0,ae.c)(xe))return function Oe(xe){return new se.y(Te=>{const we=xe[J.L]();if((0,$.m)(we.subscribe))return we.subscribe(Te);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,j.z)(xe))return function Pe(xe){return new se.y(Te=>{for(let we=0;we<xe.length&&!Te.closed;we++)Te.next(xe[we]);Te.complete()})}(xe);if((0,N.t)(xe))return function Ke(xe){return new se.y(Te=>{xe.then(we=>{Te.closed||(Te.next(we),Te.complete())},we=>Te.error(we)).then(null,G.h)})}(xe);if((0,me.D)(xe))return pe(xe);if((0,de.T)(xe))return function ye(xe){return new se.y(Te=>{for(const we of xe)if(Te.next(we),Te.closed)return;Te.complete()})}(xe);if((0,be.L)(xe))return function $e(xe){return pe((0,be.Q)(xe))}(xe)}throw(0,ve.z)(xe)}function pe(xe){return new se.y(Te=>{(function Ge(xe,Te){var we,Ze,te,ue;return(0,g.mG)(this,void 0,void 0,function*(){try{for(we=(0,g.KL)(xe);!(Ze=yield we.next()).done;)if(Te.next(Ze.value),Te.closed)return}catch(fe){te={error:fe}}finally{try{Ze&&!Ze.done&&(ue=we.return)&&(yield ue.call(we))}finally{if(te)throw te.error}}Te.complete()})})(xe,Te).catch(we=>Te.error(we))})}},6451:(mt,Me,V)=>{V.d(Me,{T:()=>me});var g=V(6131),j=V(8421),N=V(515),se=V(7669),ae=V(8996);function me(...ve){const de=(0,se.yG)(ve),be=(0,se._6)(ve,1/0),$=ve;return $.length?1===$.length?(0,j.Xf)($[0]):(0,g.J)(be)((0,ae.D)($,de)):N.E}},5403:(mt,Me,V)=>{V.d(Me,{x:()=>j});var g=V(2961);function j(se,ae,me,ve,de){return new N(se,ae,me,ve,de)}class N extends g.Lv{constructor(ae,me,ve,de,be,$){super(ae),this.onFinalize=be,this.shouldUnsubscribe=$,this._next=me?function(G){try{me(G)}catch(J){ae.error(J)}}:super._next,this._error=de?function(G){try{de(G)}catch(J){ae.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=ve?function(){try{ve()}catch(G){ae.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ae;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:me}=this;super.unsubscribe(),!me&&(null===(ae=this.onFinalize)||void 0===ae||ae.call(this))}}}},4004:(mt,Me,V)=>{V.d(Me,{U:()=>N});var g=V(4482),j=V(5403);function N(se,ae){return(0,g.e)((me,ve)=>{let de=0;me.subscribe((0,j.x)(ve,be=>{ve.next(se.call(ae,be,de++))}))})}},6131:(mt,Me,V)=>{V.d(Me,{J:()=>$});var g=V(4004),j=V(8421),N=V(4482),se=V(9672),ae=V(5403),ve=V(576);function de(G,J,We=1/0){return(0,ve.m)(J)?de((Oe,Pe)=>(0,g.U)((Ke,ye)=>J(Oe,Ke,Pe,ye))((0,j.Xf)(G(Oe,Pe))),We):("number"==typeof J&&(We=J),(0,N.e)((Oe,Pe)=>function me(G,J,We,Oe,Pe,Ke,ye,pe){const $e=[];let Ge=0,xe=0,Te=!1;const we=()=>{Te&&!$e.length&&!Ge&&J.complete()},Ze=ue=>Ge<Oe?te(ue):$e.push(ue),te=ue=>{Ke&&J.next(ue),Ge++;let fe=!1;(0,j.Xf)(We(ue,xe++)).subscribe((0,ae.x)(J,q=>{Pe?.(q),Ke?Ze(q):J.next(q)},()=>{fe=!0},void 0,()=>{if(fe)try{for(Ge--;$e.length&&Ge<Oe;){const q=$e.shift();ye?(0,se.f)(J,ye,()=>te(q)):te(q)}we()}catch(q){J.error(q)}}))};return G.subscribe((0,ae.x)(J,Ze,()=>{Te=!0,we()})),()=>{pe?.()}}(Oe,Pe,G,We)))}var be=V(4671);function $(G=1/0){return de(be.y,G)}},5363:(mt,Me,V)=>{V.d(Me,{Q:()=>se});var g=V(9672),j=V(4482),N=V(5403);function se(ae,me=0){return(0,j.e)((ve,de)=>{ve.subscribe((0,N.x)(de,be=>(0,g.f)(de,ae,()=>de.next(be),me),()=>(0,g.f)(de,ae,()=>de.complete(),me),be=>(0,g.f)(de,ae,()=>de.error(be),me)))})}},3099:(mt,Me,V)=>{V.d(Me,{B:()=>ae});var g=V(8421),j=V(7579),N=V(2961),se=V(4482);function ae(ve={}){const{connector:de=(()=>new j.x),resetOnError:be=!0,resetOnComplete:$=!0,resetOnRefCountZero:G=!0}=ve;return J=>{let We,Oe,Pe,Ke=0,ye=!1,pe=!1;const $e=()=>{Oe?.unsubscribe(),Oe=void 0},Ge=()=>{$e(),We=Pe=void 0,ye=pe=!1},xe=()=>{const Te=We;Ge(),Te?.unsubscribe()};return(0,se.e)((Te,we)=>{Ke++,!pe&&!ye&&$e();const Ze=Pe=Pe??de();we.add(()=>{Ke--,0===Ke&&!pe&&!ye&&(Oe=me(xe,G))}),Ze.subscribe(we),!We&&Ke>0&&(We=new N.Hp({next:te=>Ze.next(te),error:te=>{pe=!0,$e(),Oe=me(Ge,be,te),Ze.error(te)},complete:()=>{ye=!0,$e(),Oe=me(Ge,$),Ze.complete()}}),(0,g.Xf)(Te).subscribe(We))})(J)}}function me(ve,de,...be){if(!0===de)return void ve();if(!1===de)return;const $=new N.Hp({next:()=>{$.unsubscribe(),ve()}});return de(...be).subscribe($)}},9468:(mt,Me,V)=>{V.d(Me,{R:()=>j});var g=V(4482);function j(N,se=0){return(0,g.e)((ae,me)=>{me.add(N.schedule(()=>ae.subscribe(me),se))})}},4408:(mt,Me,V)=>{V.d(Me,{o:()=>ae});var g=V(727);class j extends g.w0{constructor(ve,de){super()}schedule(ve,de=0){return this}}const N={setInterval(me,ve,...de){const{delegate:be}=N;return be?.setInterval?be.setInterval(me,ve,...de):setInterval(me,ve,...de)},clearInterval(me){const{delegate:ve}=N;return(ve?.clearInterval||clearInterval)(me)},delegate:void 0};var se=V(8737);class ae extends j{constructor(ve,de){super(ve,de),this.scheduler=ve,this.work=de,this.pending=!1}schedule(ve,de=0){var be;if(this.closed)return this;this.state=ve;const $=this.id,G=this.scheduler;return null!=$&&(this.id=this.recycleAsyncId(G,$,de)),this.pending=!0,this.delay=de,this.id=null!==(be=this.id)&&void 0!==be?be:this.requestAsyncId(G,this.id,de),this}requestAsyncId(ve,de,be=0){return N.setInterval(ve.flush.bind(ve,this),be)}recycleAsyncId(ve,de,be=0){if(null!=be&&this.delay===be&&!1===this.pending)return de;null!=de&&N.clearInterval(de)}execute(ve,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const be=this._execute(ve,de);if(be)return be;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ve,de){let $,be=!1;try{this.work(ve)}catch(G){be=!0,$=G||new Error("Scheduled action threw falsy error")}if(be)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:ve,scheduler:de}=this,{actions:be}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(be,this),null!=ve&&(this.id=this.recycleAsyncId(de,ve,null)),this.delay=null,super.unsubscribe()}}}},7565:(mt,Me,V)=>{V.d(Me,{v:()=>N});var g=V(6063);class j{constructor(ae,me=j.now){this.schedulerActionCtor=ae,this.now=me}schedule(ae,me=0,ve){return new this.schedulerActionCtor(this,ae).schedule(ve,me)}}j.now=g.l.now;class N extends j{constructor(ae,me=j.now){super(ae,me),this.actions=[],this._active=!1}flush(ae){const{actions:me}=this;if(this._active)return void me.push(ae);let ve;this._active=!0;do{if(ve=ae.execute(ae.state,ae.delay))break}while(ae=me.shift());if(this._active=!1,ve){for(;ae=me.shift();)ae.unsubscribe();throw ve}}}},4986:(mt,Me,V)=>{V.d(Me,{z:()=>N});var g=V(4408);const N=new(V(7565).v)(g.o)},6063:(mt,Me,V)=>{V.d(Me,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(mt,Me,V)=>{V.d(Me,{z:()=>g});const g={setTimeout(j,N,...se){const{delegate:ae}=g;return ae?.setTimeout?ae.setTimeout(j,N,...se):setTimeout(j,N,...se)},clearTimeout(j){const{delegate:N}=g;return(N?.clearTimeout||clearTimeout)(j)},delegate:void 0}},2202:(mt,Me,V)=>{V.d(Me,{h:()=>j});const j=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(mt,Me,V)=>{V.d(Me,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(mt,Me,V)=>{V.d(Me,{_6:()=>me,jO:()=>se,yG:()=>ae});var g=V(576);function N(ve){return ve[ve.length-1]}function se(ve){return(0,g.m)(N(ve))?ve.pop():void 0}function ae(ve){return function j(ve){return ve&&(0,g.m)(ve.schedule)}(N(ve))?ve.pop():void 0}function me(ve,de){return"number"==typeof N(ve)?ve.pop():de}},8737:(mt,Me,V)=>{function g(j,N){if(j){const se=j.indexOf(N);0<=se&&j.splice(se,1)}}V.d(Me,{P:()=>g})},3888:(mt,Me,V)=>{function g(j){const se=j(ae=>{Error.call(ae),ae.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}V.d(Me,{d:()=>g})},2806:(mt,Me,V)=>{V.d(Me,{O:()=>se,x:()=>N});var g=V(2416);let j=null;function N(ae){if(g.v.useDeprecatedSynchronousErrorHandling){const me=!j;if(me&&(j={errorThrown:!1,error:null}),ae(),me){const{errorThrown:ve,error:de}=j;if(j=null,ve)throw de}}else ae()}function se(ae){g.v.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=ae)}},9672:(mt,Me,V)=>{function g(j,N,se,ae=0,me=!1){const ve=N.schedule(function(){se(),me?j.add(this.schedule(null,ae)):this.unsubscribe()},ae);if(j.add(ve),!me)return ve}V.d(Me,{f:()=>g})},4671:(mt,Me,V)=>{function g(j){return j}V.d(Me,{y:()=>g})},1144:(mt,Me,V)=>{V.d(Me,{z:()=>g});const g=j=>j&&"number"==typeof j.length&&"function"!=typeof j},2206:(mt,Me,V)=>{V.d(Me,{D:()=>j});var g=V(576);function j(N){return Symbol.asyncIterator&&(0,g.m)(N?.[Symbol.asyncIterator])}},576:(mt,Me,V)=>{function g(j){return"function"==typeof j}V.d(Me,{m:()=>g})},3670:(mt,Me,V)=>{V.d(Me,{c:()=>N});var g=V(8822),j=V(576);function N(se){return(0,j.m)(se[g.L])}},6495:(mt,Me,V)=>{V.d(Me,{T:()=>N});var g=V(2202),j=V(576);function N(se){return(0,j.m)(se?.[g.h])}},8239:(mt,Me,V)=>{V.d(Me,{t:()=>j});var g=V(576);function j(N){return(0,g.m)(N?.then)}},3260:(mt,Me,V)=>{V.d(Me,{L:()=>se,Q:()=>N});var g=V(655),j=V(576);function N(ae){return(0,g.FC)(this,arguments,function*(){const ve=ae.getReader();try{for(;;){const{value:de,done:be}=yield(0,g.qq)(ve.read());if(be)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(de)}}finally{ve.releaseLock()}})}function se(ae){return(0,j.m)(ae?.getReader)}},4482:(mt,Me,V)=>{V.d(Me,{e:()=>N});var g=V(576);function N(se){return ae=>{if(function j(se){return(0,g.m)(se?.lift)}(ae))return ae.lift(function(me){try{return se(me,this)}catch(ve){this.error(ve)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(mt,Me,V)=>{V.d(Me,{h:()=>N});var g=V(2416),j=V(3410);function N(se){j.z.setTimeout(()=>{const{onUnhandledError:ae}=g.v;if(!ae)throw se;ae(se)})}},4532:(mt,Me,V)=>{function g(j){return new TypeError(`You provided ${null!==j&&"object"==typeof j?"an invalid object":`'${j}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(Me,{z:()=>g})},655:(mt,Me,V)=>{function se(q,Y){var le={};for(var ie in q)Object.prototype.hasOwnProperty.call(q,ie)&&Y.indexOf(ie)<0&&(le[ie]=q[ie]);if(null!=q&&"function"==typeof Object.getOwnPropertySymbols){var Fe=0;for(ie=Object.getOwnPropertySymbols(q);Fe<ie.length;Fe++)Y.indexOf(ie[Fe])<0&&Object.prototype.propertyIsEnumerable.call(q,ie[Fe])&&(le[ie[Fe]]=q[ie[Fe]])}return le}function de(q,Y,le,ie){return new(le||(le=Promise))(function(Le,ct){function Qt(nn){try{ze(ie.next(nn))}catch(dn){ct(dn)}}function Ft(nn){try{ze(ie.throw(nn))}catch(dn){ct(dn)}}function ze(nn){nn.done?Le(nn.value):function Fe(Le){return Le instanceof le?Le:new le(function(ct){ct(Le)})}(nn.value).then(Qt,Ft)}ze((ie=ie.apply(q,Y||[])).next())})}function ye(q){return this instanceof ye?(this.v=q,this):new ye(q)}function pe(q,Y,le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fe,ie=le.apply(q,Y||[]),Le=[];return Fe={},ct("next"),ct("throw"),ct("return"),Fe[Symbol.asyncIterator]=function(){return this},Fe;function ct(Kt){ie[Kt]&&(Fe[Kt]=function(Zt){return new Promise(function(Bt,Nt){Le.push([Kt,Zt,Bt,Nt])>1||Qt(Kt,Zt)})})}function Qt(Kt,Zt){try{!function Ft(Kt){Kt.value instanceof ye?Promise.resolve(Kt.value.v).then(ze,nn):dn(Le[0][2],Kt)}(ie[Kt](Zt))}catch(Bt){dn(Le[0][3],Bt)}}function ze(Kt){Qt("next",Kt)}function nn(Kt){Qt("throw",Kt)}function dn(Kt,Zt){Kt(Zt),Le.shift(),Le.length&&Qt(Le[0][0],Le[0][1])}}function Ge(q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,Y=q[Symbol.asyncIterator];return Y?Y.call(q):(q=function J(q){var Y="function"==typeof Symbol&&Symbol.iterator,le=Y&&q[Y],ie=0;if(le)return le.call(q);if(q&&"number"==typeof q.length)return{next:function(){return q&&ie>=q.length&&(q=void 0),{value:q&&q[ie++],done:!q}}};throw new TypeError(Y?"Object is not iterable.":"Symbol.iterator is not defined.")}(q),le={},ie("next"),ie("throw"),ie("return"),le[Symbol.asyncIterator]=function(){return this},le);function ie(Le){le[Le]=q[Le]&&function(ct){return new Promise(function(Qt,Ft){!function Fe(Le,ct,Qt,Ft){Promise.resolve(Ft).then(function(ze){Le({value:ze,done:Qt})},ct)}(Qt,Ft,(ct=q[Le](ct)).done,ct.value)})}}}V.d(Me,{FC:()=>pe,KL:()=>Ge,_T:()=>se,mG:()=>de,qq:()=>ye})},4650:(mt,Me,V)=>{V.d(Me,{$8M:()=>iu,AFp:()=>oD,ALo:()=>Pv,AaK:()=>de,CZH:()=>Ud,CqO:()=>rf,D6c:()=>m_,EJc:()=>zb,F4k:()=>$p,FYo:()=>Um,FiY:()=>S,G48:()=>_D,GfV:()=>Nn,Gpc:()=>G,JOm:()=>yi,LFG:()=>cn,Lbi:()=>uD,Lck:()=>bv,NdJ:()=>Cy,OlP:()=>gn,Oqu:()=>Ry,Q6J:()=>Ma,QGY:()=>wy,Qsj:()=>Rt,R0b:()=>Yi,RDi:()=>QC,Rgc:()=>wf,SBq:()=>Rh,TTD:()=>Ji,TgZ:()=>Gp,X6Q:()=>n_,Xpm:()=>Ce,Y36:()=>ad,YNc:()=>my,Yjl:()=>B,Yz7:()=>Zt,ZZ4:()=>Zg,_Bn:()=>xw,_UZ:()=>vy,_c5:()=>g_,_uU:()=>Py,aQg:()=>p_,cJS:()=>Nt,cg1:()=>Jl,dDg:()=>Gd,dqk:()=>bt,eFA:()=>gC,ekj:()=>Sy,eoX:()=>Ru,g9A:()=>ja,h0i:()=>Nu,hGG:()=>xC,hij:()=>Oa,ifc:()=>ht,ip1:()=>uc,kL8:()=>zy,lG2:()=>K,lri:()=>dC,n5z:()=>is,oAB:()=>$t,q4F:()=>It,qLn:()=>qe,qOj:()=>Fp,qZA:()=>Wp,rWj:()=>Wg,sBO:()=>wD,sIi:()=>Xh,s_b:()=>Tg,soG:()=>Ug,uIk:()=>ef,vHH:()=>Pe,vpe:()=>Lo,wAp:()=>gt,xi3:()=>Ov,xp6:()=>yn,zSh:()=>Jc,zs3:()=>Ol});var g=V(7579),j=V(727),N=V(8306),se=V(6451),ae=V(3099);function me(i){for(let s in i)if(i[s]===me)return s;throw Error("Could not find renamed property on target object.")}function ve(i,s){for(const o in s)s.hasOwnProperty(o)&&!i.hasOwnProperty(o)&&(i[o]=s[o])}function de(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(de).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const o=s.indexOf("\n");return-1===o?s:s.substring(0,o)}function be(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const $=me({__forward_ref__:me});function G(i){return i.__forward_ref__=G,i.toString=function(){return de(this())},i}function J(i){return We(i)?i():i}function We(i){return"function"==typeof i&&i.hasOwnProperty($)&&i.__forward_ref__===G}class Pe extends Error{constructor(s,o){super(function Ke(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}(s,o)),this.code=s}}function ye(i){return"string"==typeof i?i:null==i?"":String(i)}function Te(i,s){throw new Pe(-201,!1)}function Ft(i,s){null==i&&function ze(i,s,o,u){throw new Error(`ASSERTION ERROR: ${i}`+(null==u?"":` [Expected=> ${o} ${u} ${s} <=Actual]`))}(s,i,null,"!=")}function Zt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Nt(i){return{providers:i.providers||[],imports:i.imports||[]}}function mr(i){return Dr(i,br)||Dr(i,ei)}function Dr(i,s){return i.hasOwnProperty(s)?i[s]:null}function xi(i){return i&&(i.hasOwnProperty(Ln)||i.hasOwnProperty(Mi))?i[Ln]:null}const br=me({\u0275prov:me}),Ln=me({\u0275inj:me}),ei=me({ngInjectableDef:me}),Mi=me({ngInjectorDef:me});var Je=(()=>((Je=Je||{})[Je.Default=0]="Default",Je[Je.Host=1]="Host",Je[Je.Self=2]="Self",Je[Je.SkipSelf=4]="SkipSelf",Je[Je.Optional=8]="Optional",Je))();let Hn;function ln(i){const s=Hn;return Hn=i,s}function rr(i,s,o){const u=mr(i);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&Je.Optional?null:void 0!==s?s:void Te(de(i))}function hn(i){return{toString:i}.toString()}var fn=(()=>((fn=fn||{})[fn.OnPush=0]="OnPush",fn[fn.Default=1]="Default",fn))(),ht=(()=>{return(i=ht||(ht={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",ht;var i})();const bt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),yr={},Ct=[],Ar=me({\u0275cmp:me}),kt=me({\u0275dir:me}),Wr=me({\u0275pipe:me}),Wt=me({\u0275mod:me}),Yn=me({\u0275fac:me}),vn=me({__NG_ELEMENT_ID__:me});let et=0;function Ce(i){return hn(()=>{const o=!0===i.standalone,u={},c={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===fn.OnPush,directiveDefs:null,pipeDefs:null,standalone:o,dependencies:o&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||Ct,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||ht.Emulated,id:"c"+et++,styles:i.styles||Ct,_:null,setInput:null,schemas:i.schemas||null,tView:null},h=i.dependencies,m=i.features;return c.inputs=U(i.inputs,u),c.outputs=U(i.outputs),m&&m.forEach(_=>_(c)),c.directiveDefs=h?()=>("function"==typeof h?h():h).map(yt).filter(vt):null,c.pipeDefs=h?()=>("function"==typeof h?h():h).map(ee).filter(vt):null,c})}function yt(i){return M(i)||L(i)}function vt(i){return null!==i}function $t(i){return hn(()=>({type:i.type,bootstrap:i.bootstrap||Ct,declarations:i.declarations||Ct,imports:i.imports||Ct,exports:i.exports||Ct,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function U(i,s){if(null==i)return yr;const o={};for(const u in i)if(i.hasOwnProperty(u)){let c=i[u],h=c;Array.isArray(c)&&(h=c[1],c=c[0]),o[c]=u,s&&(s[c]=h)}return o}const K=Ce;function B(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function M(i){return i[Ar]||null}function L(i){return i[kt]||null}function ee(i){return i[Wr]||null}function Wn(i){return Array.isArray(i)&&"object"==typeof i[1]}function zr(i){return Array.isArray(i)&&!0===i[1]}function qs(i){return 0!=(8&i.flags)}function Vu(i){return 2==(2&i.flags)}function $o(i){return 1==(1&i.flags)}function Or(i){return null!==i.template}function Bu(i){return 0!=(256&i[2])}function ar(i,s){return i.hasOwnProperty(Yn)?i[Yn]:null}class Qs{constructor(s,o,u){this.previousValue=s,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function Ji(){return yc}function yc(i){return i.type.prototype.ngOnChanges&&(i.setInput=Hu),$a}function $a(){const i=Xs(this),s=i?.current;if(s){const o=i.previous;if(o===yr)i.previous=s;else for(let u in s)o[u]=s[u];i.current=null,this.ngOnChanges(s)}}function Hu(i,s,o,u){const c=Xs(i)||function Qd(i,s){return i[vc]=s}(i,{previous:yr,current:null}),h=c.current||(c.current={}),m=c.previous,_=this.declaredInputs[o],C=m[_];h[_]=new Qs(C&&C.currentValue,s,m===yr),i[u]=s}Ji.ngInherit=!0;const vc="__ngSimpleChanges__";function Xs(i){return i[vc]||null}function Dn(i){for(;Array.isArray(i);)i=i[0];return i}function ni(i,s){return Dn(s[i])}function ir(i,s){return Dn(s[i.index])}function eo(i,s){return i.data[s]}function Xt(i,s){const o=s[i];return Wn(o)?o:o[0]}function es(i){return 64==(64&i[2])}function Zr(i,s){return null==s?null:i[s]}function Ko(i){i[18]=0}function xn(i,s){i[5]+=s;let o=i,u=i[3];for(;null!==u&&(1===s&&1===o[5]||-1===s&&0===o[5]);)u[5]+=s,o=u,u=u[3]}const St={lFrame:sa(null),bindingsEnabled:!0};function As(){return St.bindingsEnabled}function Ae(){return St.lFrame.lView}function Gt(){return St.lFrame.tView}function $n(){let i=no();for(;null!==i&&64===i.type;)i=i.parent;return i}function no(){return St.lFrame.currentTNode}function Tr(i,s){const o=St.lFrame;o.currentTNode=i,o.isParent=s}function Ka(){return St.lFrame.isParent}function na(){return St.lFrame.bindingIndex++}function Cc(i,s){const o=St.lFrame;o.bindingIndex=o.bindingRootIndex=i,io(s)}function io(i){St.lFrame.currentDirectiveIndex=i}function Ku(i){St.lFrame.currentQueryIndex=i}function ia(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function Ec(i,s,o){if(o&Je.SkipSelf){let c=s,h=i;for(;!(c=c.parent,null!==c||o&Je.Host||(c=ia(h),null===c||(h=h[15],10&c.type))););if(null===c)return!1;s=c,i=h}const u=St.lFrame=th();return u.currentTNode=s,u.lView=i,!0}function so(i){const s=th(),o=i[1];St.lFrame=s,s.currentTNode=o.firstChild,s.lView=i,s.tView=o,s.contextLView=i,s.bindingIndex=o.bindingStartIndex,s.inI18n=!1}function th(){const i=St.lFrame,s=null===i?null:i.child;return null===s?sa(i):s}function sa(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function nh(){const i=St.lFrame;return St.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Ic=nh;function ts(){const i=nh();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Cn(){return St.lFrame.selectedIndex}function Li(i){St.lFrame.selectedIndex=i}function _n(){const i=St.lFrame;return eo(i.tView,i.selectedIndex)}function Za(i,s){for(let o=s.directiveStart,u=s.directiveEnd;o<u;o++){const h=i.data[o].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:_,ngAfterViewInit:C,ngAfterViewChecked:A,ngOnDestroy:k}=h;m&&(i.contentHooks||(i.contentHooks=[])).push(-o,m),_&&((i.contentHooks||(i.contentHooks=[])).push(o,_),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(o,_)),C&&(i.viewHooks||(i.viewHooks=[])).push(-o,C),A&&((i.viewHooks||(i.viewHooks=[])).push(o,A),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(o,A)),null!=k&&(i.destroyHooks||(i.destroyHooks=[])).push(o,k)}}function oo(i,s,o){uo(i,s,3,o)}function ao(i,s,o,u){(3&i[2])===o&&uo(i,s,o,u)}function Ac(i,s){let o=i[2];(3&o)===s&&(o&=2047,o+=1,i[2]=o)}function uo(i,s,o,u){const h=u??-1,m=s.length-1;let _=0;for(let C=void 0!==u?65535&i[18]:0;C<m;C++)if("number"==typeof s[C+1]){if(_=s[C],null!=u&&_>=u)break}else s[C]<0&&(i[18]+=65536),(_<h||-1==h)&&(Tc(i,o,s,C),i[18]=(4294901760&i[18])+C+2),C++}function Tc(i,s,o,u){const c=o[u]<0,h=o[u+1],_=i[c?-o[u]:o[u]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{h.call(_)}finally{}}}else try{h.call(_)}finally{}}class Yr{constructor(s,o,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function Vi(i,s,o){let u=0;for(;u<o.length;){const c=o[u];if("number"==typeof c){if(0!==c)break;u++;const h=o[u++],m=o[u++],_=o[u++];i.setAttribute(s,m,_,h)}else{const h=c,m=o[++u];el(h)?i.setProperty(s,h,m):i.setAttribute(s,h,m),u++}}return u}function oa(i){return 3===i||4===i||6===i}function el(i){return 64===i.charCodeAt(0)}function aa(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let o=-1;for(let u=0;u<s.length;u++){const c=s[u];"number"==typeof c?o=c:0===o||xc(i,o,c,null,-1===o||2===o?s[++u]:null)}}return i}function xc(i,s,o,u,c){let h=0,m=i.length;if(-1===s)m=-1;else for(;h<i.length;){const _=i[h++];if("number"==typeof _){if(_===s){m=-1;break}if(_>s){m=h-1;break}}}for(;h<i.length;){const _=i[h];if("number"==typeof _)break;if(_===o){if(null===u)return void(null!==c&&(i[h+1]=c));if(u===i[h+1])return void(i[h+2]=c)}h++,null!==u&&h++,null!==c&&h++}-1!==m&&(i.splice(m,0,s),h=m+1),i.splice(h++,0,o),null!==u&&i.splice(h++,0,u),null!==c&&i.splice(h++,0,c)}function sh(i){return-1!==i}function qn(i){return 32767&i}function rs(i,s){let o=function oh(i){return i>>16}(i),u=s;for(;o>0;)u=u[15],o--;return u}let tl=!0;function ua(i){const s=tl;return tl=i,s}let Mc=0;const Lr={};function Bi(i,s){const o=eu(i,s);if(-1!==o)return o;const u=s[1];u.firstCreatePass&&(i.injectorIndex=s.length,nl(u.data,i),nl(s,null),nl(u.blueprint,null));const c=la(i,s),h=i.injectorIndex;if(sh(c)){const m=qn(c),_=rs(c,s),C=_[1].data;for(let A=0;A<8;A++)s[h+A]=_[m+A]|C[m+A]}return s[h+8]=c,h}function nl(i,s){i.push(0,0,0,0,0,0,0,0,s)}function eu(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function la(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let o=0,u=null,c=s;for(;null!==c;){if(u=yo(c),null===u)return-1;if(o++,c=c[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function Ss(i,s,o){!function kc(i,s,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(vn)&&(u=o[vn]),null==u&&(u=o[vn]=Mc++);const c=255&u;s.data[i+(c>>5)]|=1<<c}(i,s,o)}function co(i,s,o){if(o&Je.Optional||void 0!==i)return i;Te()}function ho(i,s,o,u){if(o&Je.Optional&&void 0===u&&(u=null),0==(o&(Je.Self|Je.Host))){const c=i[9],h=ln(void 0);try{return c?c.get(s,u,o&Je.Optional):rr(s,u,o&Je.Optional)}finally{ln(h)}}return co(u,0,o)}function fo(i,s,o,u=Je.Default,c){if(null!==i){if(1024&s[2]){const m=function lh(i,s,o,u,c){let h=i,m=s;for(;null!==h&&null!==m&&1024&m[2]&&!(256&m[2]);){const _=Nc(h,m,o,u|Je.Self,Lr);if(_!==Lr)return _;let C=h.parent;if(!C){const A=m[21];if(A){const k=A.get(o,Lr,u);if(k!==Lr)return k}C=yo(m),m=m[15]}h=C}return c}(i,s,o,u,Lr);if(m!==Lr)return m}const h=Nc(i,s,o,u,Lr);if(h!==Lr)return h}return ho(s,o,u,c)}function Nc(i,s,o,u,c){const h=function uh(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(vn)?i[vn]:void 0;return"number"==typeof s?s>=0?255&s:rl:s}(o);if("function"==typeof h){if(!Ec(s,i,u))return u&Je.Host?co(c,0,u):ho(s,o,u,c);try{const m=h(u);if(null!=m||u&Je.Optional)return m;Te()}finally{Ic()}}else if("number"==typeof h){let m=null,_=eu(i,s),C=-1,A=u&Je.Host?s[16][6]:null;for((-1===_||u&Je.SkipSelf)&&(C=-1===_?la(i,s):s[_+8],-1!==C&&ru(u,!1)?(m=s[1],_=qn(C),s=rs(C,s)):_=-1);-1!==_;){const k=s[1];if(po(h,_,k.data)){const F=tu(_,s,o,m,u,A);if(F!==Lr)return F}C=s[_+8],-1!==C&&ru(u,s[1].data[_+8]===A)&&po(h,_,s)?(m=k,_=qn(C),s=rs(C,s)):_=-1}}return c}function tu(i,s,o,u,c,h){const m=s[1],_=m.data[i+8],k=function nu(i,s,o,u,c){const h=i.providerIndexes,m=s.data,_=1048575&h,C=i.directiveStart,k=h>>20,W=c?_+k:i.directiveEnd;for(let ne=u?_:_+k;ne<W;ne++){const _e=m[ne];if(ne<C&&o===_e||ne>=C&&_e.type===o)return ne}if(c){const ne=m[C];if(ne&&Or(ne)&&ne.type===o)return C}return null}(_,m,o,null==u?Vu(_)&&tl:u!=m&&0!=(3&_.type),c&Je.Host&&h===_);return null!==k?Ui(s,m,k,_):Lr}function Ui(i,s,o,u){let c=i[o];const h=s.data;if(function Ju(i){return i instanceof Yr}(c)){const m=c;m.resolving&&function $e(i,s){const o=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Pe(-200,`Circular dependency in DI detected for ${i}${o}`)}(function pe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ye(i)}(h[o]));const _=ua(m.canSeeViewProviders);m.resolving=!0;const C=m.injectImpl?ln(m.injectImpl):null;Ec(i,u,Je.Default);try{c=i[o]=m.factory(void 0,h,i,u),s.firstCreatePass&&o>=u.directiveStart&&function Xu(i,s,o){const{ngOnChanges:u,ngOnInit:c,ngDoCheck:h}=s.type.prototype;if(u){const m=yc(s);(o.preOrderHooks||(o.preOrderHooks=[])).push(i,m),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(i,m)}c&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-i,c),h&&((o.preOrderHooks||(o.preOrderHooks=[])).push(i,h),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(i,h))}(o,h[o],s)}finally{null!==C&&ln(C),ua(_),m.resolving=!1,Ic()}}return c}function po(i,s,o){return!!(o[s+(i>>5)]&1<<i)}function ru(i,s){return!(i&Je.Self||i&Je.Host&&s)}class go{constructor(s,o){this._tNode=s,this._lView=o}get(s,o,u){return fo(this._tNode,this._lView,s,u,o)}}function rl(){return new go($n(),Ae())}function is(i){return hn(()=>{const s=i.prototype.constructor,o=s[Yn]||mo(s),u=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==u;){const h=c[Yn]||mo(c);if(h&&h!==o)return h;c=Object.getPrototypeOf(c)}return h=>new h})}function mo(i){return We(i)?()=>{const s=mo(J(i));return s&&s()}:ar(i)}function yo(i){const s=i[1],o=s.type;return 2===o?s.declTNode:1===o?i[6]:null}function iu(i){return function ca(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const o=i.attrs;if(o){const u=o.length;let c=0;for(;c<u;){const h=o[c];if(oa(h))break;if(0===h)c+=2;else if("number"==typeof h)for(c++;c<u&&"string"==typeof o[c];)c++;else{if(h===s)return o[c+1];c+=2}}}return null}($n(),i)}const vo="__parameters__";function wo(i,s,o){return hn(()=>{const u=function il(i){return function(...o){if(i){const u=i(...o);for(const c in u)this[c]=u[c]}}}(s);function c(...h){if(this instanceof c)return u.apply(this,h),this;const m=new c(...h);return _.annotation=m,_;function _(C,A,k){const F=C.hasOwnProperty(vo)?C[vo]:Object.defineProperty(C,vo,{value:[]})[vo];for(;F.length<=k;)F.push(null);return(F[k]=F[k]||[]).push(m),C}}return o&&(c.prototype=Object.create(o.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class gn{constructor(s,o){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Zt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Sr(i,s){i.forEach(o=>Array.isArray(o)?Sr(o,s):s(o))}function en(i,s,o){s>=i.length?i.push(o):i.splice(s,0,o)}function Ms(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Vr(i,s,o){let u=ji(i,s);return u>=0?i[1|u]=o:(u=~u,function ol(i,s,o,u){let c=i.length;if(c==s)i.push(o,u);else if(1===c)i.push(u,i[0]),i[0]=o;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=o,i[s+1]=u}}(i,u,s,o)),u}function da(i,s){const o=ji(i,s);if(o>=0)return i[1|o]}function ji(i,s){return function al(i,s,o){let u=0,c=i.length>>o;for(;c!==u;){const h=u+(c-u>>1),m=i[h<<o];if(s===m)return h<<o;m>s?c=h:u=h+1}return~(c<<o)}(i,s,1)}const Qr={},ot="__NG_DI_FLAG__",os="ngTempTokenPath",si=/\n/gm,Ns="__source";let Eo;function wr(i){const s=Eo;return Eo=i,s}function hh(i,s=Je.Default){if(void 0===Eo)throw new Pe(-203,!1);return null===Eo?rr(i,void 0,s):Eo.get(i,s&Je.Optional?null:void 0,s)}function cn(i,s=Je.Default){return(function Vn(){return Hn}()||hh)(J(i),s)}function Ps(i){const s=[];for(let o=0;o<i.length;o++){const u=J(i[o]);if(Array.isArray(u)){if(0===u.length)throw new Pe(900,!1);let c,h=Je.Default;for(let m=0;m<u.length;m++){const _=u[m],C=as(_);"number"==typeof C?-1===C?c=_.token:h|=C:c=_}s.push(cn(c,h))}else s.push(cn(u))}return s}function En(i,s){return i[ot]=s,i.prototype[ot]=s,i}function as(i){return i[ot]}const S=En(wo("Optional"),8),Z=En(wo("SkipSelf"),4);var yi=(()=>((yi=yi||{})[yi.Important=1]="Important",yi[yi.DashCase=2]="DashCase",yi))();const cu=new Map;let _h=0;const f="__ngContext__";function p(i,s){Wn(s)?(i[f]=s[20],function cr(i){cu.set(i[20],i)}(s)):i[f]=s}function vl(i,s){return undefined(i,s)}function ga(i){const s=i[3];return zr(s)?s[3]:s}function wl(i){return bo(i[13])}function Hc(i){return bo(i[4])}function bo(i){for(;null!==i&&!zr(i);)i=i[4];return i}function Rs(i,s,o,u,c){if(null!=u){let h,m=!1;zr(u)?h=u:Wn(u)&&(m=!0,u=u[0]);const _=Dn(u);0===i&&null!==o?null==c?tp(s,o,_):El(s,o,_,c||null,!0):1===i&&null!==o?El(s,o,_,c||null,!0):2===i?function np(i,s,o){const u=bh(i,s);u&&function vm(i,s,o,u){i.removeChild(s,o,u)}(i,u,s,o)}(s,_,m):3===i&&s.destroyNode(_),null!=h&&function ip(i,s,o,u,c){const h=o[7];h!==Dn(o)&&Rs(s,i,u,h,c);for(let _=10;_<o.length;_++){const C=o[_];Ah(C[1],C,i,s,u,h)}}(s,i,h,o,c)}}function Ur(i,s,o){return i.createElement(s,o)}function gm(i,s){const o=i[9],u=o.indexOf(s),c=s[3];512&s[2]&&(s[2]&=-513,xn(c,-1)),o.splice(u,1)}function Cl(i,s){if(i.length<=10)return;const o=10+s,u=i[o];if(u){const c=u[17];null!==c&&c!==i&&gm(c,u),s>0&&(i[o-1][4]=u[4]);const h=Ms(i,10+s);!function x_(i,s){Ah(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(u[1],u);const m=h[19];null!==m&&m.detachView(h[1]),u[3]=null,u[4]=null,u[2]&=-65}return u}function Jf(i,s){if(!(128&s[2])){const o=s[11];o.destroyNode&&Ah(i,s,o,3,null,null),function M_(i){let s=i[13];if(!s)return Ih(i[1],i);for(;s;){let o=null;if(Wn(s))o=s[13];else{const u=s[10];u&&(o=u)}if(!o){for(;s&&!s[4]&&s!==i;)Wn(s)&&Ih(s[1],s),s=s[3];null===s&&(s=i),Wn(s)&&Ih(s[1],s),o=s&&s[4]}s=o}}(s)}}function Ih(i,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function ep(i,s){let o;if(null!=i&&null!=(o=i.destroyHooks))for(let u=0;u<o.length;u+=2){const c=s[o[u]];if(!(c instanceof Yr)){const h=o[u+1];if(Array.isArray(h))for(let m=0;m<h.length;m+=2){const _=c[h[m]],C=h[m+1];try{C.call(_)}finally{}}else try{h.call(c)}finally{}}}}(i,s),function mm(i,s){const o=i.cleanup,u=s[7];let c=-1;if(null!==o)for(let h=0;h<o.length-1;h+=2)if("string"==typeof o[h]){const m=o[h+1],_="function"==typeof m?m(s):Dn(s[m]),C=u[c=o[h+2]],A=o[h+3];"boolean"==typeof A?_.removeEventListener(o[h],C,A):A>=0?u[c=A]():u[c=-A].unsubscribe(),h+=2}else{const m=u[c=o[h+1]];o[h].call(m)}if(null!==u){for(let h=c+1;h<u.length;h++)(0,u[h])();s[7]=null}}(i,s),1===s[1].type&&s[11].destroy();const o=s[17];if(null!==o&&zr(s[3])){o!==s[3]&&gm(o,s);const u=s[19];null!==u&&u.detachView(i)}!function Vc(i){cu.delete(i[20])}(s)}}function Wc(i,s,o){return function ym(i,s,o){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return o[0];if(2&u.flags){const c=i.data[u.directiveStart].encapsulation;if(c===ht.None||c===ht.Emulated)return null}return ir(u,o)}(i,s.parent,o)}function El(i,s,o,u,c){i.insertBefore(s,o,u,c)}function tp(i,s,o){i.appendChild(s,o)}function Dh(i,s,o,u,c){null!==u?El(i,s,o,u,c):tp(i,s,o)}function bh(i,s){return i.parentNode(s)}let Em,_m=function $c(i,s,o){return 40&i.type?ir(i,o):null};function Ao(i,s,o,u){const c=Wc(i,u,s),h=s[11],_=function P_(i,s,o){return _m(i,s,o)}(u.parent||s[6],u,s);if(null!=c)if(Array.isArray(o))for(let C=0;C<o.length;C++)Dh(h,c,o[C],_,!1);else Dh(h,c,o,_,!1)}function Kc(i,s){if(null!==s){const o=s.type;if(3&o)return ir(s,i);if(4&o)return wm(-1,i[s.index]);if(8&o){const u=s.child;if(null!==u)return Kc(i,u);{const c=i[s.index];return zr(c)?wm(-1,c):Dn(c)}}if(32&o)return vl(s,i)()||Dn(i[s.index]);{const u=R_(i,s);return null!==u?Array.isArray(u)?u[0]:Kc(ga(i[16]),u):Kc(i,s.next)}}return null}function R_(i,s){return null!==s?i[16][6].projection[s.projection]:null}function wm(i,s){const o=10+i+1;if(o<s.length){const u=s[o],c=u[1].firstChild;if(null!==c)return Kc(u,c)}return s[7]}function rp(i,s,o,u,c,h,m){for(;null!=o;){const _=u[o.index],C=o.type;if(m&&0===s&&(_&&p(Dn(_),u),o.flags|=4),64!=(64&o.flags))if(8&C)rp(i,s,o.child,u,c,h,!1),Rs(s,i,c,_,h);else if(32&C){const A=vl(o,u);let k;for(;k=A();)Rs(s,i,c,k,h);Rs(s,i,c,_,h)}else 16&C?To(i,s,u,o,c,h):Rs(s,i,c,_,h);o=m?o.projectionNext:o.next}}function Ah(i,s,o,u,c,h){rp(o,u,i.firstChild,s,c,h,!1)}function To(i,s,o,u,c,h){const m=o[16],C=m[6].projection[u.projection];if(Array.isArray(C))for(let A=0;A<C.length;A++)Rs(s,i,c,C[A],h);else rp(i,s,C,m[3],c,h,!0)}function Cm(i,s,o){i.setAttribute(s,"style",o)}function An(i,s,o){""===o?i.removeAttribute(s,"class"):i.setAttribute(s,"class",o)}function QC(i){Em=i}const Rm=new gn("ENVIRONMENT_INITIALIZER"),Om=new gn("INJECTOR",-1),Fm=new gn("INJECTOR_DEF_TYPES");class Nh{get(s,o=Qr){if(o===Qr){const u=new Error(`NullInjectorError: No provider for ${de(s)}!`);throw u.name="NullInjectorError",u}return o}}function Wi(...i){return{\u0275providers:Lm(0,i)}}function Lm(i,...s){const o=[],u=new Set;let c;return Sr(s,h=>{const m=h;du(m,o,[],u)&&(c||(c=[]),c.push(m))}),void 0!==c&&Vm(c,o),o}function Vm(i,s){for(let o=0;o<i.length;o++){const{providers:c}=i[o];Sr(c,h=>{s.push(h)})}}function du(i,s,o,u){if(!(i=J(i)))return!1;let c=null,h=xi(i);const m=!h&&M(i);if(h||m){if(m&&!m.standalone)return!1;c=i}else{const C=i.ngModule;if(h=xi(C),!h)return!1;c=C}const _=u.has(c);if(m){if(_)return!1;if(u.add(c),m.dependencies){const C="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const A of C)du(A,s,o,u)}}else{if(!h)return!1;{if(null!=h.imports&&!_){let A;u.add(c);try{Sr(h.imports,k=>{du(k,s,o,u)&&(A||(A=[]),A.push(k))})}finally{}void 0!==A&&Vm(A,s)}if(!_){const A=ar(c)||(()=>new c);s.push({provide:c,useFactory:A,deps:Ct},{provide:Fm,useValue:c,multi:!0},{provide:Rm,useValue:()=>cn(c),multi:!0})}const C=h.providers;null==C||_||Sr(C,k=>{s.push(k)})}}return c!==i&&void 0!==i.providers}const iE=me({provide:String,useValue:me});function Ph(i){return null!==i&&"object"==typeof i&&iE in i}function hu(i){return"function"==typeof i}const Jc=new gn("Set Injector scope."),pp={},Q_={};let fr;function ya(){return void 0===fr&&(fr=new Nh),fr}class $i{}class gp extends $i{constructor(s,o,u,c){super(),this.parent=o,this.source=u,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ce(s,m=>this.processProvider(m)),this.records.set(Om,pu(void 0,this)),c.has("environment")&&this.records.set($i,pu(void 0,this));const h=this.records.get(Jc);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(Fm.multi,Ct,Je.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const o=wr(this),u=ln(void 0);try{return s()}finally{wr(o),ln(u)}}get(s,o=Qr,u=Je.Default){this.assertNotDestroyed();const c=wr(this),h=ln(void 0);try{if(!(u&Je.SkipSelf)){let _=this.records.get(s);if(void 0===_){const C=function oE(i){return"function"==typeof i||"object"==typeof i&&i instanceof gn}(s)&&mr(s);_=C&&this.injectableDefInScope(C)?pu(Bm(s),pp):null,this.records.set(s,_)}if(null!=_)return this.hydrate(s,_)}return(u&Je.Self?ya():this.parent).get(s,o=u&Je.Optional&&o===Qr?null:o)}catch(m){if("NullInjectorError"===m.name){if((m[os]=m[os]||[]).unshift(de(s)),c)throw m;return function fh(i,s,o,u){const c=i[os];throw s[Ns]&&c.unshift(s[Ns]),i.message=function I(i,s,o,u=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let c=de(s);if(Array.isArray(s))c=s.map(de).join(" -> ");else if("object"==typeof s){let h=[];for(let m in s)if(s.hasOwnProperty(m)){let _=s[m];h.push(m+":"+("string"==typeof _?JSON.stringify(_):de(_)))}c=`{${h.join(", ")}}`}return`${o}${u?"("+u+")":""}[${c}]: ${i.replace(si,"\n  ")}`}("\n"+i.message,c,o,u),i.ngTokenPath=c,i[os]=null,i}(m,s,"R3InjectorError",this.source)}throw m}finally{ln(h),wr(c)}}resolveInjectorInitializers(){const s=wr(this),o=ln(void 0);try{const u=this.get(Rm.multi,Ct,Je.Self);for(const c of u)c()}finally{wr(s),ln(o)}}toString(){const s=[],o=this.records;for(const u of o.keys())s.push(de(u));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Pe(205,!1)}processProvider(s){let o=hu(s=J(s))?s:J(s&&s.provide);const u=function or(i){return Ph(i)?pu(void 0,i.useValue):pu(fu(i),pp)}(s);if(hu(s)||!0!==s.multi)this.records.get(o);else{let c=this.records.get(o);c||(c=pu(void 0,pp,!0),c.factory=()=>Ps(c.multi),this.records.set(o,c)),o=s,c.multi.push(s)}this.records.set(o,u)}hydrate(s,o){return o.value===pp&&(o.value=Q_,o.value=o.factory()),"object"==typeof o.value&&o.value&&function Tt(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(s){if(!s.providedIn)return!1;const o=J(s.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function Bm(i){const s=mr(i),o=null!==s?s.factory:ar(i);if(null!==o)return o;if(i instanceof gn)throw new Pe(204,!1);if(i instanceof Function)return function Ve(i){const s=i.length;if(s>0)throw function ks(i,s){const o=[];for(let u=0;u<i;u++)o.push(s);return o}(s,"?"),new Pe(204,!1);const o=function In(i){const s=i&&(i[br]||i[ei]);if(s){const o=function Si(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),s}return null}(i);return null!==o?()=>o.factory(i):()=>new i}(i);throw new Pe(204,!1)}function fu(i,s,o){let u;if(hu(i)){const c=J(i);return ar(c)||Bm(c)}if(Ph(i))u=()=>J(i.useValue);else if(function Y_(i){return!(!i||!i.useFactory)}(i))u=()=>i.useFactory(...Ps(i.deps||[]));else if(function Z_(i){return!(!i||!i.useExisting)}(i))u=()=>cn(J(i.useExisting));else{const c=J(i&&(i.useClass||i.provide));if(!function at(i){return!!i.deps}(i))return ar(c)||Bm(c);u=()=>new c(...Ps(i.deps))}return u}function pu(i,s,o=!1){return{factory:i,value:s,multi:o?[]:void 0}}function Qe(i){return!!i.\u0275providers}function ce(i,s){for(const o of i)Array.isArray(o)?ce(o,s):Qe(o)?ce(o.\u0275providers,s):s(o)}class pr{}class aE{resolveComponentFactory(s){throw function X_(i){const s=Error(`No component factory found for ${de(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let mp=(()=>{class i{}return i.NULL=new aE,i})();function uE(){return xl($n(),Ae())}function xl(i,s){return new Rh(ir(i,s))}let Rh=(()=>{class i{constructor(o){this.nativeElement=o}}return i.__NG_ELEMENT_ID__=uE,i})();class Um{}let Rt=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function ed(){const i=Ae(),o=Xt($n().index,i);return(Wn(o)?o:i)[11]}(),i})(),e0=(()=>{class i{}return i.\u0275prov=Zt({token:i,providedIn:"root",factory:()=>null}),i})();class Nn{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const It=new Nn("14.2.12"),Ml={};function jn(i){return i.ngOriginalError}class qe{constructor(){this._console=console}handleError(s){const o=this._findOriginalError(s);this._console.error("ERROR",s),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(s){let o=s&&jn(s);for(;o&&jn(o);)o=jn(o);return o||null}}function oe(i,s,o){let u=i.length;for(;;){const c=i.indexOf(s,o);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const h=s.length;if(c+h===u||i.charCodeAt(c+h)<=32)return c}o=c+1}}const hs="ng-template";function pE(i,s,o){let u=0;for(;u<i.length;){let c=i[u++];if(o&&"class"===c){if(c=i[u],-1!==oe(c.toLowerCase(),s,0))return!0}else if(1===c){for(;u<i.length&&"string"==typeof(c=i[u++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function td(i){return 4===i.type&&i.value!==hs}function gu(i,s,o){return s===(4!==i.type||o?i.value:hs)}function gE(i,s,o){let u=4;const c=i.attrs||[],h=function yE(i){for(let s=0;s<i.length;s++)if(oa(i[s]))return s;return i.length}(c);let m=!1;for(let _=0;_<s.length;_++){const C=s[_];if("number"!=typeof C){if(!m)if(4&u){if(u=2|1&u,""!==C&&!gu(i,C,o)||""===C&&1===s.length){if(jr(u))return!1;m=!0}}else{const A=8&u?C:s[++_];if(8&u&&null!==i.attrs){if(!pE(i.attrs,A,o)){if(jr(u))return!1;m=!0}continue}const F=n0(8&u?"class":C,c,td(i),o);if(-1===F){if(jr(u))return!1;m=!0;continue}if(""!==A){let W;W=F>h?"":c[F+1].toLowerCase();const ne=8&u?W:null;if(ne&&-1!==oe(ne,A,0)||2&u&&A!==W){if(jr(u))return!1;m=!0}}}}else{if(!m&&!jr(u)&&!jr(C))return!1;if(m&&jr(C))continue;m=!1,u=C|1&u}}return jr(u)||m}function jr(i){return 0==(1&i)}function n0(i,s,o,u){if(null===s)return-1;let c=0;if(u||!o){let h=!1;for(;c<s.length;){const m=s[c];if(m===i)return c;if(3===m||6===m)h=!0;else{if(1===m||2===m){let _=s[++c];for(;"string"==typeof _;)_=s[++c];continue}if(4===m)break;if(0===m){c+=4;continue}}c+=h?1:2}return-1}return function vi(i,s){let o=i.indexOf(4);if(o>-1)for(o++;o<i.length;){const u=i[o];if("number"==typeof u)return-1;if(u===s)return o;o++}return-1}(s,i)}function _p(i,s,o=!1){for(let u=0;u<s.length;u++)if(gE(i,s[u],o))return!0;return!1}function mu(i,s){return i?":not("+s.trim()+")":s}function s0(i){let s=i[0],o=1,u=2,c="",h=!1;for(;o<i.length;){let m=i[o];if("string"==typeof m)if(2&u){const _=i[++o];c+="["+m+(_.length>0?'="'+_+'"':"")+"]"}else 8&u?c+="."+m:4&u&&(c+=" "+m);else""!==c&&!jr(m)&&(s+=mu(h,c),c=""),u=m,h=h||!jr(u);o++}return""!==c&&(s+=mu(h,c)),s}const pt={};function yn(i){Wm(Gt(),Ae(),Cn()+i,!1)}function Wm(i,s,o,u){if(!u)if(3==(3&s[2])){const h=i.preOrderCheckHooks;null!==h&&oo(s,h,o)}else{const h=i.preOrderHooks;null!==h&&ao(s,h,0,o)}Li(o)}function $m(i,s=null,o=null,u){const c=nd(i,s,o,u);return c.resolveInjectorInitializers(),c}function nd(i,s=null,o=null,u,c=new Set){const h=[o||Ct,Wi(i)];return u=u||("object"==typeof i?void 0:de(i)),new gp(h,s||ya(),u||null,c)}let Ol=(()=>{class i{static create(o,u){if(Array.isArray(o))return $m({name:""},u,o,"");{const c=o.name??"";return $m({name:c},o.parent,o.providers,c)}}}return i.THROW_IF_NOT_FOUND=Qr,i.NULL=new Nh,i.\u0275prov=Zt({token:i,providedIn:"any",factory:()=>cn(Om)}),i.__NG_ELEMENT_ID__=-1,i})();function ad(i,s=Je.Default){const o=Ae();return null===o?cn(i,s):fo($n(),o,J(i),s)}function Ul(i,s){return i<<17|s<<2}function fs(i){return i>>17&32767}function Xm(i){return 2|i}function wa(i){return(131068&i)>>2}function Jm(i,s){return-131069&i|s<<2}function ty(i){return 1|i}function Rn(i,s){const o=i.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const c=o[u],h=o[u+1];if(-1!==h){const m=i.data[h];Ku(c),m.contentQueries(2,s[h],h)}}}function Hh(i,s,o,u,c,h,m,_,C,A,k){const F=s.blueprint.slice();return F[0]=c,F[2]=76|u,(null!==k||i&&1024&i[2])&&(F[2]|=1024),Ko(F),F[3]=F[15]=i,F[8]=o,F[10]=m||i&&i[10],F[11]=_||i&&i[11],F[12]=C||i&&i[12]||null,F[9]=A||i&&i[9]||null,F[6]=h,F[20]=function wh(){return _h++}(),F[21]=k,F[16]=2==s.type?i[16]:F,F}function hd(i,s,o,u,c){let h=i.data[s];if(null===h)h=function Hl(i,s,o,u,c){const h=no(),m=Ka(),C=i.data[s]=function C0(i,s,o,u,c,h){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?h:h&&h.parent,o,s,u,c);return null===i.firstChild&&(i.firstChild=C),null!==h&&(m?null==h.child&&null!==C.parent&&(h.child=C):null===h.next&&(h.next=C)),C}(i,s,o,u,c),function wc(){return St.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=o,h.value=u,h.attrs=c;const m=function qa(){const i=St.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();h.injectorIndex=null===m?-1:m.injectorIndex}return Tr(h,!0),h}function fd(i,s,o,u){if(0===o)return-1;const c=s.length;for(let h=0;h<o;h++)s.push(u),i.blueprint.push(u),i.data.push(null);return c}function Sp(i,s,o){so(s);try{const u=i.viewQuery;null!==u&&Rp(1,u,o);const c=i.template;null!==c&&No(i,s,c,1,o),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Rn(i,s),i.staticViewQueries&&Rp(2,i.viewQuery,o);const h=i.components;null!==h&&function Tp(i,s){for(let o=0;o<s.length;o++)S0(i,s[o])}(s,h)}catch(u){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),u}finally{s[2]&=-5,ts()}}function ba(i,s,o,u){const c=s[2];if(128!=(128&c)){so(s);try{Ko(s),function ta(i){return St.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==o&&No(i,s,o,2,u);const m=3==(3&c);if(m){const A=i.preOrderCheckHooks;null!==A&&oo(s,A,null)}else{const A=i.preOrderHooks;null!==A&&ao(s,A,0,null),Ac(s,0)}if(function RE(i){for(let s=wl(i);null!==s;s=Hc(s)){if(!s[2])continue;const o=s[9];for(let u=0;u<o.length;u++){const c=o[u],h=c[3];0==(512&c[2])&&xn(h,1),c[2]|=512}}}(s),function T0(i){for(let s=wl(i);null!==s;s=Hc(s))for(let o=10;o<s.length;o++){const u=s[o],c=u[1];es(u)&&ba(c,u,c.template,u[8])}}(s),null!==i.contentQueries&&Rn(i,s),m){const A=i.contentCheckHooks;null!==A&&oo(s,A)}else{const A=i.contentHooks;null!==A&&ao(s,A,1),Ac(s,1)}!function TE(i,s){const o=i.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const c=o[u];if(c<0)Li(~c);else{const h=c,m=o[++u],_=o[++u];Cc(m,h),_(2,s[h])}}}finally{Li(-1)}}(i,s);const _=i.components;null!==_&&function Ap(i,s){for(let o=0;o<s.length;o++)kr(i,s[o])}(s,_);const C=i.viewQuery;if(null!==C&&Rp(2,C,u),m){const A=i.viewCheckHooks;null!==A&&oo(s,A)}else{const A=i.viewHooks;null!==A&&ao(s,A,2),Ac(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,xn(s[3],-1))}finally{ts()}}}function No(i,s,o,u,c){const h=Cn(),m=2&u;try{Li(-1),m&&s.length>22&&Wm(i,s,22,!1),o(u,c)}finally{Li(h)}}function xp(i,s,o){!As()||(function jt(i,s,o,u){const c=o.directiveStart,h=o.directiveEnd;i.firstCreatePass||Bi(o,s),p(u,s);const m=o.initialInputs;for(let _=c;_<h;_++){const C=i.data[_],A=Or(C);A&&kE(s,o,C);const k=Ui(s,i,_,o);p(k,s),null!==m&&NE(0,_-c,k,C,0,m),A&&(Xt(o.index,s)[8]=k)}}(i,s,o,ir(o,s)),128==(128&o.flags)&&function ME(i,s,o){const u=o.directiveStart,c=o.directiveEnd,h=o.index,m=function eh(){return St.lFrame.currentDirectiveIndex}();try{Li(h);for(let _=u;_<c;_++){const C=i.data[_],A=s[_];io(_),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&Wh(C,A)}}finally{Li(-1),io(m)}}(i,s,o))}function Mp(i,s,o=ir){const u=s.localNames;if(null!==u){let c=s.index+1;for(let h=0;h<u.length;h+=2){const m=u[h+1],_=-1===m?o(s,i):i[m];i[c++]=_}}}function Gl(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Gh(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Gh(i,s,o,u,c,h,m,_,C,A){const k=22+u,F=k+c,W=function SE(i,s){const o=[];for(let u=0;u<s;u++)o.push(u<i?null:pt);return o}(k,F),ne="function"==typeof A?A():A;return W[1]={type:i,blueprint:W,template:o,queries:null,viewQuery:_,declTNode:s,data:W.slice().fill(null,k),bindingStartIndex:k,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:C,consts:ne,incompleteFirstPass:!1}}function Aa(i,s,o){for(let u in i)if(i.hasOwnProperty(u)){const c=i[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(s,c):o[u]=[s,c]}return o}function E0(i,s){const u=s.directiveEnd,c=i.data,h=s.attrs,m=[];let _=null,C=null;for(let A=s.directiveStart;A<u;A++){const k=c[A],F=k.inputs,W=null===h||td(s)?null:PE(F,h);m.push(W),_=Aa(F,A,_),C=Aa(k.outputs,A,C)}null!==_&&(_.hasOwnProperty("class")&&(s.flags|=16),_.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=m,s.inputs=_,s.outputs=C}function pd(i,s){const o=Xt(s,i);16&o[2]||(o[2]|=32)}function Wl(i,s,o,u){let c=!1;if(As()){const h=function $h(i,s,o){const u=i.directiveRegistry;let c=null;if(u)for(let h=0;h<u.length;h++){const m=u[h];_p(o,m.selectors,!1)&&(c||(c=[]),Ss(Bi(o,s),i,m.type),Or(m)?(gd(i,o),c.unshift(m)):c.push(m))}return c}(i,s,o),m=null===u?null:{"":-1};if(null!==h){c=!0,ly(o,i.data.length,h.length);for(let k=0;k<h.length;k++){const F=h[k];F.providersResolver&&F.providersResolver(F)}let _=!1,C=!1,A=fd(i,s,h.length,null);for(let k=0;k<h.length;k++){const F=h[k];o.mergedAttrs=aa(o.mergedAttrs,F.hostAttrs),cy(i,o,s,A,F),A0(A,F,m),null!==F.contentQueries&&(o.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(o.flags|=128);const W=F.type.prototype;!_&&(W.ngOnChanges||W.ngOnInit||W.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(o.index),_=!0),!C&&(W.ngOnChanges||W.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(o.index),C=!0),A++}E0(i,o)}m&&function kp(i,s,o){if(s){const u=i.localNames=[];for(let c=0;c<s.length;c+=2){const h=o[s[c+1]];if(null==h)throw new Pe(-301,!1);u.push(s[c],h)}}}(o,u,m)}return o.mergedAttrs=aa(o.mergedAttrs,o.attrs),c}function b0(i,s,o,u,c,h){const m=h.hostBindings;if(m){let _=i.hostBindingOpCodes;null===_&&(_=i.hostBindingOpCodes=[]);const C=~s.index;(function xE(i){let s=i.length;for(;s>0;){const o=i[--s];if("number"==typeof o&&o<0)return o}return 0})(_)!=C&&_.push(C),_.push(u,c,m)}}function Wh(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function gd(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function A0(i,s,o){if(o){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)o[s.exportAs[u]]=i;Or(s)&&(o[""]=i)}}function ly(i,s,o){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+o,i.providerIndexes=s}function cy(i,s,o,u,c){i.data[u]=c;const h=c.factory||(c.factory=ar(c.type)),m=new Yr(h,Or(c),ad);i.blueprint[u]=m,o[u]=m,b0(i,s,0,u,fd(i,o,c.hostVars,pt),c)}function kE(i,s,o){const u=ir(s,i),c=Gl(o),h=i[10],m=Ki(i,Hh(i,c,null,o.onPush?32:16,u,s,h,h.createRenderer(u,o),null,null,null));i[s.index]=m}function Bs(i,s,o,u,c,h){const m=ir(i,s);!function Np(i,s,o,u,c,h,m){if(null==h)i.removeAttribute(s,c,o);else{const _=null==m?ye(h):m(h,u||"",c);i.setAttribute(s,c,_,o)}}(s[11],m,h,i.value,o,u,c)}function NE(i,s,o,u,c,h){const m=h[s];if(null!==m){const _=u.setInput;for(let C=0;C<m.length;){const A=m[C++],k=m[C++],F=m[C++];null!==_?u.setInput(o,F,A,k):o[k]=F}}}function PE(i,s){let o=null,u=0;for(;u<s.length;){const c=s[u];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===o&&(o=[]),o.push(c,i[c],s[u+1])),u+=2}else u+=2;else u+=4}return o}function md(i,s,o,u){return new Array(i,!0,!1,s,null,0,u,o,null,null)}function kr(i,s){const o=Xt(s,i);if(es(o)){const u=o[1];48&o[2]?ba(u,o,u.template,o[8]):o[5]>0&&zh(o)}}function zh(i){for(let u=wl(i);null!==u;u=Hc(u))for(let c=10;c<u.length;c++){const h=u[c];if(es(h))if(512&h[2]){const m=h[1];ba(m,h,m.template,h[8])}else h[5]>0&&zh(h)}const o=i[1].components;if(null!==o)for(let u=0;u<o.length;u++){const c=Xt(o[u],i);es(c)&&c[5]>0&&zh(c)}}function S0(i,s){const o=Xt(s,i),u=o[1];(function qh(i,s){for(let o=s.length;o<i.blueprint.length;o++)s.push(i.blueprint[o])})(u,o),Sp(u,o,o[8])}function Ki(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function Kh(i){for(;i;){i[2]|=32;const s=ga(i);if(Bu(i)&&!s)return i;i=s}return null}function Zh(i,s,o,u=!0){const c=s[10];c.begin&&c.begin();try{ba(i,s,i.template,o)}catch(m){throw u&&yd(s,m),m}finally{c.end&&c.end()}}function Rp(i,s,o){Ku(0),s(i,o)}function dy(i){return i[7]||(i[7]=[])}function x0(i){return i.cleanup||(i.cleanup=[])}function yd(i,s){const o=i[9],u=o?o.get(qe,null):null;u&&u.handleError(s)}function Yh(i,s,o,u,c){for(let h=0;h<o.length;){const m=o[h++],_=o[h++],C=s[m],A=i.data[m];null!==A.setInput?A.setInput(C,c,u,_):C[_]=c}}function Qh(i,s,o){let u=o?i.styles:null,c=o?i.classes:null,h=0;if(null!==s)for(let m=0;m<s.length;m++){const _=s[m];"number"==typeof _?h=_:1==h?c=be(c,_):2==h&&(u=be(u,_+": "+s[++m]+";"))}o?i.styles=u:i.stylesWithoutHost=u,o?i.classes=c:i.classesWithoutHost=c}function vd(i,s,o,u,c=!1){for(;null!==o;){const h=s[o.index];if(null!==h&&u.push(Dn(h)),zr(h))for(let _=10;_<h.length;_++){const C=h[_],A=C[1].firstChild;null!==A&&vd(C[1],C,A,u)}const m=o.type;if(8&m)vd(i,s,o.child,u);else if(32&m){const _=vl(o,s);let C;for(;C=_();)u.push(C)}else if(16&m){const _=R_(s,o);if(Array.isArray(_))u.push(..._);else{const C=ga(s[16]);vd(C[1],C,_,u,!0)}}o=c?o.projectionNext:o.next}return u}class _d{constructor(s,o){this._lView=s,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,o=s[1];return vd(o,s,o.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(zr(s)){const o=s[8],u=o?o.indexOf(this):-1;u>-1&&(Cl(s,u),Ms(o,u))}this._attachedToViewContainer=!1}Jf(this._lView[1],this._lView)}onDestroy(s){!function uy(i,s,o,u){const c=dy(s);null===o?c.push(u):(c.push(o),i.firstCreatePass&&x0(i).push(u,c.length-1))}(this._lView[1],this._lView,null,s)}markForCheck(){Kh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Zh(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Pe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Xf(i,s){Ah(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Pe(902,!1);this._appRef=s}}class FE extends _d{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;Zh(s[1],s,s[8],!1)}checkNoChanges(){}get context(){return null}}class Op extends mp{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const o=M(s);return new Po(o,this.ngModule)}}function k0(i){const s=[];for(let o in i)i.hasOwnProperty(o)&&s.push({propName:i[o],templateName:o});return s}class wd{constructor(s,o){this.injector=s,this.parentInjector=o}get(s,o,u){const c=this.injector.get(s,Ml,u);return c!==Ml||o===Ml?c:this.parentInjector.get(s,o,u)}}class Po extends pr{constructor(s,o){super(),this.componentDef=s,this.ngModule=o,this.componentType=s.type,this.selector=function Jn(i){return i.map(s0).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return k0(this.componentDef.inputs)}get outputs(){return k0(this.componentDef.outputs)}create(s,o,u,c){let h=(c=c||this.ngModule)instanceof $i?c:c?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const m=h?new wd(s,h):s,_=m.get(Um,null);if(null===_)throw new Pe(407,!1);const C=m.get(e0,null),A=_.createRenderer(null,this.componentDef),k=this.componentDef.selectors[0][0]||"div",F=u?function tn(i,s,o){return i.selectRootElement(s,o===ht.ShadowDom)}(A,u,this.componentDef.encapsulation):Ur(A,k,function LE(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(k)),W=this.componentDef.onPush?288:272,ne=Gh(0,null,null,1,0,null,null,null,null,null),_e=Hh(null,ne,null,W,null,null,_,A,C,m,null);let Be,Ye;so(_e);try{const ut=function oi(i,s,o,u,c,h){const m=o[1];o[22]=i;const C=hd(m,22,2,"#host",null),A=C.mergedAttrs=s.hostAttrs;null!==A&&(Qh(C,A,!0),null!==i&&(Vi(c,i,A),null!==C.classes&&An(c,i,C.classes),null!==C.styles&&Cm(c,i,C.styles)));const k=u.createRenderer(i,s),F=Hh(o,Gl(s),null,s.onPush?32:16,o[22],C,u,k,h||null,null,null);return m.firstCreatePass&&(Ss(Bi(C,o),m,s.type),gd(m,C),ly(C,o.length,1)),Ki(o,F),o[22]=F}(F,this.componentDef,_e,_,A);if(F)if(u)Vi(A,F,["ng-version",It.full]);else{const{attrs:wt,classes:Se}=function wp(i){const s=[],o=[];let u=1,c=2;for(;u<i.length;){let h=i[u];if("string"==typeof h)2===c?""!==h&&s.push(h,i[++u]):8===c&&o.push(h);else{if(!jr(c))break;c=h}u++}return{attrs:s,classes:o}}(this.componentDef.selectors[0]);wt&&Vi(A,F,wt),Se&&Se.length>0&&An(A,F,Se.join(" "))}if(Ye=eo(ne,22),void 0!==o){const wt=Ye.projection=[];for(let Se=0;Se<this.ngContentSelectors.length;Se++){const Dt=o[Se];wt.push(null!=Dt?Array.from(Dt):null)}}Be=function jE(i,s,o,u){const c=o[1],h=function D0(i,s,o){const u=$n();i.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),cy(i,u,s,fd(i,s,1,null),o),E0(i,u));const c=Ui(s,i,u.directiveStart,u);p(c,s);const h=ir(u,s);return h&&p(h,s),c}(c,o,s);if(i[8]=o[8]=h,null!==u)for(const _ of u)_(h,s);if(s.contentQueries){const _=$n();s.contentQueries(1,h,_.directiveStart)}const m=$n();return!c.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Li(m.index),b0(o[1],m,0,m.directiveStart,m.directiveEnd,s),Wh(s,h)),h}(ut,this.componentDef,_e,[N0]),Sp(ne,_e,null)}finally{ts()}return new BE(this.componentType,Be,xl(Ye,_e),_e,Ye)}}class BE extends class Ne{}{constructor(s,o,u,c,h){super(),this.location=u,this._rootLView=c,this._tNode=h,this.instance=o,this.hostView=this.changeDetectorRef=new FE(c),this.componentType=s}setInput(s,o){const u=this._tNode.inputs;let c;if(null!==u&&(c=u[s])){const h=this._rootLView;Yh(h[1],h,c,s,o),pd(h,this._tNode.index)}}get injector(){return new go(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function N0(){const i=$n();Za(Ae()[1],i)}function Fp(i){let s=function Us(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),o=!0;const u=[i];for(;s;){let c;if(Or(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Pe(903,!1);c=s.\u0275dir}if(c){if(o){u.push(c);const m=i;m.inputs=Vp(i.inputs),m.declaredInputs=Vp(i.declaredInputs),m.outputs=Vp(i.outputs);const _=c.hostBindings;_&&WE(i,_);const C=c.viewQuery,A=c.contentQueries;if(C&&HE(i,C),A&&GE(i,A),ve(i.inputs,c.inputs),ve(i.declaredInputs,c.declaredInputs),ve(i.outputs,c.outputs),Or(c)&&c.data.animation){const k=i.data;k.animation=(k.animation||[]).concat(c.data.animation)}}const h=c.features;if(h)for(let m=0;m<h.length;m++){const _=h[m];_&&_.ngInherit&&_(i),_===Fp&&(o=!1)}}s=Object.getPrototypeOf(s)}!function Lp(i){let s=0,o=null;for(let u=i.length-1;u>=0;u--){const c=i[u];c.hostVars=s+=c.hostVars,c.hostAttrs=aa(c.hostAttrs,o=aa(o,c.hostAttrs))}}(u)}function Vp(i){return i===yr?{}:i===Ct?[]:i}function HE(i,s){const o=i.viewQuery;i.viewQuery=o?(u,c)=>{s(u,c),o(u,c)}:s}function GE(i,s){const o=i.contentQueries;i.contentQueries=o?(u,c,h)=>{s(u,c,h),o(u,c,h)}:s}function WE(i,s){const o=i.hostBindings;i.hostBindings=o?(u,c)=>{s(u,c),o(u,c)}:s}let Bp=null;function $l(){if(!Bp){const i=bt.Symbol;if(i&&i.iterator)Bp=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<s.length;++o){const u=s[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Bp=u)}}}return Bp}function Xh(i){return!!hy(i)&&(Array.isArray(i)||!(i instanceof Map)&&$l()in i)}function hy(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Xr(i,s,o){return!Object.is(i[s],o)&&(i[s]=o,!0)}function ef(i,s,o,u){const c=Ae();return Xr(c,na(),s)&&(Gt(),Bs(_n(),c,i,s,o,u)),ef}function my(i,s,o,u,c,h,m,_){const C=Ae(),A=Gt(),k=i+22,F=A.firstCreatePass?function P0(i,s,o,u,c,h,m,_,C){const A=s.consts,k=hd(s,i,4,m||null,Zr(A,_));Wl(s,o,k,Zr(A,C)),Za(s,k);const F=k.tViews=Gh(2,k,u,c,h,s.directiveRegistry,s.pipeRegistry,null,s.schemas,A);return null!==s.queries&&(s.queries.template(s,k),F.queries=s.queries.embeddedTView(k)),k}(k,A,C,s,o,u,c,h,m):A.data[k];Tr(F,!1);const W=C[11].createComment("");Ao(A,C,W,F),p(W,C),Ki(C,C[k]=md(W,C,W,F)),$o(F)&&xp(A,C,F),null!=m&&Mp(C,F,_)}function Ma(i,s,o){const u=Ae();return Xr(u,na(),s)&&function Ci(i,s,o,u,c,h,m,_){const C=ir(s,o);let k,A=s.inputs;!_&&null!=A&&(k=A[u])?(Yh(i,o,k,u,c),Vu(s)&&pd(o,s.index)):3&s.type&&(u=function wi(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(u),c=null!=m?m(c,s.value||"",u):c,h.setProperty(C,u,c))}(Gt(),_n(),u,i,s,u[11],o,!1),Ma}function yy(i,s,o,u,c){const m=c?"class":"style";Yh(i,o,s.inputs[m],m,u)}function Gp(i,s,o,u){const c=Ae(),h=Gt(),m=22+i,_=c[11],C=c[m]=Ur(_,s,function Qu(){return St.lFrame.currentNamespace}()),A=h.firstCreatePass?function R0(i,s,o,u,c,h,m){const _=s.consts,A=hd(s,i,2,c,Zr(_,h));return Wl(s,o,A,Zr(_,m)),null!==A.attrs&&Qh(A,A.attrs,!1),null!==A.mergedAttrs&&Qh(A,A.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,A),A}(m,h,c,0,s,o,u):h.data[m];Tr(A,!0);const k=A.mergedAttrs;null!==k&&Vi(_,C,k);const F=A.classes;null!==F&&An(_,C,F);const W=A.styles;return null!==W&&Cm(_,C,W),64!=(64&A.flags)&&Ao(h,c,C,A),0===function Yo(){return St.lFrame.elementDepthCount}()&&p(C,c),function _c(){St.lFrame.elementDepthCount++}(),$o(A)&&(xp(h,c,A),function ay(i,s,o){if(qs(s)){const c=s.directiveEnd;for(let h=s.directiveStart;h<c;h++){const m=i.data[h];m.contentQueries&&m.contentQueries(1,o[h],h)}}}(h,A,c)),null!==u&&Mp(c,A),Gp}function Wp(){let i=$n();Ka()?function ro(){St.lFrame.isParent=!1}():(i=i.parent,Tr(i,!1));const s=i;!function Qo(){St.lFrame.elementDepthCount--}();const o=Gt();return o.firstCreatePass&&(Za(o,i),qs(i)&&o.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Qa(i){return 0!=(16&i.flags)}(s)&&yy(o,s,Ae(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Xa(i){return 0!=(32&i.flags)}(s)&&yy(o,s,Ae(),s.stylesWithoutHost,!1),Wp}function vy(i,s,o,u){return Gp(i,s,o,u),Wp(),vy}function wy(i){return!!i&&"function"==typeof i.then}function $p(i){return!!i&&"function"==typeof i.subscribe}const rf=$p;function Cy(i,s,o,u){const c=Ae(),h=Gt(),m=$n();return function of(i,s,o,u,c,h,m,_){const C=$o(u),k=i.firstCreatePass&&x0(i),F=s[8],W=dy(s);let ne=!0;if(3&u.type||_){const Ye=ir(u,s),ut=_?_(Ye):Ye,wt=W.length,Se=_?an=>_(Dn(an[u.index])):u.index;let Dt=null;if(!_&&C&&(Dt=function sf(i,s,o,u){const c=i.cleanup;if(null!=c)for(let h=0;h<c.length-1;h+=2){const m=c[h];if(m===o&&c[h+1]===u){const _=s[7],C=c[h+2];return _.length>C?_[C]:null}"string"==typeof m&&(h+=2)}return null}(i,s,c,u.index)),null!==Dt)(Dt.__ngLastListenerFn__||Dt).__ngNextListenerFn__=h,Dt.__ngLastListenerFn__=h,ne=!1;else{h=Iy(u,s,F,h,!1);const an=o.listen(ut,c,h);W.push(h,an),k&&k.push(c,Se,wt,wt+1)}}else h=Iy(u,s,F,h,!1);const _e=u.outputs;let Be;if(ne&&null!==_e&&(Be=_e[c])){const Ye=Be.length;if(Ye)for(let ut=0;ut<Ye;ut+=2){const Sn=s[Be[ut]][Be[ut+1]].subscribe(h),hc=W.length;W.push(h,Sn),k&&k.push(c,u.index,hc,-(hc+1))}}}(h,c,c[11],m,i,s,0,u),Cy}function Dd(i,s,o,u){try{return!1!==o(u)}catch(c){return yd(i,c),!1}}function Iy(i,s,o,u,c){return function h(m){if(m===Function)return u;Kh(2&i.flags?Xt(i.index,s):s);let C=Dd(s,0,u,m),A=h.__ngNextListenerFn__;for(;A;)C=Dd(s,0,A,m)&&C,A=A.__ngNextListenerFn__;return c&&!1===C&&(m.preventDefault(),m.returnValue=!1),C}}function V0(i,s,o,u,c){const h=i[o+1],m=null===s;let _=u?fs(h):wa(h),C=!1;for(;0!==_&&(!1===C||m);){const k=i[_+1];nI(i[_],s)&&(C=!0,i[_+1]=u?ty(k):Xm(k)),_=u?fs(k):wa(k)}C&&(i[o+1]=u?Xm(h):ty(h))}function nI(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&ji(i,s)>=0}function Sy(i,s){return function Hs(i,s,o,u){const c=Ae(),h=Gt(),m=function Fi(i){const s=St.lFrame,o=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,o}(2);h.firstUpdatePass&&function xy(i,s,o,u){const c=i.data;if(null===c[o+1]){const h=c[Cn()],m=function $0(i,s){return s>=i.expandoStartIndex}(i,o);(function Y0(i,s){return 0!=(i.flags&(s?16:32))})(h,u)&&null===s&&!m&&(s=!1),s=function My(i,s,o,u){const c=function qu(i){const s=St.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let h=u?s.residualClasses:s.residualStyles;if(null===c)0===(u?s.classBindings:s.styleBindings)&&(o=Ql(o=lf(null,i,s,o,u),s.attrs,u),h=null);else{const m=s.directiveStylingLast;if(-1===m||i[m]!==c)if(o=lf(c,i,s,o,u),null===h){let C=function ky(i,s,o){const u=o?s.classBindings:s.styleBindings;if(0!==wa(u))return i[fs(u)]}(i,s,u);void 0!==C&&Array.isArray(C)&&(C=lf(null,i,s,C[1],u),C=Ql(C,s.attrs,u),function uf(i,s,o,u){i[fs(o?s.classBindings:s.styleBindings)]=u}(i,s,u,C))}else h=function Kp(i,s,o){let u;const c=s.directiveEnd;for(let h=1+s.directiveStylingLast;h<c;h++)u=Ql(u,i[h].hostAttrs,o);return Ql(u,s.attrs,o)}(i,s,u)}return void 0!==h&&(u?s.residualClasses=h:s.residualStyles=h),o}(c,h,s,u),function eI(i,s,o,u,c,h){let m=h?s.classBindings:s.styleBindings,_=fs(m),C=wa(m);i[u]=o;let k,A=!1;if(Array.isArray(o)){const F=o;k=F[1],(null===k||ji(F,k)>0)&&(A=!0)}else k=o;if(c)if(0!==C){const W=fs(i[_+1]);i[u+1]=Ul(W,_),0!==W&&(i[W+1]=Jm(i[W+1],u)),i[_+1]=function Hr(i,s){return 131071&i|s<<17}(i[_+1],u)}else i[u+1]=Ul(_,0),0!==_&&(i[_+1]=Jm(i[_+1],u)),_=u;else i[u+1]=Ul(C,0),0===_?_=u:i[C+1]=Jm(i[C+1],u),C=u;A&&(i[u+1]=Xm(i[u+1])),V0(i,k,u,!0),V0(i,k,u,!1),function tI(i,s,o,u,c){const h=c?i.residualClasses:i.residualStyles;null!=h&&"string"==typeof s&&ji(h,s)>=0&&(o[u+1]=ty(o[u+1]))}(s,k,i,u,h),m=Ul(_,C),h?s.classBindings=m:s.styleBindings=m}(c,h,s,o,m,u)}}(h,i,m,u),s!==pt&&Xr(c,m,s)&&function Ny(i,s,o,u,c,h,m,_){if(!(3&s.type))return;const C=i.data,A=C[_+1];Yp(function ey(i){return 1==(1&i)}(A)?Zp(C,s,o,c,wa(A),m):void 0)||(Yp(h)||function Qm(i){return 2==(2&i)}(A)&&(h=Zp(C,null,o,c,_,m)),function sp(i,s,o,u,c){if(s)c?i.addClass(o,u):i.removeClass(o,u);else{let h=-1===u.indexOf("-")?void 0:yi.DashCase;null==c?i.removeStyle(o,u,h):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),h|=yi.Important),i.setStyle(o,u,c,h))}}(u,m,ni(Cn(),o),c,h))}(h,h.data[Cn()],c,c[11],i,c[m+1]=function Z0(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=de(function So(i){return i instanceof class F_{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}?i.changingThisBreaksApplicationSecurity:i}(i)))),i}(s,o),u,m)}(i,s,null,!0),Sy}function lf(i,s,o,u,c){let h=null;const m=o.directiveEnd;let _=o.directiveStylingLast;for(-1===_?_=o.directiveStart:_++;_<m&&(h=s[_],u=Ql(u,h.hostAttrs,c),h!==i);)_++;return null!==i&&(o.directiveStylingLast=_),u}function Ql(i,s,o){const u=o?1:2;let c=-1;if(null!==s)for(let h=0;h<s.length;h++){const m=s[h];"number"==typeof m?c=m:c===u&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Vr(i,m,!!o||s[++h]))}return void 0===i?null:i}function Zp(i,s,o,u,c,h){const m=null===s;let _;for(;c>0;){const C=i[c],A=Array.isArray(C),k=A?C[1]:C,F=null===k;let W=o[c+1];W===pt&&(W=F?Ct:void 0);let ne=F?da(W,u):k===u?W:void 0;if(A&&!Yp(ne)&&(ne=da(C,u)),Yp(ne)&&(_=ne,m))return _;const _e=i[c+1];c=m?fs(_e):wa(_e)}if(null!==s){let C=h?s.residualClasses:s.residualStyles;null!=C&&(_=da(C,u))}return _}function Yp(i){return void 0!==i}function Py(i,s=""){const o=Ae(),u=Gt(),c=i+22,h=u.firstCreatePass?hd(u,c,1,s,null):u.data[c],m=o[c]=function Qf(i,s){return i.createText(s)}(o[11],s);Ao(u,o,m,h),Tr(h,!1)}function Ry(i){return Oa("",i,""),Ry}function Oa(i,s,o){const u=Ae(),c=function Iu(i,s,o,u){return Xr(i,na(),o)?s+ye(o)+u:pt}(u,i,s,o);return c!==pt&&function Sa(i,s,o){const u=ni(s,i);!function Gc(i,s,o){i.setValue(s,o)}(i[11],u,o)}(u,Cn(),c),Oa}const Gs=void 0;var Td=["en",[["a","p"],["AM","PM"],Gs],[["AM","PM"],Gs,Gs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Gs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Gs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Gs,"{1} 'at' {0}",Gs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Wy(i){const o=Math.floor(Math.abs(i)),u=i.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let ku={};function Jl(i){const s=function dw(i){return i.toLowerCase().replace(/_/g,"-")}(i);let o=rg(s);if(o)return o;const u=s.split("-")[0];if(o=rg(u),o)return o;if("en"===u)return Td;throw new Pe(701,!1)}function zy(i){return Jl(i)[gt.PluralCase]}function rg(i){return i in ku||(ku[i]=bt.ng&&bt.ng.common&&bt.ng.common.locales&&bt.ng.common.locales[i]),ku[i]}var gt=(()=>((gt=gt||{})[gt.LocaleId=0]="LocaleId",gt[gt.DayPeriodsFormat=1]="DayPeriodsFormat",gt[gt.DayPeriodsStandalone=2]="DayPeriodsStandalone",gt[gt.DaysFormat=3]="DaysFormat",gt[gt.DaysStandalone=4]="DaysStandalone",gt[gt.MonthsFormat=5]="MonthsFormat",gt[gt.MonthsStandalone=6]="MonthsStandalone",gt[gt.Eras=7]="Eras",gt[gt.FirstDayOfWeek=8]="FirstDayOfWeek",gt[gt.WeekendRange=9]="WeekendRange",gt[gt.DateFormat=10]="DateFormat",gt[gt.TimeFormat=11]="TimeFormat",gt[gt.DateTimeFormat=12]="DateTimeFormat",gt[gt.NumberSymbols=13]="NumberSymbols",gt[gt.NumberFormats=14]="NumberFormats",gt[gt.CurrencyCode=15]="CurrencyCode",gt[gt.CurrencySymbol=16]="CurrencySymbol",gt[gt.CurrencyName=17]="CurrencyName",gt[gt.Currencies=18]="Currencies",gt[gt.Directionality=19]="Directionality",gt[gt.PluralCase=20]="PluralCase",gt[gt.ExtraData=21]="ExtraData",gt))();const Sd="en-US";let Zy=Sd;function wv(i,s,o,u,c){if(i=J(i),Array.isArray(i))for(let h=0;h<i.length;h++)wv(i[h],s,o,u,c);else{const h=Gt(),m=Ae();let _=hu(i)?i:J(i.provide),C=fu(i);const A=$n(),k=1048575&A.providerIndexes,F=A.directiveStart,W=A.providerIndexes>>20;if(hu(i)||!i.multi){const ne=new Yr(C,c,ad),_e=gf(_,s,c?k:k+W,F);-1===_e?(Ss(Bi(A,m),h,_),pf(h,i,s.length),s.push(_),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),o.push(ne),m.push(ne)):(o[_e]=ne,m[_e]=ne)}else{const ne=gf(_,s,k+W,F),_e=gf(_,s,k,k+W),Be=ne>=0&&o[ne],Ye=_e>=0&&o[_e];if(c&&!Ye||!c&&!Be){Ss(Bi(A,m),h,_);const ut=function Iv(i,s,o,u,c){const h=new Yr(i,o,ad);return h.multi=[],h.index=s,h.componentProviders=0,Cv(h,c,u&&!o),h}(c?kI:Sw,o.length,c,u,C);!c&&Ye&&(o[_e].providerFactory=ut),pf(h,i,s.length,0),s.push(_),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),o.push(ut),m.push(ut)}else pf(h,i,ne>-1?ne:_e,Cv(o[c?_e:ne],C,!c&&u));!c&&u&&Ye&&o[_e].componentProviders++}}}function pf(i,s,o,u){const c=hu(s),h=function sE(i){return!!i.useClass}(s);if(c||h){const C=(h?J(s.useClass):s).prototype.ngOnDestroy;if(C){const A=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const k=A.indexOf(o);-1===k?A.push(o,[u,C]):A[k+1].push(u,C)}else A.push(o,C)}}}function Cv(i,s,o){return o&&i.componentProviders++,i.multi.push(s)-1}function gf(i,s,o,u){for(let c=o;c<u;c++)if(s[c]===i)return c;return-1}function Sw(i,s,o,u){return Ev(this.multi,[])}function kI(i,s,o,u){const c=this.multi;let h;if(this.providerFactory){const m=this.providerFactory.componentProviders,_=Ui(o,o[1],this.providerFactory.index,u);h=_.slice(0,m),Ev(c,h);for(let C=m;C<_.length;C++)h.push(_[C])}else h=[],Ev(c,h);return h}function Ev(i,s){for(let o=0;o<i.length;o++)s.push((0,i[o])());return s}function xw(i,s=[]){return o=>{o.providersResolver=(u,c)=>function _v(i,s,o){const u=Gt();if(u.firstCreatePass){const c=Or(i);wv(o,u.data,u.blueprint,c,!0),wv(s,u.data,u.blueprint,c,!1)}}(u,c?c(i):i,s)}}class Nu{}function bv(i,s){return new Av(i,s??null)}class Av extends Nu{constructor(s,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Op(this);const u=function rt(i,s){const o=i[Wt]||null;if(!o&&!0===s)throw new Error(`Type ${de(i)} does not have '\u0275mod' property.`);return o}(s);this._bootstrapComponents=function Mo(i){return i instanceof Function?i():i}(u.bootstrap),this._r3Injector=nd(s,o,[{provide:Nu,useValue:this},{provide:mp,useValue:this.componentFactoryResolver}],de(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class mg extends class Dv{}{constructor(s){super(),this.moduleType=s}create(s){return new Av(this.moduleType,s)}}function Cg(i,s,o,u,c,h,m){const _=s+o;return function Eu(i,s,o,u){const c=Xr(i,s,o);return Xr(i,s+1,u)||c}(i,_,c,h)?function Ro(i,s,o){return i[s]=o}(i,_+2,m?u.call(m,c,h):u(c,h)):function Od(i,s){const o=i[s];return o===pt?void 0:o}(i,_+2)}function Pv(i,s){const o=Gt();let u;const c=i+22;o.firstCreatePass?(u=function Dg(i,s){if(s)for(let o=s.length-1;o>=0;o--){const u=s[o];if(i===u.name)return u}}(s,o.pipeRegistry),o.data[c]=u,u.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(c,u.onDestroy)):u=o.data[c];const h=u.factory||(u.factory=ar(u.type)),m=ln(ad);try{const _=ua(!1),C=h();return ua(_),function Hp(i,s,o,u){o>=i.data.length&&(i.data[o]=null,i.blueprint[o]=null),s[o]=u}(o,Ae(),c,C),C}finally{ln(m)}}function Ov(i,s,o,u){const c=i+22,h=Ae(),m=function ci(i,s){return i[s]}(h,c);return function _f(i,s){return i[1].data[s].pure}(h,c)?Cg(h,function zn(){const i=St.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}(),s,m.transform,o,u,m):m.transform(o,u)}function bg(i){return s=>{setTimeout(i,void 0,s)}}const Lo=class HI extends g.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,o,u){let c=s,h=o||(()=>null),m=u;if(s&&"object"==typeof s){const C=s;c=C.next?.bind(C),h=C.error?.bind(C),m=C.complete?.bind(C)}this.__isAsync&&(h=bg(h),c&&(c=bg(c)),m&&(m=bg(m)));const _=super.subscribe({next:c,error:h,complete:m});return s instanceof j.w0&&s.add(_),_}};let wf=(()=>{class i{}return i.__NG_ELEMENT_ID__=Vv,i})();const GI=wf,WI=class extends GI{constructor(s,o,u){super(),this._declarationLView=s,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(s,o){const u=this._declarationTContainer.tViews,c=Hh(this._declarationLView,u,s,16,null,u.declTNode,null,null,null,null,o||null);c[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(c[19]=m.createEmbeddedView(u)),Sp(u,c,s),new _d(c)}};function Vv(){return function Ag(i,s){return 4&i.type?new WI(s,i,xl(i,s)):null}($n(),Ae())}let Tg=(()=>{class i{}return i.__NG_ELEMENT_ID__=Fn,i})();function Fn(){return function Uw(i,s){let o;const u=s[i.index];if(zr(u))o=u;else{let c;if(8&i.type)c=Dn(u);else{const h=s[11];c=h.createComment("");const m=ir(i,s);El(h,bh(h,m),c,function N_(i,s){return i.nextSibling(s)}(h,m),!1)}s[i.index]=o=md(u,s,c,i),Ki(s,o)}return new Bw(o,i,s)}($n(),Ae())}const Mb=Tg,Bw=class extends Mb{constructor(s,o,u){super(),this._lContainer=s,this._hostTNode=o,this._hostLView=u}get element(){return xl(this._hostTNode,this._hostLView)}get injector(){return new go(this._hostTNode,this._hostLView)}get parentInjector(){const s=la(this._hostTNode,this._hostLView);if(sh(s)){const o=rs(s,this._hostLView),u=qn(s);return new go(o[1].data[u+8],o)}return new go(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const o=nr(this._lContainer);return null!==o&&o[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,o,u){let c,h;"number"==typeof u?c=u:null!=u&&(c=u.index,h=u.injector);const m=s.createEmbeddedView(o||{},h);return this.insert(m,c),m}createComponent(s,o,u,c,h){const m=s&&!function ou(i){return"function"==typeof i}(s);let _;if(m)_=o;else{const F=o||{};_=F.index,u=F.injector,c=F.projectableNodes,h=F.environmentInjector||F.ngModuleRef}const C=m?s:new Po(M(s)),A=u||this.parentInjector;if(!h&&null==C.ngModule){const W=(m?A:this.parentInjector).get($i,null);W&&(h=W)}const k=C.create(A,c,void 0,h);return this.insert(k.hostView,_),k}insert(s,o){const u=s._lView,c=u[1];if(function $u(i){return zr(i[3])}(u)){const k=this.indexOf(s);if(-1!==k)this.detach(k);else{const F=u[3],W=new Bw(F,F[6],F[3]);W.detach(W.indexOf(s))}}const h=this._adjustIndex(o),m=this._lContainer;!function pm(i,s,o,u){const c=10+u,h=o.length;u>0&&(o[c-1][4]=s),u<h-10?(s[4]=o[c],en(o,10+u,s)):(o.push(s),s[4]=null),s[3]=o;const m=s[17];null!==m&&o!==m&&function k_(i,s){const o=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===o?i[9]=[s]:o.push(s)}(m,s);const _=s[19];null!==_&&_.insertView(i),s[2]|=64}(c,u,m,h);const _=wm(h,m),C=u[11],A=bh(C,m[7]);return null!==A&&function Eh(i,s,o,u,c,h){u[0]=c,u[6]=s,Ah(i,u,o,1,c,h)}(c,m[6],C,u,A,_),s.attachToViewContainerRef(),en(Sg(m),h,s),s}move(s,o){return this.insert(s,o)}indexOf(s){const o=nr(this._lContainer);return null!==o?o.indexOf(s):-1}remove(s){const o=this._adjustIndex(s,-1),u=Cl(this._lContainer,o);u&&(Ms(Sg(this._lContainer),o),Jf(u[1],u))}detach(s){const o=this._adjustIndex(s,-1),u=Cl(this._lContainer,o);return u&&null!=Ms(Sg(this._lContainer),o)?new _d(u):null}_adjustIndex(s,o=0){return s??this.length+o}};function nr(i){return i[8]}function Sg(i){return i[8]||(i[8]=[])}function Df(...i){}const uc=new gn("Application Initializer");let Ud=(()=>{class i{constructor(o){this.appInits=o,this.resolve=Df,this.reject=Df,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const h=this.appInits[c]();if(wy(h))o.push(h);else if(rf(h)){const m=new Promise((_,C)=>{h.subscribe({complete:_,error:C})});o.push(m)}}Promise.all(o).then(()=>{u()}).catch(c=>{this.reject(c)}),0===o.length&&u(),this.initialized=!0}}return i.\u0275fac=function(o){return new(o||i)(cn(uc,8))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const oD=new gn("AppId",{providedIn:"root",factory:function aD(){return`${Bg()}${Bg()}${Bg()}`}});function Bg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ja=new gn("Platform Initializer"),uD=new gn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),lD=new gn("appBootstrapListener"),Ug=new gn("LocaleId",{providedIn:"root",factory:()=>function Cr(i,s=Je.Default){return"number"!=typeof s&&(s=0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)),cn(i,s)}(Ug,Je.Optional|Je.SkipSelf)||function cD(){return typeof $localize<"u"&&$localize.locale||Sd}()}),zb=new gn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"}),Hg=(()=>Promise.resolve(0))();function Yv(i){typeof Zone>"u"?Hg.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Yi{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Lo(!1),this.onMicrotaskEmpty=new Lo(!1),this.onStable=new Lo(!1),this.onError=new Lo(!1),typeof Zone>"u")throw new Pe(908,!1);Zone.assertZonePatched();const c=this;if(c._nesting=0,c._outer=c._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const h=Zone.AsyncStackTaggingZoneSpec;c._inner=c._inner.fork(new h("Angular"))}Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!u&&o,c.shouldCoalesceRunChangeDetection=u,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function lC(){let i=bt.requestAnimationFrame,s=bt.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const o=i[Zone.__symbol__("OriginalDelegate")];o&&(i=o);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function cC(i){const s=()=>{!function ui(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(bt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Gg(i),i.isCheckStableRunning=!0,Di(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Gg(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,c,h,m,_)=>{try{return jd(i),o.invokeTask(c,h,m,_)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||i.shouldCoalesceRunChangeDetection)&&s(),Hd(i)}},onInvoke:(o,u,c,h,m,_,C)=>{try{return jd(i),o.invoke(c,h,m,_,C)}finally{i.shouldCoalesceRunChangeDetection&&s(),Hd(i)}},onHasTask:(o,u,c,h)=>{o.hasTask(c,h),u===c&&("microTask"==h.change?(i._hasPendingMicrotasks=h.microTask,Gg(i),Di(i)):"macroTask"==h.change&&(i.hasPendingMacrotasks=h.macroTask))},onHandleError:(o,u,c,h)=>(o.handleError(c,h),i.runOutsideAngular(()=>i.onError.emit(h)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Yi.isInAngularZone())throw new Pe(909,!1)}static assertNotInAngularZone(){if(Yi.isInAngularZone())throw new Pe(909,!1)}run(s,o,u){return this._inner.run(s,o,u)}runTask(s,o,u,c){const h=this._inner,m=h.scheduleEventTask("NgZoneEvent: "+c,s,lc,Df,Df);try{return h.runTask(m,o,u)}finally{h.cancelTask(m)}}runGuarded(s,o,u){return this._inner.runGuarded(s,o,u)}runOutsideAngular(s){return this._outer.run(s)}}const lc={};function Di(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Gg(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function jd(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Hd(i){i._nesting--,Di(i)}class li{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Lo,this.onMicrotaskEmpty=new Lo,this.onStable=new Lo,this.onError=new Lo}run(s,o,u){return s.apply(o,u)}runGuarded(s,o,u){return s.apply(o,u)}runOutsideAngular(s){return s()}runTask(s,o,u,c){return s.apply(o,u)}}const dC=new gn(""),Wg=new gn("");let Ha,Gd=(()=>{class i{constructor(o,u,c){this._ngZone=o,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ha||(function Qv(i){Ha=i}(c),c.addToWindow(u)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Yi.assertNotInAngularZone(),Yv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Yv(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,c){let h=-1;u&&u>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==h),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:h,updateCb:c})}whenStable(o,u,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,u,c){return[]}}return i.\u0275fac=function(o){return new(o||i)(cn(Yi),cn(Ru),cn(Wg))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac}),i})(),Ru=(()=>{class i{constructor(){this._applications=new Map}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return Ha?.findTestabilityInTree(this,o,u)??null}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Ou=null;const hC=new gn("AllowMultipleToken"),Xv=new gn("PlatformDestroyListeners");function gC(i,s,o=[]){const u=`Platform: ${s}`,c=new gn(u);return(h=[])=>{let m=e_();if(!m||m.injector.get(hC,!1)){const _=[...o,...h,{provide:c,useValue:!0}];i?i(_):function gD(i){if(Ou&&!Ou.get(hC,!1))throw new Pe(400,!1);Ou=i;const s=i.get(vC);(function pC(i){const s=i.get(ja,null);s&&s.forEach(o=>o())})(i)}(function yC(i=[],s){return Ol.create({name:s,providers:[{provide:Jc,useValue:"platform"},{provide:Xv,useValue:new Set([()=>Ou=null])},...i]})}(_,u))}return function mC(i){const s=e_();if(!s)throw new Pe(401,!1);return s}()}}function e_(){return Ou?.get(vC)??null}let vC=(()=>{class i{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const c=function wC(i,s){let o;return o="noop"===i?new li:("zone.js"===i?void 0:i)||new Yi(s),o}(u?.ngZone,function _C(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(u)),h=[{provide:Yi,useValue:c}];return c.run(()=>{const m=Ol.create({providers:h,parent:this.injector,name:o.moduleType.name}),_=o.create(m),C=_.injector.get(qe,null);if(!C)throw new Pe(402,!1);return c.runOutsideAngular(()=>{const A=c.onError.subscribe({next:k=>{C.handleError(k)}});_.onDestroy(()=>{jo(this._modules,_),A.unsubscribe()})}),function CC(i,s,o){try{const u=o();return wy(u)?u.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):u}catch(u){throw s.runOutsideAngular(()=>i.handleError(u)),u}}(C,c,()=>{const A=_.injector.get(Ud);return A.runInitializers(),A.donePromise.then(()=>(function ec(i){Ft(i,"Expected localeId to be defined"),"string"==typeof i&&(Zy=i.toLowerCase().replace(/_/g,"-"))}(_.injector.get(Ug,Sd)||Sd),this._moduleDoBootstrap(_),_))})})}bootstrapModule(o,u=[]){const c=t_({},u);return function pD(i,s,o){const u=new mg(o);return Promise.resolve(u)}(0,0,o).then(h=>this.bootstrapModuleFactory(h,c))}_moduleDoBootstrap(o){const u=o.injector.get(Af);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(c=>u.bootstrap(c));else{if(!o.instance.ngDoBootstrap)throw new Pe(403,!1);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Pe(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(Xv,null);o&&(o.forEach(u=>u()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(o){return new(o||i)(cn(Ol))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function t_(i,s){return Array.isArray(s)?s.reduce(t_,i):{...i,...s}}let Af=(()=>{class i{constructor(o,u,c){this._zone=o,this._injector=u,this._exceptionHandler=c,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new N.y(_=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{_.next(this._stable),_.complete()})}),m=new N.y(_=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{Yi.assertNotInAngularZone(),Yv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,_.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{Yi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{_.next(!1)}))});return()=>{C.unsubscribe(),A.unsubscribe()}});this.isStable=(0,se.T)(h,m.pipe((0,ae.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(o,u){const c=o instanceof pr;if(!this._injector.get(Ud).done)throw!c&&function ke(i){const s=M(i)||L(i)||ee(i);return null!==s&&s.standalone}(o),new Pe(405,false);let m;m=c?o:this._injector.get(mp).resolveComponentFactory(o),this.componentTypes.push(m.componentType);const _=function fC(i){return i.isBoundToModule}(m)?void 0:this._injector.get(Nu),A=m.create(Ol.NULL,[],u||m.selector,_),k=A.location.nativeElement,F=A.injector.get(dC,null);return F?.registerApplication(k),A.onDestroy(()=>{this.detachView(A.hostView),jo(this.components,A),F?.unregisterApplication(k)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new Pe(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;jo(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(lD,[]).concat(this._bootstrapListeners).forEach(c=>c(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>jo(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new Pe(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(o){return new(o||i)(cn(Yi),cn($i),cn(qe))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function jo(i,s){const o=i.indexOf(s);o>-1&&i.splice(o,1)}let vD=!0,IC=!1;function n_(){return IC=!0,vD}function _D(){if(IC)throw new Error("Cannot enable prod mode after platform setup.");vD=!1}let wD=(()=>{class i{}return i.__NG_ELEMENT_ID__=Xb,i})();function Xb(i){return function Jb(i,s,o){if(Vu(i)&&!o){const u=Xt(i.index,s);return new _d(u,u)}return 47&i.type?new _d(s[16],s):null}($n(),Ae(),16==(16&i))}class u_{constructor(){}supports(s){return Xh(s)}create(s){return new Kg(s)}}const l_=(i,s)=>s;class Kg{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||l_}forEachItem(s){let o;for(o=this._itHead;null!==o;o=o._next)s(o)}forEachOperation(s){let o=this._itHead,u=this._removalsHead,c=0,h=null;for(;o||u;){const m=!u||o&&o.currentIndex<TC(u,c,h)?o:u,_=TC(m,c,h),C=m.currentIndex;if(m===u)c--,u=u._nextRemoved;else if(o=o._next,null==m.previousIndex)c++;else{h||(h=[]);const A=_-c,k=C-c;if(A!=k){for(let W=0;W<A;W++){const ne=W<h.length?h[W]:h[W]=0,_e=ne+W;k<=_e&&_e<A&&(h[W]=ne+1)}h[m.previousIndex]=k-A}}_!==C&&s(m,_,C)}}forEachPreviousItem(s){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachMovedItem(s){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}forEachIdentityChange(s){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)s(o)}diff(s){if(null==s&&(s=[]),!Xh(s))throw new Pe(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,h,m,o=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let _=0;_<this.length;_++)h=s[_],m=this._trackByFn(_,h),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,h,m,_)),Object.is(o.item,h)||this._addIdentityChange(o,h)):(o=this._mismatch(o,h,m,_),u=!0),o=o._next}else c=0,function ZE(i,s){if(Array.isArray(i))for(let o=0;o<i.length;o++)s(i[o]);else{const o=i[$l()]();let u;for(;!(u=o.next()).done;)s(u.value)}}(s,_=>{m=this._trackByFn(c,_),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,_,m,c)),Object.is(o.item,_)||this._addIdentityChange(o,_)):(o=this._mismatch(o,_,m,c),u=!0),o=o._next,c++}),this.length=c;return this._truncate(o),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,o,u,c){let h;return null===s?h=this._itTail:(h=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._reinsertAfter(s,h,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,c))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._moveAfter(s,h,c)):s=this._addAfter(new c_(o,u),h,c),s}_verifyReinsertion(s,o,u,c){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==h?s=this._reinsertAfter(h,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const o=s._next;this._addToRemovals(this._unlink(s)),s=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,h=s._nextRemoved;return null===c?this._removalsHead=h:c._nextRemoved=h,null===h?this._removalsTail=c:h._prevRemoved=c,this._insertAfter(s,o,u),this._addToMoves(s,u),s}_moveAfter(s,o,u){return this._unlink(s),this._insertAfter(s,o,u),this._addToMoves(s,u),s}_addAfter(s,o,u){return this._insertAfter(s,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,o,u){const c=null===o?this._itHead:o._next;return s._next=c,s._prev=o,null===c?this._itTail=s:c._prev=s,null===o?this._itHead=s:o._next=s,null===this._linkedRecords&&(this._linkedRecords=new AC),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const o=s._prev,u=s._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,s}_addToMoves(s,o){return s.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new AC),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,o){return s.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class c_{constructor(s,o){this.item=s,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class d_{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const o=s._prevDup,u=s._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class AC{constructor(){this.map=new Map}put(s){const o=s.trackById;let u=this.map.get(o);u||(u=new d_,this.map.set(o,u)),u.add(s)}get(s,o){const c=this.map.get(s);return c?c.get(s,o):null}remove(s){const o=s.trackById;return this.map.get(o).remove(s)&&this.map.delete(o),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function TC(i,s,o){const u=i.previousIndex;if(null===u)return u;let c=0;return o&&u<o.length&&(c=o[u]),u+s+c}class SC{constructor(){}supports(s){return s instanceof Map||hy(s)}create(){return new ID}}class ID{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let o;for(o=this._mapHead;null!==o;o=o._next)s(o)}forEachPreviousItem(s){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)s(o)}forEachChangedItem(s){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}diff(s){if(s){if(!(s instanceof Map||hy(s)))throw new Pe(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,c)=>{if(o&&o.key===c)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const h=this._getOrCreateRecordForKey(c,u);o=this._insertBeforeOrAppend(o,h)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,o){if(s){const u=s._prev;return o._next=s,o._prev=u,s._prev=o,u&&(u._next=o),s===this._mapHead&&(this._mapHead=o),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(s,o){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,o);const h=c._prev,m=c._next;return h&&(h._next=m),m&&(m._prev=h),c._next=null,c._prev=null,c}const u=new DD(s);return this._records.set(s,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,o){Object.is(o,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=o,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,o){s instanceof Map?s.forEach(o):Object.keys(s).forEach(u=>o(s[u],u))}}class DD{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Wd(){return new Zg([new u_])}let Zg=(()=>{class i{constructor(o){this.factories=o}static create(o,u){if(null!=u){const c=u.factories.slice();o=o.concat(c)}return new i(o)}static extend(o){return{provide:i,useFactory:u=>i.create(o,u||Wd()),deps:[[i,new Z,new S]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(null!=u)return u;throw new Pe(901,!1)}}return i.\u0275prov=Zt({token:i,providedIn:"root",factory:Wd}),i})();function f_(){return new p_([new SC])}let p_=(()=>{class i{constructor(o){this.factories=o}static create(o,u){if(u){const c=u.factories.slice();o=o.concat(c)}return new i(o)}static extend(o){return{provide:i,useFactory:u=>i.create(o,u||f_()),deps:[[i,new Z,new S]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(u)return u;throw new Pe(901,!1)}}return i.\u0275prov=Zt({token:i,providedIn:"root",factory:f_}),i})();const g_=gC(null,"core",[]);let xC=(()=>{class i{constructor(o){}}return i.\u0275fac=function(o){return new(o||i)(cn(Af))},i.\u0275mod=$t({type:i}),i.\u0275inj=Nt({}),i})();function m_(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(mt,Me,V)=>{V.d(Me,{Z:()=>Pe});var g=V(2090),j=V(4859),N=V(9681),se=V(1877);class ae{constructor(ye,pe){this._delegate=ye,this.firebase=pe,(0,N._addComponent)(ye,new j.wA("app-compat",()=>this,"PUBLIC")),this.container=ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this._delegate.automaticDataCollectionEnabled=ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ye=>{this._delegate.checkDestroyed(),ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(ye,pe=N._DEFAULT_ENTRY_NAME){var $e;this._delegate.checkDestroyed();const Ge=this._delegate.container.getProvider(ye);return!Ge.isInitialized()&&"EXPLICIT"===(null===($e=Ge.getComponent())||void 0===$e?void 0:$e.instantiationMode)&&Ge.initialize(),Ge.getImmediate({identifier:pe})}_removeServiceInstance(ye,pe=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ye).clearInstance(pe)}_addComponent(ye){(0,N._addComponent)(this._delegate,ye)}_addOrOverwriteComponent(ye){(0,N._addOrOverwriteComponent)(this._delegate,ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ve=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function be(){const Ke=function de(Ke){const ye={},pe={__esModule:!0,initializeApp:function xe(te,ue={}){const fe=N.initializeApp(te,ue);if((0,g.r3)(ye,fe.name))return ye[fe.name];const q=new Ke(fe,pe);return ye[fe.name]=q,q},app:Ge,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function we(te){const ue=te.name,fe=ue.replace("-compat","");if(N._registerComponent(te)&&"PUBLIC"===te.type){const q=(Y=Ge())=>{if("function"!=typeof Y[fe])throw ve.create("invalid-app-argument",{appName:ue});return Y[fe]()};void 0!==te.serviceProps&&(0,g.ZB)(q,te.serviceProps),pe[fe]=q,Ke.prototype[fe]=function(...Y){return this._getService.bind(this,ue).apply(this,te.multipleInstances?Y:[])}}return"PUBLIC"===te.type?pe[fe]:null},removeApp:function $e(te){delete ye[te]},useAsService:function Ze(te,ue){return"serverAuth"===ue?null:ue},modularAPIs:N}};function Ge(te){if(!(0,g.r3)(ye,te=te||N._DEFAULT_ENTRY_NAME))throw ve.create("no-app",{appName:te});return ye[te]}return pe.default=pe,Object.defineProperty(pe,"apps",{get:function Te(){return Object.keys(ye).map(te=>ye[te])}}),Ge.App=Ke,pe}(ae);return Ke.INTERNAL=Object.assign(Object.assign({},Ke.INTERNAL),{createFirebaseNamespace:be,extendNamespace:function ye(pe){(0,g.ZB)(Ke,pe)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Ke}(),G=new se.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ke=self.firebase.SDK_VERSION;Ke&&Ke.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Pe=$;!function Oe(Ke){(0,N.registerVersion)("@firebase/app-compat","0.1.39",Ke)}()},9681:(mt,Me,V)=>{V.r(Me),V.d(Me,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>xi,_DEFAULT_ENTRY_NAME:()=>Ft,_addComponent:()=>Kt,_addOrOverwriteComponent:()=>Zt,_apps:()=>nn,_clearComponents:()=>Ti,_components:()=>dn,_getProvider:()=>Nt,_registerComponent:()=>Bt,_removeServiceInstance:()=>mr,deleteApp:()=>Mi,getApp:()=>Ln,getApps:()=>ei,initializeApp:()=>br,onLog:()=>Vn,registerVersion:()=>Hn,setLogLevel:()=>ln});var g=V(5861),j=V(4859),N=V(1877),se=V(2090),ae=V(8766);class me{constructor(Ce){this.container=Ce}getPlatformInfoString(){return this.container.getProviders().map(tt=>{if(function ve(et){return"VERSION"===et.getComponent()?.type}(tt)){const yt=tt.getImmediate();return`${yt.library}/${yt.version}`}return null}).filter(tt=>tt).join(" ")}}const de="@firebase/app",$=new N.Yd("@firebase/app"),Ft="[DEFAULT]",ze={[de]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},nn=new Map,dn=new Map;function Kt(et,Ce){try{et.container.addComponent(Ce)}catch(tt){$.debug(`Component ${Ce.name} failed to register with FirebaseApp ${et.name}`,tt)}}function Zt(et,Ce){et.container.addOrOverwriteComponent(Ce)}function Bt(et){const Ce=et.name;if(dn.has(Ce))return $.debug(`There were multiple attempts to register component ${Ce}.`),!1;dn.set(Ce,et);for(const tt of nn.values())Kt(tt,et);return!0}function Nt(et,Ce){const tt=et.container.getProvider("heartbeat").getImmediate({optional:!0});return tt&&tt.triggerHeartbeat(),et.container.getProvider(Ce)}function mr(et,Ce,tt=Ft){Nt(et,Ce).clearInstance(tt)}function Ti(){dn.clear()}const In=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Si{constructor(Ce,tt,yt){this._isDeleted=!1,this._options=Object.assign({},Ce),this._config=Object.assign({},tt),this._name=tt.name,this._automaticDataCollectionEnabled=tt.automaticDataCollectionEnabled,this._container=yt,this.container.addComponent(new j.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ce}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ce){this._isDeleted=Ce}checkDestroyed(){if(this.isDeleted)throw In.create("app-deleted",{appName:this._name})}}const xi="9.14.0";function br(et,Ce={}){let tt=et;"object"!=typeof Ce&&(Ce={name:Ce});const yt=Object.assign({name:Ft,automaticDataCollectionEnabled:!1},Ce),vt=yt.name;if("string"!=typeof vt||!vt)throw In.create("bad-app-name",{appName:String(vt)});if(tt||(tt=(0,se.aH)()),!tt)throw In.create("no-options");const $t=nn.get(vt);if($t){if((0,se.vZ)(tt,$t.options)&&(0,se.vZ)(yt,$t.config))return $t;throw In.create("duplicate-app",{appName:vt})}const H=new j.H0(vt);for(const K of dn.values())H.addComponent(K);const U=new Si(tt,yt,H);return nn.set(vt,U),U}function Ln(et=Ft){const Ce=nn.get(et);if(!Ce&&et===Ft)return br();if(!Ce)throw In.create("no-app",{appName:et});return Ce}function ei(){return Array.from(nn.values())}function Mi(et){return Je.apply(this,arguments)}function Je(){return(Je=(0,g.Z)(function*(et){const Ce=et.name;nn.has(Ce)&&(nn.delete(Ce),yield Promise.all(et.container.getProviders().map(tt=>tt.delete())),et.isDeleted=!0)})).apply(this,arguments)}function Hn(et,Ce,tt){var yt;let vt=null!==(yt=ze[et])&&void 0!==yt?yt:et;tt&&(vt+=`-${tt}`);const $t=vt.match(/\s|\//),H=Ce.match(/\s|\//);if($t||H){const U=[`Unable to register library "${vt}" with version "${Ce}":`];return $t&&U.push(`library name "${vt}" contains illegal characters (whitespace or "/")`),$t&&H&&U.push("and"),H&&U.push(`version name "${Ce}" contains illegal characters (whitespace or "/")`),void $.warn(U.join(" "))}Bt(new j.wA(`${vt}-version`,()=>({library:vt,version:Ce}),"VERSION"))}function Vn(et,Ce){if(null!==et&&"function"!=typeof et)throw In.create("invalid-log-argument");(0,N.Am)(et,Ce)}function ln(et){(0,N.Ub)(et)}const hn="firebase-heartbeat-store";let fn=null;function un(){return fn||(fn=(0,ae.X3)("firebase-heartbeat-database",1,{upgrade:(et,Ce)=>{0===Ce&&et.createObjectStore(hn)}}).catch(et=>{throw In.create("idb-open",{originalErrorMessage:et.message})})),fn}function ht(){return(ht=(0,g.Z)(function*(et){var Ce;try{return(yield un()).transaction(hn).objectStore(hn).get(Gn(et))}catch(tt){if(tt instanceof se.ZR)$.warn(tt.message);else{const yt=In.create("idb-get",{originalErrorMessage:null===(Ce=tt)||void 0===Ce?void 0:Ce.message});$.warn(yt.message)}}})).apply(this,arguments)}function bt(et,Ce){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,g.Z)(function*(et,Ce){var tt;try{const vt=(yield un()).transaction(hn,"readwrite");return yield vt.objectStore(hn).put(Ce,Gn(et)),vt.done}catch(yt){if(yt instanceof se.ZR)$.warn(yt.message);else{const vt=In.create("idb-set",{originalErrorMessage:null===(tt=yt)||void 0===tt?void 0:tt.message});$.warn(vt.message)}}})).apply(this,arguments)}function Gn(et){return`${et.name}!${et.options.appId}`}class Ar{constructor(Ce){this.container=Ce,this._heartbeatsCache=null;const tt=this.container.getProvider("app").getImmediate();this._storage=new Wt(tt),this._heartbeatsCachePromise=this._storage.read().then(yt=>(this._heartbeatsCache=yt,yt))}triggerHeartbeat(){var Ce=this;return(0,g.Z)(function*(){const yt=Ce.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),vt=kt();if(null===Ce._heartbeatsCache&&(Ce._heartbeatsCache=yield Ce._heartbeatsCachePromise),Ce._heartbeatsCache.lastSentHeartbeatDate!==vt&&!Ce._heartbeatsCache.heartbeats.some($t=>$t.date===vt))return Ce._heartbeatsCache.heartbeats.push({date:vt,agent:yt}),Ce._heartbeatsCache.heartbeats=Ce._heartbeatsCache.heartbeats.filter($t=>{const H=new Date($t.date).valueOf();return Date.now()-H<=2592e6}),Ce._storage.overwrite(Ce._heartbeatsCache)})()}getHeartbeatsHeader(){var Ce=this;return(0,g.Z)(function*(){if(null===Ce._heartbeatsCache&&(yield Ce._heartbeatsCachePromise),null===Ce._heartbeatsCache||0===Ce._heartbeatsCache.heartbeats.length)return"";const tt=kt(),{heartbeatsToSend:yt,unsentEntries:vt}=function Wr(et,Ce=1024){const tt=[];let yt=et.slice();for(const vt of et){const $t=tt.find(H=>H.agent===vt.agent);if($t){if($t.dates.push(vt.date),Yn(tt)>Ce){$t.dates.pop();break}}else if(tt.push({agent:vt.agent,dates:[vt.date]}),Yn(tt)>Ce){tt.pop();break}yt=yt.slice(1)}return{heartbeatsToSend:tt,unsentEntries:yt}}(Ce._heartbeatsCache.heartbeats),$t=(0,se.L)(JSON.stringify({version:2,heartbeats:yt}));return Ce._heartbeatsCache.lastSentHeartbeatDate=tt,vt.length>0?(Ce._heartbeatsCache.heartbeats=vt,yield Ce._storage.overwrite(Ce._heartbeatsCache)):(Ce._heartbeatsCache.heartbeats=[],Ce._storage.overwrite(Ce._heartbeatsCache)),$t})()}}function kt(){return(new Date).toISOString().substring(0,10)}class Wt{constructor(Ce){this.app=Ce,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ce=this;return(0,g.Z)(function*(){return(yield Ce._canUseIndexedDBPromise)&&(yield function dt(et){return ht.apply(this,arguments)}(Ce.app))||{heartbeats:[]}})()}overwrite(Ce){var tt=this;return(0,g.Z)(function*(){var yt;if(yield tt._canUseIndexedDBPromise){const $t=yield tt.read();return bt(tt.app,{lastSentHeartbeatDate:null!==(yt=Ce.lastSentHeartbeatDate)&&void 0!==yt?yt:$t.lastSentHeartbeatDate,heartbeats:Ce.heartbeats})}})()}add(Ce){var tt=this;return(0,g.Z)(function*(){var yt;if(yield tt._canUseIndexedDBPromise){const $t=yield tt.read();return bt(tt.app,{lastSentHeartbeatDate:null!==(yt=Ce.lastSentHeartbeatDate)&&void 0!==yt?yt:$t.lastSentHeartbeatDate,heartbeats:[...$t.heartbeats,...Ce.heartbeats]})}})()}}function Yn(et){return(0,se.L)(JSON.stringify({version:2,heartbeats:et})).length}!function vn(et){Bt(new j.wA("platform-logger",Ce=>new me(Ce),"PRIVATE")),Bt(new j.wA("heartbeat",Ce=>new Ar(Ce),"PRIVATE")),Hn(de,"0.8.4",et),Hn(de,"0.8.4","esm2017"),Hn("fire-js","")}("")},4859:(mt,Me,V)=>{V.d(Me,{H0:()=>de,wA:()=>N});var g=V(5861),j=V(2090);class N{constructor($,G,J){this.name=$,this.instanceFactory=G,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const se="[DEFAULT]";class ae{constructor($,G){this.name=$,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const G=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(G)){const J=new j.BH;if(this.instancesDeferred.set(G,J),this.isInitialized(G)||this.shouldAutoInitialize())try{const We=this.getOrInitializeService({instanceIdentifier:G});We&&J.resolve(We)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate($){var G;const J=this.normalizeInstanceIdentifier($?.identifier),We=null!==(G=$?.optional)&&void 0!==G&&G;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(We)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Oe){if(We)return null;throw Oe}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function ve(be){return"EAGER"===be.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:se})}catch{}for(const[G,J]of this.instancesDeferred.entries()){const We=this.normalizeInstanceIdentifier(G);try{const Oe=this.getOrInitializeService({instanceIdentifier:We});J.resolve(Oe)}catch{}}}}clearInstance($=se){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,g.Z)(function*(){const G=Array.from($.instances.values());yield Promise.all([...G.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...G.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=se){return this.instances.has($)}getOptions($=se){return this.instancesOptions.get($)||{}}initialize($={}){const{options:G={}}=$,J=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const We=this.getOrInitializeService({instanceIdentifier:J,options:G});for(const[Oe,Pe]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(Oe)&&Pe.resolve(We);return We}onInit($,G){var J;const We=this.normalizeInstanceIdentifier(G),Oe=null!==(J=this.onInitCallbacks.get(We))&&void 0!==J?J:new Set;Oe.add($),this.onInitCallbacks.set(We,Oe);const Pe=this.instances.get(We);return Pe&&$(Pe,We),()=>{Oe.delete($)}}invokeOnInitCallbacks($,G){const J=this.onInitCallbacks.get(G);if(J)for(const We of J)try{We($,G)}catch{}}getOrInitializeService({instanceIdentifier:$,options:G={}}){let J=this.instances.get($);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(be=$,be===se?void 0:be),options:G}),this.instances.set($,J),this.instancesOptions.set($,G),this.invokeOnInitCallbacks(J,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,J)}catch{}var be;return J||null}normalizeInstanceIdentifier($=se){return this.component?this.component.multipleInstances?$:se:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor($){this.name=$,this.providers=new Map}addComponent($){const G=this.getProvider($.name);if(G.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);G.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const G=new ae($,this);return this.providers.set($,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(mt,Me,V)=>{V.d(Me,{Am:()=>be,Ub:()=>de,Yd:()=>ve,in:()=>j});const g=[];var j=(()=>{return($=j||(j={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",j;var $})();const N={debug:j.DEBUG,verbose:j.VERBOSE,info:j.INFO,warn:j.WARN,error:j.ERROR,silent:j.SILENT},se=j.INFO,ae={[j.DEBUG]:"log",[j.VERBOSE]:"log",[j.INFO]:"info",[j.WARN]:"warn",[j.ERROR]:"error"},me=($,G,...J)=>{if(G<$.logLevel)return;const We=(new Date).toISOString(),Oe=ae[G];if(!Oe)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Oe](`[${We}]  ${$.name}:`,...J)};class ve{constructor(G){this.name=G,this._logLevel=se,this._logHandler=me,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in j))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?N[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,j.DEBUG,...G),this._logHandler(this,j.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,j.VERBOSE,...G),this._logHandler(this,j.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,j.INFO,...G),this._logHandler(this,j.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,j.WARN,...G),this._logHandler(this,j.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,j.ERROR,...G),this._logHandler(this,j.ERROR,...G)}}function de($){g.forEach(G=>{G.setLogLevel($)})}function be($,G){for(const J of g){let We=null;G&&G.level&&(We=N[G.level]),J.userLogHandler=null===$?null:(Oe,Pe,...Ke)=>{const ye=Ke.map(pe=>{if(null==pe)return null;if("string"==typeof pe)return pe;if("number"==typeof pe||"boolean"==typeof pe)return pe.toString();if(pe instanceof Error)return pe.message;try{return JSON.stringify(pe)}catch{return null}}).filter(pe=>pe).join(" ");Pe>=(We??Oe.logLevel)&&$({level:j[Pe].toLowerCase(),message:ye,args:Ke,type:Oe.name})}}}},8766:(mt,Me,V)=>{V.d(Me,{Lj:()=>xe,X3:()=>Ge});var g=V(5861);let N,se;const ve=new WeakMap,de=new WeakMap,be=new WeakMap,$=new WeakMap,G=new WeakMap;let Oe={get(ue,fe,q){if(ue instanceof IDBTransaction){if("done"===fe)return de.get(ue);if("objectStoreNames"===fe)return ue.objectStoreNames||be.get(ue);if("store"===fe)return q.objectStoreNames[1]?void 0:q.objectStore(q.objectStoreNames[0])}return pe(ue[fe])},set:(ue,fe,q)=>(ue[fe]=q,!0),has:(ue,fe)=>ue instanceof IDBTransaction&&("done"===fe||"store"===fe)||fe in ue};function ye(ue){return"function"==typeof ue?function Ke(ue){return ue!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function me(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ue)?function(...fe){return ue.apply($e(this),fe),pe(ve.get(this))}:function(...fe){return pe(ue.apply($e(this),fe))}:function(fe,...q){const Y=ue.call($e(this),fe,...q);return be.set(Y,fe.sort?fe.sort():[fe]),pe(Y)}}(ue):(ue instanceof IDBTransaction&&function We(ue){if(de.has(ue))return;const fe=new Promise((q,Y)=>{const le=()=>{ue.removeEventListener("complete",ie),ue.removeEventListener("error",Fe),ue.removeEventListener("abort",Fe)},ie=()=>{q(),le()},Fe=()=>{Y(ue.error||new DOMException("AbortError","AbortError")),le()};ue.addEventListener("complete",ie),ue.addEventListener("error",Fe),ue.addEventListener("abort",Fe)});de.set(ue,fe)}(ue),((ue,fe)=>fe.some(q=>ue instanceof q))(ue,function ae(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ue,Oe):ue)}function pe(ue){if(ue instanceof IDBRequest)return function J(ue){const fe=new Promise((q,Y)=>{const le=()=>{ue.removeEventListener("success",ie),ue.removeEventListener("error",Fe)},ie=()=>{q(pe(ue.result)),le()},Fe=()=>{Y(ue.error),le()};ue.addEventListener("success",ie),ue.addEventListener("error",Fe)});return fe.then(q=>{q instanceof IDBCursor&&ve.set(q,ue)}).catch(()=>{}),G.set(fe,ue),fe}(ue);if($.has(ue))return $.get(ue);const fe=ye(ue);return fe!==ue&&($.set(ue,fe),G.set(fe,ue)),fe}const $e=ue=>G.get(ue);function Ge(ue,fe,{blocked:q,upgrade:Y,blocking:le,terminated:ie}={}){const Fe=indexedDB.open(ue,fe),Le=pe(Fe);return Y&&Fe.addEventListener("upgradeneeded",ct=>{Y(pe(Fe.result),ct.oldVersion,ct.newVersion,pe(Fe.transaction))}),q&&Fe.addEventListener("blocked",()=>q()),Le.then(ct=>{ie&&ct.addEventListener("close",()=>ie()),le&&ct.addEventListener("versionchange",()=>le())}).catch(()=>{}),Le}function xe(ue,{blocked:fe}={}){const q=indexedDB.deleteDatabase(ue);return fe&&q.addEventListener("blocked",()=>fe()),pe(q).then(()=>{})}const Te=["get","getKey","getAll","getAllKeys","count"],we=["put","add","delete","clear"],Ze=new Map;function te(ue,fe){if(!(ue instanceof IDBDatabase)||fe in ue||"string"!=typeof fe)return;if(Ze.get(fe))return Ze.get(fe);const q=fe.replace(/FromIndex$/,""),Y=fe!==q,le=we.includes(q);if(!(q in(Y?IDBIndex:IDBObjectStore).prototype)||!le&&!Te.includes(q))return;const ie=function(){var Fe=(0,g.Z)(function*(Le,...ct){const Qt=this.transaction(Le,le?"readwrite":"readonly");let Ft=Qt.store;return Y&&(Ft=Ft.index(ct.shift())),(yield Promise.all([Ft[q](...ct),le&&Qt.done]))[0]});return function(ct){return Fe.apply(this,arguments)}}();return Ze.set(fe,ie),ie}!function Pe(ue){Oe=ue(Oe)}(ue=>({...ue,get:(fe,q,Y)=>te(fe,q)||ue.get(fe,q,Y),has:(fe,q)=>!!te(fe,q)||ue.has(fe,q)}))},5861:(mt,Me,V)=>{function g(N,se,ae,me,ve,de,be){try{var $=N[de](be),G=$.value}catch(J){return void ae(J)}$.done?se(G):Promise.resolve(G).then(me,ve)}function j(N){return function(){var se=this,ae=arguments;return new Promise(function(me,ve){var de=N.apply(se,ae);function be(G){g(de,me,ve,be,$,"next",G)}function $(G){g(de,me,ve,be,$,"throw",G)}be(void 0)})}}V.d(Me,{Z:()=>j})}},mt=>{mt(mt.s=9697)}]);